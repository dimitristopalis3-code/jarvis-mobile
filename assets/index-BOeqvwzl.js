var HC=Object.defineProperty;var GC=(n,t,e)=>t in n?HC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Mn=(n,t,e)=>GC(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();var jm={exports:{}},Dh={},Um={exports:{}},fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function $C(){if(Oy)return fn;Oy=1;var n=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=d&&$[d]||$["@@iterator"],typeof $=="function"?$:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function w($,F,K){this.props=$,this.context=F,this.refs=x,this.updater=K||p}w.prototype.isReactComponent={},w.prototype.setState=function($,F){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,F,"setState")},w.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function _(){}_.prototype=w.prototype;function E($,F,K){this.props=$,this.context=F,this.refs=x,this.updater=K||p}var I=E.prototype=new _;I.constructor=E,y(I,w.prototype),I.isPureReactComponent=!0;var C=Array.isArray,N=Object.prototype.hasOwnProperty,O={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function M($,F,K){var Q,ue={},de=null,ve=null;if(F!=null)for(Q in F.ref!==void 0&&(ve=F.ref),F.key!==void 0&&(de=""+F.key),F)N.call(F,Q)&&!U.hasOwnProperty(Q)&&(ue[Q]=F[Q]);var we=arguments.length-2;if(we===1)ue.children=K;else if(1<we){for(var Ce=Array(we),Le=0;Le<we;Le++)Ce[Le]=arguments[Le+2];ue.children=Ce}if($&&$.defaultProps)for(Q in we=$.defaultProps,we)ue[Q]===void 0&&(ue[Q]=we[Q]);return{$$typeof:n,type:$,key:de,ref:ve,props:ue,_owner:O.current}}function T($,F){return{$$typeof:n,type:$.type,key:F,ref:$.ref,props:$.props,_owner:$._owner}}function j($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function D($){var F={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(K){return F[K]})}var B=/\/+/g;function X($,F){return typeof $=="object"&&$!==null&&$.key!=null?D(""+$.key):F.toString(36)}function G($,F,K,Q,ue){var de=typeof $;(de==="undefined"||de==="boolean")&&($=null);var ve=!1;if($===null)ve=!0;else switch(de){case"string":case"number":ve=!0;break;case"object":switch($.$$typeof){case n:case t:ve=!0}}if(ve)return ve=$,ue=ue(ve),$=Q===""?"."+X(ve,0):Q,C(ue)?(K="",$!=null&&(K=$.replace(B,"$&/")+"/"),G(ue,F,K,"",function(Le){return Le})):ue!=null&&(j(ue)&&(ue=T(ue,K+(!ue.key||ve&&ve.key===ue.key?"":(""+ue.key).replace(B,"$&/")+"/")+$)),F.push(ue)),1;if(ve=0,Q=Q===""?".":Q+":",C($))for(var we=0;we<$.length;we++){de=$[we];var Ce=Q+X(de,we);ve+=G(de,F,K,Ce,ue)}else if(Ce=v($),typeof Ce=="function")for($=Ce.call($),we=0;!(de=$.next()).done;)de=de.value,Ce=Q+X(de,we++),ve+=G(de,F,K,Ce,ue);else if(de==="object")throw F=String($),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return ve}function oe($,F,K){if($==null)return $;var Q=[],ue=0;return G($,Q,"","",function(de){return F.call(K,de,ue++)}),Q}function he($){if($._status===-1){var F=$._result;F=F(),F.then(function(K){($._status===0||$._status===-1)&&($._status=1,$._result=K)},function(K){($._status===0||$._status===-1)&&($._status=2,$._result=K)}),$._status===-1&&($._status=0,$._result=F)}if($._status===1)return $._result.default;throw $._result}var ae={current:null},W={transition:null},ne={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:W,ReactCurrentOwner:O};function se(){throw Error("act(...) is not supported in production builds of React.")}return fn.Children={map:oe,forEach:function($,F,K){oe($,function(){F.apply(this,arguments)},K)},count:function($){var F=0;return oe($,function(){F++}),F},toArray:function($){return oe($,function(F){return F})||[]},only:function($){if(!j($))throw Error("React.Children.only expected to receive a single React element child.");return $}},fn.Component=w,fn.Fragment=e,fn.Profiler=i,fn.PureComponent=E,fn.StrictMode=r,fn.Suspense=u,fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,fn.act=se,fn.cloneElement=function($,F,K){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Q=y({},$.props),ue=$.key,de=$.ref,ve=$._owner;if(F!=null){if(F.ref!==void 0&&(de=F.ref,ve=O.current),F.key!==void 0&&(ue=""+F.key),$.type&&$.type.defaultProps)var we=$.type.defaultProps;for(Ce in F)N.call(F,Ce)&&!U.hasOwnProperty(Ce)&&(Q[Ce]=F[Ce]===void 0&&we!==void 0?we[Ce]:F[Ce])}var Ce=arguments.length-2;if(Ce===1)Q.children=K;else if(1<Ce){we=Array(Ce);for(var Le=0;Le<Ce;Le++)we[Le]=arguments[Le+2];Q.children=we}return{$$typeof:n,type:$.type,key:ue,ref:de,props:Q,_owner:ve}},fn.createContext=function($){return $={$$typeof:s,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:o,_context:$},$.Consumer=$},fn.createElement=M,fn.createFactory=function($){var F=M.bind(null,$);return F.type=$,F},fn.createRef=function(){return{current:null}},fn.forwardRef=function($){return{$$typeof:a,render:$}},fn.isValidElement=j,fn.lazy=function($){return{$$typeof:h,_payload:{_status:-1,_result:$},_init:he}},fn.memo=function($,F){return{$$typeof:c,type:$,compare:F===void 0?null:F}},fn.startTransition=function($){var F=W.transition;W.transition={};try{$()}finally{W.transition=F}},fn.unstable_act=se,fn.useCallback=function($,F){return ae.current.useCallback($,F)},fn.useContext=function($){return ae.current.useContext($)},fn.useDebugValue=function(){},fn.useDeferredValue=function($){return ae.current.useDeferredValue($)},fn.useEffect=function($,F){return ae.current.useEffect($,F)},fn.useId=function(){return ae.current.useId()},fn.useImperativeHandle=function($,F,K){return ae.current.useImperativeHandle($,F,K)},fn.useInsertionEffect=function($,F){return ae.current.useInsertionEffect($,F)},fn.useLayoutEffect=function($,F){return ae.current.useLayoutEffect($,F)},fn.useMemo=function($,F){return ae.current.useMemo($,F)},fn.useReducer=function($,F,K){return ae.current.useReducer($,F,K)},fn.useRef=function($){return ae.current.useRef($)},fn.useState=function($){return ae.current.useState($)},fn.useSyncExternalStore=function($,F,K){return ae.current.useSyncExternalStore($,F,K)},fn.useTransition=function(){return ae.current.useTransition()},fn.version="18.3.1",fn}var By;function Kg(){return By||(By=1,Um.exports=$C()),Um.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function KC(){if(jy)return Dh;jy=1;var n=Kg(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,u,c){var h,d={},v=null,p=null;c!==void 0&&(v=""+c),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(p=u.ref);for(h in u)r.call(u,h)&&!o.hasOwnProperty(h)&&(d[h]=u[h]);if(a&&a.defaultProps)for(h in u=a.defaultProps,u)d[h]===void 0&&(d[h]=u[h]);return{$$typeof:t,type:a,key:v,ref:p,props:d,_owner:i.current}}return Dh.Fragment=e,Dh.jsx=s,Dh.jsxs=s,Dh}var Uy;function XC(){return Uy||(Uy=1,jm.exports=KC()),jm.exports}var fe=XC(),qe=Kg(),hp={},zm={exports:{}},ko={},Vm={exports:{}},Wm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy;function YC(){return zy||(zy=1,(function(n){function t(W,ne){var se=W.length;W.push(ne);e:for(;0<se;){var $=se-1>>>1,F=W[$];if(0<i(F,ne))W[$]=ne,W[se]=F,se=$;else break e}}function e(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ne=W[0],se=W.pop();if(se!==ne){W[0]=se;e:for(var $=0,F=W.length,K=F>>>1;$<K;){var Q=2*($+1)-1,ue=W[Q],de=Q+1,ve=W[de];if(0>i(ue,se))de<F&&0>i(ve,ue)?(W[$]=ve,W[de]=se,$=de):(W[$]=ue,W[Q]=se,$=Q);else if(de<F&&0>i(ve,se))W[$]=ve,W[de]=se,$=de;else break e}}return ne}function i(W,ne){var se=W.sortIndex-ne.sortIndex;return se!==0?se:W.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var u=[],c=[],h=1,d=null,v=3,p=!1,y=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(W){for(var ne=e(c);ne!==null;){if(ne.callback===null)r(c);else if(ne.startTime<=W)r(c),ne.sortIndex=ne.expirationTime,t(u,ne);else break;ne=e(c)}}function C(W){if(x=!1,I(W),!y)if(e(u)!==null)y=!0,he(N);else{var ne=e(c);ne!==null&&ae(C,ne.startTime-W)}}function N(W,ne){y=!1,x&&(x=!1,_(M),M=-1),p=!0;var se=v;try{for(I(ne),d=e(u);d!==null&&(!(d.expirationTime>ne)||W&&!D());){var $=d.callback;if(typeof $=="function"){d.callback=null,v=d.priorityLevel;var F=$(d.expirationTime<=ne);ne=n.unstable_now(),typeof F=="function"?d.callback=F:d===e(u)&&r(u),I(ne)}else r(u);d=e(u)}if(d!==null)var K=!0;else{var Q=e(c);Q!==null&&ae(C,Q.startTime-ne),K=!1}return K}finally{d=null,v=se,p=!1}}var O=!1,U=null,M=-1,T=5,j=-1;function D(){return!(n.unstable_now()-j<T)}function B(){if(U!==null){var W=n.unstable_now();j=W;var ne=!0;try{ne=U(!0,W)}finally{ne?X():(O=!1,U=null)}}else O=!1}var X;if(typeof E=="function")X=function(){E(B)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,oe=G.port2;G.port1.onmessage=B,X=function(){oe.postMessage(null)}}else X=function(){w(B,0)};function he(W){U=W,O||(O=!0,X())}function ae(W,ne){M=w(function(){W(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){y||p||(y=!0,he(N))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return e(u)},n.unstable_next=function(W){switch(v){case 1:case 2:case 3:var ne=3;break;default:ne=v}var se=v;v=ne;try{return W()}finally{v=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,ne){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var se=v;v=W;try{return ne()}finally{v=se}},n.unstable_scheduleCallback=function(W,ne,se){var $=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?$+se:$):se=$,W){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=se+F,W={id:h++,callback:ne,priorityLevel:W,startTime:se,expirationTime:F,sortIndex:-1},se>$?(W.sortIndex=se,t(c,W),e(u)===null&&W===e(c)&&(x?(_(M),M=-1):x=!0,ae(C,se-$))):(W.sortIndex=F,t(u,W),y||p||(y=!0,he(N))),W},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(W){var ne=v;return function(){var se=v;v=ne;try{return W.apply(this,arguments)}finally{v=se}}}})(Wm)),Wm}var Vy;function JC(){return Vy||(Vy=1,Vm.exports=YC()),Vm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function QC(){if(Wy)return ko;Wy=1;var n=Kg(),t=JC();function e(l){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+l,m=1;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(l,f){s(l,f),s(l+"Capture",f)}function s(l,f){for(i[l]=f,l=0;l<f.length;l++)r.add(f[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},d={};function v(l){return u.call(d,l)?!0:u.call(h,l)?!1:c.test(l)?d[l]=!0:(h[l]=!0,!1)}function p(l,f,m,b){if(m!==null&&m.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return b?!1:m!==null?!m.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function y(l,f,m,b){if(f===null||typeof f>"u"||p(l,f,m,b))return!0;if(b)return!1;if(m!==null)switch(m.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function x(l,f,m,b,k,R,q){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=b,this.attributeNamespace=k,this.mustUseProperty=m,this.propertyName=l,this.type=f,this.sanitizeURL=R,this.removeEmptyString=q}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){w[l]=new x(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var f=l[0];w[f]=new x(f,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){w[l]=new x(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){w[l]=new x(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){w[l]=new x(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){w[l]=new x(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){w[l]=new x(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){w[l]=new x(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){w[l]=new x(l,5,!1,l.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function E(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var f=l.replace(_,E);w[f]=new x(f,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var f=l.replace(_,E);w[f]=new x(f,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var f=l.replace(_,E);w[f]=new x(f,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){w[l]=new x(l,1,!1,l.toLowerCase(),null,!1,!1)}),w.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){w[l]=new x(l,1,!1,l.toLowerCase(),null,!0,!0)});function I(l,f,m,b){var k=w.hasOwnProperty(f)?w[f]:null;(k!==null?k.type!==0:b||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(y(f,m,k,b)&&(m=null),b||k===null?v(f)&&(m===null?l.removeAttribute(f):l.setAttribute(f,""+m)):k.mustUseProperty?l[k.propertyName]=m===null?k.type===3?!1:"":m:(f=k.attributeName,b=k.attributeNamespace,m===null?l.removeAttribute(f):(k=k.type,m=k===3||k===4&&m===!0?"":""+m,b?l.setAttributeNS(b,f,m):l.setAttribute(f,m))))}var C=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),O=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),D=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),W=Symbol.iterator;function ne(l){return l===null||typeof l!="object"?null:(l=W&&l[W]||l["@@iterator"],typeof l=="function"?l:null)}var se=Object.assign,$;function F(l){if($===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);$=f&&f[1]||""}return`
`+$+l}var K=!1;function Q(l,f){if(!l||K)return"";K=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Me){var b=Me}Reflect.construct(l,[],f)}else{try{f.call()}catch(Me){b=Me}l.call(f.prototype)}else{try{throw Error()}catch(Me){b=Me}l()}}catch(Me){if(Me&&b&&typeof Me.stack=="string"){for(var k=Me.stack.split(`
`),R=b.stack.split(`
`),q=k.length-1,pe=R.length-1;1<=q&&0<=pe&&k[q]!==R[pe];)pe--;for(;1<=q&&0<=pe;q--,pe--)if(k[q]!==R[pe]){if(q!==1||pe!==1)do if(q--,pe--,0>pe||k[q]!==R[pe]){var xe=`
`+k[q].replace(" at new "," at ");return l.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",l.displayName)),xe}while(1<=q&&0<=pe);break}}}finally{K=!1,Error.prepareStackTrace=m}return(l=l?l.displayName||l.name:"")?F(l):""}function ue(l){switch(l.tag){case 5:return F(l.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return l=Q(l.type,!1),l;case 11:return l=Q(l.type.render,!1),l;case 1:return l=Q(l.type,!0),l;default:return""}}function de(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case U:return"Fragment";case O:return"Portal";case T:return"Profiler";case M:return"StrictMode";case X:return"Suspense";case G:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case D:return(l.displayName||"Context")+".Consumer";case j:return(l._context.displayName||"Context")+".Provider";case B:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case oe:return f=l.displayName||null,f!==null?f:de(l.type)||"Memo";case he:f=l._payload,l=l._init;try{return de(l(f))}catch{}}return null}function ve(l){var f=l.type;switch(l.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=f.render,l=l.displayName||l.name||"",f.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(f);case 8:return f===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function we(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ce(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Le(l){var f=Ce(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,f),b=""+l[f];if(!l.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var k=m.get,R=m.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return k.call(this)},set:function(q){b=""+q,R.call(this,q)}}),Object.defineProperty(l,f,{enumerable:m.enumerable}),{getValue:function(){return b},setValue:function(q){b=""+q},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function be(l){l._valueTracker||(l._valueTracker=Le(l))}function De(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var m=f.getValue(),b="";return l&&(b=Ce(l)?l.checked?"true":"false":l.value),l=b,l!==m?(f.setValue(l),!0):!1}function Re(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Xe(l,f){var m=f.checked;return se({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??l._wrapperState.initialChecked})}function ee(l,f){var m=f.defaultValue==null?"":f.defaultValue,b=f.checked!=null?f.checked:f.defaultChecked;m=we(f.value!=null?f.value:m),l._wrapperState={initialChecked:b,initialValue:m,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function Je(l,f){f=f.checked,f!=null&&I(l,"checked",f,!1)}function Rt(l,f){Je(l,f);var m=we(f.value),b=f.type;if(m!=null)b==="number"?(m===0&&l.value===""||l.value!=m)&&(l.value=""+m):l.value!==""+m&&(l.value=""+m);else if(b==="submit"||b==="reset"){l.removeAttribute("value");return}f.hasOwnProperty("value")?He(l,f.type,m):f.hasOwnProperty("defaultValue")&&He(l,f.type,we(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(l.defaultChecked=!!f.defaultChecked)}function ft(l,f,m){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var b=f.type;if(!(b!=="submit"&&b!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+l._wrapperState.initialValue,m||f===l.value||(l.value=f),l.defaultValue=f}m=l.name,m!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,m!==""&&(l.name=m)}function He(l,f,m){(f!=="number"||Re(l.ownerDocument)!==l)&&(m==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+m&&(l.defaultValue=""+m))}var mt=Array.isArray;function nt(l,f,m,b){if(l=l.options,f){f={};for(var k=0;k<m.length;k++)f["$"+m[k]]=!0;for(m=0;m<l.length;m++)k=f.hasOwnProperty("$"+l[m].value),l[m].selected!==k&&(l[m].selected=k),k&&b&&(l[m].defaultSelected=!0)}else{for(m=""+we(m),f=null,k=0;k<l.length;k++){if(l[k].value===m){l[k].selected=!0,b&&(l[k].defaultSelected=!0);return}f!==null||l[k].disabled||(f=l[k])}f!==null&&(f.selected=!0)}}function ht(l,f){if(f.dangerouslySetInnerHTML!=null)throw Error(e(91));return se({},f,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function ut(l,f){var m=f.value;if(m==null){if(m=f.children,f=f.defaultValue,m!=null){if(f!=null)throw Error(e(92));if(mt(m)){if(1<m.length)throw Error(e(93));m=m[0]}f=m}f==null&&(f=""),m=f}l._wrapperState={initialValue:we(m)}}function sn(l,f){var m=we(f.value),b=we(f.defaultValue);m!=null&&(m=""+m,m!==l.value&&(l.value=m),f.defaultValue==null&&l.defaultValue!==m&&(l.defaultValue=m)),b!=null&&(l.defaultValue=""+b)}function Vt(l){var f=l.textContent;f===l._wrapperState.initialValue&&f!==""&&f!==null&&(l.value=f)}function jt(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xt(l,f){return l==null||l==="http://www.w3.org/1999/xhtml"?jt(f):l==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Ft,lt=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,m,b,k){MSApp.execUnsafeLocalFunction(function(){return l(f,m,b,k)})}:l})(function(l,f){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=f;else{for(Ft=Ft||document.createElement("div"),Ft.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=Ft.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;f.firstChild;)l.appendChild(f.firstChild)}});function Ut(l,f){if(f){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=f;return}}l.textContent=f}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xn=["Webkit","ms","Moz","O"];Object.keys(dt).forEach(function(l){Xn.forEach(function(f){f=f+l.charAt(0).toUpperCase()+l.substring(1),dt[f]=dt[l]})});function un(l,f,m){return f==null||typeof f=="boolean"||f===""?"":m||typeof f!="number"||f===0||dt.hasOwnProperty(l)&&dt[l]?(""+f).trim():f+"px"}function Yt(l,f){l=l.style;for(var m in f)if(f.hasOwnProperty(m)){var b=m.indexOf("--")===0,k=un(m,f[m],b);m==="float"&&(m="cssFloat"),b?l.setProperty(m,k):l[m]=k}}var Qt=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bn(l,f){if(f){if(Qt[l]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(e(137,l));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(e(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(e(61))}if(f.style!=null&&typeof f.style!="object")throw Error(e(62))}}function Pt(l,f){if(l.indexOf("-")===-1)return typeof f.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var En=null;function Tt(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ht=null,Cn=null,Zt=null;function Lt(l){if(l=ul(l)){if(typeof Ht!="function")throw Error(e(280));var f=l.stateNode;f&&(f=oc(f),Ht(l.stateNode,l.type,f))}}function yn(l){Cn?Zt?Zt.push(l):Zt=[l]:Cn=l}function os(){if(Cn){var l=Cn,f=Zt;if(Zt=Cn=null,Lt(l),f)for(l=0;l<f.length;l++)Lt(f[l])}}function $r(l,f){return l(f)}function ia(){}var lo=!1;function Dt(l,f,m){if(lo)return l(f,m);lo=!0;try{return $r(l,f,m)}finally{lo=!1,(Cn!==null||Zt!==null)&&(ia(),os())}}function Yi(l,f){var m=l.stateNode;if(m===null)return null;var b=oc(m);if(b===null)return null;m=b[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(e(231,f,typeof m));return m}var Lo=!1;if(a)try{var ai={};Object.defineProperty(ai,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",ai,ai),window.removeEventListener("test",ai,ai)}catch{Lo=!1}function co(l,f,m,b,k,R,q,pe,xe){var Me=Array.prototype.slice.call(arguments,3);try{f.apply(m,Me)}catch(Qe){this.onError(Qe)}}var jn=!1,sr=null,xr=!1,Ia=null,as={onError:function(l){jn=!0,sr=l}};function Do(l,f,m,b,k,R,q,pe,xe){jn=!1,sr=null,co.apply(as,arguments)}function oa(l,f,m,b,k,R,q,pe,xe){if(Do.apply(this,arguments),jn){if(jn){var Me=sr;jn=!1,sr=null}else throw Error(e(198));xr||(xr=!0,Ia=Me)}}function Kr(l){var f=l,m=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(m=f.return),l=f.return;while(l)}return f.tag===3?m:null}function fo(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function Ji(l){if(Kr(l)!==l)throw Error(e(188))}function Hs(l){var f=l.alternate;if(!f){if(f=Kr(l),f===null)throw Error(e(188));return f!==l?null:l}for(var m=l,b=f;;){var k=m.return;if(k===null)break;var R=k.alternate;if(R===null){if(b=k.return,b!==null){m=b;continue}break}if(k.child===R.child){for(R=k.child;R;){if(R===m)return Ji(k),l;if(R===b)return Ji(k),f;R=R.sibling}throw Error(e(188))}if(m.return!==b.return)m=k,b=R;else{for(var q=!1,pe=k.child;pe;){if(pe===m){q=!0,m=k,b=R;break}if(pe===b){q=!0,b=k,m=R;break}pe=pe.sibling}if(!q){for(pe=R.child;pe;){if(pe===m){q=!0,m=R,b=k;break}if(pe===b){q=!0,b=R,m=k;break}pe=pe.sibling}if(!q)throw Error(e(189))}}if(m.alternate!==b)throw Error(e(190))}if(m.tag!==3)throw Error(e(188));return m.stateNode.current===m?l:f}function Fo(l){return l=Hs(l),l!==null?ss(l):null}function ss(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var f=ss(l);if(f!==null)return f;l=l.sibling}return null}var Gs=t.unstable_scheduleCallback,$s=t.unstable_cancelCallback,Uu=t.unstable_shouldYield,sh=t.unstable_requestPaint,Vn=t.unstable_now,Wc=t.unstable_getCurrentPriorityLevel,zu=t.unstable_ImmediatePriority,Qi=t.unstable_UserBlockingPriority,us=t.unstable_NormalPriority,qc=t.unstable_LowPriority,Vu=t.unstable_IdlePriority,Ks=null,Zi=null;function Hc(l){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(Ks,l,void 0,(l.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:br,Wu=Math.log,uh=Math.LN2;function br(l){return l>>>=0,l===0?32:31-(Wu(l)/uh|0)|0}var Xs=64,eo=4194304;function aa(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Ys(l,f){var m=l.pendingLanes;if(m===0)return 0;var b=0,k=l.suspendedLanes,R=l.pingedLanes,q=m&268435455;if(q!==0){var pe=q&~k;pe!==0?b=aa(pe):(R&=q,R!==0&&(b=aa(R)))}else q=m&~k,q!==0?b=aa(q):R!==0&&(b=aa(R));if(b===0)return 0;if(f!==0&&f!==b&&(f&k)===0&&(k=b&-b,R=f&-f,k>=R||k===16&&(R&4194240)!==0))return f;if((b&4)!==0&&(b|=m&16),f=l.entangledLanes,f!==0)for(l=l.entanglements,f&=b;0<f;)m=31-wr(f),k=1<<m,b|=l[m],f&=~k;return b}function ho(l,f){switch(l){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rr(l,f){for(var m=l.suspendedLanes,b=l.pingedLanes,k=l.expirationTimes,R=l.pendingLanes;0<R;){var q=31-wr(R),pe=1<<q,xe=k[q];xe===-1?((pe&m)===0||(pe&b)!==0)&&(k[q]=ho(pe,f)):xe<=f&&(l.expiredLanes|=pe),R&=~pe}}function Mo(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function zl(){var l=Xs;return Xs<<=1,(Xs&4194240)===0&&(Xs=64),l}function Vl(l){for(var f=[],m=0;31>m;m++)f.push(l);return f}function Js(l,f,m){l.pendingLanes|=f,f!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,f=31-wr(f),l[f]=m}function sa(l,f){var m=l.pendingLanes&~f;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=f,l.mutableReadLanes&=f,l.entangledLanes&=f,f=l.entanglements;var b=l.eventTimes;for(l=l.expirationTimes;0<m;){var k=31-wr(m),R=1<<k;f[k]=0,b[k]=-1,l[k]=-1,m&=~R}}function qu(l,f){var m=l.entangledLanes|=f;for(l=l.entanglements;m;){var b=31-wr(m),k=1<<b;k&f|l[b]&f&&(l[b]|=f),m&=~k}}var mn=0;function Qs(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var ls,Wl,Gc,$c,Hu,Gu=!1,Ni=[],ua=null,Ii=null,po=null,Zs=new Map,Bt=new Map,la=[],lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kc(l,f){switch(l){case"focusin":case"focusout":ua=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":Zs.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bt.delete(f.pointerId)}}function to(l,f,m,b,k,R){return l===null||l.nativeEvent!==R?(l={blockedOn:f,domEventName:m,eventSystemFlags:b,nativeEvent:R,targetContainers:[k]},f!==null&&(f=ul(f),f!==null&&Wl(f)),l):(l.eventSystemFlags|=b,f=l.targetContainers,k!==null&&f.indexOf(k)===-1&&f.push(k),l)}function Pa(l,f,m,b,k){switch(f){case"focusin":return ua=to(ua,l,f,m,b,k),!0;case"dragenter":return Ii=to(Ii,l,f,m,b,k),!0;case"mouseover":return po=to(po,l,f,m,b,k),!0;case"pointerover":var R=k.pointerId;return Zs.set(R,to(Zs.get(R)||null,l,f,m,b,k)),!0;case"gotpointercapture":return R=k.pointerId,Bt.set(R,to(Bt.get(R)||null,l,f,m,b,k)),!0}return!1}function Xc(l){var f=ws(l.target);if(f!==null){var m=Kr(f);if(m!==null){if(f=m.tag,f===13){if(f=fo(m),f!==null){l.blockedOn=f,Hu(l.priority,function(){Gc(m)});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function $u(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var m=nu(l.domEventName,l.eventSystemFlags,f[0],l.nativeEvent);if(m===null){m=l.nativeEvent;var b=new m.constructor(m.type,m);En=b,m.target.dispatchEvent(b),En=null}else return f=ul(m),f!==null&&Wl(f),l.blockedOn=m,!1;f.shift()}return!0}function eu(l,f,m){$u(l)&&m.delete(f)}function ql(){Gu=!1,ua!==null&&$u(ua)&&(ua=null),Ii!==null&&$u(Ii)&&(Ii=null),po!==null&&$u(po)&&(po=null),Zs.forEach(eu),Bt.forEach(eu)}function Oo(l,f){l.blockedOn===f&&(l.blockedOn=null,Gu||(Gu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ql)))}function tu(l){function f(k){return Oo(k,l)}if(0<Ni.length){Oo(Ni[0],l);for(var m=1;m<Ni.length;m++){var b=Ni[m];b.blockedOn===l&&(b.blockedOn=null)}}for(ua!==null&&Oo(ua,l),Ii!==null&&Oo(Ii,l),po!==null&&Oo(po,l),Zs.forEach(f),Bt.forEach(f),m=0;m<la.length;m++)b=la[m],b.blockedOn===l&&(b.blockedOn=null);for(;0<la.length&&(m=la[0],m.blockedOn===null);)Xc(m),m.blockedOn===null&&la.shift()}var Pi=C.ReactCurrentBatchConfig,Ku=!0;function Hl(l,f,m,b){var k=mn,R=Pi.transition;Pi.transition=null;try{mn=1,Xu(l,f,m,b)}finally{mn=k,Pi.transition=R}}function Gl(l,f,m,b){var k=mn,R=Pi.transition;Pi.transition=null;try{mn=4,Xu(l,f,m,b)}finally{mn=k,Pi.transition=R}}function Xu(l,f,m,b){if(Ku){var k=nu(l,f,m,b);if(k===null)nc(l,f,b,vo,m),Kc(l,b);else if(Pa(k,l,f,m,b))b.stopPropagation();else if(Kc(l,b),f&4&&-1<lh.indexOf(l)){for(;k!==null;){var R=ul(k);if(R!==null&&ls(R),R=nu(l,f,m,b),R===null&&nc(l,f,b,vo,m),R===k)break;k=R}k!==null&&b.stopPropagation()}else nc(l,f,b,null,m)}}var vo=null;function nu(l,f,m,b){if(vo=null,l=Tt(b),l=ws(l),l!==null)if(f=Kr(l),f===null)l=null;else if(m=f.tag,m===13){if(l=fo(f),l!==null)return l;l=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null);return vo=l,null}function ru(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wc()){case zu:return 1;case Qi:return 4;case us:case qc:return 16;case Vu:return 536870912;default:return 16}default:return 16}}var mo=null,Ra=null,cs=null;function $l(){if(cs)return cs;var l,f=Ra,m=f.length,b,k="value"in mo?mo.value:mo.textContent,R=k.length;for(l=0;l<m&&f[l]===k[l];l++);var q=m-l;for(b=1;b<=q&&f[m-b]===k[R-b];b++);return cs=k.slice(l,1<b?1-b:void 0)}function iu(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function go(){return!0}function ca(){return!1}function si(l){function f(m,b,k,R,q){this._reactName=m,this._targetInst=k,this.type=b,this.nativeEvent=R,this.target=q,this.currentTarget=null;for(var pe in l)l.hasOwnProperty(pe)&&(m=l[pe],this[pe]=m?m(R):R[pe]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?go:ca,this.isPropagationStopped=ca,this}return se(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=go)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=go)},persist:function(){},isPersistent:go}),f}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yu=si(yo),A=se({},yo,{view:0,detail:0}),V=si(A),le,me,ke,ze=se({},A,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ou,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ke&&(ke&&l.type==="mousemove"?(le=l.screenX-ke.screenX,me=l.screenY-ke.screenY):me=le=0,ke=l),le)},movementY:function(l){return"movementY"in l?l.movementY:me}}),$e=si(ze),pt=se({},ze,{dataTransfer:0}),_t=si(pt),qt=se({},A,{relatedTarget:0}),Jt=si(qt),vn=se({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),Yn=si(vn),_r=se({},yo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Un=si(_r),Tr=se({},yo,{data:0}),ur=si(Tr),Xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ta={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function La(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=Bo[l])?!!f[l]:!1}function ou(){return La}var Ju=se({},A,{key:function(l){if(l.key){var f=Xr[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=iu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Ta[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ou,charCode:function(l){return l.type==="keypress"?iu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?iu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),fs=si(Ju),au=se({},ze,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hs=si(au),ds=se({},A,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ou}),Yr=si(ds),su=se({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),uu=si(su),Kl=se({},ze,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Xl=si(Kl),yi=[9,13,27,32],jo=a&&"CompositionEvent"in window,fa=null;a&&"documentMode"in document&&(fa=document.documentMode);var Yc=a&&"TextEvent"in window&&!fa,no=a&&(!jo||fa&&8<fa&&11>=fa),ps=" ",Qu=!1;function Zu(l,f){switch(l){case"keyup":return yi.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Da(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var xo=!1;function ro(l,f){switch(l){case"compositionend":return Da(f);case"keypress":return f.which!==32?null:(Qu=!0,ps);case"textInput":return l=f.data,l===ps&&Qu?null:l;default:return null}}function io(l,f){if(xo)return l==="compositionend"||!jo&&Zu(l,f)?(l=$l(),cs=Ra=mo=null,xo=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return no&&f.locale!=="ko"?null:f.data;default:return null}}var vs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ha(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!vs[l.type]:f==="textarea"}function Fa(l,f,m,b){yn(b),f=tf(f,"onChange"),0<f.length&&(m=new Yu("onChange","change",null,m,b),l.push({event:m,listeners:f}))}var Ma=null,da=null;function lr(l){ec(l,0)}function lu(l){var f=xu(l);if(De(f))return l}function pa(l,f){if(l==="change")return f}var Uo=!1;if(a){var cu;if(a){var fu="oninput"in document;if(!fu){var el=document.createElement("div");el.setAttribute("oninput","return;"),fu=typeof el.oninput=="function"}cu=fu}else cu=!1;Uo=cu&&(!document.documentMode||9<document.documentMode)}function tl(){Ma&&(Ma.detachEvent("onpropertychange",Oa),da=Ma=null)}function Oa(l){if(l.propertyName==="value"&&lu(da)){var f=[];Fa(f,da,l,Tt(l)),Dt(lr,f)}}function ms(l,f,m){l==="focusin"?(tl(),Ma=f,da=m,Ma.attachEvent("onpropertychange",Oa)):l==="focusout"&&tl()}function gs(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return lu(da)}function hu(l,f){if(l==="click")return lu(f)}function ys(l,f){if(l==="input"||l==="change")return lu(f)}function du(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var tr=typeof Object.is=="function"?Object.is:du;function Ri(l,f){if(tr(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var m=Object.keys(l),b=Object.keys(f);if(m.length!==b.length)return!1;for(b=0;b<m.length;b++){var k=m[b];if(!u.call(f,k)||!tr(l[k],f[k]))return!1}return!0}function xn(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Nn(l,f){var m=xn(l);l=0;for(var b;m;){if(m.nodeType===3){if(b=l+m.textContent.length,l<=f&&b>=f)return{node:m,offset:f-l};l=b}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=xn(m)}}function nr(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?nr(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function Sr(){for(var l=window,f=Re();f instanceof l.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)l=f.contentWindow;else break;f=Re(l.document)}return f}function zo(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}function Yl(l){var f=Sr(),m=l.focusedElem,b=l.selectionRange;if(f!==m&&m&&m.ownerDocument&&nr(m.ownerDocument.documentElement,m)){if(b!==null&&zo(m)){if(f=b.start,l=b.end,l===void 0&&(l=f),"selectionStart"in m)m.selectionStart=f,m.selectionEnd=Math.min(l,m.value.length);else if(l=(f=m.ownerDocument||document)&&f.defaultView||window,l.getSelection){l=l.getSelection();var k=m.textContent.length,R=Math.min(b.start,k);b=b.end===void 0?R:Math.min(b.end,k),!l.extend&&R>b&&(k=b,b=R,R=k),k=Nn(m,R);var q=Nn(m,b);k&&q&&(l.rangeCount!==1||l.anchorNode!==k.node||l.anchorOffset!==k.offset||l.focusNode!==q.node||l.focusOffset!==q.offset)&&(f=f.createRange(),f.setStart(k.node,k.offset),l.removeAllRanges(),R>b?(l.addRange(f),l.extend(q.node,q.offset)):(f.setEnd(q.node,q.offset),l.addRange(f)))}}for(f=[],l=m;l=l.parentNode;)l.nodeType===1&&f.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<f.length;m++)l=f[m],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var nl=a&&"documentMode"in document&&11>=document.documentMode,Ba=null,Jc=null,rl=null,Qc=!1;function ch(l,f,m){var b=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Qc||Ba==null||Ba!==Re(b)||(b=Ba,"selectionStart"in b&&zo(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),rl&&Ri(rl,b)||(rl=b,b=tf(Jc,"onSelect"),0<b.length&&(f=new Yu("onSelect","select",null,f,m),l.push({event:f,listeners:b}),f.target=Ba)))}function Jl(l,f){var m={};return m[l.toLowerCase()]=f.toLowerCase(),m["Webkit"+l]="webkit"+f,m["Moz"+l]="moz"+f,m}var pu={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},vu={},fh={};a&&(fh=document.createElement("div").style,"AnimationEvent"in window||(delete pu.animationend.animation,delete pu.animationiteration.animation,delete pu.animationstart.animation),"TransitionEvent"in window||delete pu.transitionend.transition);function Ql(l){if(vu[l])return vu[l];if(!pu[l])return l;var f=pu[l],m;for(m in f)if(f.hasOwnProperty(m)&&m in fh)return vu[l]=f[m];return l}var hh=Ql("animationend"),dh=Ql("animationiteration"),ph=Ql("animationstart"),vh=Ql("transitionend"),mh=new Map,gh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function va(l,f){mh.set(l,f),o(f,[l])}for(var il=0;il<gh.length;il++){var xi=gh[il],wo=xi.toLowerCase(),Zc=xi[0].toUpperCase()+xi.slice(1);va(wo,"on"+Zc)}va(hh,"onAnimationEnd"),va(dh,"onAnimationIteration"),va(ph,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(vh,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Td=new Set("cancel close invalid load scroll toggle".split(" ").concat(xs));function Zl(l,f,m){var b=l.type||"unknown-event";l.currentTarget=m,oa(b,f,void 0,l),l.currentTarget=null}function ec(l,f){f=(f&4)!==0;for(var m=0;m<l.length;m++){var b=l[m],k=b.event;b=b.listeners;e:{var R=void 0;if(f)for(var q=b.length-1;0<=q;q--){var pe=b[q],xe=pe.instance,Me=pe.currentTarget;if(pe=pe.listener,xe!==R&&k.isPropagationStopped())break e;Zl(k,pe,Me),R=xe}else for(q=0;q<b.length;q++){if(pe=b[q],xe=pe.instance,Me=pe.currentTarget,pe=pe.listener,xe!==R&&k.isPropagationStopped())break e;Zl(k,pe,Me),R=xe}}}if(xr)throw l=Ia,xr=!1,Ia=null,l}function Tn(l,f){var m=f[Li];m===void 0&&(m=f[Li]=new Set);var b=l+"__bubble";m.has(b)||(tc(f,l,2,!1),m.add(b))}function ef(l,f,m){var b=0;f&&(b|=4),tc(m,l,b,f)}var ol="_reactListening"+Math.random().toString(36).slice(2);function mu(l){if(!l[ol]){l[ol]=!0,r.forEach(function(m){m!=="selectionchange"&&(Td.has(m)||ef(m,!1,l),ef(m,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[ol]||(f[ol]=!0,ef("selectionchange",!1,f))}}function tc(l,f,m,b){switch(ru(f)){case 1:var k=Hl;break;case 4:k=Gl;break;default:k=Xu}m=k.bind(null,f,m,l),k=void 0,!Lo||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(k=!0),b?k!==void 0?l.addEventListener(f,m,{capture:!0,passive:k}):l.addEventListener(f,m,!0):k!==void 0?l.addEventListener(f,m,{passive:k}):l.addEventListener(f,m,!1)}function nc(l,f,m,b,k){var R=b;if((f&1)===0&&(f&2)===0&&b!==null)e:for(;;){if(b===null)return;var q=b.tag;if(q===3||q===4){var pe=b.stateNode.containerInfo;if(pe===k||pe.nodeType===8&&pe.parentNode===k)break;if(q===4)for(q=b.return;q!==null;){var xe=q.tag;if((xe===3||xe===4)&&(xe=q.stateNode.containerInfo,xe===k||xe.nodeType===8&&xe.parentNode===k))return;q=q.return}for(;pe!==null;){if(q=ws(pe),q===null)return;if(xe=q.tag,xe===5||xe===6){b=R=q;continue e}pe=pe.parentNode}}b=b.return}Dt(function(){var Me=R,Qe=Tt(m),Ze=[];e:{var Ye=mh.get(l);if(Ye!==void 0){var it=Yu,gt=l;switch(l){case"keypress":if(iu(m)===0)break e;case"keydown":case"keyup":it=fs;break;case"focusin":gt="focus",it=Jt;break;case"focusout":gt="blur",it=Jt;break;case"beforeblur":case"afterblur":it=Jt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=$e;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=_t;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=Yr;break;case hh:case dh:case ph:it=Yn;break;case vh:it=uu;break;case"scroll":it=V;break;case"wheel":it=Xl;break;case"copy":case"cut":case"paste":it=Un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=hs}var bt=(f&4)!==0,Fr=!bt&&l==="scroll",Ie=bt?Ye!==null?Ye+"Capture":null:Ye;bt=[];for(var Ae=Me,Te;Ae!==null;){Te=Ae;var et=Te.stateNode;if(Te.tag===5&&et!==null&&(Te=et,Ie!==null&&(et=Yi(Ae,Ie),et!=null&&bt.push(rc(Ae,et,Te)))),Fr)break;Ae=Ae.return}0<bt.length&&(Ye=new it(Ye,gt,null,m,Qe),Ze.push({event:Ye,listeners:bt}))}}if((f&7)===0){e:{if(Ye=l==="mouseover"||l==="pointerover",it=l==="mouseout"||l==="pointerout",Ye&&m!==En&&(gt=m.relatedTarget||m.fromElement)&&(ws(gt)||gt[ui]))break e;if((it||Ye)&&(Ye=Qe.window===Qe?Qe:(Ye=Qe.ownerDocument)?Ye.defaultView||Ye.parentWindow:window,it?(gt=m.relatedTarget||m.toElement,it=Me,gt=gt?ws(gt):null,gt!==null&&(Fr=Kr(gt),gt!==Fr||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(it=null,gt=Me),it!==gt)){if(bt=$e,et="onMouseLeave",Ie="onMouseEnter",Ae="mouse",(l==="pointerout"||l==="pointerover")&&(bt=hs,et="onPointerLeave",Ie="onPointerEnter",Ae="pointer"),Fr=it==null?Ye:xu(it),Te=gt==null?Ye:xu(gt),Ye=new bt(et,Ae+"leave",it,m,Qe),Ye.target=Fr,Ye.relatedTarget=Te,et=null,ws(Qe)===Me&&(bt=new bt(Ie,Ae+"enter",gt,m,Qe),bt.target=Te,bt.relatedTarget=Fr,et=bt),Fr=et,it&&gt)t:{for(bt=it,Ie=gt,Ae=0,Te=bt;Te;Te=gu(Te))Ae++;for(Te=0,et=Ie;et;et=gu(et))Te++;for(;0<Ae-Te;)bt=gu(bt),Ae--;for(;0<Te-Ae;)Ie=gu(Ie),Te--;for(;Ae--;){if(bt===Ie||Ie!==null&&bt===Ie.alternate)break t;bt=gu(bt),Ie=gu(Ie)}bt=null}else bt=null;it!==null&&Ld(Ze,Ye,it,bt,!1),gt!==null&&Fr!==null&&Ld(Ze,Fr,gt,bt,!0)}}e:{if(Ye=Me?xu(Me):window,it=Ye.nodeName&&Ye.nodeName.toLowerCase(),it==="select"||it==="input"&&Ye.type==="file")var At=pa;else if(ha(Ye))if(Uo)At=ys;else{At=gs;var Mt=ms}else(it=Ye.nodeName)&&it.toLowerCase()==="input"&&(Ye.type==="checkbox"||Ye.type==="radio")&&(At=hu);if(At&&(At=At(l,Me))){Fa(Ze,At,m,Qe);break e}Mt&&Mt(l,Ye,Me),l==="focusout"&&(Mt=Ye._wrapperState)&&Mt.controlled&&Ye.type==="number"&&He(Ye,"number",Ye.value)}switch(Mt=Me?xu(Me):window,l){case"focusin":(ha(Mt)||Mt.contentEditable==="true")&&(Ba=Mt,Jc=Me,rl=null);break;case"focusout":rl=Jc=Ba=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,ch(Ze,m,Qe);break;case"selectionchange":if(nl)break;case"keydown":case"keyup":ch(Ze,m,Qe)}var Ot;if(jo)e:{switch(l){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else xo?Zu(l,m)&&(Gt="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(Gt="onCompositionStart");Gt&&(no&&m.locale!=="ko"&&(xo||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&xo&&(Ot=$l()):(mo=Qe,Ra="value"in mo?mo.value:mo.textContent,xo=!0)),Mt=tf(Me,Gt),0<Mt.length&&(Gt=new ur(Gt,l,null,m,Qe),Ze.push({event:Gt,listeners:Mt}),Ot?Gt.data=Ot:(Ot=Da(m),Ot!==null&&(Gt.data=Ot)))),(Ot=Yc?ro(l,m):io(l,m))&&(Me=tf(Me,"onBeforeInput"),0<Me.length&&(Qe=new ur("onBeforeInput","beforeinput",null,m,Qe),Ze.push({event:Qe,listeners:Me}),Qe.data=Ot))}ec(Ze,f)})}function rc(l,f,m){return{instance:l,listener:f,currentTarget:m}}function tf(l,f){for(var m=f+"Capture",b=[];l!==null;){var k=l,R=k.stateNode;k.tag===5&&R!==null&&(k=R,R=Yi(l,m),R!=null&&b.unshift(rc(l,R,k)),R=Yi(l,f),R!=null&&b.push(rc(l,R,k))),l=l.return}return b}function gu(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Ld(l,f,m,b,k){for(var R=f._reactName,q=[];m!==null&&m!==b;){var pe=m,xe=pe.alternate,Me=pe.stateNode;if(xe!==null&&xe===b)break;pe.tag===5&&Me!==null&&(pe=Me,k?(xe=Yi(m,R),xe!=null&&q.unshift(rc(m,xe,pe))):k||(xe=Yi(m,R),xe!=null&&q.push(rc(m,xe,pe)))),m=m.return}q.length!==0&&l.push({event:f,listeners:q})}var Zv=/\r\n?/g,em=/\u0000|\uFFFD/g;function Dd(l){return(typeof l=="string"?l:""+l).replace(Zv,`
`).replace(em,"")}function nf(l,f,m){if(f=Dd(f),Dd(l)!==f&&m)throw Error(e(425))}function al(){}var ic=null,yu=null;function yh(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var xh=typeof setTimeout=="function"?setTimeout:void 0,Fd=typeof clearTimeout=="function"?clearTimeout:void 0,Md=typeof Promise=="function"?Promise:void 0,tm=typeof queueMicrotask=="function"?queueMicrotask:typeof Md<"u"?function(l){return Md.resolve(null).then(l).catch(nm)}:xh;function nm(l){setTimeout(function(){throw l})}function wh(l,f){var m=f,b=0;do{var k=m.nextSibling;if(l.removeChild(m),k&&k.nodeType===8)if(m=k.data,m==="/$"){if(b===0){l.removeChild(k),tu(f);return}b--}else m!=="$"&&m!=="$?"&&m!=="$!"||b++;m=k}while(m);tu(f)}function wi(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return l}function bo(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return l;f--}else m==="/$"&&f++}l=l.previousSibling}return null}var Ti=Math.random().toString(36).slice(2),ma="__reactFiber$"+Ti,sl="__reactProps$"+Ti,ui="__reactContainer$"+Ti,Li="__reactEvents$"+Ti,rm="__reactListeners$"+Ti,im="__reactHandles$"+Ti;function ws(l){var f=l[ma];if(f)return f;for(var m=l.parentNode;m;){if(f=m[ui]||m[ma]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(l=bo(l);l!==null;){if(m=l[ma])return m;l=bo(l)}return f}l=m,m=l.parentNode}return null}function ul(l){return l=l[ma]||l[ui],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function xu(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(e(33))}function oc(l){return l[sl]||null}var bh=[],ja=-1;function Vo(l){return{current:l}}function An(l){0>ja||(l.current=bh[ja],bh[ja]=null,ja--)}function In(l,f){ja++,bh[ja]=l.current,l.current=f}var bs={},Jr=Vo(bs),Di=Vo(!1),wu=bs;function ll(l,f){var m=l.type.contextTypes;if(!m)return bs;var b=l.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===f)return b.__reactInternalMemoizedMaskedChildContext;var k={},R;for(R in m)k[R]=f[R];return b&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=f,l.__reactInternalMemoizedMaskedChildContext=k),k}function Fi(l){return l=l.childContextTypes,l!=null}function rf(){An(Di),An(Jr)}function Od(l,f,m){if(Jr.current!==bs)throw Error(e(168));In(Jr,f),In(Di,m)}function _h(l,f,m){var b=l.stateNode;if(f=f.childContextTypes,typeof b.getChildContext!="function")return m;b=b.getChildContext();for(var k in b)if(!(k in f))throw Error(e(108,ve(l)||"Unknown",k));return se({},m,b)}function bu(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||bs,wu=Jr.current,In(Jr,l),In(Di,Di.current),!0}function Bd(l,f,m){var b=l.stateNode;if(!b)throw Error(e(169));m?(l=_h(l,f,wu),b.__reactInternalMemoizedMergedChildContext=l,An(Di),An(Jr),In(Jr,l)):An(Di),In(Di,m)}var Ua=null,ac=!1,g=!1;function S(l){Ua===null?Ua=[l]:Ua.push(l)}function P(l){ac=!0,S(l)}function L(){if(!g&&Ua!==null){g=!0;var l=0,f=mn;try{var m=Ua;for(mn=1;l<m.length;l++){var b=m[l];do b=b(!0);while(b!==null)}Ua=null,ac=!1}catch(k){throw Ua!==null&&(Ua=Ua.slice(l+1)),Gs(zu,L),k}finally{mn=f,g=!1}}return null}var z=[],H=0,Y=null,J=0,Z=[],re=0,ye=null,Ne=1,ie="";function _e(l,f){z[H++]=J,z[H++]=Y,Y=l,J=f}function Ee(l,f,m){Z[re++]=Ne,Z[re++]=ie,Z[re++]=ye,ye=l;var b=Ne;l=ie;var k=32-wr(b)-1;b&=~(1<<k),m+=1;var R=32-wr(f)+k;if(30<R){var q=k-k%5;R=(b&(1<<q)-1).toString(32),b>>=q,k-=q,Ne=1<<32-wr(f)+k|m<<k|b,ie=R+l}else Ne=1<<R|m<<k|b,ie=l}function Ue(l){l.return!==null&&(_e(l,1),Ee(l,1,0))}function Pe(l){for(;l===Y;)Y=z[--H],z[H]=null,J=z[--H],z[H]=null;for(;l===ye;)ye=Z[--re],Z[re]=null,ie=Z[--re],Z[re]=null,Ne=Z[--re],Z[re]=null}var Be=null,je=null,We=!1,Ge=null;function St(l,f){var m=ba(5,null,null,0);m.elementType="DELETED",m.stateNode=f,m.return=l,f=l.deletions,f===null?(l.deletions=[m],l.flags|=16):f.push(m)}function ot(l,f){switch(l.tag){case 5:var m=l.type;return f=f.nodeType!==1||m.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(l.stateNode=f,Be=l,je=wi(f.firstChild),!0):!1;case 6:return f=l.pendingProps===""||f.nodeType!==3?null:f,f!==null?(l.stateNode=f,Be=l,je=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(m=ye!==null?{id:Ne,overflow:ie}:null,l.memoizedState={dehydrated:f,treeContext:m,retryLane:1073741824},m=ba(18,null,null,0),m.stateNode=f,m.return=l,l.child=m,Be=l,je=null,!0):!1;default:return!1}}function en(l){return(l.mode&1)!==0&&(l.flags&128)===0}function vt(l){if(We){var f=je;if(f){var m=f;if(!ot(l,f)){if(en(l))throw Error(e(418));f=wi(m.nextSibling);var b=Be;f&&ot(l,f)?St(b,m):(l.flags=l.flags&-4097|2,We=!1,Be=l)}}else{if(en(l))throw Error(e(418));l.flags=l.flags&-4097|2,We=!1,Be=l}}}function cn(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Be=l}function rr(l){if(l!==Be)return!1;if(!We)return cn(l),We=!0,!1;var f;if((f=l.tag!==3)&&!(f=l.tag!==5)&&(f=l.type,f=f!=="head"&&f!=="body"&&!yh(l.type,l.memoizedProps)),f&&(f=je)){if(en(l))throw nn(),Error(e(418));for(;f;)St(l,f),f=wi(f.nextSibling)}if(cn(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(e(317));e:{for(l=l.nextSibling,f=0;l;){if(l.nodeType===8){var m=l.data;if(m==="/$"){if(f===0){je=wi(l.nextSibling);break e}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++}l=l.nextSibling}je=null}}else je=Be?wi(l.stateNode.nextSibling):null;return!0}function nn(){for(var l=je;l;)l=wi(l.nextSibling)}function at(){je=Be=null,We=!1}function tt(l){Ge===null?Ge=[l]:Ge.push(l)}var cr=C.ReactCurrentBatchConfig;function Wt(l,f,m){if(l=m.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(e(309));var b=m.stateNode}if(!b)throw Error(e(147,l));var k=b,R=""+l;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===R?f.ref:(f=function(q){var pe=k.refs;q===null?delete pe[R]:pe[R]=q},f._stringRef=R,f)}if(typeof l!="string")throw Error(e(284));if(!m._owner)throw Error(e(290,l))}return l}function ln(l,f){throw l=Object.prototype.toString.call(f),Error(e(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l))}function zn(l){var f=l._init;return f(l._payload)}function zr(l){function f(Ie,Ae){if(l){var Te=Ie.deletions;Te===null?(Ie.deletions=[Ae],Ie.flags|=16):Te.push(Ae)}}function m(Ie,Ae){if(!l)return null;for(;Ae!==null;)f(Ie,Ae),Ae=Ae.sibling;return null}function b(Ie,Ae){for(Ie=new Map;Ae!==null;)Ae.key!==null?Ie.set(Ae.key,Ae):Ie.set(Ae.index,Ae),Ae=Ae.sibling;return Ie}function k(Ie,Ae){return Ie=xl(Ie,Ae),Ie.index=0,Ie.sibling=null,Ie}function R(Ie,Ae,Te){return Ie.index=Te,l?(Te=Ie.alternate,Te!==null?(Te=Te.index,Te<Ae?(Ie.flags|=2,Ae):Te):(Ie.flags|=2,Ae)):(Ie.flags|=1048576,Ae)}function q(Ie){return l&&Ie.alternate===null&&(Ie.flags|=2),Ie}function pe(Ie,Ae,Te,et){return Ae===null||Ae.tag!==6?(Ae=Lm(Te,Ie.mode,et),Ae.return=Ie,Ae):(Ae=k(Ae,Te),Ae.return=Ie,Ae)}function xe(Ie,Ae,Te,et){var At=Te.type;return At===U?Qe(Ie,Ae,Te.props.children,et,Te.key):Ae!==null&&(Ae.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===he&&zn(At)===Ae.type)?(et=k(Ae,Te.props),et.ref=Wt(Ie,Ae,Te),et.return=Ie,et):(et=ip(Te.type,Te.key,Te.props,null,Ie.mode,et),et.ref=Wt(Ie,Ae,Te),et.return=Ie,et)}function Me(Ie,Ae,Te,et){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Te.containerInfo||Ae.stateNode.implementation!==Te.implementation?(Ae=Dm(Te,Ie.mode,et),Ae.return=Ie,Ae):(Ae=k(Ae,Te.children||[]),Ae.return=Ie,Ae)}function Qe(Ie,Ae,Te,et,At){return Ae===null||Ae.tag!==7?(Ae=pc(Te,Ie.mode,et,At),Ae.return=Ie,Ae):(Ae=k(Ae,Te),Ae.return=Ie,Ae)}function Ze(Ie,Ae,Te){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=Lm(""+Ae,Ie.mode,Te),Ae.return=Ie,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case N:return Te=ip(Ae.type,Ae.key,Ae.props,null,Ie.mode,Te),Te.ref=Wt(Ie,null,Ae),Te.return=Ie,Te;case O:return Ae=Dm(Ae,Ie.mode,Te),Ae.return=Ie,Ae;case he:var et=Ae._init;return Ze(Ie,et(Ae._payload),Te)}if(mt(Ae)||ne(Ae))return Ae=pc(Ae,Ie.mode,Te,null),Ae.return=Ie,Ae;ln(Ie,Ae)}return null}function Ye(Ie,Ae,Te,et){var At=Ae!==null?Ae.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return At!==null?null:pe(Ie,Ae,""+Te,et);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case N:return Te.key===At?xe(Ie,Ae,Te,et):null;case O:return Te.key===At?Me(Ie,Ae,Te,et):null;case he:return At=Te._init,Ye(Ie,Ae,At(Te._payload),et)}if(mt(Te)||ne(Te))return At!==null?null:Qe(Ie,Ae,Te,et,null);ln(Ie,Te)}return null}function it(Ie,Ae,Te,et,At){if(typeof et=="string"&&et!==""||typeof et=="number")return Ie=Ie.get(Te)||null,pe(Ae,Ie,""+et,At);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case N:return Ie=Ie.get(et.key===null?Te:et.key)||null,xe(Ae,Ie,et,At);case O:return Ie=Ie.get(et.key===null?Te:et.key)||null,Me(Ae,Ie,et,At);case he:var Mt=et._init;return it(Ie,Ae,Te,Mt(et._payload),At)}if(mt(et)||ne(et))return Ie=Ie.get(Te)||null,Qe(Ae,Ie,et,At,null);ln(Ae,et)}return null}function gt(Ie,Ae,Te,et){for(var At=null,Mt=null,Ot=Ae,Gt=Ae=0,di=null;Ot!==null&&Gt<Te.length;Gt++){Ot.index>Gt?(di=Ot,Ot=null):di=Ot.sibling;var Sn=Ye(Ie,Ot,Te[Gt],et);if(Sn===null){Ot===null&&(Ot=di);break}l&&Ot&&Sn.alternate===null&&f(Ie,Ot),Ae=R(Sn,Ae,Gt),Mt===null?At=Sn:Mt.sibling=Sn,Mt=Sn,Ot=di}if(Gt===Te.length)return m(Ie,Ot),We&&_e(Ie,Gt),At;if(Ot===null){for(;Gt<Te.length;Gt++)Ot=Ze(Ie,Te[Gt],et),Ot!==null&&(Ae=R(Ot,Ae,Gt),Mt===null?At=Ot:Mt.sibling=Ot,Mt=Ot);return We&&_e(Ie,Gt),At}for(Ot=b(Ie,Ot);Gt<Te.length;Gt++)di=it(Ot,Ie,Gt,Te[Gt],et),di!==null&&(l&&di.alternate!==null&&Ot.delete(di.key===null?Gt:di.key),Ae=R(di,Ae,Gt),Mt===null?At=di:Mt.sibling=di,Mt=di);return l&&Ot.forEach(function(wl){return f(Ie,wl)}),We&&_e(Ie,Gt),At}function bt(Ie,Ae,Te,et){var At=ne(Te);if(typeof At!="function")throw Error(e(150));if(Te=At.call(Te),Te==null)throw Error(e(151));for(var Mt=At=null,Ot=Ae,Gt=Ae=0,di=null,Sn=Te.next();Ot!==null&&!Sn.done;Gt++,Sn=Te.next()){Ot.index>Gt?(di=Ot,Ot=null):di=Ot.sibling;var wl=Ye(Ie,Ot,Sn.value,et);if(wl===null){Ot===null&&(Ot=di);break}l&&Ot&&wl.alternate===null&&f(Ie,Ot),Ae=R(wl,Ae,Gt),Mt===null?At=wl:Mt.sibling=wl,Mt=wl,Ot=di}if(Sn.done)return m(Ie,Ot),We&&_e(Ie,Gt),At;if(Ot===null){for(;!Sn.done;Gt++,Sn=Te.next())Sn=Ze(Ie,Sn.value,et),Sn!==null&&(Ae=R(Sn,Ae,Gt),Mt===null?At=Sn:Mt.sibling=Sn,Mt=Sn);return We&&_e(Ie,Gt),At}for(Ot=b(Ie,Ot);!Sn.done;Gt++,Sn=Te.next())Sn=it(Ot,Ie,Gt,Sn.value,et),Sn!==null&&(l&&Sn.alternate!==null&&Ot.delete(Sn.key===null?Gt:Sn.key),Ae=R(Sn,Ae,Gt),Mt===null?At=Sn:Mt.sibling=Sn,Mt=Sn);return l&&Ot.forEach(function(qC){return f(Ie,qC)}),We&&_e(Ie,Gt),At}function Fr(Ie,Ae,Te,et){if(typeof Te=="object"&&Te!==null&&Te.type===U&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case N:e:{for(var At=Te.key,Mt=Ae;Mt!==null;){if(Mt.key===At){if(At=Te.type,At===U){if(Mt.tag===7){m(Ie,Mt.sibling),Ae=k(Mt,Te.props.children),Ae.return=Ie,Ie=Ae;break e}}else if(Mt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===he&&zn(At)===Mt.type){m(Ie,Mt.sibling),Ae=k(Mt,Te.props),Ae.ref=Wt(Ie,Mt,Te),Ae.return=Ie,Ie=Ae;break e}m(Ie,Mt);break}else f(Ie,Mt);Mt=Mt.sibling}Te.type===U?(Ae=pc(Te.props.children,Ie.mode,et,Te.key),Ae.return=Ie,Ie=Ae):(et=ip(Te.type,Te.key,Te.props,null,Ie.mode,et),et.ref=Wt(Ie,Ae,Te),et.return=Ie,Ie=et)}return q(Ie);case O:e:{for(Mt=Te.key;Ae!==null;){if(Ae.key===Mt)if(Ae.tag===4&&Ae.stateNode.containerInfo===Te.containerInfo&&Ae.stateNode.implementation===Te.implementation){m(Ie,Ae.sibling),Ae=k(Ae,Te.children||[]),Ae.return=Ie,Ie=Ae;break e}else{m(Ie,Ae);break}else f(Ie,Ae);Ae=Ae.sibling}Ae=Dm(Te,Ie.mode,et),Ae.return=Ie,Ie=Ae}return q(Ie);case he:return Mt=Te._init,Fr(Ie,Ae,Mt(Te._payload),et)}if(mt(Te))return gt(Ie,Ae,Te,et);if(ne(Te))return bt(Ie,Ae,Te,et);ln(Ie,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,Ae!==null&&Ae.tag===6?(m(Ie,Ae.sibling),Ae=k(Ae,Te),Ae.return=Ie,Ie=Ae):(m(Ie,Ae),Ae=Lm(Te,Ie.mode,et),Ae.return=Ie,Ie=Ae),q(Ie)):m(Ie,Ae)}return Fr}var Cr=zr(!0),Jn=zr(!1),Lr=Vo(null),Vr=null,Hn=null,dn=null;function wn(){dn=Hn=Vr=null}function Gn(l){var f=Lr.current;An(Lr),l._currentValue=f}function bn(l,f,m){for(;l!==null;){var b=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,b!==null&&(b.childLanes|=f)):b!==null&&(b.childLanes&f)!==f&&(b.childLanes|=f),l===m)break;l=l.return}}function ir(l,f){Vr=l,dn=Hn=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&f)!==0&&(So=!0),l.firstContext=null)}function or(l){var f=l._currentValue;if(dn!==l)if(l={context:l,memoizedValue:f,next:null},Hn===null){if(Vr===null)throw Error(e(308));Hn=l,Vr.dependencies={lanes:0,firstContext:l}}else Hn=Hn.next=l;return f}var Ln=null;function li(l){Ln===null?Ln=[l]:Ln.push(l)}function Pn(l,f,m,b){var k=f.interleaved;return k===null?(m.next=m,li(f)):(m.next=k.next,k.next=m),f.interleaved=m,Dn(l,b)}function Dn(l,f){l.lanes|=f;var m=l.alternate;for(m!==null&&(m.lanes|=f),m=l,l=l.return;l!==null;)l.childLanes|=f,m=l.alternate,m!==null&&(m.childLanes|=f),m=l,l=l.return;return m.tag===3?m.stateNode:null}var Ar=!1;function Qr(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function fr(l,f){return{eventTime:l,lane:f,tag:0,payload:null,callback:null,next:null}}function hr(l,f,m){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(_n&2)!==0){var k=b.pending;return k===null?f.next=f:(f.next=k.next,k.next=f),b.pending=f,Dn(l,m)}return k=b.interleaved,k===null?(f.next=f,li(b)):(f.next=k.next,k.next=f),b.interleaved=f,Dn(l,m)}function ci(l,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194240)!==0)){var b=f.lanes;b&=l.pendingLanes,m|=b,f.lanes=m,qu(l,m)}}function Fn(l,f){var m=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,m===b)){var k=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var q={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};R===null?k=R=q:R=R.next=q,m=m.next}while(m!==null);R===null?k=R=f:R=R.next=f}else k=R=f;m={baseState:b.baseState,firstBaseUpdate:k,lastBaseUpdate:R,shared:b.shared,effects:b.effects},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=f:l.next=f,m.lastBaseUpdate=f}function fi(l,f,m,b){var k=l.updateQueue;Ar=!1;var R=k.firstBaseUpdate,q=k.lastBaseUpdate,pe=k.shared.pending;if(pe!==null){k.shared.pending=null;var xe=pe,Me=xe.next;xe.next=null,q===null?R=Me:q.next=Me,q=xe;var Qe=l.alternate;Qe!==null&&(Qe=Qe.updateQueue,pe=Qe.lastBaseUpdate,pe!==q&&(pe===null?Qe.firstBaseUpdate=Me:pe.next=Me,Qe.lastBaseUpdate=xe))}if(R!==null){var Ze=k.baseState;q=0,Qe=Me=xe=null,pe=R;do{var Ye=pe.lane,it=pe.eventTime;if((b&Ye)===Ye){Qe!==null&&(Qe=Qe.next={eventTime:it,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var gt=l,bt=pe;switch(Ye=f,it=m,bt.tag){case 1:if(gt=bt.payload,typeof gt=="function"){Ze=gt.call(it,Ze,Ye);break e}Ze=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=bt.payload,Ye=typeof gt=="function"?gt.call(it,Ze,Ye):gt,Ye==null)break e;Ze=se({},Ze,Ye);break e;case 2:Ar=!0}}pe.callback!==null&&pe.lane!==0&&(l.flags|=64,Ye=k.effects,Ye===null?k.effects=[pe]:Ye.push(pe))}else it={eventTime:it,lane:Ye,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},Qe===null?(Me=Qe=it,xe=Ze):Qe=Qe.next=it,q|=Ye;if(pe=pe.next,pe===null){if(pe=k.shared.pending,pe===null)break;Ye=pe,pe=Ye.next,Ye.next=null,k.lastBaseUpdate=Ye,k.shared.pending=null}}while(!0);if(Qe===null&&(xe=Ze),k.baseState=xe,k.firstBaseUpdate=Me,k.lastBaseUpdate=Qe,f=k.shared.interleaved,f!==null){k=f;do q|=k.lane,k=k.next;while(k!==f)}else R===null&&(k.shared.lanes=0);cc|=q,l.lanes=q,l.memoizedState=Ze}}function _o(l,f,m){if(l=f.effects,f.effects=null,l!==null)for(f=0;f<l.length;f++){var b=l[f],k=b.callback;if(k!==null){if(b.callback=null,b=m,typeof k!="function")throw Error(e(191,k));k.call(b)}}}var Wo={},Wr=Vo(Wo),dr=Vo(Wo),_s=Vo(Wo);function za(l){if(l===Wo)throw Error(e(174));return l}function cl(l,f){switch(In(_s,f),In(dr,l),In(Wr,Wo),l=f.nodeType,l){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:Xt(null,"");break;default:l=l===8?f.parentNode:f,f=l.namespaceURI||null,l=l.tagName,f=Xt(f,l)}An(Wr),In(Wr,f)}function ga(){An(Wr),An(dr),An(_s)}function jd(l){za(_s.current);var f=za(Wr.current),m=Xt(f,l.type);f!==m&&(In(dr,l),In(Wr,m))}function Sh(l){dr.current===l&&(An(Wr),An(dr))}var Wn=Vo(0);function qo(l){for(var f=l;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Ch=[];function Ah(){for(var l=0;l<Ch.length;l++)Ch[l]._workInProgressVersionPrimary=null;Ch.length=0}var of=C.ReactCurrentDispatcher,af=C.ReactCurrentBatchConfig,ya=0,$n=null,kr=null,pr=null,fl=!1,Va=!1,hl=0,om=0;function Dr(){throw Error(e(321))}function sf(l,f){if(f===null)return!1;for(var m=0;m<f.length&&m<l.length;m++)if(!tr(l[m],f[m]))return!1;return!0}function sc(l,f,m,b,k,R){if(ya=R,$n=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,of.current=l===null||l.memoizedState===null?mC:gC,l=m(b,k),Va){R=0;do{if(Va=!1,hl=0,25<=R)throw Error(e(301));R+=1,pr=kr=null,f.updateQueue=null,of.current=yC,l=m(b,k)}while(Va)}if(of.current=qd,f=kr!==null&&kr.next!==null,ya=0,pr=kr=$n=null,fl=!1,f)throw Error(e(300));return l}function xa(){var l=hl!==0;return hl=0,l}function Ho(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?$n.memoizedState=pr=l:pr=pr.next=l,pr}function oo(){if(kr===null){var l=$n.alternate;l=l!==null?l.memoizedState:null}else l=kr.next;var f=pr===null?$n.memoizedState:pr.next;if(f!==null)pr=f,kr=l;else{if(l===null)throw Error(e(310));kr=l,l={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},pr===null?$n.memoizedState=pr=l:pr=pr.next=l}return pr}function uc(l,f){return typeof f=="function"?f(l):f}function uf(l){var f=oo(),m=f.queue;if(m===null)throw Error(e(311));m.lastRenderedReducer=l;var b=kr,k=b.baseQueue,R=m.pending;if(R!==null){if(k!==null){var q=k.next;k.next=R.next,R.next=q}b.baseQueue=k=R,m.pending=null}if(k!==null){R=k.next,b=b.baseState;var pe=q=null,xe=null,Me=R;do{var Qe=Me.lane;if((ya&Qe)===Qe)xe!==null&&(xe=xe.next={lane:0,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),b=Me.hasEagerState?Me.eagerState:l(b,Me.action);else{var Ze={lane:Qe,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null};xe===null?(pe=xe=Ze,q=b):xe=xe.next=Ze,$n.lanes|=Qe,cc|=Qe}Me=Me.next}while(Me!==null&&Me!==R);xe===null?q=b:xe.next=pe,tr(b,f.memoizedState)||(So=!0),f.memoizedState=b,f.baseState=q,f.baseQueue=xe,m.lastRenderedState=b}if(l=m.interleaved,l!==null){k=l;do R=k.lane,$n.lanes|=R,cc|=R,k=k.next;while(k!==l)}else k===null&&(m.lanes=0);return[f.memoizedState,m.dispatch]}function Ss(l){var f=oo(),m=f.queue;if(m===null)throw Error(e(311));m.lastRenderedReducer=l;var b=m.dispatch,k=m.pending,R=f.memoizedState;if(k!==null){m.pending=null;var q=k=k.next;do R=l(R,q.action),q=q.next;while(q!==k);tr(R,f.memoizedState)||(So=!0),f.memoizedState=R,f.baseQueue===null&&(f.baseState=R),m.lastRenderedState=R}return[R,b]}function Ud(){}function kh(l,f){var m=$n,b=oo(),k=f(),R=!tr(b.memoizedState,k);if(R&&(b.memoizedState=k,So=!0),b=b.queue,ff(Vd.bind(null,m,b,l),[l]),b.getSnapshot!==f||R||pr!==null&&pr.memoizedState.tag&1){if(m.flags|=2048,ao(9,Eh.bind(null,m,b,k,f),void 0,null),hi===null)throw Error(e(349));(ya&30)!==0||zd(m,f,k)}return k}function zd(l,f,m){l.flags|=16384,l={getSnapshot:f,value:m},f=$n.updateQueue,f===null?(f={lastEffect:null,stores:null},$n.updateQueue=f,f.stores=[l]):(m=f.stores,m===null?f.stores=[l]:m.push(l))}function Eh(l,f,m,b){f.value=m,f.getSnapshot=b,dl(f)&&lf(l)}function Vd(l,f,m){return m(function(){dl(f)&&lf(l)})}function dl(l){var f=l.getSnapshot;l=l.value;try{var m=f();return!tr(l,m)}catch{return!0}}function lf(l){var f=Dn(l,1);f!==null&&$a(f,l,1,-1)}function lc(l){var f=Ho();return typeof l=="function"&&(l=l()),f.memoizedState=f.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uc,lastRenderedState:l},f.queue=l,l=l.dispatch=vC.bind(null,$n,l),[f.memoizedState,l]}function ao(l,f,m,b){return l={tag:l,create:f,destroy:m,deps:b,next:null},f=$n.updateQueue,f===null?(f={lastEffect:null,stores:null},$n.updateQueue=f,f.lastEffect=l.next=l):(m=f.lastEffect,m===null?f.lastEffect=l.next=l:(b=m.next,m.next=l,l.next=b,f.lastEffect=l)),l}function Wa(){return oo().memoizedState}function Go(l,f,m,b){var k=Ho();$n.flags|=l,k.memoizedState=ao(1|f,m,void 0,b===void 0?null:b)}function _u(l,f,m,b){var k=oo();b=b===void 0?null:b;var R=void 0;if(kr!==null){var q=kr.memoizedState;if(R=q.destroy,b!==null&&sf(b,q.deps)){k.memoizedState=ao(f,m,R,b);return}}$n.flags|=l,k.memoizedState=ao(1|f,m,R,b)}function cf(l,f){return Go(8390656,8,l,f)}function ff(l,f){return _u(2048,8,l,f)}function Wd(l,f){return _u(4,2,l,f)}function hf(l,f){return _u(4,4,l,f)}function df(l,f){if(typeof f=="function")return l=l(),f(l),function(){f(null)};if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function F2(l,f,m){return m=m!=null?m.concat([l]):null,_u(4,4,df.bind(null,f,l),m)}function am(){}function M2(l,f){var m=oo();f=f===void 0?null:f;var b=m.memoizedState;return b!==null&&f!==null&&sf(f,b[1])?b[0]:(m.memoizedState=[l,f],l)}function O2(l,f){var m=oo();f=f===void 0?null:f;var b=m.memoizedState;return b!==null&&f!==null&&sf(f,b[1])?b[0]:(l=l(),m.memoizedState=[l,f],l)}function B2(l,f,m){return(ya&21)===0?(l.baseState&&(l.baseState=!1,So=!0),l.memoizedState=m):(tr(m,f)||(m=zl(),$n.lanes|=m,cc|=m,l.baseState=!0),f)}function dC(l,f){var m=mn;mn=m!==0&&4>m?m:4,l(!0);var b=af.transition;af.transition={};try{l(!1),f()}finally{mn=m,af.transition=b}}function j2(){return oo().memoizedState}function pC(l,f,m){var b=gl(l);if(m={lane:b,action:m,hasEagerState:!1,eagerState:null,next:null},U2(l))z2(f,m);else if(m=Pn(l,f,m,b),m!==null){var k=uo();$a(m,l,b,k),V2(m,f,b)}}function vC(l,f,m){var b=gl(l),k={lane:b,action:m,hasEagerState:!1,eagerState:null,next:null};if(U2(l))z2(f,k);else{var R=l.alternate;if(l.lanes===0&&(R===null||R.lanes===0)&&(R=f.lastRenderedReducer,R!==null))try{var q=f.lastRenderedState,pe=R(q,m);if(k.hasEagerState=!0,k.eagerState=pe,tr(pe,q)){var xe=f.interleaved;xe===null?(k.next=k,li(f)):(k.next=xe.next,xe.next=k),f.interleaved=k;return}}catch{}finally{}m=Pn(l,f,k,b),m!==null&&(k=uo(),$a(m,l,b,k),V2(m,f,b))}}function U2(l){var f=l.alternate;return l===$n||f!==null&&f===$n}function z2(l,f){Va=fl=!0;var m=l.pending;m===null?f.next=f:(f.next=m.next,m.next=f),l.pending=f}function V2(l,f,m){if((m&4194240)!==0){var b=f.lanes;b&=l.pendingLanes,m|=b,f.lanes=m,qu(l,m)}}var qd={readContext:or,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},mC={readContext:or,useCallback:function(l,f){return Ho().memoizedState=[l,f===void 0?null:f],l},useContext:or,useEffect:cf,useImperativeHandle:function(l,f,m){return m=m!=null?m.concat([l]):null,Go(4194308,4,df.bind(null,f,l),m)},useLayoutEffect:function(l,f){return Go(4194308,4,l,f)},useInsertionEffect:function(l,f){return Go(4,2,l,f)},useMemo:function(l,f){var m=Ho();return f=f===void 0?null:f,l=l(),m.memoizedState=[l,f],l},useReducer:function(l,f,m){var b=Ho();return f=m!==void 0?m(f):f,b.memoizedState=b.baseState=f,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:f},b.queue=l,l=l.dispatch=pC.bind(null,$n,l),[b.memoizedState,l]},useRef:function(l){var f=Ho();return l={current:l},f.memoizedState=l},useState:lc,useDebugValue:am,useDeferredValue:function(l){return Ho().memoizedState=l},useTransition:function(){var l=lc(!1),f=l[0];return l=dC.bind(null,l[1]),Ho().memoizedState=l,[f,l]},useMutableSource:function(){},useSyncExternalStore:function(l,f,m){var b=$n,k=Ho();if(We){if(m===void 0)throw Error(e(407));m=m()}else{if(m=f(),hi===null)throw Error(e(349));(ya&30)!==0||zd(b,f,m)}k.memoizedState=m;var R={value:m,getSnapshot:f};return k.queue=R,cf(Vd.bind(null,b,R,l),[l]),b.flags|=2048,ao(9,Eh.bind(null,b,R,m,f),void 0,null),m},useId:function(){var l=Ho(),f=hi.identifierPrefix;if(We){var m=ie,b=Ne;m=(b&~(1<<32-wr(b)-1)).toString(32)+m,f=":"+f+"R"+m,m=hl++,0<m&&(f+="H"+m.toString(32)),f+=":"}else m=om++,f=":"+f+"r"+m.toString(32)+":";return l.memoizedState=f},unstable_isNewReconciler:!1},gC={readContext:or,useCallback:M2,useContext:or,useEffect:ff,useImperativeHandle:F2,useInsertionEffect:Wd,useLayoutEffect:hf,useMemo:O2,useReducer:uf,useRef:Wa,useState:function(){return uf(uc)},useDebugValue:am,useDeferredValue:function(l){var f=oo();return B2(f,kr.memoizedState,l)},useTransition:function(){var l=uf(uc)[0],f=oo().memoizedState;return[l,f]},useMutableSource:Ud,useSyncExternalStore:kh,useId:j2,unstable_isNewReconciler:!1},yC={readContext:or,useCallback:M2,useContext:or,useEffect:ff,useImperativeHandle:F2,useInsertionEffect:Wd,useLayoutEffect:hf,useMemo:O2,useReducer:Ss,useRef:Wa,useState:function(){return Ss(uc)},useDebugValue:am,useDeferredValue:function(l){var f=oo();return kr===null?f.memoizedState=l:B2(f,kr.memoizedState,l)},useTransition:function(){var l=Ss(uc)[0],f=oo().memoizedState;return[l,f]},useMutableSource:Ud,useSyncExternalStore:kh,useId:j2,unstable_isNewReconciler:!1};function qa(l,f){if(l&&l.defaultProps){f=se({},f),l=l.defaultProps;for(var m in l)f[m]===void 0&&(f[m]=l[m]);return f}return f}function sm(l,f,m,b){f=l.memoizedState,m=m(b,f),m=m==null?f:se({},f,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var Hd={isMounted:function(l){return(l=l._reactInternals)?Kr(l)===l:!1},enqueueSetState:function(l,f,m){l=l._reactInternals;var b=uo(),k=gl(l),R=fr(b,k);R.payload=f,m!=null&&(R.callback=m),f=hr(l,R,k),f!==null&&($a(f,l,k,b),ci(f,l,k))},enqueueReplaceState:function(l,f,m){l=l._reactInternals;var b=uo(),k=gl(l),R=fr(b,k);R.tag=1,R.payload=f,m!=null&&(R.callback=m),f=hr(l,R,k),f!==null&&($a(f,l,k,b),ci(f,l,k))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var m=uo(),b=gl(l),k=fr(m,b);k.tag=2,f!=null&&(k.callback=f),f=hr(l,k,b),f!==null&&($a(f,l,b,m),ci(f,l,b))}};function W2(l,f,m,b,k,R,q){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,R,q):f.prototype&&f.prototype.isPureReactComponent?!Ri(m,b)||!Ri(k,R):!0}function q2(l,f,m){var b=!1,k=bs,R=f.contextType;return typeof R=="object"&&R!==null?R=or(R):(k=Fi(f)?wu:Jr.current,b=f.contextTypes,R=(b=b!=null)?ll(l,k):bs),f=new f(m,R),l.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Hd,l.stateNode=f,f._reactInternals=l,b&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=k,l.__reactInternalMemoizedMaskedChildContext=R),f}function H2(l,f,m,b){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,b),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,b),f.state!==l&&Hd.enqueueReplaceState(f,f.state,null)}function um(l,f,m,b){var k=l.stateNode;k.props=m,k.state=l.memoizedState,k.refs={},Qr(l);var R=f.contextType;typeof R=="object"&&R!==null?k.context=or(R):(R=Fi(f)?wu:Jr.current,k.context=ll(l,R)),k.state=l.memoizedState,R=f.getDerivedStateFromProps,typeof R=="function"&&(sm(l,f,R,m),k.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(f=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),f!==k.state&&Hd.enqueueReplaceState(k,k.state,null),fi(l,m,k,b),k.state=l.memoizedState),typeof k.componentDidMount=="function"&&(l.flags|=4194308)}function pf(l,f){try{var m="",b=f;do m+=ue(b),b=b.return;while(b);var k=m}catch(R){k=`
Error generating stack: `+R.message+`
`+R.stack}return{value:l,source:f,stack:k,digest:null}}function lm(l,f,m){return{value:l,source:null,stack:m??null,digest:f??null}}function cm(l,f){try{console.error(f.value)}catch(m){setTimeout(function(){throw m})}}var xC=typeof WeakMap=="function"?WeakMap:Map;function G2(l,f,m){m=fr(-1,m),m.tag=3,m.payload={element:null};var b=f.value;return m.callback=function(){Qd||(Qd=!0,Am=b),cm(l,f)},m}function $2(l,f,m){m=fr(-1,m),m.tag=3;var b=l.type.getDerivedStateFromError;if(typeof b=="function"){var k=f.value;m.payload=function(){return b(k)},m.callback=function(){cm(l,f)}}var R=l.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(m.callback=function(){cm(l,f),typeof b!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var q=f.stack;this.componentDidCatch(f.value,{componentStack:q!==null?q:""})}),m}function K2(l,f,m){var b=l.pingCache;if(b===null){b=l.pingCache=new xC;var k=new Set;b.set(f,k)}else k=b.get(f),k===void 0&&(k=new Set,b.set(f,k));k.has(m)||(k.add(m),l=LC.bind(null,l,f,m),f.then(l,l))}function X2(l){do{var f;if((f=l.tag===13)&&(f=l.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return l;l=l.return}while(l!==null);return null}function Y2(l,f,m,b,k){return(l.mode&1)===0?(l===f?l.flags|=65536:(l.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(f=fr(-1,1),f.tag=2,hr(m,f,1))),m.lanes|=1),l):(l.flags|=65536,l.lanes=k,l)}var wC=C.ReactCurrentOwner,So=!1;function so(l,f,m,b){f.child=l===null?Jn(f,null,m,b):Cr(f,l.child,m,b)}function J2(l,f,m,b,k){m=m.render;var R=f.ref;return ir(f,k),b=sc(l,f,m,b,R,k),m=xa(),l!==null&&!So?(f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~k,Su(l,f,k)):(We&&m&&Ue(f),f.flags|=1,so(l,f,b,k),f.child)}function Q2(l,f,m,b,k){if(l===null){var R=m.type;return typeof R=="function"&&!Tm(R)&&R.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(f.tag=15,f.type=R,Z2(l,f,R,b,k)):(l=ip(m.type,null,b,f,f.mode,k),l.ref=f.ref,l.return=f,f.child=l)}if(R=l.child,(l.lanes&k)===0){var q=R.memoizedProps;if(m=m.compare,m=m!==null?m:Ri,m(q,b)&&l.ref===f.ref)return Su(l,f,k)}return f.flags|=1,l=xl(R,b),l.ref=f.ref,l.return=f,f.child=l}function Z2(l,f,m,b,k){if(l!==null){var R=l.memoizedProps;if(Ri(R,b)&&l.ref===f.ref)if(So=!1,f.pendingProps=b=R,(l.lanes&k)!==0)(l.flags&131072)!==0&&(So=!0);else return f.lanes=l.lanes,Su(l,f,k)}return fm(l,f,m,b,k)}function ey(l,f,m){var b=f.pendingProps,k=b.children,R=l!==null?l.memoizedState:null;if(b.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},In(mf,$o),$o|=m;else{if((m&1073741824)===0)return l=R!==null?R.baseLanes|m:m,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:l,cachePool:null,transitions:null},f.updateQueue=null,In(mf,$o),$o|=l,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=R!==null?R.baseLanes:m,In(mf,$o),$o|=b}else R!==null?(b=R.baseLanes|m,f.memoizedState=null):b=m,In(mf,$o),$o|=b;return so(l,f,k,m),f.child}function ty(l,f){var m=f.ref;(l===null&&m!==null||l!==null&&l.ref!==m)&&(f.flags|=512,f.flags|=2097152)}function fm(l,f,m,b,k){var R=Fi(m)?wu:Jr.current;return R=ll(f,R),ir(f,k),m=sc(l,f,m,b,R,k),b=xa(),l!==null&&!So?(f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~k,Su(l,f,k)):(We&&b&&Ue(f),f.flags|=1,so(l,f,m,k),f.child)}function ny(l,f,m,b,k){if(Fi(m)){var R=!0;bu(f)}else R=!1;if(ir(f,k),f.stateNode===null)$d(l,f),q2(f,m,b),um(f,m,b,k),b=!0;else if(l===null){var q=f.stateNode,pe=f.memoizedProps;q.props=pe;var xe=q.context,Me=m.contextType;typeof Me=="object"&&Me!==null?Me=or(Me):(Me=Fi(m)?wu:Jr.current,Me=ll(f,Me));var Qe=m.getDerivedStateFromProps,Ze=typeof Qe=="function"||typeof q.getSnapshotBeforeUpdate=="function";Ze||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(pe!==b||xe!==Me)&&H2(f,q,b,Me),Ar=!1;var Ye=f.memoizedState;q.state=Ye,fi(f,b,q,k),xe=f.memoizedState,pe!==b||Ye!==xe||Di.current||Ar?(typeof Qe=="function"&&(sm(f,m,Qe,b),xe=f.memoizedState),(pe=Ar||W2(f,m,pe,b,Ye,xe,Me))?(Ze||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(f.flags|=4194308)):(typeof q.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=b,f.memoizedState=xe),q.props=b,q.state=xe,q.context=Me,b=pe):(typeof q.componentDidMount=="function"&&(f.flags|=4194308),b=!1)}else{q=f.stateNode,Mi(l,f),pe=f.memoizedProps,Me=f.type===f.elementType?pe:qa(f.type,pe),q.props=Me,Ze=f.pendingProps,Ye=q.context,xe=m.contextType,typeof xe=="object"&&xe!==null?xe=or(xe):(xe=Fi(m)?wu:Jr.current,xe=ll(f,xe));var it=m.getDerivedStateFromProps;(Qe=typeof it=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(pe!==Ze||Ye!==xe)&&H2(f,q,b,xe),Ar=!1,Ye=f.memoizedState,q.state=Ye,fi(f,b,q,k);var gt=f.memoizedState;pe!==Ze||Ye!==gt||Di.current||Ar?(typeof it=="function"&&(sm(f,m,it,b),gt=f.memoizedState),(Me=Ar||W2(f,m,Me,b,Ye,gt,xe)||!1)?(Qe||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(b,gt,xe),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(b,gt,xe)),typeof q.componentDidUpdate=="function"&&(f.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof q.componentDidUpdate!="function"||pe===l.memoizedProps&&Ye===l.memoizedState||(f.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||pe===l.memoizedProps&&Ye===l.memoizedState||(f.flags|=1024),f.memoizedProps=b,f.memoizedState=gt),q.props=b,q.state=gt,q.context=xe,b=Me):(typeof q.componentDidUpdate!="function"||pe===l.memoizedProps&&Ye===l.memoizedState||(f.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||pe===l.memoizedProps&&Ye===l.memoizedState||(f.flags|=1024),b=!1)}return hm(l,f,m,b,R,k)}function hm(l,f,m,b,k,R){ty(l,f);var q=(f.flags&128)!==0;if(!b&&!q)return k&&Bd(f,m,!1),Su(l,f,R);b=f.stateNode,wC.current=f;var pe=q&&typeof m.getDerivedStateFromError!="function"?null:b.render();return f.flags|=1,l!==null&&q?(f.child=Cr(f,l.child,null,R),f.child=Cr(f,null,pe,R)):so(l,f,pe,R),f.memoizedState=b.state,k&&Bd(f,m,!0),f.child}function ry(l){var f=l.stateNode;f.pendingContext?Od(l,f.pendingContext,f.pendingContext!==f.context):f.context&&Od(l,f.context,!1),cl(l,f.containerInfo)}function iy(l,f,m,b,k){return at(),tt(k),f.flags|=256,so(l,f,m,b),f.child}var dm={dehydrated:null,treeContext:null,retryLane:0};function pm(l){return{baseLanes:l,cachePool:null,transitions:null}}function oy(l,f,m){var b=f.pendingProps,k=Wn.current,R=!1,q=(f.flags&128)!==0,pe;if((pe=q)||(pe=l!==null&&l.memoizedState===null?!1:(k&2)!==0),pe?(R=!0,f.flags&=-129):(l===null||l.memoizedState!==null)&&(k|=1),In(Wn,k&1),l===null)return vt(f),l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((f.mode&1)===0?f.lanes=1:l.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(q=b.children,l=b.fallback,R?(b=f.mode,R=f.child,q={mode:"hidden",children:q},(b&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=q):R=op(q,b,0,null),l=pc(l,b,m,null),R.return=f,l.return=f,R.sibling=l,f.child=R,f.child.memoizedState=pm(m),f.memoizedState=dm,l):vm(f,q));if(k=l.memoizedState,k!==null&&(pe=k.dehydrated,pe!==null))return bC(l,f,q,b,pe,k,m);if(R){R=b.fallback,q=f.mode,k=l.child,pe=k.sibling;var xe={mode:"hidden",children:b.children};return(q&1)===0&&f.child!==k?(b=f.child,b.childLanes=0,b.pendingProps=xe,f.deletions=null):(b=xl(k,xe),b.subtreeFlags=k.subtreeFlags&14680064),pe!==null?R=xl(pe,R):(R=pc(R,q,m,null),R.flags|=2),R.return=f,b.return=f,b.sibling=R,f.child=b,b=R,R=f.child,q=l.child.memoizedState,q=q===null?pm(m):{baseLanes:q.baseLanes|m,cachePool:null,transitions:q.transitions},R.memoizedState=q,R.childLanes=l.childLanes&~m,f.memoizedState=dm,b}return R=l.child,l=R.sibling,b=xl(R,{mode:"visible",children:b.children}),(f.mode&1)===0&&(b.lanes=m),b.return=f,b.sibling=null,l!==null&&(m=f.deletions,m===null?(f.deletions=[l],f.flags|=16):m.push(l)),f.child=b,f.memoizedState=null,b}function vm(l,f){return f=op({mode:"visible",children:f},l.mode,0,null),f.return=l,l.child=f}function Gd(l,f,m,b){return b!==null&&tt(b),Cr(f,l.child,null,m),l=vm(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function bC(l,f,m,b,k,R,q){if(m)return f.flags&256?(f.flags&=-257,b=lm(Error(e(422))),Gd(l,f,q,b)):f.memoizedState!==null?(f.child=l.child,f.flags|=128,null):(R=b.fallback,k=f.mode,b=op({mode:"visible",children:b.children},k,0,null),R=pc(R,k,q,null),R.flags|=2,b.return=f,R.return=f,b.sibling=R,f.child=b,(f.mode&1)!==0&&Cr(f,l.child,null,q),f.child.memoizedState=pm(q),f.memoizedState=dm,R);if((f.mode&1)===0)return Gd(l,f,q,null);if(k.data==="$!"){if(b=k.nextSibling&&k.nextSibling.dataset,b)var pe=b.dgst;return b=pe,R=Error(e(419)),b=lm(R,b,void 0),Gd(l,f,q,b)}if(pe=(q&l.childLanes)!==0,So||pe){if(b=hi,b!==null){switch(q&-q){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(b.suspendedLanes|q))!==0?0:k,k!==0&&k!==R.retryLane&&(R.retryLane=k,Dn(l,k),$a(b,l,k,-1))}return Rm(),b=lm(Error(e(421))),Gd(l,f,q,b)}return k.data==="$?"?(f.flags|=128,f.child=l.child,f=DC.bind(null,l),k._reactRetry=f,null):(l=R.treeContext,je=wi(k.nextSibling),Be=f,We=!0,Ge=null,l!==null&&(Z[re++]=Ne,Z[re++]=ie,Z[re++]=ye,Ne=l.id,ie=l.overflow,ye=f),f=vm(f,b.children),f.flags|=4096,f)}function ay(l,f,m){l.lanes|=f;var b=l.alternate;b!==null&&(b.lanes|=f),bn(l.return,f,m)}function mm(l,f,m,b,k){var R=l.memoizedState;R===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:b,tail:m,tailMode:k}:(R.isBackwards=f,R.rendering=null,R.renderingStartTime=0,R.last=b,R.tail=m,R.tailMode=k)}function sy(l,f,m){var b=f.pendingProps,k=b.revealOrder,R=b.tail;if(so(l,f,b.children,m),b=Wn.current,(b&2)!==0)b=b&1|2,f.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&ay(l,m,f);else if(l.tag===19)ay(l,m,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}if(In(Wn,b),(f.mode&1)===0)f.memoizedState=null;else switch(k){case"forwards":for(m=f.child,k=null;m!==null;)l=m.alternate,l!==null&&qo(l)===null&&(k=m),m=m.sibling;m=k,m===null?(k=f.child,f.child=null):(k=m.sibling,m.sibling=null),mm(f,!1,k,m,R);break;case"backwards":for(m=null,k=f.child,f.child=null;k!==null;){if(l=k.alternate,l!==null&&qo(l)===null){f.child=k;break}l=k.sibling,k.sibling=m,m=k,k=l}mm(f,!0,m,null,R);break;case"together":mm(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function $d(l,f){(f.mode&1)===0&&l!==null&&(l.alternate=null,f.alternate=null,f.flags|=2)}function Su(l,f,m){if(l!==null&&(f.dependencies=l.dependencies),cc|=f.lanes,(m&f.childLanes)===0)return null;if(l!==null&&f.child!==l.child)throw Error(e(153));if(f.child!==null){for(l=f.child,m=xl(l,l.pendingProps),f.child=m,m.return=f;l.sibling!==null;)l=l.sibling,m=m.sibling=xl(l,l.pendingProps),m.return=f;m.sibling=null}return f.child}function _C(l,f,m){switch(f.tag){case 3:ry(f),at();break;case 5:jd(f);break;case 1:Fi(f.type)&&bu(f);break;case 4:cl(f,f.stateNode.containerInfo);break;case 10:var b=f.type._context,k=f.memoizedProps.value;In(Lr,b._currentValue),b._currentValue=k;break;case 13:if(b=f.memoizedState,b!==null)return b.dehydrated!==null?(In(Wn,Wn.current&1),f.flags|=128,null):(m&f.child.childLanes)!==0?oy(l,f,m):(In(Wn,Wn.current&1),l=Su(l,f,m),l!==null?l.sibling:null);In(Wn,Wn.current&1);break;case 19:if(b=(m&f.childLanes)!==0,(l.flags&128)!==0){if(b)return sy(l,f,m);f.flags|=128}if(k=f.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),In(Wn,Wn.current),b)break;return null;case 22:case 23:return f.lanes=0,ey(l,f,m)}return Su(l,f,m)}var uy,gm,ly,cy;uy=function(l,f){for(var m=f.child;m!==null;){if(m.tag===5||m.tag===6)l.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},gm=function(){},ly=function(l,f,m,b){var k=l.memoizedProps;if(k!==b){l=f.stateNode,za(Wr.current);var R=null;switch(m){case"input":k=Xe(l,k),b=Xe(l,b),R=[];break;case"select":k=se({},k,{value:void 0}),b=se({},b,{value:void 0}),R=[];break;case"textarea":k=ht(l,k),b=ht(l,b),R=[];break;default:typeof k.onClick!="function"&&typeof b.onClick=="function"&&(l.onclick=al)}Bn(m,b);var q;m=null;for(Me in k)if(!b.hasOwnProperty(Me)&&k.hasOwnProperty(Me)&&k[Me]!=null)if(Me==="style"){var pe=k[Me];for(q in pe)pe.hasOwnProperty(q)&&(m||(m={}),m[q]="")}else Me!=="dangerouslySetInnerHTML"&&Me!=="children"&&Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&Me!=="autoFocus"&&(i.hasOwnProperty(Me)?R||(R=[]):(R=R||[]).push(Me,null));for(Me in b){var xe=b[Me];if(pe=k!=null?k[Me]:void 0,b.hasOwnProperty(Me)&&xe!==pe&&(xe!=null||pe!=null))if(Me==="style")if(pe){for(q in pe)!pe.hasOwnProperty(q)||xe&&xe.hasOwnProperty(q)||(m||(m={}),m[q]="");for(q in xe)xe.hasOwnProperty(q)&&pe[q]!==xe[q]&&(m||(m={}),m[q]=xe[q])}else m||(R||(R=[]),R.push(Me,m)),m=xe;else Me==="dangerouslySetInnerHTML"?(xe=xe?xe.__html:void 0,pe=pe?pe.__html:void 0,xe!=null&&pe!==xe&&(R=R||[]).push(Me,xe)):Me==="children"?typeof xe!="string"&&typeof xe!="number"||(R=R||[]).push(Me,""+xe):Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&(i.hasOwnProperty(Me)?(xe!=null&&Me==="onScroll"&&Tn("scroll",l),R||pe===xe||(R=[])):(R=R||[]).push(Me,xe))}m&&(R=R||[]).push("style",m);var Me=R;(f.updateQueue=Me)&&(f.flags|=4)}},cy=function(l,f,m,b){m!==b&&(f.flags|=4)};function Nh(l,f){if(!We)switch(l.tailMode){case"hidden":f=l.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function Oi(l){var f=l.alternate!==null&&l.alternate.child===l.child,m=0,b=0;if(f)for(var k=l.child;k!==null;)m|=k.lanes|k.childLanes,b|=k.subtreeFlags&14680064,b|=k.flags&14680064,k.return=l,k=k.sibling;else for(k=l.child;k!==null;)m|=k.lanes|k.childLanes,b|=k.subtreeFlags,b|=k.flags,k.return=l,k=k.sibling;return l.subtreeFlags|=b,l.childLanes=m,f}function SC(l,f,m){var b=f.pendingProps;switch(Pe(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oi(f),null;case 1:return Fi(f.type)&&rf(),Oi(f),null;case 3:return b=f.stateNode,ga(),An(Di),An(Jr),Ah(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(l===null||l.child===null)&&(rr(f)?f.flags|=4:l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Ge!==null&&(Nm(Ge),Ge=null))),gm(l,f),Oi(f),null;case 5:Sh(f);var k=za(_s.current);if(m=f.type,l!==null&&f.stateNode!=null)ly(l,f,m,b,k),l.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!b){if(f.stateNode===null)throw Error(e(166));return Oi(f),null}if(l=za(Wr.current),rr(f)){b=f.stateNode,m=f.type;var R=f.memoizedProps;switch(b[ma]=f,b[sl]=R,l=(f.mode&1)!==0,m){case"dialog":Tn("cancel",b),Tn("close",b);break;case"iframe":case"object":case"embed":Tn("load",b);break;case"video":case"audio":for(k=0;k<xs.length;k++)Tn(xs[k],b);break;case"source":Tn("error",b);break;case"img":case"image":case"link":Tn("error",b),Tn("load",b);break;case"details":Tn("toggle",b);break;case"input":ee(b,R),Tn("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!R.multiple},Tn("invalid",b);break;case"textarea":ut(b,R),Tn("invalid",b)}Bn(m,R),k=null;for(var q in R)if(R.hasOwnProperty(q)){var pe=R[q];q==="children"?typeof pe=="string"?b.textContent!==pe&&(R.suppressHydrationWarning!==!0&&nf(b.textContent,pe,l),k=["children",pe]):typeof pe=="number"&&b.textContent!==""+pe&&(R.suppressHydrationWarning!==!0&&nf(b.textContent,pe,l),k=["children",""+pe]):i.hasOwnProperty(q)&&pe!=null&&q==="onScroll"&&Tn("scroll",b)}switch(m){case"input":be(b),ft(b,R,!0);break;case"textarea":be(b),Vt(b);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(b.onclick=al)}b=k,f.updateQueue=b,b!==null&&(f.flags|=4)}else{q=k.nodeType===9?k:k.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=jt(m)),l==="http://www.w3.org/1999/xhtml"?m==="script"?(l=q.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof b.is=="string"?l=q.createElement(m,{is:b.is}):(l=q.createElement(m),m==="select"&&(q=l,b.multiple?q.multiple=!0:b.size&&(q.size=b.size))):l=q.createElementNS(l,m),l[ma]=f,l[sl]=b,uy(l,f,!1,!1),f.stateNode=l;e:{switch(q=Pt(m,b),m){case"dialog":Tn("cancel",l),Tn("close",l),k=b;break;case"iframe":case"object":case"embed":Tn("load",l),k=b;break;case"video":case"audio":for(k=0;k<xs.length;k++)Tn(xs[k],l);k=b;break;case"source":Tn("error",l),k=b;break;case"img":case"image":case"link":Tn("error",l),Tn("load",l),k=b;break;case"details":Tn("toggle",l),k=b;break;case"input":ee(l,b),k=Xe(l,b),Tn("invalid",l);break;case"option":k=b;break;case"select":l._wrapperState={wasMultiple:!!b.multiple},k=se({},b,{value:void 0}),Tn("invalid",l);break;case"textarea":ut(l,b),k=ht(l,b),Tn("invalid",l);break;default:k=b}Bn(m,k),pe=k;for(R in pe)if(pe.hasOwnProperty(R)){var xe=pe[R];R==="style"?Yt(l,xe):R==="dangerouslySetInnerHTML"?(xe=xe?xe.__html:void 0,xe!=null&&lt(l,xe)):R==="children"?typeof xe=="string"?(m!=="textarea"||xe!=="")&&Ut(l,xe):typeof xe=="number"&&Ut(l,""+xe):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(i.hasOwnProperty(R)?xe!=null&&R==="onScroll"&&Tn("scroll",l):xe!=null&&I(l,R,xe,q))}switch(m){case"input":be(l),ft(l,b,!1);break;case"textarea":be(l),Vt(l);break;case"option":b.value!=null&&l.setAttribute("value",""+we(b.value));break;case"select":l.multiple=!!b.multiple,R=b.value,R!=null?nt(l,!!b.multiple,R,!1):b.defaultValue!=null&&nt(l,!!b.multiple,b.defaultValue,!0);break;default:typeof k.onClick=="function"&&(l.onclick=al)}switch(m){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Oi(f),null;case 6:if(l&&f.stateNode!=null)cy(l,f,l.memoizedProps,b);else{if(typeof b!="string"&&f.stateNode===null)throw Error(e(166));if(m=za(_s.current),za(Wr.current),rr(f)){if(b=f.stateNode,m=f.memoizedProps,b[ma]=f,(R=b.nodeValue!==m)&&(l=Be,l!==null))switch(l.tag){case 3:nf(b.nodeValue,m,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&nf(b.nodeValue,m,(l.mode&1)!==0)}R&&(f.flags|=4)}else b=(m.nodeType===9?m:m.ownerDocument).createTextNode(b),b[ma]=f,f.stateNode=b}return Oi(f),null;case 13:if(An(Wn),b=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(We&&je!==null&&(f.mode&1)!==0&&(f.flags&128)===0)nn(),at(),f.flags|=98560,R=!1;else if(R=rr(f),b!==null&&b.dehydrated!==null){if(l===null){if(!R)throw Error(e(318));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(e(317));R[ma]=f}else at(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Oi(f),R=!1}else Ge!==null&&(Nm(Ge),Ge=null),R=!0;if(!R)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=m,f):(b=b!==null,b!==(l!==null&&l.memoizedState!==null)&&b&&(f.child.flags|=8192,(f.mode&1)!==0&&(l===null||(Wn.current&1)!==0?Zr===0&&(Zr=3):Rm())),f.updateQueue!==null&&(f.flags|=4),Oi(f),null);case 4:return ga(),gm(l,f),l===null&&mu(f.stateNode.containerInfo),Oi(f),null;case 10:return Gn(f.type._context),Oi(f),null;case 17:return Fi(f.type)&&rf(),Oi(f),null;case 19:if(An(Wn),R=f.memoizedState,R===null)return Oi(f),null;if(b=(f.flags&128)!==0,q=R.rendering,q===null)if(b)Nh(R,!1);else{if(Zr!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(q=qo(l),q!==null){for(f.flags|=128,Nh(R,!1),b=q.updateQueue,b!==null&&(f.updateQueue=b,f.flags|=4),f.subtreeFlags=0,b=m,m=f.child;m!==null;)R=m,l=b,R.flags&=14680066,q=R.alternate,q===null?(R.childLanes=0,R.lanes=l,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=q.childLanes,R.lanes=q.lanes,R.child=q.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=q.memoizedProps,R.memoizedState=q.memoizedState,R.updateQueue=q.updateQueue,R.type=q.type,l=q.dependencies,R.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),m=m.sibling;return In(Wn,Wn.current&1|2),f.child}l=l.sibling}R.tail!==null&&Vn()>gf&&(f.flags|=128,b=!0,Nh(R,!1),f.lanes=4194304)}else{if(!b)if(l=qo(q),l!==null){if(f.flags|=128,b=!0,m=l.updateQueue,m!==null&&(f.updateQueue=m,f.flags|=4),Nh(R,!0),R.tail===null&&R.tailMode==="hidden"&&!q.alternate&&!We)return Oi(f),null}else 2*Vn()-R.renderingStartTime>gf&&m!==1073741824&&(f.flags|=128,b=!0,Nh(R,!1),f.lanes=4194304);R.isBackwards?(q.sibling=f.child,f.child=q):(m=R.last,m!==null?m.sibling=q:f.child=q,R.last=q)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=Vn(),f.sibling=null,m=Wn.current,In(Wn,b?m&1|2:m&1),f):(Oi(f),null);case 22:case 23:return Pm(),b=f.memoizedState!==null,l!==null&&l.memoizedState!==null!==b&&(f.flags|=8192),b&&(f.mode&1)!==0?($o&1073741824)!==0&&(Oi(f),f.subtreeFlags&6&&(f.flags|=8192)):Oi(f),null;case 24:return null;case 25:return null}throw Error(e(156,f.tag))}function CC(l,f){switch(Pe(f),f.tag){case 1:return Fi(f.type)&&rf(),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return ga(),An(Di),An(Jr),Ah(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 5:return Sh(f),null;case 13:if(An(Wn),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(e(340));at()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return An(Wn),null;case 4:return ga(),null;case 10:return Gn(f.type._context),null;case 22:case 23:return Pm(),null;case 24:return null;default:return null}}var Kd=!1,Bi=!1,AC=typeof WeakSet=="function"?WeakSet:Set,ct=null;function vf(l,f){var m=l.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(b){Er(l,f,b)}else m.current=null}function ym(l,f,m){try{m()}catch(b){Er(l,f,b)}}var fy=!1;function kC(l,f){if(ic=Ku,l=Sr(),zo(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var b=m.getSelection&&m.getSelection();if(b&&b.rangeCount!==0){m=b.anchorNode;var k=b.anchorOffset,R=b.focusNode;b=b.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var q=0,pe=-1,xe=-1,Me=0,Qe=0,Ze=l,Ye=null;t:for(;;){for(var it;Ze!==m||k!==0&&Ze.nodeType!==3||(pe=q+k),Ze!==R||b!==0&&Ze.nodeType!==3||(xe=q+b),Ze.nodeType===3&&(q+=Ze.nodeValue.length),(it=Ze.firstChild)!==null;)Ye=Ze,Ze=it;for(;;){if(Ze===l)break t;if(Ye===m&&++Me===k&&(pe=q),Ye===R&&++Qe===b&&(xe=q),(it=Ze.nextSibling)!==null)break;Ze=Ye,Ye=Ze.parentNode}Ze=it}m=pe===-1||xe===-1?null:{start:pe,end:xe}}else m=null}m=m||{start:0,end:0}}else m=null;for(yu={focusedElem:l,selectionRange:m},Ku=!1,ct=f;ct!==null;)if(f=ct,l=f.child,(f.subtreeFlags&1028)!==0&&l!==null)l.return=f,ct=l;else for(;ct!==null;){f=ct;try{var gt=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var bt=gt.memoizedProps,Fr=gt.memoizedState,Ie=f.stateNode,Ae=Ie.getSnapshotBeforeUpdate(f.elementType===f.type?bt:qa(f.type,bt),Fr);Ie.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var Te=f.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(et){Er(f,f.return,et)}if(l=f.sibling,l!==null){l.return=f.return,ct=l;break}ct=f.return}return gt=fy,fy=!1,gt}function Ih(l,f,m){var b=f.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var k=b=b.next;do{if((k.tag&l)===l){var R=k.destroy;k.destroy=void 0,R!==void 0&&ym(f,m,R)}k=k.next}while(k!==b)}}function Xd(l,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&l)===l){var b=m.create;m.destroy=b()}m=m.next}while(m!==f)}}function xm(l){var f=l.ref;if(f!==null){var m=l.stateNode;switch(l.tag){case 5:l=m;break;default:l=m}typeof f=="function"?f(l):f.current=l}}function hy(l){var f=l.alternate;f!==null&&(l.alternate=null,hy(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&(delete f[ma],delete f[sl],delete f[Li],delete f[rm],delete f[im])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function dy(l){return l.tag===5||l.tag===3||l.tag===4}function py(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||dy(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function wm(l,f,m){var b=l.tag;if(b===5||b===6)l=l.stateNode,f?m.nodeType===8?m.parentNode.insertBefore(l,f):m.insertBefore(l,f):(m.nodeType===8?(f=m.parentNode,f.insertBefore(l,m)):(f=m,f.appendChild(l)),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=al));else if(b!==4&&(l=l.child,l!==null))for(wm(l,f,m),l=l.sibling;l!==null;)wm(l,f,m),l=l.sibling}function bm(l,f,m){var b=l.tag;if(b===5||b===6)l=l.stateNode,f?m.insertBefore(l,f):m.appendChild(l);else if(b!==4&&(l=l.child,l!==null))for(bm(l,f,m),l=l.sibling;l!==null;)bm(l,f,m),l=l.sibling}var bi=null,Ha=!1;function pl(l,f,m){for(m=m.child;m!==null;)vy(l,f,m),m=m.sibling}function vy(l,f,m){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(Ks,m)}catch{}switch(m.tag){case 5:Bi||vf(m,f);case 6:var b=bi,k=Ha;bi=null,pl(l,f,m),bi=b,Ha=k,bi!==null&&(Ha?(l=bi,m=m.stateNode,l.nodeType===8?l.parentNode.removeChild(m):l.removeChild(m)):bi.removeChild(m.stateNode));break;case 18:bi!==null&&(Ha?(l=bi,m=m.stateNode,l.nodeType===8?wh(l.parentNode,m):l.nodeType===1&&wh(l,m),tu(l)):wh(bi,m.stateNode));break;case 4:b=bi,k=Ha,bi=m.stateNode.containerInfo,Ha=!0,pl(l,f,m),bi=b,Ha=k;break;case 0:case 11:case 14:case 15:if(!Bi&&(b=m.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){k=b=b.next;do{var R=k,q=R.destroy;R=R.tag,q!==void 0&&((R&2)!==0||(R&4)!==0)&&ym(m,f,q),k=k.next}while(k!==b)}pl(l,f,m);break;case 1:if(!Bi&&(vf(m,f),b=m.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=m.memoizedProps,b.state=m.memoizedState,b.componentWillUnmount()}catch(pe){Er(m,f,pe)}pl(l,f,m);break;case 21:pl(l,f,m);break;case 22:m.mode&1?(Bi=(b=Bi)||m.memoizedState!==null,pl(l,f,m),Bi=b):pl(l,f,m);break;default:pl(l,f,m)}}function my(l){var f=l.updateQueue;if(f!==null){l.updateQueue=null;var m=l.stateNode;m===null&&(m=l.stateNode=new AC),f.forEach(function(b){var k=FC.bind(null,l,b);m.has(b)||(m.add(b),b.then(k,k))})}}function Ga(l,f){var m=f.deletions;if(m!==null)for(var b=0;b<m.length;b++){var k=m[b];try{var R=l,q=f,pe=q;e:for(;pe!==null;){switch(pe.tag){case 5:bi=pe.stateNode,Ha=!1;break e;case 3:bi=pe.stateNode.containerInfo,Ha=!0;break e;case 4:bi=pe.stateNode.containerInfo,Ha=!0;break e}pe=pe.return}if(bi===null)throw Error(e(160));vy(R,q,k),bi=null,Ha=!1;var xe=k.alternate;xe!==null&&(xe.return=null),k.return=null}catch(Me){Er(k,f,Me)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)gy(f,l),f=f.sibling}function gy(l,f){var m=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Ga(f,l),Cs(l),b&4){try{Ih(3,l,l.return),Xd(3,l)}catch(bt){Er(l,l.return,bt)}try{Ih(5,l,l.return)}catch(bt){Er(l,l.return,bt)}}break;case 1:Ga(f,l),Cs(l),b&512&&m!==null&&vf(m,m.return);break;case 5:if(Ga(f,l),Cs(l),b&512&&m!==null&&vf(m,m.return),l.flags&32){var k=l.stateNode;try{Ut(k,"")}catch(bt){Er(l,l.return,bt)}}if(b&4&&(k=l.stateNode,k!=null)){var R=l.memoizedProps,q=m!==null?m.memoizedProps:R,pe=l.type,xe=l.updateQueue;if(l.updateQueue=null,xe!==null)try{pe==="input"&&R.type==="radio"&&R.name!=null&&Je(k,R),Pt(pe,q);var Me=Pt(pe,R);for(q=0;q<xe.length;q+=2){var Qe=xe[q],Ze=xe[q+1];Qe==="style"?Yt(k,Ze):Qe==="dangerouslySetInnerHTML"?lt(k,Ze):Qe==="children"?Ut(k,Ze):I(k,Qe,Ze,Me)}switch(pe){case"input":Rt(k,R);break;case"textarea":sn(k,R);break;case"select":var Ye=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!R.multiple;var it=R.value;it!=null?nt(k,!!R.multiple,it,!1):Ye!==!!R.multiple&&(R.defaultValue!=null?nt(k,!!R.multiple,R.defaultValue,!0):nt(k,!!R.multiple,R.multiple?[]:"",!1))}k[sl]=R}catch(bt){Er(l,l.return,bt)}}break;case 6:if(Ga(f,l),Cs(l),b&4){if(l.stateNode===null)throw Error(e(162));k=l.stateNode,R=l.memoizedProps;try{k.nodeValue=R}catch(bt){Er(l,l.return,bt)}}break;case 3:if(Ga(f,l),Cs(l),b&4&&m!==null&&m.memoizedState.isDehydrated)try{tu(f.containerInfo)}catch(bt){Er(l,l.return,bt)}break;case 4:Ga(f,l),Cs(l);break;case 13:Ga(f,l),Cs(l),k=l.child,k.flags&8192&&(R=k.memoizedState!==null,k.stateNode.isHidden=R,!R||k.alternate!==null&&k.alternate.memoizedState!==null||(Cm=Vn())),b&4&&my(l);break;case 22:if(Qe=m!==null&&m.memoizedState!==null,l.mode&1?(Bi=(Me=Bi)||Qe,Ga(f,l),Bi=Me):Ga(f,l),Cs(l),b&8192){if(Me=l.memoizedState!==null,(l.stateNode.isHidden=Me)&&!Qe&&(l.mode&1)!==0)for(ct=l,Qe=l.child;Qe!==null;){for(Ze=ct=Qe;ct!==null;){switch(Ye=ct,it=Ye.child,Ye.tag){case 0:case 11:case 14:case 15:Ih(4,Ye,Ye.return);break;case 1:vf(Ye,Ye.return);var gt=Ye.stateNode;if(typeof gt.componentWillUnmount=="function"){b=Ye,m=Ye.return;try{f=b,gt.props=f.memoizedProps,gt.state=f.memoizedState,gt.componentWillUnmount()}catch(bt){Er(b,m,bt)}}break;case 5:vf(Ye,Ye.return);break;case 22:if(Ye.memoizedState!==null){wy(Ze);continue}}it!==null?(it.return=Ye,ct=it):wy(Ze)}Qe=Qe.sibling}e:for(Qe=null,Ze=l;;){if(Ze.tag===5){if(Qe===null){Qe=Ze;try{k=Ze.stateNode,Me?(R=k.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(pe=Ze.stateNode,xe=Ze.memoizedProps.style,q=xe!=null&&xe.hasOwnProperty("display")?xe.display:null,pe.style.display=un("display",q))}catch(bt){Er(l,l.return,bt)}}}else if(Ze.tag===6){if(Qe===null)try{Ze.stateNode.nodeValue=Me?"":Ze.memoizedProps}catch(bt){Er(l,l.return,bt)}}else if((Ze.tag!==22&&Ze.tag!==23||Ze.memoizedState===null||Ze===l)&&Ze.child!==null){Ze.child.return=Ze,Ze=Ze.child;continue}if(Ze===l)break e;for(;Ze.sibling===null;){if(Ze.return===null||Ze.return===l)break e;Qe===Ze&&(Qe=null),Ze=Ze.return}Qe===Ze&&(Qe=null),Ze.sibling.return=Ze.return,Ze=Ze.sibling}}break;case 19:Ga(f,l),Cs(l),b&4&&my(l);break;case 21:break;default:Ga(f,l),Cs(l)}}function Cs(l){var f=l.flags;if(f&2){try{e:{for(var m=l.return;m!==null;){if(dy(m)){var b=m;break e}m=m.return}throw Error(e(160))}switch(b.tag){case 5:var k=b.stateNode;b.flags&32&&(Ut(k,""),b.flags&=-33);var R=py(l);bm(l,R,k);break;case 3:case 4:var q=b.stateNode.containerInfo,pe=py(l);wm(l,pe,q);break;default:throw Error(e(161))}}catch(xe){Er(l,l.return,xe)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function EC(l,f,m){ct=l,yy(l)}function yy(l,f,m){for(var b=(l.mode&1)!==0;ct!==null;){var k=ct,R=k.child;if(k.tag===22&&b){var q=k.memoizedState!==null||Kd;if(!q){var pe=k.alternate,xe=pe!==null&&pe.memoizedState!==null||Bi;pe=Kd;var Me=Bi;if(Kd=q,(Bi=xe)&&!Me)for(ct=k;ct!==null;)q=ct,xe=q.child,q.tag===22&&q.memoizedState!==null?by(k):xe!==null?(xe.return=q,ct=xe):by(k);for(;R!==null;)ct=R,yy(R),R=R.sibling;ct=k,Kd=pe,Bi=Me}xy(l)}else(k.subtreeFlags&8772)!==0&&R!==null?(R.return=k,ct=R):xy(l)}}function xy(l){for(;ct!==null;){var f=ct;if((f.flags&8772)!==0){var m=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:Bi||Xd(5,f);break;case 1:var b=f.stateNode;if(f.flags&4&&!Bi)if(m===null)b.componentDidMount();else{var k=f.elementType===f.type?m.memoizedProps:qa(f.type,m.memoizedProps);b.componentDidUpdate(k,m.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var R=f.updateQueue;R!==null&&_o(f,R,b);break;case 3:var q=f.updateQueue;if(q!==null){if(m=null,f.child!==null)switch(f.child.tag){case 5:m=f.child.stateNode;break;case 1:m=f.child.stateNode}_o(f,q,m)}break;case 5:var pe=f.stateNode;if(m===null&&f.flags&4){m=pe;var xe=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":xe.autoFocus&&m.focus();break;case"img":xe.src&&(m.src=xe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var Me=f.alternate;if(Me!==null){var Qe=Me.memoizedState;if(Qe!==null){var Ze=Qe.dehydrated;Ze!==null&&tu(Ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Bi||f.flags&512&&xm(f)}catch(Ye){Er(f,f.return,Ye)}}if(f===l){ct=null;break}if(m=f.sibling,m!==null){m.return=f.return,ct=m;break}ct=f.return}}function wy(l){for(;ct!==null;){var f=ct;if(f===l){ct=null;break}var m=f.sibling;if(m!==null){m.return=f.return,ct=m;break}ct=f.return}}function by(l){for(;ct!==null;){var f=ct;try{switch(f.tag){case 0:case 11:case 15:var m=f.return;try{Xd(4,f)}catch(xe){Er(f,m,xe)}break;case 1:var b=f.stateNode;if(typeof b.componentDidMount=="function"){var k=f.return;try{b.componentDidMount()}catch(xe){Er(f,k,xe)}}var R=f.return;try{xm(f)}catch(xe){Er(f,R,xe)}break;case 5:var q=f.return;try{xm(f)}catch(xe){Er(f,q,xe)}}}catch(xe){Er(f,f.return,xe)}if(f===l){ct=null;break}var pe=f.sibling;if(pe!==null){pe.return=f.return,ct=pe;break}ct=f.return}}var NC=Math.ceil,Yd=C.ReactCurrentDispatcher,_m=C.ReactCurrentOwner,wa=C.ReactCurrentBatchConfig,_n=0,hi=null,qr=null,_i=0,$o=0,mf=Vo(0),Zr=0,Ph=null,cc=0,Jd=0,Sm=0,Rh=null,Co=null,Cm=0,gf=1/0,Cu=null,Qd=!1,Am=null,vl=null,Zd=!1,ml=null,ep=0,Th=0,km=null,tp=-1,np=0;function uo(){return(_n&6)!==0?Vn():tp!==-1?tp:tp=Vn()}function gl(l){return(l.mode&1)===0?1:(_n&2)!==0&&_i!==0?_i&-_i:cr.transition!==null?(np===0&&(np=zl()),np):(l=mn,l!==0||(l=window.event,l=l===void 0?16:ru(l.type)),l)}function $a(l,f,m,b){if(50<Th)throw Th=0,km=null,Error(e(185));Js(l,m,b),((_n&2)===0||l!==hi)&&(l===hi&&((_n&2)===0&&(Jd|=m),Zr===4&&yl(l,_i)),Ao(l,b),m===1&&_n===0&&(f.mode&1)===0&&(gf=Vn()+500,ac&&L()))}function Ao(l,f){var m=l.callbackNode;Rr(l,f);var b=Ys(l,l===hi?_i:0);if(b===0)m!==null&&$s(m),l.callbackNode=null,l.callbackPriority=0;else if(f=b&-b,l.callbackPriority!==f){if(m!=null&&$s(m),f===1)l.tag===0?P(Sy.bind(null,l)):S(Sy.bind(null,l)),tm(function(){(_n&6)===0&&L()}),m=null;else{switch(Qs(b)){case 1:m=zu;break;case 4:m=Qi;break;case 16:m=us;break;case 536870912:m=Vu;break;default:m=us}m=Ry(m,_y.bind(null,l))}l.callbackPriority=f,l.callbackNode=m}}function _y(l,f){if(tp=-1,np=0,(_n&6)!==0)throw Error(e(327));var m=l.callbackNode;if(yf()&&l.callbackNode!==m)return null;var b=Ys(l,l===hi?_i:0);if(b===0)return null;if((b&30)!==0||(b&l.expiredLanes)!==0||f)f=rp(l,b);else{f=b;var k=_n;_n|=2;var R=Ay();(hi!==l||_i!==f)&&(Cu=null,gf=Vn()+500,hc(l,f));do try{RC();break}catch(pe){Cy(l,pe)}while(!0);wn(),Yd.current=R,_n=k,qr!==null?f=0:(hi=null,_i=0,f=Zr)}if(f!==0){if(f===2&&(k=Mo(l),k!==0&&(b=k,f=Em(l,k))),f===1)throw m=Ph,hc(l,0),yl(l,b),Ao(l,Vn()),m;if(f===6)yl(l,b);else{if(k=l.current.alternate,(b&30)===0&&!IC(k)&&(f=rp(l,b),f===2&&(R=Mo(l),R!==0&&(b=R,f=Em(l,R))),f===1))throw m=Ph,hc(l,0),yl(l,b),Ao(l,Vn()),m;switch(l.finishedWork=k,l.finishedLanes=b,f){case 0:case 1:throw Error(e(345));case 2:dc(l,Co,Cu);break;case 3:if(yl(l,b),(b&130023424)===b&&(f=Cm+500-Vn(),10<f)){if(Ys(l,0)!==0)break;if(k=l.suspendedLanes,(k&b)!==b){uo(),l.pingedLanes|=l.suspendedLanes&k;break}l.timeoutHandle=xh(dc.bind(null,l,Co,Cu),f);break}dc(l,Co,Cu);break;case 4:if(yl(l,b),(b&4194240)===b)break;for(f=l.eventTimes,k=-1;0<b;){var q=31-wr(b);R=1<<q,q=f[q],q>k&&(k=q),b&=~R}if(b=k,b=Vn()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*NC(b/1960))-b,10<b){l.timeoutHandle=xh(dc.bind(null,l,Co,Cu),b);break}dc(l,Co,Cu);break;case 5:dc(l,Co,Cu);break;default:throw Error(e(329))}}}return Ao(l,Vn()),l.callbackNode===m?_y.bind(null,l):null}function Em(l,f){var m=Rh;return l.current.memoizedState.isDehydrated&&(hc(l,f).flags|=256),l=rp(l,f),l!==2&&(f=Co,Co=m,f!==null&&Nm(f)),l}function Nm(l){Co===null?Co=l:Co.push.apply(Co,l)}function IC(l){for(var f=l;;){if(f.flags&16384){var m=f.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var b=0;b<m.length;b++){var k=m[b],R=k.getSnapshot;k=k.value;try{if(!tr(R(),k))return!1}catch{return!1}}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function yl(l,f){for(f&=~Sm,f&=~Jd,l.suspendedLanes|=f,l.pingedLanes&=~f,l=l.expirationTimes;0<f;){var m=31-wr(f),b=1<<m;l[m]=-1,f&=~b}}function Sy(l){if((_n&6)!==0)throw Error(e(327));yf();var f=Ys(l,0);if((f&1)===0)return Ao(l,Vn()),null;var m=rp(l,f);if(l.tag!==0&&m===2){var b=Mo(l);b!==0&&(f=b,m=Em(l,b))}if(m===1)throw m=Ph,hc(l,0),yl(l,f),Ao(l,Vn()),m;if(m===6)throw Error(e(345));return l.finishedWork=l.current.alternate,l.finishedLanes=f,dc(l,Co,Cu),Ao(l,Vn()),null}function Im(l,f){var m=_n;_n|=1;try{return l(f)}finally{_n=m,_n===0&&(gf=Vn()+500,ac&&L())}}function fc(l){ml!==null&&ml.tag===0&&(_n&6)===0&&yf();var f=_n;_n|=1;var m=wa.transition,b=mn;try{if(wa.transition=null,mn=1,l)return l()}finally{mn=b,wa.transition=m,_n=f,(_n&6)===0&&L()}}function Pm(){$o=mf.current,An(mf)}function hc(l,f){l.finishedWork=null,l.finishedLanes=0;var m=l.timeoutHandle;if(m!==-1&&(l.timeoutHandle=-1,Fd(m)),qr!==null)for(m=qr.return;m!==null;){var b=m;switch(Pe(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&rf();break;case 3:ga(),An(Di),An(Jr),Ah();break;case 5:Sh(b);break;case 4:ga();break;case 13:An(Wn);break;case 19:An(Wn);break;case 10:Gn(b.type._context);break;case 22:case 23:Pm()}m=m.return}if(hi=l,qr=l=xl(l.current,null),_i=$o=f,Zr=0,Ph=null,Sm=Jd=cc=0,Co=Rh=null,Ln!==null){for(f=0;f<Ln.length;f++)if(m=Ln[f],b=m.interleaved,b!==null){m.interleaved=null;var k=b.next,R=m.pending;if(R!==null){var q=R.next;R.next=k,b.next=q}m.pending=b}Ln=null}return l}function Cy(l,f){do{var m=qr;try{if(wn(),of.current=qd,fl){for(var b=$n.memoizedState;b!==null;){var k=b.queue;k!==null&&(k.pending=null),b=b.next}fl=!1}if(ya=0,pr=kr=$n=null,Va=!1,hl=0,_m.current=null,m===null||m.return===null){Zr=1,Ph=f,qr=null;break}e:{var R=l,q=m.return,pe=m,xe=f;if(f=_i,pe.flags|=32768,xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var Me=xe,Qe=pe,Ze=Qe.tag;if((Qe.mode&1)===0&&(Ze===0||Ze===11||Ze===15)){var Ye=Qe.alternate;Ye?(Qe.updateQueue=Ye.updateQueue,Qe.memoizedState=Ye.memoizedState,Qe.lanes=Ye.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var it=X2(q);if(it!==null){it.flags&=-257,Y2(it,q,pe,R,f),it.mode&1&&K2(R,Me,f),f=it,xe=Me;var gt=f.updateQueue;if(gt===null){var bt=new Set;bt.add(xe),f.updateQueue=bt}else gt.add(xe);break e}else{if((f&1)===0){K2(R,Me,f),Rm();break e}xe=Error(e(426))}}else if(We&&pe.mode&1){var Fr=X2(q);if(Fr!==null){(Fr.flags&65536)===0&&(Fr.flags|=256),Y2(Fr,q,pe,R,f),tt(pf(xe,pe));break e}}R=xe=pf(xe,pe),Zr!==4&&(Zr=2),Rh===null?Rh=[R]:Rh.push(R),R=q;do{switch(R.tag){case 3:R.flags|=65536,f&=-f,R.lanes|=f;var Ie=G2(R,xe,f);Fn(R,Ie);break e;case 1:pe=xe;var Ae=R.type,Te=R.stateNode;if((R.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(vl===null||!vl.has(Te)))){R.flags|=65536,f&=-f,R.lanes|=f;var et=$2(R,pe,f);Fn(R,et);break e}}R=R.return}while(R!==null)}Ey(m)}catch(At){f=At,qr===m&&m!==null&&(qr=m=m.return);continue}break}while(!0)}function Ay(){var l=Yd.current;return Yd.current=qd,l===null?qd:l}function Rm(){(Zr===0||Zr===3||Zr===2)&&(Zr=4),hi===null||(cc&268435455)===0&&(Jd&268435455)===0||yl(hi,_i)}function rp(l,f){var m=_n;_n|=2;var b=Ay();(hi!==l||_i!==f)&&(Cu=null,hc(l,f));do try{PC();break}catch(k){Cy(l,k)}while(!0);if(wn(),_n=m,Yd.current=b,qr!==null)throw Error(e(261));return hi=null,_i=0,Zr}function PC(){for(;qr!==null;)ky(qr)}function RC(){for(;qr!==null&&!Uu();)ky(qr)}function ky(l){var f=Py(l.alternate,l,$o);l.memoizedProps=l.pendingProps,f===null?Ey(l):qr=f,_m.current=null}function Ey(l){var f=l;do{var m=f.alternate;if(l=f.return,(f.flags&32768)===0){if(m=SC(m,f,$o),m!==null){qr=m;return}}else{if(m=CC(m,f),m!==null){m.flags&=32767,qr=m;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Zr=6,qr=null;return}}if(f=f.sibling,f!==null){qr=f;return}qr=f=l}while(f!==null);Zr===0&&(Zr=5)}function dc(l,f,m){var b=mn,k=wa.transition;try{wa.transition=null,mn=1,TC(l,f,m,b)}finally{wa.transition=k,mn=b}return null}function TC(l,f,m,b){do yf();while(ml!==null);if((_n&6)!==0)throw Error(e(327));m=l.finishedWork;var k=l.finishedLanes;if(m===null)return null;if(l.finishedWork=null,l.finishedLanes=0,m===l.current)throw Error(e(177));l.callbackNode=null,l.callbackPriority=0;var R=m.lanes|m.childLanes;if(sa(l,R),l===hi&&(qr=hi=null,_i=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Zd||(Zd=!0,Ry(us,function(){return yf(),null})),R=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||R){R=wa.transition,wa.transition=null;var q=mn;mn=1;var pe=_n;_n|=4,_m.current=null,kC(l,m),gy(m,l),Yl(yu),Ku=!!ic,yu=ic=null,l.current=m,EC(m),sh(),_n=pe,mn=q,wa.transition=R}else l.current=m;if(Zd&&(Zd=!1,ml=l,ep=k),R=l.pendingLanes,R===0&&(vl=null),Hc(m.stateNode),Ao(l,Vn()),f!==null)for(b=l.onRecoverableError,m=0;m<f.length;m++)k=f[m],b(k.value,{componentStack:k.stack,digest:k.digest});if(Qd)throw Qd=!1,l=Am,Am=null,l;return(ep&1)!==0&&l.tag!==0&&yf(),R=l.pendingLanes,(R&1)!==0?l===km?Th++:(Th=0,km=l):Th=0,L(),null}function yf(){if(ml!==null){var l=Qs(ep),f=wa.transition,m=mn;try{if(wa.transition=null,mn=16>l?16:l,ml===null)var b=!1;else{if(l=ml,ml=null,ep=0,(_n&6)!==0)throw Error(e(331));var k=_n;for(_n|=4,ct=l.current;ct!==null;){var R=ct,q=R.child;if((ct.flags&16)!==0){var pe=R.deletions;if(pe!==null){for(var xe=0;xe<pe.length;xe++){var Me=pe[xe];for(ct=Me;ct!==null;){var Qe=ct;switch(Qe.tag){case 0:case 11:case 15:Ih(8,Qe,R)}var Ze=Qe.child;if(Ze!==null)Ze.return=Qe,ct=Ze;else for(;ct!==null;){Qe=ct;var Ye=Qe.sibling,it=Qe.return;if(hy(Qe),Qe===Me){ct=null;break}if(Ye!==null){Ye.return=it,ct=Ye;break}ct=it}}}var gt=R.alternate;if(gt!==null){var bt=gt.child;if(bt!==null){gt.child=null;do{var Fr=bt.sibling;bt.sibling=null,bt=Fr}while(bt!==null)}}ct=R}}if((R.subtreeFlags&2064)!==0&&q!==null)q.return=R,ct=q;else e:for(;ct!==null;){if(R=ct,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:Ih(9,R,R.return)}var Ie=R.sibling;if(Ie!==null){Ie.return=R.return,ct=Ie;break e}ct=R.return}}var Ae=l.current;for(ct=Ae;ct!==null;){q=ct;var Te=q.child;if((q.subtreeFlags&2064)!==0&&Te!==null)Te.return=q,ct=Te;else e:for(q=Ae;ct!==null;){if(pe=ct,(pe.flags&2048)!==0)try{switch(pe.tag){case 0:case 11:case 15:Xd(9,pe)}}catch(At){Er(pe,pe.return,At)}if(pe===q){ct=null;break e}var et=pe.sibling;if(et!==null){et.return=pe.return,ct=et;break e}ct=pe.return}}if(_n=k,L(),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(Ks,l)}catch{}b=!0}return b}finally{mn=m,wa.transition=f}}return!1}function Ny(l,f,m){f=pf(m,f),f=G2(l,f,1),l=hr(l,f,1),f=uo(),l!==null&&(Js(l,1,f),Ao(l,f))}function Er(l,f,m){if(l.tag===3)Ny(l,l,m);else for(;f!==null;){if(f.tag===3){Ny(f,l,m);break}else if(f.tag===1){var b=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(vl===null||!vl.has(b))){l=pf(m,l),l=$2(f,l,1),f=hr(f,l,1),l=uo(),f!==null&&(Js(f,1,l),Ao(f,l));break}}f=f.return}}function LC(l,f,m){var b=l.pingCache;b!==null&&b.delete(f),f=uo(),l.pingedLanes|=l.suspendedLanes&m,hi===l&&(_i&m)===m&&(Zr===4||Zr===3&&(_i&130023424)===_i&&500>Vn()-Cm?hc(l,0):Sm|=m),Ao(l,f)}function Iy(l,f){f===0&&((l.mode&1)===0?f=1:(f=eo,eo<<=1,(eo&130023424)===0&&(eo=4194304)));var m=uo();l=Dn(l,f),l!==null&&(Js(l,f,m),Ao(l,m))}function DC(l){var f=l.memoizedState,m=0;f!==null&&(m=f.retryLane),Iy(l,m)}function FC(l,f){var m=0;switch(l.tag){case 13:var b=l.stateNode,k=l.memoizedState;k!==null&&(m=k.retryLane);break;case 19:b=l.stateNode;break;default:throw Error(e(314))}b!==null&&b.delete(f),Iy(l,m)}var Py;Py=function(l,f,m){if(l!==null)if(l.memoizedProps!==f.pendingProps||Di.current)So=!0;else{if((l.lanes&m)===0&&(f.flags&128)===0)return So=!1,_C(l,f,m);So=(l.flags&131072)!==0}else So=!1,We&&(f.flags&1048576)!==0&&Ee(f,J,f.index);switch(f.lanes=0,f.tag){case 2:var b=f.type;$d(l,f),l=f.pendingProps;var k=ll(f,Jr.current);ir(f,m),k=sc(null,f,b,l,k,m);var R=xa();return f.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Fi(b)?(R=!0,bu(f)):R=!1,f.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Qr(f),k.updater=Hd,f.stateNode=k,k._reactInternals=f,um(f,b,l,m),f=hm(null,f,b,!0,R,m)):(f.tag=0,We&&R&&Ue(f),so(null,f,k,m),f=f.child),f;case 16:b=f.elementType;e:{switch($d(l,f),l=f.pendingProps,k=b._init,b=k(b._payload),f.type=b,k=f.tag=OC(b),l=qa(b,l),k){case 0:f=fm(null,f,b,l,m);break e;case 1:f=ny(null,f,b,l,m);break e;case 11:f=J2(null,f,b,l,m);break e;case 14:f=Q2(null,f,b,qa(b.type,l),m);break e}throw Error(e(306,b,""))}return f;case 0:return b=f.type,k=f.pendingProps,k=f.elementType===b?k:qa(b,k),fm(l,f,b,k,m);case 1:return b=f.type,k=f.pendingProps,k=f.elementType===b?k:qa(b,k),ny(l,f,b,k,m);case 3:e:{if(ry(f),l===null)throw Error(e(387));b=f.pendingProps,R=f.memoizedState,k=R.element,Mi(l,f),fi(f,b,null,m);var q=f.memoizedState;if(b=q.element,R.isDehydrated)if(R={element:b,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},f.updateQueue.baseState=R,f.memoizedState=R,f.flags&256){k=pf(Error(e(423)),f),f=iy(l,f,b,m,k);break e}else if(b!==k){k=pf(Error(e(424)),f),f=iy(l,f,b,m,k);break e}else for(je=wi(f.stateNode.containerInfo.firstChild),Be=f,We=!0,Ge=null,m=Jn(f,null,b,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(at(),b===k){f=Su(l,f,m);break e}so(l,f,b,m)}f=f.child}return f;case 5:return jd(f),l===null&&vt(f),b=f.type,k=f.pendingProps,R=l!==null?l.memoizedProps:null,q=k.children,yh(b,k)?q=null:R!==null&&yh(b,R)&&(f.flags|=32),ty(l,f),so(l,f,q,m),f.child;case 6:return l===null&&vt(f),null;case 13:return oy(l,f,m);case 4:return cl(f,f.stateNode.containerInfo),b=f.pendingProps,l===null?f.child=Cr(f,null,b,m):so(l,f,b,m),f.child;case 11:return b=f.type,k=f.pendingProps,k=f.elementType===b?k:qa(b,k),J2(l,f,b,k,m);case 7:return so(l,f,f.pendingProps,m),f.child;case 8:return so(l,f,f.pendingProps.children,m),f.child;case 12:return so(l,f,f.pendingProps.children,m),f.child;case 10:e:{if(b=f.type._context,k=f.pendingProps,R=f.memoizedProps,q=k.value,In(Lr,b._currentValue),b._currentValue=q,R!==null)if(tr(R.value,q)){if(R.children===k.children&&!Di.current){f=Su(l,f,m);break e}}else for(R=f.child,R!==null&&(R.return=f);R!==null;){var pe=R.dependencies;if(pe!==null){q=R.child;for(var xe=pe.firstContext;xe!==null;){if(xe.context===b){if(R.tag===1){xe=fr(-1,m&-m),xe.tag=2;var Me=R.updateQueue;if(Me!==null){Me=Me.shared;var Qe=Me.pending;Qe===null?xe.next=xe:(xe.next=Qe.next,Qe.next=xe),Me.pending=xe}}R.lanes|=m,xe=R.alternate,xe!==null&&(xe.lanes|=m),bn(R.return,m,f),pe.lanes|=m;break}xe=xe.next}}else if(R.tag===10)q=R.type===f.type?null:R.child;else if(R.tag===18){if(q=R.return,q===null)throw Error(e(341));q.lanes|=m,pe=q.alternate,pe!==null&&(pe.lanes|=m),bn(q,m,f),q=R.sibling}else q=R.child;if(q!==null)q.return=R;else for(q=R;q!==null;){if(q===f){q=null;break}if(R=q.sibling,R!==null){R.return=q.return,q=R;break}q=q.return}R=q}so(l,f,k.children,m),f=f.child}return f;case 9:return k=f.type,b=f.pendingProps.children,ir(f,m),k=or(k),b=b(k),f.flags|=1,so(l,f,b,m),f.child;case 14:return b=f.type,k=qa(b,f.pendingProps),k=qa(b.type,k),Q2(l,f,b,k,m);case 15:return Z2(l,f,f.type,f.pendingProps,m);case 17:return b=f.type,k=f.pendingProps,k=f.elementType===b?k:qa(b,k),$d(l,f),f.tag=1,Fi(b)?(l=!0,bu(f)):l=!1,ir(f,m),q2(f,b,k),um(f,b,k,m),hm(null,f,b,!0,l,m);case 19:return sy(l,f,m);case 22:return ey(l,f,m)}throw Error(e(156,f.tag))};function Ry(l,f){return Gs(l,f)}function MC(l,f,m,b){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ba(l,f,m,b){return new MC(l,f,m,b)}function Tm(l){return l=l.prototype,!(!l||!l.isReactComponent)}function OC(l){if(typeof l=="function")return Tm(l)?1:0;if(l!=null){if(l=l.$$typeof,l===B)return 11;if(l===oe)return 14}return 2}function xl(l,f){var m=l.alternate;return m===null?(m=ba(l.tag,f,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=f,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&14680064,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,f=l.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m}function ip(l,f,m,b,k,R){var q=2;if(b=l,typeof l=="function")Tm(l)&&(q=1);else if(typeof l=="string")q=5;else e:switch(l){case U:return pc(m.children,k,R,f);case M:q=8,k|=8;break;case T:return l=ba(12,m,f,k|2),l.elementType=T,l.lanes=R,l;case X:return l=ba(13,m,f,k),l.elementType=X,l.lanes=R,l;case G:return l=ba(19,m,f,k),l.elementType=G,l.lanes=R,l;case ae:return op(m,k,R,f);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case j:q=10;break e;case D:q=9;break e;case B:q=11;break e;case oe:q=14;break e;case he:q=16,b=null;break e}throw Error(e(130,l==null?l:typeof l,""))}return f=ba(q,m,f,k),f.elementType=l,f.type=b,f.lanes=R,f}function pc(l,f,m,b){return l=ba(7,l,b,f),l.lanes=m,l}function op(l,f,m,b){return l=ba(22,l,b,f),l.elementType=ae,l.lanes=m,l.stateNode={isHidden:!1},l}function Lm(l,f,m){return l=ba(6,l,null,f),l.lanes=m,l}function Dm(l,f,m){return f=ba(4,l.children!==null?l.children:[],l.key,f),f.lanes=m,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}function BC(l,f,m,b,k){this.tag=f,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vl(0),this.expirationTimes=Vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.identifierPrefix=b,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Fm(l,f,m,b,k,R,q,pe,xe){return l=new BC(l,f,m,pe,xe),f===1?(f=1,R===!0&&(f|=8)):f=0,R=ba(3,null,null,f),l.current=R,R.stateNode=l,R.memoizedState={element:b,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qr(R),l}function jC(l,f,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:b==null?null:""+b,children:l,containerInfo:f,implementation:m}}function Ty(l){if(!l)return bs;l=l._reactInternals;e:{if(Kr(l)!==l||l.tag!==1)throw Error(e(170));var f=l;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Fi(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(e(171))}if(l.tag===1){var m=l.type;if(Fi(m))return _h(l,m,f)}return f}function Ly(l,f,m,b,k,R,q,pe,xe){return l=Fm(m,b,!0,l,k,R,q,pe,xe),l.context=Ty(null),m=l.current,b=uo(),k=gl(m),R=fr(b,k),R.callback=f??null,hr(m,R,k),l.current.lanes=k,Js(l,k,b),Ao(l,b),l}function ap(l,f,m,b){var k=f.current,R=uo(),q=gl(k);return m=Ty(m),f.context===null?f.context=m:f.pendingContext=m,f=fr(R,q),f.payload={element:l},b=b===void 0?null:b,b!==null&&(f.callback=b),l=hr(k,f,q),l!==null&&($a(l,k,q,R),ci(l,k,q)),q}function sp(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function Dy(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<f?m:f}}function Mm(l,f){Dy(l,f),(l=l.alternate)&&Dy(l,f)}function UC(){return null}var Fy=typeof reportError=="function"?reportError:function(l){console.error(l)};function Om(l){this._internalRoot=l}up.prototype.render=Om.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(e(409));ap(l,f,null,null)},up.prototype.unmount=Om.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;fc(function(){ap(null,l,null,null)}),f[ui]=null}};function up(l){this._internalRoot=l}up.prototype.unstable_scheduleHydration=function(l){if(l){var f=$c();l={blockedOn:null,target:l,priority:f};for(var m=0;m<la.length&&f!==0&&f<la[m].priority;m++);la.splice(m,0,l),m===0&&Xc(l)}};function Bm(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function lp(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function My(){}function zC(l,f,m,b,k){if(k){if(typeof b=="function"){var R=b;b=function(){var Me=sp(q);R.call(Me)}}var q=Ly(f,b,l,0,null,!1,!1,"",My);return l._reactRootContainer=q,l[ui]=q.current,mu(l.nodeType===8?l.parentNode:l),fc(),q}for(;k=l.lastChild;)l.removeChild(k);if(typeof b=="function"){var pe=b;b=function(){var Me=sp(xe);pe.call(Me)}}var xe=Fm(l,0,!1,null,null,!1,!1,"",My);return l._reactRootContainer=xe,l[ui]=xe.current,mu(l.nodeType===8?l.parentNode:l),fc(function(){ap(f,xe,m,b)}),xe}function cp(l,f,m,b,k){var R=m._reactRootContainer;if(R){var q=R;if(typeof k=="function"){var pe=k;k=function(){var xe=sp(q);pe.call(xe)}}ap(f,q,l,k)}else q=zC(m,f,l,k,b);return sp(q)}ls=function(l){switch(l.tag){case 3:var f=l.stateNode;if(f.current.memoizedState.isDehydrated){var m=aa(f.pendingLanes);m!==0&&(qu(f,m|1),Ao(f,Vn()),(_n&6)===0&&(gf=Vn()+500,L()))}break;case 13:fc(function(){var b=Dn(l,1);if(b!==null){var k=uo();$a(b,l,1,k)}}),Mm(l,1)}},Wl=function(l){if(l.tag===13){var f=Dn(l,134217728);if(f!==null){var m=uo();$a(f,l,134217728,m)}Mm(l,134217728)}},Gc=function(l){if(l.tag===13){var f=gl(l),m=Dn(l,f);if(m!==null){var b=uo();$a(m,l,f,b)}Mm(l,f)}},$c=function(){return mn},Hu=function(l,f){var m=mn;try{return mn=l,f()}finally{mn=m}},Ht=function(l,f,m){switch(f){case"input":if(Rt(l,m),f=m.name,m.type==="radio"&&f!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<m.length;f++){var b=m[f];if(b!==l&&b.form===l.form){var k=oc(b);if(!k)throw Error(e(90));De(b),Rt(b,k)}}}break;case"textarea":sn(l,m);break;case"select":f=m.value,f!=null&&nt(l,!!m.multiple,f,!1)}},$r=Im,ia=fc;var VC={usingClientEntryPoint:!1,Events:[ul,xu,oc,yn,os,Im]},Lh={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WC={bundleType:Lh.bundleType,version:Lh.version,rendererPackageName:Lh.rendererPackageName,rendererConfig:Lh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Fo(l),l===null?null:l.stateNode},findFiberByHostInstance:Lh.findFiberByHostInstance||UC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fp.isDisabled&&fp.supportsFiber)try{Ks=fp.inject(WC),Zi=fp}catch{}}return ko.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VC,ko.createPortal=function(l,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bm(f))throw Error(e(200));return jC(l,f,null,m)},ko.createRoot=function(l,f){if(!Bm(l))throw Error(e(299));var m=!1,b="",k=Fy;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onRecoverableError!==void 0&&(k=f.onRecoverableError)),f=Fm(l,1,!1,null,null,m,!1,b,k),l[ui]=f.current,mu(l.nodeType===8?l.parentNode:l),new Om(f)},ko.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(e(188)):(l=Object.keys(l).join(","),Error(e(268,l)));return l=Fo(f),l=l===null?null:l.stateNode,l},ko.flushSync=function(l){return fc(l)},ko.hydrate=function(l,f,m){if(!lp(f))throw Error(e(200));return cp(null,l,f,!0,m)},ko.hydrateRoot=function(l,f,m){if(!Bm(l))throw Error(e(405));var b=m!=null&&m.hydratedSources||null,k=!1,R="",q=Fy;if(m!=null&&(m.unstable_strictMode===!0&&(k=!0),m.identifierPrefix!==void 0&&(R=m.identifierPrefix),m.onRecoverableError!==void 0&&(q=m.onRecoverableError)),f=Ly(f,null,l,1,m??null,k,!1,R,q),l[ui]=f.current,mu(l),b)for(l=0;l<b.length;l++)m=b[l],k=m._getVersion,k=k(m._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[m,k]:f.mutableSourceEagerHydrationData.push(m,k);return new up(f)},ko.render=function(l,f,m){if(!lp(f))throw Error(e(200));return cp(null,l,f,!1,m)},ko.unmountComponentAtNode=function(l){if(!lp(l))throw Error(e(40));return l._reactRootContainer?(fc(function(){cp(null,null,l,!1,function(){l._reactRootContainer=null,l[ui]=null})}),!0):!1},ko.unstable_batchedUpdates=Im,ko.unstable_renderSubtreeIntoContainer=function(l,f,m,b){if(!lp(m))throw Error(e(200));if(l==null||l._reactInternals===void 0)throw Error(e(38));return cp(l,f,m,!1,b)},ko.version="18.3.1-next-f1338f8080-20240426",ko}var qy;function ZC(){if(qy)return zm.exports;qy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),zm.exports=QC(),zm.exports}var Hy;function eA(){if(Hy)return hp;Hy=1;var n=ZC();return hp.createRoot=n.createRoot,hp.hydrateRoot=n.hydrateRoot,hp}var tA=eA();const C5=qe.createContext(),nA=({children:n})=>{const[t,e]=qe.useState(!1),[r,i]=qe.useState(!1),[o,s]=qe.useState("STANDBY"),[a,u]=qe.useState("HOME"),[c]=qe.useState({name:"Jim",access:"Admin"}),[h,d]=qe.useState(100),[v,p]=qe.useState([]),[y,x]=qe.useState(0),[w,_]=qe.useState({speed:0,heading:0,altitude:0,accuracy:0}),[E,I]=qe.useState(()=>{const be=localStorage.getItem("jarvis_face_db_v2");return be?JSON.parse(be):[]}),[C,N]=qe.useState(()=>{const be=localStorage.getItem("jarvis_incidents");return be?JSON.parse(be):[]}),[O,U]=qe.useState(()=>{const be=localStorage.getItem("jarvis_leads");return be?JSON.parse(be):[]});qe.useEffect(()=>{localStorage.setItem("jarvis_face_db_v2",JSON.stringify(E))},[E]),qe.useEffect(()=>{localStorage.setItem("jarvis_incidents",JSON.stringify(C))},[C]),qe.useEffect(()=>{localStorage.setItem("jarvis_leads",JSON.stringify(O))},[O]);const M=be=>{const De={...be,id:Date.now(),date:new Date().toLocaleString()};N(Re=>[De,...Re]),W("Incident logged. Analysis complete.")},T=be=>{N(De=>De.filter(Re=>Re.id!==be))},j=be=>{const De={...be,id:Date.now(),status:"Potential",dateAdded:new Date().toLocaleDateString()};U(Re=>[De,...Re]),W("Target acquired. Added to sales pipeline.")},D=(be,De)=>{U(Re=>Re.map(Xe=>Xe.id===be?{...Xe,status:De}:Xe)),W(`Status updated to ${De}.`)},B=be=>{U(De=>De.filter(Re=>Re.id!==be))},X=be=>{const De=[...E],Re=De[be].name;De.splice(be,1),I(De),W(`Record for ${Re} deleted.`)},G=(be,De)=>{const Re=[...E];Re[be]={...Re[be],...De},I(Re),W("Record updated.")},oe=be=>{I(De=>[...De,{...be,dateAdded:new Date().toLocaleDateString()}]),W("New identity added.")},he=()=>{I([]),W("Database wiped.")};qe.useEffect(()=>{const be=()=>{const De=window.speechSynthesis.getVoices();if(De.length>0){p(De);const Re=localStorage.getItem("jarvis_voice_index");if(Re)x(parseInt(Re));else{const Xe=De.findIndex(ee=>ee.name.includes("Google UK English Male"));Xe!==-1&&x(Xe)}}};be(),window.speechSynthesis.onvoiceschanged=be},[]);const ae=be=>{x(be),localStorage.setItem("jarvis_voice_index",be)},W=(be,De=!1)=>{if(!window.speechSynthesis)return;window.speechSynthesis.cancel(),t&&ue(),i(!0);const Re=new SpeechSynthesisUtterance(be);v.length>0&&(Re.voice=v[y]),Re.rate=1,Re.pitch=1,Re.onend=()=>{i(!1),De&&setTimeout(()=>Q(),200)},window.speechSynthesis.speak(Re)},ne=qe.useRef(null),[se,$]=qe.useState("IDLE"),[F,K]=qe.useState({});qe.useEffect(()=>{const be=window.SpeechRecognition||window.webkitSpeechRecognition;if(be){const De=new be;De.continuous=!1,De.interimResults=!1,De.lang="en-US",De.onstart=()=>e(!0),De.onend=()=>e(!1),De.onresult=Re=>ve(Re.results[0][0].transcript.toLowerCase().trim()),ne.current=De}},[se,F,E]);const Q=()=>{if(ne.current)try{ne.current.start(),Le("click")}catch{}},ue=()=>{if(ne.current)try{ne.current.stop()}catch{}},de=()=>{t?ue():Q()},ve=be=>{if(se!=="IDLE"){we(be);return}be.includes("vision")?(u("VISION"),W("Visual sensors active.")):be.includes("scan")?(u("VISION"),$("SCANNING"),W("Scanning target.")):be.includes("database")?(u("DATABASE"),W("Accessing records.")):be.includes("ops")||be.includes("incident")?(u("OPS"),W("Operations center online.")):be.includes("recon")||be.includes("sales")?(u("RECON"),W("Sales targeting engaged.")):be.includes("drive")?(u("HUD"),W("Driving mode engaged.")):be.includes("home")&&(u("HOME"),$("IDLE"),W("Interface minimized."))},we=be=>{const De={...F};if(se==="ASK_NAME")De.name=be.replace(/\./g,""),K(De),$("ASK_GENDER"),W(`Registered ${De.name}. Male or Female?`,!0);else if(se==="ASK_GENDER")De.gender=be.includes("female")?"Female":"Male",K(De),$("ASK_AGE"),W("Approximate age?",!0);else if(se==="ASK_AGE")De.age=be.replace(/\D/g,"")||"Unknown",K(De),$("ASK_ACCESS"),W("Access Level?",!0);else if(se==="ASK_ACCESS"){let Re="No Access";be.includes("admin")&&(Re="Admin"),be.includes("medium")&&(Re="Medium"),be.includes("missing")&&(Re="Missing"),De.accessLevel=Re,De.dateAdded=new Date().toLocaleDateString(),I(Xe=>[...Xe,De]),$("IDLE"),K({}),W("Identity archived.")}},Ce=be=>{se==="SCANNING"&&(K({descriptor:be}),$("ASK_NAME"),W("Target captured. Who is this person?",!0))};qe.useEffect(()=>{"getBattery"in navigator&&navigator.getBattery().then(Re=>d(Math.round(Re.level*100)));const be=navigator.geolocation.watchPosition(Re=>_(Xe=>({...Xe,speed:Re.coords.speed?Math.round(Re.coords.speed*3.6):0,altitude:Math.round(Re.coords.altitude||0)})),Re=>{},{enableHighAccuracy:!0}),De=Re=>{Re.webkitCompassHeading?_(Xe=>({...Xe,heading:Re.webkitCompassHeading})):Re.alpha&&_(Xe=>({...Xe,heading:360-Re.alpha}))};return window.addEventListener("deviceorientation",De),()=>{navigator.geolocation.clearWatch(be),window.removeEventListener("deviceorientation",De)}},[]);const Le=be=>{try{const De=window.AudioContext||window.webkitAudioContext;if(!De)return;const Re=new De,Xe=Re.createOscillator(),ee=Re.createGain();Xe.connect(ee),ee.connect(Re.destination),be==="click"?(Xe.frequency.value=800,ee.gain.value=.1,ee.gain.exponentialRampToValueAtTime(.01,Re.currentTime+.1),Xe.start(),Xe.stop(Re.currentTime+.1)):be==="startup"&&(Xe.frequency.value=150,Xe.frequency.exponentialRampToValueAtTime(600,Re.currentTime+.4),ee.gain.value=.1,ee.gain.linearRampToValueAtTime(0,Re.currentTime+.4),Xe.start(),Xe.stop(Re.currentTime+.4))}catch{}};return fe.jsx(C5.Provider,{value:{isListening:t,toggleListening:de,isSpeaking:r,speak:W,systemStatus:o,setSystemStatus:s,activeMode:a,setActiveMode:u,user:c,battery:h,playSound:Le,availableVoices:v,selectedVoiceIndex:y,changeVoice:ae,conversationState:se,triggerInterview:Ce,faceDatabase:E,deletePerson:X,updatePerson:G,addPerson:oe,clearDatabase:he,hudData:w,incidentLog:C,addIncident:M,deleteIncident:T,leadsLog:O,addLead:j,updateLeadStatus:D,deleteLead:B},children:n})},Us=()=>qe.useContext(C5),rA=()=>{const n=qe.useRef(null),{isSpeaking:t,isListening:e,activeMode:r}=Us();return qe.useEffect(()=>{const i=n.current,o=i.getContext("2d");let s,a=0;const u={cyan:"#00E5FF",cyanDim:"rgba(0, 229, 255, 0.2)",white:"#FFFFFF",orange:"#FF8C00",alert:"#FF0000"},c=()=>{i.width=window.innerWidth,i.height=window.innerHeight};window.addEventListener("resize",c),c();const h=(v,p,y,x=0,w=[])=>{o.beginPath(),o.arc(0,0,v,0,Math.PI*2),o.strokeStyle=y,o.lineWidth=p,o.shadowBlur=x,o.shadowColor=y,o.setLineDash(w),o.stroke(),o.setLineDash([])},d=()=>{a++;const v=i.width,p=i.height,y=v/2,x=p/2,w=Math.min(v,p)*(v<768?.35:.25);o.clearRect(0,0,v,p),o.translate(y,x);const E=a*.0015,I=r==="WARNING"?u.alert:u.cyan,C=r==="WARNING"?u.alert:u.white;o.save(),o.rotate(E);for(let U=0;U<72;U++){o.rotate(Math.PI*2/72),o.beginPath();const M=U%4===0?1.15:1.1;o.moveTo(w*1.05,0),o.lineTo(w*M,0),o.strokeStyle=I,o.lineWidth=U%4===0?3:1.5,o.shadowBlur=10,o.shadowColor=I,o.stroke()}o.restore(),o.save(),o.rotate(-E*1.2),h(w*.95,w*.08,u.cyanDim,5,[w*.2,w*.05,w*.05,w*.05]),o.rotate(Math.PI/3),h(w*.95,w*.02,I,15,[w*.3,w*1.5]),o.restore(),o.save(),o.rotate(E*1.5),h(w*.85,2,I,5,[5,10]),o.restore(),o.save(),o.rotate(-E*.8),h(w*.7,8,u.cyanDim,10),h(w*.7,4,I,20,[w*.5,w*1.2]),r!=="WARNING"&&(o.beginPath(),o.arc(0,0,w*.7,Math.PI*.5,Math.PI*.85),o.strokeStyle=u.orange,o.lineWidth=10,o.shadowBlur=30,o.shadowColor=u.orange,o.stroke(),o.beginPath(),o.arc(0,0,w*.7,Math.PI*.52,Math.PI*.83),o.strokeStyle=u.white,o.lineWidth=3,o.shadowBlur=10,o.shadowColor=u.white,o.stroke()),o.restore(),o.save(),o.rotate(E*2),h(w*.55,3,I,5,[10,15]);for(let U=0;U<4;U++)o.rotate(Math.PI/2),o.beginPath(),o.moveTo(w*.5,0),o.lineTo(w*.6,0),o.lineWidth=6,o.stroke();o.restore(),o.save(),o.rotate(-E*3),o.shadowBlur=20,o.shadowColor=I;for(let U=0;U<12;U++)o.rotate(Math.PI*2/12),o.beginPath(),o.moveTo(w*.3,0),o.lineTo(w*.45,w*.05),o.strokeStyle=I,o.lineWidth=2,o.stroke();o.restore();const N=1+Math.sin(a*.05)*.1,O=t?Math.random()*.2:0;o.save(),o.beginPath(),o.arc(0,0,w*.25*N,0,Math.PI*2),o.fillStyle=C,o.shadowBlur=50*N,o.shadowColor=C,o.fill(),h(w*.28*N,5,I,30),O>0&&h(w*.2*(1+O),10,u.white,40),o.restore(),o.resetTransform(),s=requestAnimationFrame(d)};return d(),()=>{window.removeEventListener("resize",c),cancelAnimationFrame(s)}},[t,e,r]),fe.jsx("canvas",{ref:n,className:"fixed top-0 left-0 w-full h-full z-0 pointer-events-none"})},iA=({onClose:n})=>{const{availableVoices:t,selectedVoiceIndex:e,changeVoice:r,playSound:i}=Us();return fe.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-md flex flex-col p-6 animate-fade-in",children:[fe.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-cyan/30 pb-4",children:[fe.jsx("h2",{className:"text-cyan font-orbitron text-xl tracking-widest",children:"SYSTEM CONFIG"}),fe.jsx("button",{onClick:()=>{i("click"),n()},className:"text-cyan hover:text-white",children:fe.jsx("i",{className:"fas fa-times text-2xl"})})]}),fe.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:[fe.jsx("h3",{className:"text-cyan-dim font-mono text-xs mb-4",children:"VOCAL SYNTHESIS MODULE"}),fe.jsxs("div",{className:"flex flex-col gap-2",children:[t.length===0&&fe.jsx("div",{className:"text-red-500 font-mono text-sm",children:"LOADING VOICE PACKS..."}),t.map((o,s)=>fe.jsxs("button",{onClick:()=>{i("click"),r(s)},className:`
                p-4 text-left font-mono text-sm border transition-all
                ${e===s?"border-cyan bg-cyan/10 text-cyan shadow-[0_0_10px_rgba(0,229,255,0.2)]":"border-white/10 text-gray-500 hover:border-cyan/50 hover:text-cyan/70"}
              `,children:[fe.jsx("div",{className:"font-bold truncate",children:o.name}),fe.jsx("div",{className:"text-[10px] opacity-70",children:o.lang})]},s))]})]}),fe.jsx("div",{className:"mt-6 text-center text-cyan-dim text-[10px] font-mono",children:"T-FORCE SECURITY PROTOCOLS VER 1.0"})]})},Xg=qe.createContext({});function Yg(n){const t=qe.useRef(null);return t.current===null&&(t.current=n()),t.current}const Iv=qe.createContext(null),Jg=qe.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class oA extends qe.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=e.offsetHeight||0,r.width=e.offsetWidth||0,r.top=e.offsetTop,r.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function aA({children:n,isPresent:t}){const e=qe.useId(),r=qe.useRef(null),i=qe.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=qe.useContext(Jg);return qe.useInsertionEffect(()=>{const{width:s,height:a,top:u,left:c}=i.current;if(t||!r.current||!s||!a)return;r.current.dataset.motionPopId=e;const h=document.createElement("style");return o&&(h.nonce=o),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[t]),fe.jsx(oA,{isPresent:t,childRef:r,sizeRef:i,children:qe.cloneElement(n,{ref:r})})}const sA=({children:n,initial:t,isPresent:e,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s})=>{const a=Yg(uA),u=qe.useId(),c=qe.useCallback(d=>{a.set(d,!0);for(const v of a.values())if(!v)return;r&&r()},[a,r]),h=qe.useMemo(()=>({id:u,initial:t,isPresent:e,custom:i,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),o?[Math.random(),c]:[e,c]);return qe.useMemo(()=>{a.forEach((d,v)=>a.set(v,!1))},[e]),qe.useEffect(()=>{!e&&!a.size&&r&&r()},[e]),s==="popLayout"&&(n=fe.jsx(aA,{isPresent:e,children:n})),fe.jsx(Iv.Provider,{value:h,children:n})};function uA(){return new Map}function A5(n=!0){const t=qe.useContext(Iv);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:i}=t,o=qe.useId();qe.useEffect(()=>{n&&i(o)},[n]);const s=qe.useCallback(()=>n&&r&&r(o),[o,r,n]);return!e&&r?[!1,s]:[!0]}const dp=n=>n.key||"";function Gy(n){const t=[];return qe.Children.forEach(n,e=>{qe.isValidElement(e)&&t.push(e)}),t}const Qg=typeof window<"u",k5=Qg?qe.useLayoutEffect:qe.useEffect,lA=({children:n,custom:t,initial:e=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:s=!1})=>{const[a,u]=A5(s),c=qe.useMemo(()=>Gy(n),[n]),h=s&&!a?[]:c.map(dp),d=qe.useRef(!0),v=qe.useRef(c),p=Yg(()=>new Map),[y,x]=qe.useState(c),[w,_]=qe.useState(c);k5(()=>{d.current=!1,v.current=c;for(let C=0;C<w.length;C++){const N=dp(w[C]);h.includes(N)?p.delete(N):p.get(N)!==!0&&p.set(N,!1)}},[w,h.length,h.join("-")]);const E=[];if(c!==y){let C=[...c];for(let N=0;N<w.length;N++){const O=w[N],U=dp(O);h.includes(U)||(C.splice(N,0,O),E.push(O))}o==="wait"&&E.length&&(C=E),_(Gy(C)),x(c);return}const{forceRender:I}=qe.useContext(Xg);return fe.jsx(fe.Fragment,{children:w.map(C=>{const N=dp(C),O=s&&!a?!1:c===w||h.includes(N),U=()=>{if(p.has(N))p.set(N,!0);else return;let M=!0;p.forEach(T=>{T||(M=!1)}),M&&(I==null||I(),_(v.current),s&&(u==null||u()),r&&r())};return fe.jsx(sA,{isPresent:O,initial:!d.current||e?void 0:!1,custom:O?void 0:t,presenceAffectsLayout:i,mode:o,onExitComplete:O?void 0:U,children:C},N)})})},ta=n=>n;let E5=ta;function Zg(n){let t;return()=>(t===void 0&&(t=n()),t)}const Xf=(n,t,e)=>{const r=t-n;return r===0?1:(e-n)/r},Ru=n=>n*1e3,Tu=n=>n/1e3,cA={useManualTiming:!1};function fA(n){let t=new Set,e=new Set,r=!1,i=!1;const o=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function a(c){o.has(c)&&(u.schedule(c),n()),c(s)}const u={schedule:(c,h=!1,d=!1)=>{const p=d&&r?t:e;return h&&o.add(c),p.has(c)||p.add(c),c},cancel:c=>{e.delete(c),o.delete(c)},process:c=>{if(s=c,r){i=!0;return}r=!0,[t,e]=[e,t],t.forEach(a),t.clear(),r=!1,i&&(i=!1,u.process(c))}};return u}const pp=["read","resolveKeyframes","update","preRender","render","postRender"],hA=40;function N5(n,t){let e=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>e=!0,s=pp.reduce((_,E)=>(_[E]=fA(o),_),{}),{read:a,resolveKeyframes:u,update:c,preRender:h,render:d,postRender:v}=s,p=()=>{const _=performance.now();e=!1,i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,hA),1),i.timestamp=_,i.isProcessing=!0,a.process(i),u.process(i),c.process(i),h.process(i),d.process(i),v.process(i),i.isProcessing=!1,e&&t&&(r=!1,n(p))},y=()=>{e=!0,r=!0,i.isProcessing||n(p)};return{schedule:pp.reduce((_,E)=>{const I=s[E];return _[E]=(C,N=!1,O=!1)=>(e||y(),I.schedule(C,N,O)),_},{}),cancel:_=>{for(let E=0;E<pp.length;E++)s[pp[E]].cancel(_)},state:i,steps:s}}const{schedule:er,cancel:Tl,state:Si,steps:qm}=N5(typeof requestAnimationFrame<"u"?requestAnimationFrame:ta,!0),I5=qe.createContext({strict:!1}),$y={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yf={};for(const n in $y)Yf[n]={isEnabled:t=>$y[n].some(e=>!!t[e])};function dA(n){for(const t in n)Yf[t]={...Yf[t],...n[t]}}const pA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||pA.has(n)}let P5=n=>!Yp(n);function vA(n){n&&(P5=t=>t.startsWith("on")?!Yp(t):n(t))}try{vA(require("@emotion/is-prop-valid").default)}catch{}function mA(n,t,e){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(P5(i)||e===!0&&Yp(i)||!t&&!Yp(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function gA(n){if(typeof Proxy>"u")return n;const t=new Map,e=(...r)=>n(...r);return new Proxy(e,{get:(r,i)=>i==="create"?n:(t.has(i)||t.set(i,n(i)),t.get(i))})}const Pv=qe.createContext({});function ed(n){return typeof n=="string"||Array.isArray(n)}function Rv(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const e1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],t1=["initial",...e1];function Tv(n){return Rv(n.animate)||t1.some(t=>ed(n[t]))}function R5(n){return!!(Tv(n)||n.variants)}function yA(n,t){if(Tv(n)){const{initial:e,animate:r}=n;return{initial:e===!1||ed(e)?e:void 0,animate:ed(r)?r:void 0}}return n.inherit!==!1?t:{}}function xA(n){const{initial:t,animate:e}=yA(n,qe.useContext(Pv));return qe.useMemo(()=>({initial:t,animate:e}),[Ky(t),Ky(e)])}function Ky(n){return Array.isArray(n)?n.join(" "):n}const wA=Symbol.for("motionComponentSymbol");function Tf(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function bA(n,t,e){return qe.useCallback(r=>{r&&n.onMount&&n.onMount(r),t&&(r?t.mount(r):t.unmount()),e&&(typeof e=="function"?e(r):Tf(e)&&(e.current=r))},[t])}const n1=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_A="framerAppearId",T5="data-"+n1(_A),{schedule:r1}=N5(queueMicrotask,!1),L5=qe.createContext({});function SA(n,t,e,r,i){var o,s;const{visualElement:a}=qe.useContext(Pv),u=qe.useContext(I5),c=qe.useContext(Iv),h=qe.useContext(Jg).reducedMotion,d=qe.useRef(null);r=r||u.renderer,!d.current&&r&&(d.current=r(n,{visualState:t,parent:a,props:e,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const v=d.current,p=qe.useContext(L5);v&&!v.projection&&i&&(v.type==="html"||v.type==="svg")&&CA(d.current,e,i,p);const y=qe.useRef(!1);qe.useInsertionEffect(()=>{v&&y.current&&v.update(e,c)});const x=e[T5],w=qe.useRef(!!x&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,x))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,x)));return k5(()=>{v&&(y.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),r1.render(v.render),w.current&&v.animationState&&v.animationState.animateChanges())}),qe.useEffect(()=>{v&&(!w.current&&v.animationState&&v.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)===null||_===void 0||_.call(window,x)}),w.current=!1))}),v}function CA(n,t,e,r){const{layoutId:i,layout:o,drag:s,dragConstraints:a,layoutScroll:u,layoutRoot:c}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:D5(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!s||a&&Tf(a),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:c})}function D5(n){if(n)return n.options.allowProjection!==!1?n.projection:D5(n.parent)}function AA({preloadedFeatures:n,createVisualElement:t,useRender:e,useVisualState:r,Component:i}){var o,s;n&&dA(n);function a(c,h){let d;const v={...qe.useContext(Jg),...c,layoutId:kA(c)},{isStatic:p}=v,y=xA(c),x=r(c,p);if(!p&&Qg){EA();const w=NA(v);d=w.MeasureLayout,y.visualElement=SA(i,x,v,t,w.ProjectionNode)}return fe.jsxs(Pv.Provider,{value:y,children:[d&&y.visualElement?fe.jsx(d,{visualElement:y.visualElement,...v}):null,e(i,c,bA(x,y.visualElement,h),x,p,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(s=(o=i.displayName)!==null&&o!==void 0?o:i.name)!==null&&s!==void 0?s:""})`}`;const u=qe.forwardRef(a);return u[wA]=i,u}function kA({layoutId:n}){const t=qe.useContext(Xg).id;return t&&n!==void 0?t+"-"+n:n}function EA(n,t){qe.useContext(I5).strict}function NA(n){const{drag:t,layout:e}=Yf;if(!t&&!e)return{};const r={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const IA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function i1(n){return typeof n!="string"||n.includes("-")?!1:!!(IA.indexOf(n)>-1||/[A-Z]/u.test(n))}function Xy(n){const t=[{},{}];return n==null||n.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function o1(n,t,e,r){if(typeof t=="function"){const[i,o]=Xy(r);t=t(e!==void 0?e:n.custom,i,o)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[i,o]=Xy(r);t=t(e!==void 0?e:n.custom,i,o)}return t}const Q0=n=>Array.isArray(n),PA=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),RA=n=>Q0(n)?n[n.length-1]||0:n,Ki=n=>!!(n&&n.getVelocity);function Up(n){const t=Ki(n)?n.get():n;return PA(t)?t.toValue():t}function TA({scrapeMotionValuesFromProps:n,createRenderState:t,onUpdate:e},r,i,o){const s={latestValues:LA(r,i,o,n),renderState:t()};return e&&(s.onMount=a=>e({props:r,current:a,...s}),s.onUpdate=a=>e(a)),s}const F5=n=>(t,e)=>{const r=qe.useContext(Pv),i=qe.useContext(Iv),o=()=>TA(n,t,r,i);return e?o():Yg(o)};function LA(n,t,e,r){const i={},o=r(n,{});for(const v in o)i[v]=Up(o[v]);let{initial:s,animate:a}=n;const u=Tv(n),c=R5(n);t&&c&&!u&&n.inherit!==!1&&(s===void 0&&(s=t.initial),a===void 0&&(a=t.animate));let h=e?e.initial===!1:!1;h=h||s===!1;const d=h?a:s;if(d&&typeof d!="boolean"&&!Rv(d)){const v=Array.isArray(d)?d:[d];for(let p=0;p<v.length;p++){const y=o1(n,v[p]);if(y){const{transitionEnd:x,transition:w,..._}=y;for(const E in _){let I=_[E];if(Array.isArray(I)){const C=h?I.length-1:0;I=I[C]}I!==null&&(i[E]=I)}for(const E in x)i[E]=x[E]}}}return i}const nh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fc=new Set(nh),M5=n=>t=>typeof t=="string"&&t.startsWith(n),O5=M5("--"),DA=M5("var(--"),a1=n=>DA(n)?FA.test(n.split("/*")[0].trim()):!1,FA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,B5=(n,t)=>t&&typeof n=="number"?t.transform(n):n,Lu=(n,t,e)=>e>t?t:e<n?n:e,rh={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},td={...rh,transform:n=>Lu(0,1,n)},vp={...rh,default:1},md=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),Al=md("deg"),Ds=md("%"),zt=md("px"),MA=md("vh"),OA=md("vw"),Yy={...Ds,parse:n=>Ds.parse(n)/100,transform:n=>Ds.transform(n*100)},BA={borderWidth:zt,borderTopWidth:zt,borderRightWidth:zt,borderBottomWidth:zt,borderLeftWidth:zt,borderRadius:zt,radius:zt,borderTopLeftRadius:zt,borderTopRightRadius:zt,borderBottomRightRadius:zt,borderBottomLeftRadius:zt,width:zt,maxWidth:zt,height:zt,maxHeight:zt,top:zt,right:zt,bottom:zt,left:zt,padding:zt,paddingTop:zt,paddingRight:zt,paddingBottom:zt,paddingLeft:zt,margin:zt,marginTop:zt,marginRight:zt,marginBottom:zt,marginLeft:zt,backgroundPositionX:zt,backgroundPositionY:zt},jA={rotate:Al,rotateX:Al,rotateY:Al,rotateZ:Al,scale:vp,scaleX:vp,scaleY:vp,scaleZ:vp,skew:Al,skewX:Al,skewY:Al,distance:zt,translateX:zt,translateY:zt,translateZ:zt,x:zt,y:zt,z:zt,perspective:zt,transformPerspective:zt,opacity:td,originX:Yy,originY:Yy,originZ:zt},Jy={...rh,transform:Math.round},s1={...BA,...jA,zIndex:Jy,size:zt,fillOpacity:td,strokeOpacity:td,numOctaves:Jy},UA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zA=nh.length;function VA(n,t,e){let r="",i=!0;for(let o=0;o<zA;o++){const s=nh[o],a=n[s];if(a===void 0)continue;let u=!0;if(typeof a=="number"?u=a===(s.startsWith("scale")?1:0):u=parseFloat(a)===0,!u||e){const c=B5(a,s1[s]);if(!u){i=!1;const h=UA[s]||s;r+=`${h}(${c}) `}e&&(t[s]=c)}}return r=r.trim(),e?r=e(t,i?"":r):i&&(r="none"),r}function u1(n,t,e){const{style:r,vars:i,transformOrigin:o}=n;let s=!1,a=!1;for(const u in t){const c=t[u];if(Fc.has(u)){s=!0;continue}else if(O5(u)){i[u]=c;continue}else{const h=B5(c,s1[u]);u.startsWith("origin")?(a=!0,o[u]=h):r[u]=h}}if(t.transform||(s||e?r.transform=VA(t,n.transform,e):r.transform&&(r.transform="none")),a){const{originX:u="50%",originY:c="50%",originZ:h=0}=o;r.transformOrigin=`${u} ${c} ${h}`}}const WA={offset:"stroke-dashoffset",array:"stroke-dasharray"},qA={offset:"strokeDashoffset",array:"strokeDasharray"};function HA(n,t,e=1,r=0,i=!0){n.pathLength=1;const o=i?WA:qA;n[o.offset]=zt.transform(-r);const s=zt.transform(t),a=zt.transform(e);n[o.array]=`${s} ${a}`}function Qy(n,t,e){return typeof n=="string"?n:zt.transform(t+e*n)}function GA(n,t,e){const r=Qy(t,n.x,n.width),i=Qy(e,n.y,n.height);return`${r} ${i}`}function l1(n,{attrX:t,attrY:e,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:u=0,...c},h,d){if(u1(n,c,d),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:p,dimensions:y}=n;v.transform&&(y&&(p.transform=v.transform),delete v.transform),y&&(i!==void 0||o!==void 0||p.transform)&&(p.transformOrigin=GA(y,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(v.x=t),e!==void 0&&(v.y=e),r!==void 0&&(v.scale=r),s!==void 0&&HA(v,s,a,u,!1)}const c1=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),j5=()=>({...c1(),attrs:{}}),f1=n=>typeof n=="string"&&n.toLowerCase()==="svg";function U5(n,{style:t,vars:e},r,i){Object.assign(n.style,t,i&&i.getProjectionStyles(r));for(const o in e)n.style.setProperty(o,e[o])}const z5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function V5(n,t,e,r){U5(n,t,void 0,r);for(const i in t.attrs)n.setAttribute(z5.has(i)?i:n1(i),t.attrs[i])}const Jp={};function $A(n){Object.assign(Jp,n)}function W5(n,{layout:t,layoutId:e}){return Fc.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!Jp[n]||n==="opacity")}function h1(n,t,e){var r;const{style:i}=n,o={};for(const s in i)(Ki(i[s])||t.style&&Ki(t.style[s])||W5(s,n)||((r=e==null?void 0:e.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[s]=i[s]);return o}function q5(n,t,e){const r=h1(n,t,e);for(const i in n)if(Ki(n[i])||Ki(t[i])){const o=nh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}function KA(n,t){try{t.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const Zy=["x","y","width","height","cx","cy","r"],XA={useVisualState:F5({scrapeMotionValuesFromProps:q5,createRenderState:j5,onUpdate:({props:n,prevProps:t,current:e,renderState:r,latestValues:i})=>{if(!e)return;let o=!!n.drag;if(!o){for(const a in i)if(Fc.has(a)){o=!0;break}}if(!o)return;let s=!t;if(t)for(let a=0;a<Zy.length;a++){const u=Zy[a];n[u]!==t[u]&&(s=!0)}s&&er.read(()=>{KA(e,r),er.render(()=>{l1(r,i,f1(e.tagName),n.transformTemplate),V5(e,r)})})}})},YA={useVisualState:F5({scrapeMotionValuesFromProps:h1,createRenderState:c1})};function H5(n,t,e){for(const r in t)!Ki(t[r])&&!W5(r,e)&&(n[r]=t[r])}function JA({transformTemplate:n},t){return qe.useMemo(()=>{const e=c1();return u1(e,t,n),Object.assign({},e.vars,e.style)},[t])}function QA(n,t){const e=n.style||{},r={};return H5(r,e,n),Object.assign(r,JA(n,t)),r}function ZA(n,t){const e={},r=QA(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=r,e}function ek(n,t,e,r){const i=qe.useMemo(()=>{const o=j5();return l1(o,t,f1(r),n.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(n.style){const o={};H5(o,n.style,n),i.style={...o,...i.style}}return i}function tk(n=!1){return(e,r,i,{latestValues:o},s)=>{const u=(i1(e)?ek:ZA)(r,o,s,e),c=mA(r,typeof e=="string",n),h=e!==qe.Fragment?{...c,...u,ref:i}:{},{children:d}=r,v=qe.useMemo(()=>Ki(d)?d.get():d,[d]);return qe.createElement(e,{...h,children:v})}}function nk(n,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...i1(r)?XA:YA,preloadedFeatures:n,useRender:tk(i),createVisualElement:t,Component:r};return AA(s)}}function G5(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let r=0;r<e;r++)if(t[r]!==n[r])return!1;return!0}function Lv(n,t,e){const r=n.getProps();return o1(r,t,e!==void 0?e:r.custom,n)}const rk=Zg(()=>window.ScrollTimeline!==void 0);class ik{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,e){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=e}attachTimeline(t,e){const r=this.animations.map(i=>{if(rk()&&i.attachTimeline)return i.attachTimeline(t);if(typeof e=="function")return e(i)});return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class ok extends ik{then(t,e){return Promise.all(this.animations).then(t).catch(e)}}function d1(n,t){return n?n[t]||n.default||n:void 0}const Z0=2e4;function $5(n){let t=0;const e=50;let r=n.next(t);for(;!r.done&&t<Z0;)t+=e,r=n.next(t);return t>=Z0?1/0:t}function p1(n){return typeof n=="function"}function ex(n,t){n.timeline=t,n.onfinish=null}const v1=n=>Array.isArray(n)&&typeof n[0]=="number",ak={linearEasing:void 0};function sk(n,t){const e=Zg(n);return()=>{var r;return(r=ak[t])!==null&&r!==void 0?r:e()}}const Qp=sk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),K5=(n,t,e=10)=>{let r="";const i=Math.max(Math.round(t/e),2);for(let o=0;o<i;o++)r+=n(Xf(0,i-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function X5(n){return!!(typeof n=="function"&&Qp()||!n||typeof n=="string"&&(n in eg||Qp())||v1(n)||Array.isArray(n)&&n.every(X5))}const Vh=([n,t,e,r])=>`cubic-bezier(${n}, ${t}, ${e}, ${r})`,eg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vh([0,.65,.55,1]),circOut:Vh([.55,0,1,.45]),backIn:Vh([.31,.01,.66,-.59]),backOut:Vh([.33,1.53,.69,.99])};function Y5(n,t){if(n)return typeof n=="function"&&Qp()?K5(n,t):v1(n)?Vh(n):Array.isArray(n)?n.map(e=>Y5(e,t)||eg.easeOut):eg[n]}const Xa={x:!1,y:!1};function J5(){return Xa.x||Xa.y}function uk(n,t,e){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const o=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return o?Array.from(o):[]}return Array.from(n)}function Q5(n,t){const e=uk(n),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[e,i,()=>r.abort()]}function tx(n){return t=>{t.pointerType==="touch"||J5()||n(t)}}function lk(n,t,e={}){const[r,i,o]=Q5(n,e),s=tx(a=>{const{target:u}=a,c=t(a);if(typeof c!="function"||!u)return;const h=tx(d=>{c(d),u.removeEventListener("pointerleave",h)});u.addEventListener("pointerleave",h,i)});return r.forEach(a=>{a.addEventListener("pointerenter",s,i)}),o}const Z5=(n,t)=>t?n===t?!0:Z5(n,t.parentElement):!1,m1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,ck=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function fk(n){return ck.has(n.tagName)||n.tabIndex!==-1}const Wh=new WeakSet;function nx(n){return t=>{t.key==="Enter"&&n(t)}}function Hm(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const hk=(n,t)=>{const e=n.currentTarget;if(!e)return;const r=nx(()=>{if(Wh.has(e))return;Hm(e,"down");const i=nx(()=>{Hm(e,"up")}),o=()=>Hm(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",o,t)});e.addEventListener("keydown",r,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",r),t)};function rx(n){return m1(n)&&!J5()}function dk(n,t,e={}){const[r,i,o]=Q5(n,e),s=a=>{const u=a.currentTarget;if(!rx(a)||Wh.has(u))return;Wh.add(u);const c=t(a),h=(p,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",v),!(!rx(p)||!Wh.has(u))&&(Wh.delete(u),typeof c=="function"&&c(p,{success:y}))},d=p=>{h(p,e.useGlobalTarget||Z5(u,p.target))},v=p=>{h(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",v,i)};return r.forEach(a=>{!fk(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(e.useGlobalTarget?window:a).addEventListener("pointerdown",s,i),a.addEventListener("focus",c=>hk(c,i),i)}),o}function pk(n){return n==="x"||n==="y"?Xa[n]?null:(Xa[n]=!0,()=>{Xa[n]=!1}):Xa.x||Xa.y?null:(Xa.x=Xa.y=!0,()=>{Xa.x=Xa.y=!1})}const e3=new Set(["width","height","top","left","right","bottom",...nh]);let zp;function vk(){zp=void 0}const Fs={now:()=>(zp===void 0&&Fs.set(Si.isProcessing||cA.useManualTiming?Si.timestamp:performance.now()),zp),set:n=>{zp=n,queueMicrotask(vk)}};function g1(n,t){n.indexOf(t)===-1&&n.push(t)}function y1(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}class x1{constructor(){this.subscriptions=[]}add(t){return g1(this.subscriptions,t),()=>y1(this.subscriptions,t)}notify(t,e,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(t,e,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function t3(n,t){return t?n*(1e3/t):0}const ix=30,mk=n=>!isNaN(parseFloat(n));class gk{constructor(t,e={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=Fs.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Fs.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=mk(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new x1);const r=this.events[t].add(e);return t==="change"?()=>{r(),er.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,r){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Fs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ix)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,ix);return t3(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nd(n,t){return new gk(n,t)}function yk(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,nd(e))}function xk(n,t){const e=Lv(n,t);let{transitionEnd:r={},transition:i={},...o}=e||{};o={...o,...r};for(const s in o){const a=RA(o[s]);yk(n,s,a)}}function wk(n){return!!(Ki(n)&&n.add)}function tg(n,t){const e=n.getValue("willChange");if(wk(e))return e.add(t)}function n3(n){return n.props[T5]}const r3=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,bk=1e-7,_k=12;function Sk(n,t,e,r,i){let o,s,a=0;do s=t+(e-t)/2,o=r3(s,r,i)-n,o>0?e=s:t=s;while(Math.abs(o)>bk&&++a<_k);return s}function gd(n,t,e,r){if(n===t&&e===r)return ta;const i=o=>Sk(o,0,1,n,e);return o=>o===0||o===1?o:r3(i(o),t,r)}const i3=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,o3=n=>t=>1-n(1-t),a3=gd(.33,1.53,.69,.99),w1=o3(a3),s3=i3(w1),u3=n=>(n*=2)<1?.5*w1(n):.5*(2-Math.pow(2,-10*(n-1))),b1=n=>1-Math.sin(Math.acos(n)),l3=o3(b1),c3=i3(b1),f3=n=>/^0[^.\s]+$/u.test(n);function Ck(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||f3(n):!0}const Hh=n=>Math.round(n*1e5)/1e5,_1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Ak(n){return n==null}const kk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,S1=(n,t)=>e=>!!(typeof e=="string"&&kk.test(e)&&e.startsWith(n)||t&&!Ak(e)&&Object.prototype.hasOwnProperty.call(e,t)),h3=(n,t,e)=>r=>{if(typeof r!="string")return r;const[i,o,s,a]=r.match(_1);return{[n]:parseFloat(i),[t]:parseFloat(o),[e]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},Ek=n=>Lu(0,255,n),Gm={...rh,transform:n=>Math.round(Ek(n))},Cc={test:S1("rgb","red"),parse:h3("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:r=1})=>"rgba("+Gm.transform(n)+", "+Gm.transform(t)+", "+Gm.transform(e)+", "+Hh(td.transform(r))+")"};function Nk(n){let t="",e="",r="",i="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),t+=t,e+=e,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ng={test:S1("#"),parse:Nk,transform:Cc.transform},Lf={test:S1("hsl","hue"),parse:h3("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:r=1})=>"hsla("+Math.round(n)+", "+Ds.transform(Hh(t))+", "+Ds.transform(Hh(e))+", "+Hh(td.transform(r))+")"},Wi={test:n=>Cc.test(n)||ng.test(n)||Lf.test(n),parse:n=>Cc.test(n)?Cc.parse(n):Lf.test(n)?Lf.parse(n):ng.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Cc.transform(n):Lf.transform(n)},Ik=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Pk(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(_1))===null||t===void 0?void 0:t.length)||0)+(((e=n.match(Ik))===null||e===void 0?void 0:e.length)||0)>0}const d3="number",p3="color",Rk="var",Tk="var(",ox="${}",Lk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rd(n){const t=n.toString(),e=[],r={color:[],number:[],var:[]},i=[];let o=0;const a=t.replace(Lk,u=>(Wi.test(u)?(r.color.push(o),i.push(p3),e.push(Wi.parse(u))):u.startsWith(Tk)?(r.var.push(o),i.push(Rk),e.push(u)):(r.number.push(o),i.push(d3),e.push(parseFloat(u))),++o,ox)).split(ox);return{values:e,split:a,indexes:r,types:i}}function v3(n){return rd(n).values}function m3(n){const{split:t,types:e}=rd(n),r=t.length;return i=>{let o="";for(let s=0;s<r;s++)if(o+=t[s],i[s]!==void 0){const a=e[s];a===d3?o+=Hh(i[s]):a===p3?o+=Wi.transform(i[s]):o+=i[s]}return o}}const Dk=n=>typeof n=="number"?0:n;function Fk(n){const t=v3(n);return m3(n)(t.map(Dk))}const Ll={test:Pk,parse:v3,createTransformer:m3,getAnimatableNone:Fk},Mk=new Set(["brightness","contrast","saturate","opacity"]);function Ok(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[r]=e.match(_1)||[];if(!r)return n;const i=e.replace(r,"");let o=Mk.has(t)?1:0;return r!==e&&(o*=100),t+"("+o+i+")"}const Bk=/\b([a-z-]*)\(.*?\)/gu,rg={...Ll,getAnimatableNone:n=>{const t=n.match(Bk);return t?t.map(Ok).join(" "):n}},jk={...s1,color:Wi,backgroundColor:Wi,outlineColor:Wi,fill:Wi,stroke:Wi,borderColor:Wi,borderTopColor:Wi,borderRightColor:Wi,borderBottomColor:Wi,borderLeftColor:Wi,filter:rg,WebkitFilter:rg},C1=n=>jk[n];function g3(n,t){let e=C1(n);return e!==rg&&(e=Ll),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const Uk=new Set(["auto","none","0"]);function zk(n,t,e){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!Uk.has(o)&&rd(o).values.length&&(i=n[r]),r++}if(i&&e)for(const o of t)n[o]=g3(e,i)}const ax=n=>n===rh||n===zt,sx=(n,t)=>parseFloat(n.split(", ")[t]),ux=(n,t)=>(e,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return sx(i[1],t);{const o=r.match(/^matrix\((.+)\)$/u);return o?sx(o[1],n):0}},Vk=new Set(["x","y","z"]),Wk=nh.filter(n=>!Vk.has(n));function qk(n){const t=[];return Wk.forEach(e=>{const r=n.getValue(e);r!==void 0&&(t.push([e,r.get()]),r.set(e.startsWith("scale")?1:0))}),t}const Jf={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:ux(4,13),y:ux(5,14)};Jf.translateX=Jf.x;Jf.translateY=Jf.y;const Ec=new Set;let ig=!1,og=!1;function y3(){if(og){const n=Array.from(Ec).filter(r=>r.needsMeasurement),t=new Set(n.map(r=>r.element)),e=new Map;t.forEach(r=>{const i=qk(r);i.length&&(e.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=e.get(r);i&&i.forEach(([o,s])=>{var a;(a=r.getValue(o))===null||a===void 0||a.set(s)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}og=!1,ig=!1,Ec.forEach(n=>n.complete()),Ec.clear()}function x3(){Ec.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(og=!0)})}function Hk(){x3(),y3()}class A1{constructor(t,e,r,i,o,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=r,this.motionValue=i,this.element=o,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ec.add(this),ig||(ig=!0,er.read(x3),er.resolveKeyframes(y3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:r,motionValue:i}=this;for(let o=0;o<t.length;o++)if(t[o]===null)if(o===0){const s=i==null?void 0:i.get(),a=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&e){const u=r.readValue(e,a);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=a),i&&s===void 0&&i.set(t[0])}else t[o]=t[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ec.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ec.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const w3=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),Gk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $k(n){const t=Gk.exec(n);if(!t)return[,];const[,e,r,i]=t;return[`--${e??r}`,i]}function b3(n,t,e=1){const[r,i]=$k(n);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const s=o.trim();return w3(s)?parseFloat(s):s}return a1(i)?b3(i,t,e+1):i}const _3=n=>t=>t.test(n),Kk={test:n=>n==="auto",parse:n=>n},S3=[rh,zt,Ds,Al,OA,MA,Kk],lx=n=>S3.find(_3(n));class C3 extends A1{constructor(t,e,r,i,o){super(t,e,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:r}=this;if(!e||!e.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let c=t[u];if(typeof c=="string"&&(c=c.trim(),a1(c))){const h=b3(c,e.current);h!==void 0&&(t[u]=h),u===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!e3.has(r)||t.length!==2)return;const[i,o]=t,s=lx(i),a=lx(o);if(s!==a)if(ax(s)&&ax(a))for(let u=0;u<t.length;u++){const c=t[u];typeof c=="string"&&(t[u]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,r=[];for(let i=0;i<t.length;i++)Ck(t[i])&&r.push(i);r.length&&zk(t,r,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Jf[r](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:e,name:r,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const o=e.getValue(r);o&&o.jump(this.measuredOrigin,!1);const s=i.length-1,a=i[s];i[s]=Jf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([u,c])=>{e.getValue(u).set(c)}),this.resolveNoneKeyframes()}}const cx=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ll.test(n)||n==="0")&&!n.startsWith("url("));function Xk(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function Yk(n,t,e,r){const i=n[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const o=n[n.length-1],s=cx(i,t),a=cx(o,t);return!s||!a?!1:Xk(n)||(e==="spring"||p1(e))&&r}const Jk=n=>n!==null;function Dv(n,{repeat:t,repeatType:e="loop"},r){const i=n.filter(Jk),o=t&&e!=="loop"&&t%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const Qk=40;class A3{constructor({autoplay:t=!0,delay:e=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:s="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Fs.now(),this.options={autoplay:t,delay:e,type:r,repeat:i,repeatDelay:o,repeatType:s,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Qk?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Hk(),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=Fs.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:s,onComplete:a,onUpdate:u,isGenerator:c}=this.options;if(!c&&!Yk(t,r,i,o))if(s)this.options.duration=0;else{u&&u(Dv(t,this.options,e)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(t,e);h!==!1&&(this._resolved={keyframes:t,finalKeyframe:e,...h},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const mr=(n,t,e)=>n+(t-n)*e;function $m(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function Zk({hue:n,saturation:t,lightness:e,alpha:r}){n/=360,t/=100,e/=100;let i=0,o=0,s=0;if(!t)i=o=s=e;else{const a=e<.5?e*(1+t):e+t-e*t,u=2*e-a;i=$m(u,a,n+1/3),o=$m(u,a,n),s=$m(u,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}function Zp(n,t){return e=>e>0?t:n}const Km=(n,t,e)=>{const r=n*n,i=e*(t*t-r)+r;return i<0?0:Math.sqrt(i)},eE=[ng,Cc,Lf],tE=n=>eE.find(t=>t.test(n));function fx(n){const t=tE(n);if(!t)return!1;let e=t.parse(n);return t===Lf&&(e=Zk(e)),e}const hx=(n,t)=>{const e=fx(n),r=fx(t);if(!e||!r)return Zp(n,t);const i={...e};return o=>(i.red=Km(e.red,r.red,o),i.green=Km(e.green,r.green,o),i.blue=Km(e.blue,r.blue,o),i.alpha=mr(e.alpha,r.alpha,o),Cc.transform(i))},nE=(n,t)=>e=>t(n(e)),yd=(...n)=>n.reduce(nE),ag=new Set(["none","hidden"]);function rE(n,t){return ag.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function iE(n,t){return e=>mr(n,t,e)}function k1(n){return typeof n=="number"?iE:typeof n=="string"?a1(n)?Zp:Wi.test(n)?hx:sE:Array.isArray(n)?k3:typeof n=="object"?Wi.test(n)?hx:oE:Zp}function k3(n,t){const e=[...n],r=e.length,i=n.map((o,s)=>k1(o)(o,t[s]));return o=>{for(let s=0;s<r;s++)e[s]=i[s](o);return e}}function oE(n,t){const e={...n,...t},r={};for(const i in e)n[i]!==void 0&&t[i]!==void 0&&(r[i]=k1(n[i])(n[i],t[i]));return i=>{for(const o in r)e[o]=r[o](i);return e}}function aE(n,t){var e;const r=[],i={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const s=t.types[o],a=n.indexes[s][i[s]],u=(e=n.values[a])!==null&&e!==void 0?e:0;r[o]=u,i[s]++}return r}const sE=(n,t)=>{const e=Ll.createTransformer(t),r=rd(n),i=rd(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?ag.has(n)&&!i.values.length||ag.has(t)&&!r.values.length?rE(n,t):yd(k3(aE(r,i),i.values),e):Zp(n,t)};function E3(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?mr(n,t,e):k1(n)(n,t)}const uE=5;function N3(n,t,e){const r=Math.max(t-uE,0);return t3(e-n(r),t-r)}const Pr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xm=.001;function lE({duration:n=Pr.duration,bounce:t=Pr.bounce,velocity:e=Pr.velocity,mass:r=Pr.mass}){let i,o,s=1-t;s=Lu(Pr.minDamping,Pr.maxDamping,s),n=Lu(Pr.minDuration,Pr.maxDuration,Tu(n)),s<1?(i=c=>{const h=c*s,d=h*n,v=h-e,p=sg(c,s),y=Math.exp(-d);return Xm-v/p*y},o=c=>{const d=c*s*n,v=d*e+e,p=Math.pow(s,2)*Math.pow(c,2)*n,y=Math.exp(-d),x=sg(Math.pow(c,2),s);return(-i(c)+Xm>0?-1:1)*((v-p)*y)/x}):(i=c=>{const h=Math.exp(-c*n),d=(c-e)*n+1;return-Xm+h*d},o=c=>{const h=Math.exp(-c*n),d=(e-c)*(n*n);return h*d});const a=5/n,u=fE(i,o,a);if(n=Ru(n),isNaN(u))return{stiffness:Pr.stiffness,damping:Pr.damping,duration:n};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:s*2*Math.sqrt(r*c),duration:n}}}const cE=12;function fE(n,t,e){let r=e;for(let i=1;i<cE;i++)r=r-n(r)/t(r);return r}function sg(n,t){return n*Math.sqrt(1-t*t)}const hE=["duration","bounce"],dE=["stiffness","damping","mass"];function dx(n,t){return t.some(e=>n[e]!==void 0)}function pE(n){let t={velocity:Pr.velocity,stiffness:Pr.stiffness,damping:Pr.damping,mass:Pr.mass,isResolvedFromDuration:!1,...n};if(!dx(n,dE)&&dx(n,hE))if(n.visualDuration){const e=n.visualDuration,r=2*Math.PI/(e*1.2),i=r*r,o=2*Lu(.05,1,1-(n.bounce||0))*Math.sqrt(i);t={...t,mass:Pr.mass,stiffness:i,damping:o}}else{const e=lE(n);t={...t,...e,mass:Pr.mass},t.isResolvedFromDuration=!0}return t}function I3(n=Pr.visualDuration,t=Pr.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:r,restDelta:i}=e;const o=e.keyframes[0],s=e.keyframes[e.keyframes.length-1],a={done:!1,value:o},{stiffness:u,damping:c,mass:h,duration:d,velocity:v,isResolvedFromDuration:p}=pE({...e,velocity:-Tu(e.velocity||0)}),y=v||0,x=c/(2*Math.sqrt(u*h)),w=s-o,_=Tu(Math.sqrt(u/h)),E=Math.abs(w)<5;r||(r=E?Pr.restSpeed.granular:Pr.restSpeed.default),i||(i=E?Pr.restDelta.granular:Pr.restDelta.default);let I;if(x<1){const N=sg(_,x);I=O=>{const U=Math.exp(-x*_*O);return s-U*((y+x*_*w)/N*Math.sin(N*O)+w*Math.cos(N*O))}}else if(x===1)I=N=>s-Math.exp(-_*N)*(w+(y+_*w)*N);else{const N=_*Math.sqrt(x*x-1);I=O=>{const U=Math.exp(-x*_*O),M=Math.min(N*O,300);return s-U*((y+x*_*w)*Math.sinh(M)+N*w*Math.cosh(M))/N}}const C={calculatedDuration:p&&d||null,next:N=>{const O=I(N);if(p)a.done=N>=d;else{let U=0;x<1&&(U=N===0?Ru(y):N3(I,N,O));const M=Math.abs(U)<=r,T=Math.abs(s-O)<=i;a.done=M&&T}return a.value=a.done?s:O,a},toString:()=>{const N=Math.min($5(C),Z0),O=K5(U=>C.next(N*U).value,N,30);return N+"ms "+O}};return C}function px({keyframes:n,velocity:t=0,power:e=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:u,restDelta:c=.5,restSpeed:h}){const d=n[0],v={done:!1,value:d},p=M=>a!==void 0&&M<a||u!==void 0&&M>u,y=M=>a===void 0?u:u===void 0||Math.abs(a-M)<Math.abs(u-M)?a:u;let x=e*t;const w=d+x,_=s===void 0?w:s(w);_!==w&&(x=_-d);const E=M=>-x*Math.exp(-M/r),I=M=>_+E(M),C=M=>{const T=E(M),j=I(M);v.done=Math.abs(T)<=c,v.value=v.done?_:j};let N,O;const U=M=>{p(v.value)&&(N=M,O=I3({keyframes:[v.value,y(v.value)],velocity:N3(I,M,v.value),damping:i,stiffness:o,restDelta:c,restSpeed:h}))};return U(0),{calculatedDuration:null,next:M=>{let T=!1;return!O&&N===void 0&&(T=!0,C(M),U(M)),N!==void 0&&M>=N?O.next(M-N):(!T&&C(M),v)}}}const vE=gd(.42,0,1,1),mE=gd(0,0,.58,1),P3=gd(.42,0,.58,1),gE=n=>Array.isArray(n)&&typeof n[0]!="number",yE={linear:ta,easeIn:vE,easeInOut:P3,easeOut:mE,circIn:b1,circInOut:c3,circOut:l3,backIn:w1,backInOut:s3,backOut:a3,anticipate:u3},vx=n=>{if(v1(n)){E5(n.length===4);const[t,e,r,i]=n;return gd(t,e,r,i)}else if(typeof n=="string")return yE[n];return n};function xE(n,t,e){const r=[],i=e||E3,o=n.length-1;for(let s=0;s<o;s++){let a=i(n[s],n[s+1]);if(t){const u=Array.isArray(t)?t[s]||ta:t;a=yd(u,a)}r.push(a)}return r}function wE(n,t,{clamp:e=!0,ease:r,mixer:i}={}){const o=n.length;if(E5(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const s=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),t=[...t].reverse());const a=xE(t,r,i),u=a.length,c=h=>{if(s&&h<n[0])return t[0];let d=0;if(u>1)for(;d<n.length-2&&!(h<n[d+1]);d++);const v=Xf(n[d],n[d+1],h);return a[d](v)};return e?h=>c(Lu(n[0],n[o-1],h)):c}function bE(n,t){const e=n[n.length-1];for(let r=1;r<=t;r++){const i=Xf(0,t,r);n.push(mr(e,1,i))}}function _E(n){const t=[0];return bE(t,n.length-1),t}function SE(n,t){return n.map(e=>e*t)}function CE(n,t){return n.map(()=>t||P3).splice(0,n.length-1)}function ev({duration:n=300,keyframes:t,times:e,ease:r="easeInOut"}){const i=gE(r)?r.map(vx):vx(r),o={done:!1,value:t[0]},s=SE(e&&e.length===t.length?e:_E(t),n),a=wE(s,t,{ease:Array.isArray(i)?i:CE(t,i)});return{calculatedDuration:n,next:u=>(o.value=a(u),o.done=u>=n,o)}}const AE=n=>{const t=({timestamp:e})=>n(e);return{start:()=>er.update(t,!0),stop:()=>Tl(t),now:()=>Si.isProcessing?Si.timestamp:Fs.now()}},kE={decay:px,inertia:px,tween:ev,keyframes:ev,spring:I3},EE=n=>n/100;class E1 extends A3{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:e,motionValue:r,element:i,keyframes:o}=this.options,s=(i==null?void 0:i.KeyframeResolver)||A1,a=(u,c)=>this.onKeyframesResolved(u,c);this.resolver=new s(o,a,e,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:s=0}=this.options,a=p1(e)?e:kE[e]||ev;let u,c;a!==ev&&typeof t[0]!="number"&&(u=yd(EE,E3(t[0],t[1])),t=[0,100]);const h=a({...this.options,keyframes:t});o==="mirror"&&(c=a({...this.options,keyframes:[...t].reverse(),velocity:-s})),h.calculatedDuration===null&&(h.calculatedDuration=$5(h));const{calculatedDuration:d}=h,v=d+i,p=v*(r+1)-i;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:u,calculatedDuration:d,resolvedDuration:v,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,e=!1){const{resolved:r}=this;if(!r){const{keyframes:M}=this.options;return{done:!0,value:M[M.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:s,mapPercentToKeyframes:a,keyframes:u,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=r;if(this.startTime===null)return o.next(0);const{delay:v,repeat:p,repeatType:y,repeatDelay:x,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-h/this.speed,this.startTime)),e?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const _=this.currentTime-v*(this.speed>=0?1:-1),E=this.speed>=0?_<0:_>h;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let I=this.currentTime,C=o;if(p){const M=Math.min(this.currentTime,h)/d;let T=Math.floor(M),j=M%1;!j&&M>=1&&(j=1),j===1&&T--,T=Math.min(T,p+1),!!(T%2)&&(y==="reverse"?(j=1-j,x&&(j-=x/d)):y==="mirror"&&(C=s)),I=Lu(0,1,j)*d}const N=E?{done:!1,value:u[0]}:C.next(I);a&&(N.value=a(N.value));let{done:O}=N;!E&&c!==null&&(O=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const U=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return U&&i!==void 0&&(N.value=Dv(u,this.options,i)),w&&w(N.value),U&&this.finish(),N}get duration(){const{resolved:t}=this;return t?Tu(t.calculatedDuration):0}get time(){return Tu(this.currentTime)}set time(t){t=Ru(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Tu(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=AE,onPlay:e,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),e&&e();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const NE=new Set(["opacity","clipPath","filter","transform"]);function IE(n,t,e,{delay:r=0,duration:i=300,repeat:o=0,repeatType:s="loop",ease:a="easeInOut",times:u}={}){const c={[t]:e};u&&(c.offset=u);const h=Y5(a,i);return Array.isArray(h)&&(c.easing=h),n.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}const PE=Zg(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),tv=10,RE=2e4;function TE(n){return p1(n.type)||n.type==="spring"||!X5(n.ease)}function LE(n,t){const e=new E1({...t,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let o=0;for(;!r.done&&o<RE;)r=e.sample(o),i.push(r.value),o+=tv;return{times:void 0,keyframes:i,duration:o-tv,ease:"linear"}}const R3={anticipate:u3,backInOut:s3,circInOut:c3};function DE(n){return n in R3}class mx extends A3{constructor(t){super(t);const{name:e,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new C3(o,(s,a)=>this.onKeyframesResolved(s,a),e,r,i),this.resolver.scheduleResolve()}initPlayback(t,e){let{duration:r=300,times:i,ease:o,type:s,motionValue:a,name:u,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof o=="string"&&Qp()&&DE(o)&&(o=R3[o]),TE(this.options)){const{onComplete:d,onUpdate:v,motionValue:p,element:y,...x}=this.options,w=LE(t,x);t=w.keyframes,t.length===1&&(t[1]=t[0]),r=w.duration,i=w.times,o=w.ease,s="keyframes"}const h=IE(a.owner.current,u,t,{...this.options,duration:r,times:i,ease:o});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(ex(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:d}=this.options;a.set(Dv(t,this.options,e)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:s,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return Tu(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return Tu(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.currentTime=Ru(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:e}=this;if(!e)return ta;const{animation:r}=e;ex(r,t)}return ta}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.playState==="finished"&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:r,duration:i,type:o,ease:s,times:a}=t;if(e.playState==="idle"||e.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:v,...p}=this.options,y=new E1({...p,keyframes:r,duration:i,type:o,ease:s,times:a,isGenerator:!0}),x=Ru(this.time);c.setWithVelocity(y.sample(x-tv).value,y.sample(x).value,tv)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:r,repeatDelay:i,repeatType:o,damping:s,type:a}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:c}=e.owner.getProps();return PE()&&r&&NE.has(r)&&!u&&!c&&!i&&o!=="mirror"&&s!==0&&a!=="inertia"}}const FE={type:"spring",stiffness:500,damping:25,restSpeed:10},ME=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),OE={type:"keyframes",duration:.8},BE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},jE=(n,{keyframes:t})=>t.length>2?OE:Fc.has(n)?n.startsWith("scale")?ME(t[1]):FE:BE;function UE({when:n,delay:t,delayChildren:e,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:u,elapsed:c,...h}){return!!Object.keys(h).length}const N1=(n,t,e,r={},i,o)=>s=>{const a=d1(r,n)||{},u=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Ru(u);let h={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:v=>{t.set(v),a.onUpdate&&a.onUpdate(v)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:n,motionValue:t,element:o?void 0:i};UE(a)||(h={...h,...jE(n,h)}),h.duration&&(h.duration=Ru(h.duration)),h.repeatDelay&&(h.repeatDelay=Ru(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!o&&t.get()!==void 0){const v=Dv(h.keyframes,a);if(v!==void 0)return er.update(()=>{h.onUpdate(v),h.onComplete()}),new ok([])}return!o&&mx.supports(h)?new mx(h):new E1(h)};function zE({protectedKeys:n,needsAnimating:t},e){const r=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,r}function T3(n,t,{delay:e=0,transitionOverride:r,type:i}={}){var o;let{transition:s=n.getDefaultTransition(),transitionEnd:a,...u}=t;r&&(s=r);const c=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const d in u){const v=n.getValue(d,(o=n.latestValues[d])!==null&&o!==void 0?o:null),p=u[d];if(p===void 0||h&&zE(h,d))continue;const y={delay:e,...d1(s||{},d)};let x=!1;if(window.MotionHandoffAnimation){const _=n3(n);if(_){const E=window.MotionHandoffAnimation(_,d,er);E!==null&&(y.startTime=E,x=!0)}}tg(n,d),v.start(N1(d,v,p,n.shouldReduceMotion&&e3.has(d)?{type:!1}:y,n,x));const w=v.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{er.update(()=>{a&&xk(n,a)})}),c}function ug(n,t,e={}){var r;const i=Lv(n,t,e.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(o=e.transitionOverride);const s=i?()=>Promise.all(T3(n,i,e)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:v}=o;return VE(n,t,h+c,d,v,e)}:()=>Promise.resolve(),{when:u}=o;if(u){const[c,h]=u==="beforeChildren"?[s,a]:[a,s];return c().then(()=>h())}else return Promise.all([s(),a(e.delay)])}function VE(n,t,e=0,r=0,i=1,o){const s=[],a=(n.variantChildren.size-1)*r,u=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(n.variantChildren).sort(WE).forEach((c,h)=>{c.notify("AnimationStart",t),s.push(ug(c,t,{...o,delay:e+u(h)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(s)}function WE(n,t){return n.sortNodePosition(t)}function qE(n,t,e={}){n.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(o=>ug(n,o,e));r=Promise.all(i)}else if(typeof t=="string")r=ug(n,t,e);else{const i=typeof t=="function"?Lv(n,t,e.custom):t;r=Promise.all(T3(n,i,e))}return r.then(()=>{n.notify("AnimationComplete",t)})}const HE=t1.length;function L3(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?L3(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<HE;e++){const r=t1[e],i=n.props[r];(ed(i)||i===!1)&&(t[r]=i)}return t}const GE=[...e1].reverse(),$E=e1.length;function KE(n){return t=>Promise.all(t.map(({animation:e,options:r})=>qE(n,e,r)))}function XE(n){let t=KE(n),e=gx(),r=!0;const i=u=>(c,h)=>{var d;const v=Lv(n,h,u==="exit"?(d=n.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(v){const{transition:p,transitionEnd:y,...x}=v;c={...c,...x,...y}}return c};function o(u){t=u(n)}function s(u){const{props:c}=n,h=L3(n.parent)||{},d=[],v=new Set;let p={},y=1/0;for(let w=0;w<$E;w++){const _=GE[w],E=e[_],I=c[_]!==void 0?c[_]:h[_],C=ed(I),N=_===u?E.isActive:null;N===!1&&(y=w);let O=I===h[_]&&I!==c[_]&&C;if(O&&r&&n.manuallyAnimateOnMount&&(O=!1),E.protectedKeys={...p},!E.isActive&&N===null||!I&&!E.prevProp||Rv(I)||typeof I=="boolean")continue;const U=YE(E.prevProp,I);let M=U||_===u&&E.isActive&&!O&&C||w>y&&C,T=!1;const j=Array.isArray(I)?I:[I];let D=j.reduce(i(_),{});N===!1&&(D={});const{prevResolvedValues:B={}}=E,X={...B,...D},G=ae=>{M=!0,v.has(ae)&&(T=!0,v.delete(ae)),E.needsAnimating[ae]=!0;const W=n.getValue(ae);W&&(W.liveStyle=!1)};for(const ae in X){const W=D[ae],ne=B[ae];if(p.hasOwnProperty(ae))continue;let se=!1;Q0(W)&&Q0(ne)?se=!G5(W,ne):se=W!==ne,se?W!=null?G(ae):v.add(ae):W!==void 0&&v.has(ae)?G(ae):E.protectedKeys[ae]=!0}E.prevProp=I,E.prevResolvedValues=D,E.isActive&&(p={...p,...D}),r&&n.blockInitialAnimation&&(M=!1),M&&(!(O&&U)||T)&&d.push(...j.map(ae=>({animation:ae,options:{type:_}})))}if(v.size){const w={};v.forEach(_=>{const E=n.getBaseTarget(_),I=n.getValue(_);I&&(I.liveStyle=!0),w[_]=E??null}),d.push({animation:w})}let x=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(x=!1),r=!1,x?t(d):Promise.resolve()}function a(u,c){var h;if(e[u].isActive===c)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(v=>{var p;return(p=v.animationState)===null||p===void 0?void 0:p.setActive(u,c)}),e[u].isActive=c;const d=s(u);for(const v in e)e[v].protectedKeys={};return d}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>e,reset:()=>{e=gx(),r=!0}}}function YE(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!G5(t,n):!1}function vc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gx(){return{animate:vc(!0),whileInView:vc(),whileHover:vc(),whileTap:vc(),whileDrag:vc(),whileFocus:vc(),exit:vc()}}class Ol{constructor(t){this.isMounted=!1,this.node=t}update(){}}class JE extends Ol{constructor(t){super(t),t.animationState||(t.animationState=XE(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Rv(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let QE=0;class ZE extends Ol{constructor(){super(...arguments),this.id=QE++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const eN={animation:{Feature:JE},exit:{Feature:ZE}};function id(n,t,e,r={passive:!0}){return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e)}function xd(n){return{point:{x:n.pageX,y:n.pageY}}}const tN=n=>t=>m1(t)&&n(t,xd(t));function Gh(n,t,e,r){return id(n,t,tN(e),r)}const yx=(n,t)=>Math.abs(n-t);function nN(n,t){const e=yx(n.x,t.x),r=yx(n.y,t.y);return Math.sqrt(e**2+r**2)}class D3{constructor(t,e,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Jm(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,p=nN(d.offset,{x:0,y:0})>=3;if(!v&&!p)return;const{point:y}=d,{timestamp:x}=Si;this.history.push({...y,timestamp:x});const{onStart:w,onMove:_}=this.handlers;v||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,d)},this.handlePointerMove=(d,v)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Ym(v,this.transformPagePoint),er.update(this.updatePoint,!0)},this.handlePointerUp=(d,v)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Jm(d.type==="pointercancel"?this.lastMoveEventInfo:Ym(v,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,w),y&&y(d,w)},!m1(t))return;this.dragSnapToOrigin=o,this.handlers=e,this.transformPagePoint=r,this.contextWindow=i||window;const s=xd(t),a=Ym(s,this.transformPagePoint),{point:u}=a,{timestamp:c}=Si;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=e;h&&h(t,Jm(a,this.history)),this.removeListeners=yd(Gh(this.contextWindow,"pointermove",this.handlePointerMove),Gh(this.contextWindow,"pointerup",this.handlePointerUp),Gh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Tl(this.updatePoint)}}function Ym(n,t){return t?{point:t(n.point)}:n}function xx(n,t){return{x:n.x-t.x,y:n.y-t.y}}function Jm({point:n},t){return{point:n,delta:xx(n,F3(t)),offset:xx(n,rN(t)),velocity:iN(t,.1)}}function rN(n){return n[0]}function F3(n){return n[n.length-1]}function iN(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,r=null;const i=F3(n);for(;e>=0&&(r=n[e],!(i.timestamp-r.timestamp>Ru(t)));)e--;if(!r)return{x:0,y:0};const o=Tu(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const M3=1e-4,oN=1-M3,aN=1+M3,O3=.01,sN=0-O3,uN=0+O3;function ra(n){return n.max-n.min}function lN(n,t,e){return Math.abs(n-t)<=e}function wx(n,t,e,r=.5){n.origin=r,n.originPoint=mr(t.min,t.max,n.origin),n.scale=ra(e)/ra(t),n.translate=mr(e.min,e.max,n.origin)-n.originPoint,(n.scale>=oN&&n.scale<=aN||isNaN(n.scale))&&(n.scale=1),(n.translate>=sN&&n.translate<=uN||isNaN(n.translate))&&(n.translate=0)}function $h(n,t,e,r){wx(n.x,t.x,e.x,r?r.originX:void 0),wx(n.y,t.y,e.y,r?r.originY:void 0)}function bx(n,t,e){n.min=e.min+t.min,n.max=n.min+ra(t)}function cN(n,t,e){bx(n.x,t.x,e.x),bx(n.y,t.y,e.y)}function _x(n,t,e){n.min=t.min-e.min,n.max=n.min+ra(t)}function Kh(n,t,e){_x(n.x,t.x,e.x),_x(n.y,t.y,e.y)}function fN(n,{min:t,max:e},r){return t!==void 0&&n<t?n=r?mr(t,n,r.min):Math.max(n,t):e!==void 0&&n>e&&(n=r?mr(e,n,r.max):Math.min(n,e)),n}function Sx(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function hN(n,{top:t,left:e,bottom:r,right:i}){return{x:Sx(n.x,e,i),y:Sx(n.y,t,r)}}function Cx(n,t){let e=t.min-n.min,r=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,r]=[r,e]),{min:e,max:r}}function dN(n,t){return{x:Cx(n.x,t.x),y:Cx(n.y,t.y)}}function pN(n,t){let e=.5;const r=ra(n),i=ra(t);return i>r?e=Xf(t.min,t.max-r,n.min):r>i&&(e=Xf(n.min,n.max-i,t.min)),Lu(0,1,e)}function vN(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const lg=.35;function mN(n=lg){return n===!1?n=0:n===!0&&(n=lg),{x:Ax(n,"left","right"),y:Ax(n,"top","bottom")}}function Ax(n,t,e){return{min:kx(n,t),max:kx(n,e)}}function kx(n,t){return typeof n=="number"?n:n[t]||0}const Ex=()=>({translate:0,scale:1,origin:0,originPoint:0}),Df=()=>({x:Ex(),y:Ex()}),Nx=()=>({min:0,max:0}),Mr=()=>({x:Nx(),y:Nx()});function Sa(n){return[n("x"),n("y")]}function B3({top:n,left:t,right:e,bottom:r}){return{x:{min:t,max:e},y:{min:n,max:r}}}function gN({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function yN(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),r=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:r.y,right:r.x}}function Qm(n){return n===void 0||n===1}function cg({scale:n,scaleX:t,scaleY:e}){return!Qm(n)||!Qm(t)||!Qm(e)}function gc(n){return cg(n)||j3(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function j3(n){return Ix(n.x)||Ix(n.y)}function Ix(n){return n&&n!=="0%"}function nv(n,t,e){const r=n-e,i=t*r;return e+i}function Px(n,t,e,r,i){return i!==void 0&&(n=nv(n,i,r)),nv(n,e,r)+t}function fg(n,t=0,e=1,r,i){n.min=Px(n.min,t,e,r,i),n.max=Px(n.max,t,e,r,i)}function U3(n,{x:t,y:e}){fg(n.x,t.translate,t.scale,t.originPoint),fg(n.y,e.translate,e.scale,e.originPoint)}const Rx=.999999999999,Tx=1.0000000000001;function xN(n,t,e,r=!1){const i=e.length;if(!i)return;t.x=t.y=1;let o,s;for(let a=0;a<i;a++){o=e[a],s=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Mf(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,U3(n,s)),r&&gc(o.latestValues)&&Mf(n,o.latestValues))}t.x<Tx&&t.x>Rx&&(t.x=1),t.y<Tx&&t.y>Rx&&(t.y=1)}function Ff(n,t){n.min=n.min+t,n.max=n.max+t}function Lx(n,t,e,r,i=.5){const o=mr(n.min,n.max,i);fg(n,t,e,o,r)}function Mf(n,t){Lx(n.x,t.x,t.scaleX,t.scale,t.originX),Lx(n.y,t.y,t.scaleY,t.scale,t.originY)}function z3(n,t){return B3(yN(n.getBoundingClientRect(),t))}function wN(n,t,e){const r=z3(n,e),{scroll:i}=t;return i&&(Ff(r.x,i.offset.x),Ff(r.y,i.offset.y)),r}const V3=({current:n})=>n?n.ownerDocument.defaultView:null,bN=new WeakMap;class _N{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mr(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(xd(h).point)},o=(h,d)=>{const{drag:v,dragPropagation:p,onDragStart:y}=this.getProps();if(v&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pk(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sa(w=>{let _=this.getAxisMotionValue(w).get()||0;if(Ds.test(_)){const{projection:E}=this.visualElement;if(E&&E.layout){const I=E.layout.layoutBox[w];I&&(_=ra(I)*(parseFloat(_)/100))}}this.originPoint[w]=_}),y&&er.postRender(()=>y(h,d)),tg(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},s=(h,d)=>{const{dragPropagation:v,dragDirectionLock:p,onDirectionLock:y,onDrag:x}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:w}=d;if(p&&this.currentDirection===null){this.currentDirection=SN(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),x&&x(h,d)},a=(h,d)=>this.stop(h,d),u=()=>Sa(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new D3(t,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:V3(this.visualElement)})}stop(t,e){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=e;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&er.postRender(()=>o(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,r){const{drag:i}=this.getProps();if(!r||!mp(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=fN(s,this.constraints[t],this.elastic[t])),o.set(s)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;e&&Tf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=hN(i.layoutBox,e):this.constraints=!1,this.elastic=mN(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Sa(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=vN(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Tf(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=wN(r,i.root,this.visualElement.getTransformPagePoint());let s=dN(i.layout.layoutBox,o);if(e){const a=e(gN(s));this.hasMutatedConstraints=!!a,a&&(s=B3(a))}return s}startAnimation(t){const{drag:e,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},c=Sa(h=>{if(!mp(h,e,this.currentDirection))return;let d=u&&u[h]||{};s&&(d={min:0,max:0});const v=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:r?t[h]:0,bounceStiffness:v,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...o,...d};return this.startAxisValueAnimation(h,y)});return Promise.all(c).then(a)}startAxisValueAnimation(t,e){const r=this.getAxisMotionValue(t);return tg(this.visualElement,t),r.start(N1(t,r,0,e,this.visualElement,!1))}stopAnimation(){Sa(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Sa(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[e];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Sa(e=>{const{drag:r}=this.getProps();if(!mp(e,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(e);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[e];o.set(t[e]-mr(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:r}=this.visualElement;if(!Tf(e)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Sa(s=>{const a=this.getAxisMotionValue(s);if(a&&this.constraints!==!1){const u=a.get();i[s]=pN({min:u,max:u},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Sa(s=>{if(!mp(s,t,null))return;const a=this.getAxisMotionValue(s),{min:u,max:c}=this.constraints[s];a.set(mr(u,c,i[s]))})}addListeners(){if(!this.visualElement.current)return;bN.set(this.visualElement,this);const t=this.visualElement.current,e=Gh(t,"pointerdown",u=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Tf(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),er.read(r);const s=id(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(Sa(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=u[h].translate,d.set(d.get()+u[h].translate))}),this.visualElement.render())}));return()=>{s(),e(),o(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=lg,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function mp(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function SN(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class CN extends Ol{constructor(t){super(t),this.removeGroupControls=ta,this.removeListeners=ta,this.controls=new _N(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ta}unmount(){this.removeGroupControls(),this.removeListeners()}}const Dx=n=>(t,e)=>{n&&er.postRender(()=>n(t,e))};class AN extends Ol{constructor(){super(...arguments),this.removePointerDownListener=ta}onPointerDown(t){this.session=new D3(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:V3(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Dx(t),onStart:Dx(e),onMove:r,onEnd:(o,s)=>{delete this.session,i&&er.postRender(()=>i(o,s))}}}mount(){this.removePointerDownListener=Gh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Vp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Fx(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Fh={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(zt.test(n))n=parseFloat(n);else return n;const e=Fx(n,t.target.x),r=Fx(n,t.target.y);return`${e}% ${r}%`}},kN={correct:(n,{treeScale:t,projectionDelta:e})=>{const r=n,i=Ll.parse(n);if(i.length>5)return r;const o=Ll.createTransformer(n),s=typeof i[0]!="number"?1:0,a=e.x.scale*t.x,u=e.y.scale*t.y;i[0+s]/=a,i[1+s]/=u;const c=mr(a,u,.5);return typeof i[2+s]=="number"&&(i[2+s]/=c),typeof i[3+s]=="number"&&(i[3+s]/=c),o(i)}};class EN extends qe.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=t;$A(NN),o&&(e.group&&e.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Vp.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||t.layoutDependency!==e||e===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?s.promote():s.relegate()||er.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),r1.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function W3(n){const[t,e]=A5(),r=qe.useContext(Xg);return fe.jsx(EN,{...n,layoutGroup:r,switchLayoutGroup:qe.useContext(L5),isPresent:t,safeToRemove:e})}const NN={borderRadius:{...Fh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fh,borderTopRightRadius:Fh,borderBottomLeftRadius:Fh,borderBottomRightRadius:Fh,boxShadow:kN};function IN(n,t,e){const r=Ki(n)?n:nd(n);return r.start(N1("",r,t,e)),r.animation}function PN(n){return n instanceof SVGElement&&n.tagName!=="svg"}const RN=(n,t)=>n.depth-t.depth;class TN{constructor(){this.children=[],this.isDirty=!1}add(t){g1(this.children,t),this.isDirty=!0}remove(t){y1(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(RN),this.isDirty=!1,this.children.forEach(t)}}function LN(n,t){const e=Fs.now(),r=({timestamp:i})=>{const o=i-e;o>=t&&(Tl(r),n(o-t))};return er.read(r,!0),()=>Tl(r)}const q3=["TopLeft","TopRight","BottomLeft","BottomRight"],DN=q3.length,Mx=n=>typeof n=="string"?parseFloat(n):n,Ox=n=>typeof n=="number"||zt.test(n);function FN(n,t,e,r,i,o){i?(n.opacity=mr(0,e.opacity!==void 0?e.opacity:1,MN(r)),n.opacityExit=mr(t.opacity!==void 0?t.opacity:1,0,ON(r))):o&&(n.opacity=mr(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,r));for(let s=0;s<DN;s++){const a=`border${q3[s]}Radius`;let u=Bx(t,a),c=Bx(e,a);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||Ox(u)===Ox(c)?(n[a]=Math.max(mr(Mx(u),Mx(c),r),0),(Ds.test(c)||Ds.test(u))&&(n[a]+="%")):n[a]=c}(t.rotate||e.rotate)&&(n.rotate=mr(t.rotate||0,e.rotate||0,r))}function Bx(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const MN=H3(0,.5,l3),ON=H3(.5,.95,ta);function H3(n,t,e){return r=>r<n?0:r>t?1:e(Xf(n,t,r))}function jx(n,t){n.min=t.min,n.max=t.max}function _a(n,t){jx(n.x,t.x),jx(n.y,t.y)}function Ux(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function zx(n,t,e,r,i){return n-=t,n=nv(n,1/e,r),i!==void 0&&(n=nv(n,1/i,r)),n}function BN(n,t=0,e=1,r=.5,i,o=n,s=n){if(Ds.test(t)&&(t=parseFloat(t),t=mr(s.min,s.max,t/100)-s.min),typeof t!="number")return;let a=mr(o.min,o.max,r);n===o&&(a-=t),n.min=zx(n.min,t,e,a,i),n.max=zx(n.max,t,e,a,i)}function Vx(n,t,[e,r,i],o,s){BN(n,t[e],t[r],t[i],t.scale,o,s)}const jN=["x","scaleX","originX"],UN=["y","scaleY","originY"];function Wx(n,t,e,r){Vx(n.x,t,jN,e?e.x:void 0,r?r.x:void 0),Vx(n.y,t,UN,e?e.y:void 0,r?r.y:void 0)}function qx(n){return n.translate===0&&n.scale===1}function G3(n){return qx(n.x)&&qx(n.y)}function Hx(n,t){return n.min===t.min&&n.max===t.max}function zN(n,t){return Hx(n.x,t.x)&&Hx(n.y,t.y)}function Gx(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function $3(n,t){return Gx(n.x,t.x)&&Gx(n.y,t.y)}function $x(n){return ra(n.x)/ra(n.y)}function Kx(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class VN{constructor(){this.members=[]}add(t){g1(this.members,t),t.scheduleRender()}remove(t){if(y1(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let r;for(let i=e;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,e){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,e&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:r}=t;e.onExitComplete&&e.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function WN(n,t,e){let r="";const i=n.x.translate/t.x,o=n.y.translate/t.y,s=(e==null?void 0:e.z)||0;if((i||o||s)&&(r=`translate3d(${i}px, ${o}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:v,skewX:p,skewY:y}=e;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),v&&(r+=`rotateY(${v}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=n.x.scale*t.x,u=n.y.scale*t.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const yc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},qh=typeof window<"u"&&window.MotionDebug!==void 0,Zm=["","X","Y","Z"],qN={visibility:"hidden"},Xx=1e3;let HN=0;function e0(n,t,e,r){const{latestValues:i}=t;i[n]&&(e[n]=i[n],t.setStaticValue(n,0),r&&(r[n]=0))}function K3(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=n3(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",er,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&K3(r)}function X3({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=t==null?void 0:t()){this.id=HN++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qh&&(yc.totalNodes=yc.resolvedTargetDeltas=yc.recalculatedProjection=0),this.nodes.forEach(KN),this.nodes.forEach(ZN),this.nodes.forEach(eI),this.nodes.forEach(XN),qh&&window.MotionDebug.record(yc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new TN)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new x1),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const u=this.eventHandlers.get(s);u&&u.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=PN(s),this.instance=s;const{layoutId:u,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||u)&&(this.isLayoutDirty=!0),n){let d;const v=()=>this.root.updateBlockedByResize=!1;n(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=LN(v,250),Vp.hasAnimatedSinceResize&&(Vp.hasAnimatedSinceResize=!1,this.nodes.forEach(Jx))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:v,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||oI,{onLayoutAnimationStart:w,onLayoutAnimationComplete:_}=h.getProps(),E=!this.targetLayout||!$3(this.targetLayout,y)||p,I=!v&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||I||v&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,I);const C={...d1(x,"layout"),onPlay:w,onComplete:_};(h.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else v||Jx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Tl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tI),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&K3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Yx);return}this.isUpdating||this.nodes.forEach(JN),this.isUpdating=!1,this.nodes.forEach(QN),this.nodes.forEach(GN),this.nodes.forEach($N),this.clearAllSnapshots();const a=Fs.now();Si.delta=Lu(0,1e3/60,a-Si.timestamp),Si.timestamp=a,Si.isProcessing=!0,qm.update.process(Si),qm.preRender.process(Si),qm.render.process(Si),Si.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,r1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YN),this.sharedNodes.forEach(nI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,er.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){er.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:u,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!G3(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;s&&(a||gc(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return s&&(u=this.removeTransform(u)),aI(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:a}=this.options;if(!a)return Mr();const u=a.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(sI))){const{scroll:h}=this.root;h&&(Ff(u.x,h.offset.x),Ff(u.y,h.offset.y))}return u}removeElementScroll(s){var a;const u=Mr();if(_a(u,s),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return u;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:v}=h;h!==this.root&&d&&v.layoutScroll&&(d.wasRoot&&_a(u,s),Ff(u.x,d.offset.x),Ff(u.y,d.offset.y))}return u}applyTransform(s,a=!1){const u=Mr();_a(u,s);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Mf(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),gc(h.latestValues)&&Mf(u,h.latestValues)}return gc(this.latestValues)&&Mf(u,this.latestValues),u}removeTransform(s){const a=Mr();_a(a,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!gc(c.latestValues))continue;cg(c.latestValues)&&c.updateSnapshot();const h=Mr(),d=c.measurePageBox();_a(h,d),Wx(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return gc(this.latestValues)&&Wx(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Si.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:v}=this.options;if(!(!this.layout||!(d||v))){if(this.resolvedRelativeTargetAt=Si.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mr(),this.relativeTargetOrigin=Mr(),Kh(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),_a(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Mr(),this.targetWithTransforms=Mr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_a(this.target,this.layout.layoutBox),U3(this.target,this.targetDelta)):_a(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mr(),this.relativeTargetOrigin=Mr(),Kh(this.relativeTargetOrigin,this.target,p.target),_a(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qh&&yc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||cg(this.parent.latestValues)||j3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Si.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;_a(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,p=this.treeScale.y;xN(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Mr());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ux(this.prevProjectionDelta.x,this.projectionDelta.x),Ux(this.prevProjectionDelta.y,this.projectionDelta.y)),$h(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==p||!Kx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Kx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),qh&&yc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),s){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Df(),this.projectionDelta=Df(),this.projectionDeltaWithTransform=Df()}setAnimationOrigin(s,a=!1){const u=this.snapshot,c=u?u.latestValues:{},h={...this.latestValues},d=Df();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const v=Mr(),p=u?u.source:void 0,y=this.layout?this.layout.source:void 0,x=p!==y,w=this.getStack(),_=!w||w.members.length<=1,E=!!(x&&!_&&this.options.crossfade===!0&&!this.path.some(iI));this.animationProgress=0;let I;this.mixTargetDelta=C=>{const N=C/1e3;Qx(d.x,s.x,N),Qx(d.y,s.y,N),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Kh(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rI(this.relativeTarget,this.relativeTargetOrigin,v,N),I&&zN(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=Mr()),_a(I,this.relativeTarget)),x&&(this.animationValues=h,FN(h,c,this.latestValues,N,E,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Tl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=er.update(()=>{Vp.hasAnimatedSinceResize=!0,this.currentAnimation=IN(0,Xx,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Xx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:u,layout:c,latestValues:h}=s;if(!(!a||!u||!c)){if(this!==s&&this.layout&&c&&Y3(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||Mr();const d=ra(this.layout.layoutBox.x);u.x.min=s.target.x.min,u.x.max=u.x.min+d;const v=ra(this.layout.layoutBox.y);u.y.min=s.target.y.min,u.y.max=u.y.min+v}_a(a,u),Mf(a,h),$h(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new VN),this.sharedNodes.get(s).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:u}=s;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(a=!0),!a)return;const c={};u.z&&e0("z",s,c,this.animationValues);for(let h=0;h<Zm.length;h++)e0(`rotate${Zm[h]}`,s,c,this.animationValues),e0(`skew${Zm[h]}`,s,c,this.animationValues);s.render();for(const h in c)s.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);s.scheduleRender()}getProjectionStyles(s){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return qN;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Up(s==null?void 0:s.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Up(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!gc(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const v=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=WN(this.projectionDeltaWithTransform,this.treeScale,v),h&&(c.transform=h(v,c.transform));const{x:p,y}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,d.animationValues?c.opacity=d===this?(u=(a=v.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:c.opacity=d===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const x in Jp){if(v[x]===void 0)continue;const{correct:w,applyTo:_}=Jp[x],E=c.transform==="none"?v[x]:w(v[x],d);if(_){const I=_.length;for(let C=0;C<I;C++)c[_[C]]=E}else c[x]=E}return this.options.layoutId&&(c.pointerEvents=d===this?Up(s==null?void 0:s.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Yx),this.root.sharedNodes.clear()}}}function GN(n){n.updateLayout()}function $N(n){var t;const e=((t=n.resumeFrom)===null||t===void 0?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:o}=n.options,s=e.source!==n.layout.source;o==="size"?Sa(d=>{const v=s?e.measuredBox[d]:e.layoutBox[d],p=ra(v);v.min=r[d].min,v.max=v.min+p}):Y3(o,e.layoutBox,r)&&Sa(d=>{const v=s?e.measuredBox[d]:e.layoutBox[d],p=ra(r[d]);v.max=v.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+p)});const a=Df();$h(a,r,e.layoutBox);const u=Df();s?$h(u,n.applyTransform(i,!0),e.measuredBox):$h(u,r,e.layoutBox);const c=!G3(a);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:v,layout:p}=d;if(v&&p){const y=Mr();Kh(y,e.layoutBox,v.layoutBox);const x=Mr();Kh(x,r,p.layoutBox),$3(y,x)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=y,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function KN(n){qh&&yc.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function XN(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function YN(n){n.clearSnapshot()}function Yx(n){n.clearMeasurements()}function JN(n){n.isLayoutDirty=!1}function QN(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function Jx(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function ZN(n){n.resolveTargetDelta()}function eI(n){n.calcProjection()}function tI(n){n.resetSkewAndRotation()}function nI(n){n.removeLeadSnapshot()}function Qx(n,t,e){n.translate=mr(t.translate,0,e),n.scale=mr(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function Zx(n,t,e,r){n.min=mr(t.min,e.min,r),n.max=mr(t.max,e.max,r)}function rI(n,t,e,r){Zx(n.x,t.x,e.x,r),Zx(n.y,t.y,e.y,r)}function iI(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const oI={duration:.45,ease:[.4,0,.1,1]},ew=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),tw=ew("applewebkit/")&&!ew("chrome/")?Math.round:ta;function nw(n){n.min=tw(n.min),n.max=tw(n.max)}function aI(n){nw(n.x),nw(n.y)}function Y3(n,t,e){return n==="position"||n==="preserve-aspect"&&!lN($x(t),$x(e),.2)}function sI(n){var t;return n!==n.root&&((t=n.scroll)===null||t===void 0?void 0:t.wasRoot)}const uI=X3({attachResizeListener:(n,t)=>id(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),t0={current:void 0},J3=X3({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!t0.current){const n=new uI({});n.mount(window),n.setOptions({layoutScroll:!0}),t0.current=n}return t0.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),lI={pan:{Feature:AN},drag:{Feature:CN,ProjectionNode:J3,MeasureLayout:W3}};function rw(n,t,e){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,o=r[i];o&&er.postRender(()=>o(t,xd(t)))}class cI extends Ol{mount(){const{current:t}=this.node;t&&(this.unmount=lk(t,e=>(rw(this.node,e,"Start"),r=>rw(this.node,r,"End"))))}unmount(){}}class fI extends Ol{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yd(id(this.node.current,"focus",()=>this.onFocus()),id(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function iw(n,t,e){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),o=r[i];o&&er.postRender(()=>o(t,xd(t)))}class hI extends Ol{mount(){const{current:t}=this.node;t&&(this.unmount=dk(t,e=>(iw(this.node,e,"Start"),(r,{success:i})=>iw(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const hg=new WeakMap,n0=new WeakMap,dI=n=>{const t=hg.get(n.target);t&&t(n)},pI=n=>{n.forEach(dI)};function vI({root:n,...t}){const e=n||document;n0.has(e)||n0.set(e,{});const r=n0.get(e),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(pI,{root:n,...t})),r[i]}function mI(n,t,e){const r=vI(t);return hg.set(n,e),r.observe(n),()=>{hg.delete(n),r.unobserve(n)}}const gI={some:0,all:1};class yI extends Ol{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:r,amount:i="some",once:o}=t,s={root:e?e.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:gI[i]},a=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),v=c?h:d;v&&v(u)};return mI(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(xI(t,e))&&this.startObserver()}unmount(){}}function xI({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const wI={inView:{Feature:yI},tap:{Feature:hI},focus:{Feature:fI},hover:{Feature:cI}},bI={layout:{ProjectionNode:J3,MeasureLayout:W3}},dg={current:null},Q3={current:!1};function _I(){if(Q3.current=!0,!!Qg)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>dg.current=n.matches;n.addListener(t),t()}else dg.current=!1}const SI=[...S3,Wi,Ll],CI=n=>SI.find(_3(n)),ow=new WeakMap;function AI(n,t,e){for(const r in t){const i=t[r],o=e[r];if(Ki(i))n.addValue(r,i);else if(Ki(o))n.addValue(r,nd(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const s=n.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=n.getStaticValue(r);n.addValue(r,nd(s!==void 0?s:i,{owner:n}))}}for(const r in e)t[r]===void 0&&n.removeValue(r);return t}const aw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kI{scrapeMotionValuesFromProps(t,e,r){return{}}constructor({parent:t,props:e,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=A1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Fs.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,er.render(this.render,!1,!0))};const{latestValues:u,renderState:c,onUpdate:h}=s;this.onUpdate=h,this.latestValues=u,this.baseTarget={...u},this.initialValues=e.initial?{...u}:{},this.renderState=c,this.parent=t,this.props=e,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!o,this.isControllingVariants=Tv(e),this.isVariantNode=R5(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...v}=this.scrapeMotionValuesFromProps(e,{},this);for(const p in v){const y=v[p];u[p]!==void 0&&Ki(y)&&y.set(u[p],!1)}}mount(t){this.current=t,ow.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,r)=>this.bindToMotionValue(r,e)),Q3.current||_I(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:dg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ow.delete(this.current),this.projection&&this.projection.unmount(),Tl(this.notifyUpdate),Tl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Fc.has(t),i=e.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&er.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=e.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),o(),s&&s(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Yf){const e=Yf[t];if(!e)continue;const{isEnabled:r,Feature:i}=e;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let r=0;r<aw.length;r++){const i=aw[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,s=t[o];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=AI(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const r=this.values.get(t);e!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&e!==void 0&&(r=nd(e===null?void 0:e,{owner:this}),this.addValue(t,r)),r}readValue(t,e){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(w3(i)||f3(i))?i=parseFloat(i):!CI(i)&&Ll.test(e)&&(i=g3(t,e)),this.setBaseTarget(t,Ki(i)?i.get():i)),Ki(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=o1(this.props,r,(e=this.presenceContext)===null||e===void 0?void 0:e.custom);s&&(i=s[t])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Ki(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new x1),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class Z3 extends kI{constructor(){super(...arguments),this.KeyframeResolver=C3}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:r}){delete e[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ki(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function EI(n){return window.getComputedStyle(n)}class NI extends Z3{constructor(){super(...arguments),this.type="html",this.renderInstance=U5}readValueFromInstance(t,e){if(Fc.has(e)){const r=C1(e);return r&&r.default||0}else{const r=EI(t),i=(O5(e)?r.getPropertyValue(e):r[e])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:e}){return z3(t,e)}build(t,e,r){u1(t,e,r.transformTemplate)}scrapeMotionValuesFromProps(t,e,r){return h1(t,e,r)}}class II extends Z3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mr}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Fc.has(e)){const r=C1(e);return r&&r.default||0}return e=z5.has(e)?e:n1(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,r){return q5(t,e,r)}build(t,e,r){l1(t,e,this.isSVGTag,r.transformTemplate)}renderInstance(t,e,r,i){V5(t,e,r,i)}mount(t){this.isSVGTag=f1(t.tagName),super.mount(t)}}const PI=(n,t)=>i1(n)?new II(t):new NI(t,{allowProjection:n!==qe.Fragment}),RI=nk({...eN,...wI,...lI,...bI},PI),sw=gA(RI),TI=({isOpen:n,onClose:t,onOpenSettings:e})=>{const{setActiveMode:r,playSound:i,speak:o}=Us(),[s,a]=qe.useState(null),u=160,c=[{id:"media",label:"MEDIA",icon:"fa-music",angle:90,action:()=>{r("MEDIA"),o("Media player ready.")}}],h=[{id:"vision",label:"VISION",icon:"fa-eye",angle:140,action:()=>{r("VISION"),o("Vision systems active.")}},{id:"comms",label:"COMMS",icon:"fa-comments",angle:180,action:()=>{a("COMMS"),o("Select communication channel.")}},{id:"hud",label:"DRIVE",icon:"fa-car",angle:220,action:()=>{r("HUD"),o("Driving protocols initiated.")}}],d=[{id:"ops",label:"OPS LOG",icon:"fa-file-medical-alt",angle:40,action:()=>{r("OPS"),o("Operations center online.")}},{id:"recon",label:"RECON",icon:"fa-search-location",angle:0,action:()=>{r("RECON"),o("Sales targeting engaged.")}},{id:"database",label:"DATABASE",icon:"fa-database",angle:-40,action:()=>{r("DATABASE"),o("Accessing personnel records.")}}],p=s==="COMMS"?[{id:"whatsapp",label:"WHATSAPP",icon:"fab fa-whatsapp",angle:220,url:"https://wa.me/"},{id:"messenger",label:"MESSENGER",icon:"fab fa-facebook-messenger",angle:180,url:"https://m.me/"},{id:"viber",label:"VIBER",icon:"fab fa-viber",angle:140,url:"viber://forward?text=Status%20Check"},{id:"facebook",label:"FACEBOOK",icon:"fab fa-facebook-f",angle:90,url:"https://facebook.com/"},{id:"instagram",label:"INSTAGRAM",icon:"fab fa-instagram",angle:40,url:"https://instagram.com/"},{id:"x",label:"X",icon:"fab fa-x-twitter",angle:0,url:"https://x.com/"},{id:"youtube",label:"YOUTUBE",icon:"fab fa-youtube",angle:-40,url:"https://youtube.com/"},{id:"back",label:"BACK",icon:"fa-undo",angle:-90,action:()=>a(null)}]:[...c,...h,...d],y=w=>{const _=w*Math.PI/180;return{x:Math.cos(_)*u,y:Math.sin(_)*u*.8}},x=w=>{i("click"),w.url?(o(`Opening ${w.label}`),w.url.startsWith("viber://")||w.url.startsWith("whatsapp://")?window.location.href=w.url:window.open(w.url,"_blank")):w.action&&w.action(),w.id!=="comms"&&w.id!=="back"&&(t(),a(null))};return fe.jsx(lA,{children:n&&fe.jsx(sw.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 backdrop-blur-[2px]",onClick:()=>{t(),a(null)},children:fe.jsxs("div",{className:"relative w-0 h-0 flex items-center justify-center",onClick:w=>w.stopPropagation(),children:[fe.jsx("div",{className:"absolute w-32 h-32 rounded-full cursor-pointer",onClick:()=>{t(),a(null)}}),p.map((w,_)=>{const E=y(w.angle);return fe.jsxs(sw.button,{initial:{x:0,y:0,scale:0,opacity:0},animate:{x:E.x,y:E.y,scale:1,opacity:1},exit:{x:0,y:0,scale:0,opacity:0},transition:{type:"spring",stiffness:200,damping:20,delay:_*.03},onClick:()=>x(w),className:`
                    absolute w-20 h-20 rounded-full border border-cyan/50 bg-black/80
                    flex flex-col items-center justify-center gap-1
                    shadow-[0_0_15px_rgba(0,229,255,0.2)]
                    hover:scale-110 hover:border-cyan hover:bg-cyan/20 hover:shadow-[0_0_25px_rgba(0,229,255,0.6)]
                    active:scale-95 transition-all
                    ${w.id==="close"||w.id==="back"?"border-red-500/50 text-red-500 hover:border-red-500":"text-cyan"}
                  `,children:[fe.jsx("i",{className:`fas ${w.icon} text-2xl`}),fe.jsx("span",{className:"font-orbitron text-[8px] tracking-wider mt-1",children:w.label}),fe.jsx("div",{className:"absolute top-1/2 left-1/2 w-[160px] h-[1px] bg-cyan/20 -z-10 origin-left pointer-events-none",style:{transform:`rotate(${w.angle+180}deg)`,width:`${u}px`,left:"50%",top:"50%"}})]},w.id)})]})})})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e4=function(n,t){return(e4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(n,t)};function es(n,t){function e(){this.constructor=n}e4(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function xt(n,t,e,r){return new(e||(e=Promise))((function(i,o){function s(c){try{u(r.next(c))}catch(h){o(h)}}function a(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):new e((function(h){h(c.value)})).then(s,a)}u((r=r.apply(n,[])).next())}))}function wt(n,t){var e,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return(function(h){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(i=2&h[0]?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,r=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){s=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){s.label=h[1];break}if(h[0]===6&&s.label<i[1]){s.label=i[1],i=h;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(h);break}i[2]&&s.ops.pop(),s.trys.pop();continue}h=t.call(n,s)}catch(d){h=[6,d],r=0}finally{e=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}})([u,c])}}}var LI=(function(){function n(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return n.prototype.setPlatform=function(t,e){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=t,this.platform=e},n.prototype.registerFlag=function(t,e,r){if(this.flagRegistry[t]={evaluationFn:e,setHook:r},this.urlFlags[t]!=null){var i=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+i+"."),this.set(t,i)}},n.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},n.prototype.getNumber=function(t){return this.get(t)},n.prototype.getBool=function(t){return this.get(t)},n.prototype.getFlags=function(){return this.flags},Object.defineProperty(n.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),n.prototype.set=function(t,e){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=e,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(e)},n.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},n.prototype.setFlags=function(t){this.flags=Object.assign({},t)},n.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},n.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var e,r,i=(e=this.global.location.search,r={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return DI(r,s[0],s[1]),s.join("=")})),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach((function(o){var s=o.split(":"),a=s[0],u=s[1];t.urlFlags[a]=(function(c,h){if((h=h.toLowerCase())==="true"||h==="false")return h==="true";if(""+ +h===h)return+h;throw new Error("Could not parse value flag value "+h+" for flag "+c+".")})(a,u)}))}},n})();function DI(n,t,e){n[decodeURIComponent(t)]=decodeURIComponent(e||"")}function Ve(){return t4}var t4=null,rv=new Map,pg=new Map;function n4(n,t){var e=i4(n,t);return rv.get(e)}function FI(n){return pg.get(n)}function uw(n){for(var t=rv.entries(),e=[];;){var r=t.next(),i=r.done,o=r.value;if(i)break;var s=o[0],a=o[1];s.split("_")[0]===n&&e.push(a)}return e}function r4(n){var t=n.kernelName,e=n.backendName,r=i4(t,e);if(rv.has(r))throw new Error("The kernel '"+t+"' for backend '"+e+"' is already registered");rv.set(r,n)}function MI(n){var t=n.kernelName;pg.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),pg.set(t,n)}function i4(n,t){return t+"_"+n}function vg(n,t,e){return Math.max(n,Math.min(t,e))}function o4(n){return n%2==0?n:n+1}function OI(n){for(var t=0,e=0;e<n.length;e++)t+=n[e];return t}function ce(n,t){if(!n)throw new Error(typeof t=="string"?t:t())}function Rn(n,t,e){e===void 0&&(e=""),ce(mi(n,t),(function(){return e+" Shapes "+n+" and "+t+" must match"}))}function ih(n){ce(n!=null,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Qf(n,t,e){if(t===void 0&&(t=[]),e===void 0&&(e=!1),t==null&&(t=[]),Array.isArray(n)||Ms(n)&&!e)for(var r=0;r<n.length;++r)Qf(n[r],t,e);else t.push(n);return t}function Ct(n){if(n.length===0)return 1;for(var t=n[0],e=1;e<n.length;e++)t*=n[e];return t}function mi(n,t){if(n===t)return!0;if(n==null||t==null||n.length!==t.length)return!1;for(var e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function Ur(n){return n%1==0}function BI(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;var t=Math.exp(2*n);return(t-1)/(t+1)}function mg(n){var t=Math.ceil(Math.sqrt(n));return[t,Math.ceil(n/t)]}function Bf(n,t){return t<=n.length?n:n+" ".repeat(t-n.length)}function lw(n,t,e){return t===void 0&&(t=function(r){return 0}),new Promise((function(r,i){var o=0,s=function(){if(n())r();else{o++;var a=t(o);e!=null&&o>=e?i():setTimeout(s,a)}};s()}))}function jI(n,t){for(var e=1,r=-1,i=0;i<n.length;++i)if(n[i]>=0)e*=n[i];else if(n[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(n[i]<0)throw Error("Shapes can not be < 0. Found "+n[i]+" at dim "+i);if(r===-1){if(t>0&&t!==e)throw Error("Size("+t+") must match the product of shape "+n);return n}if(e===0)throw Error("Cannot infer the missing size in ["+n+"] when there are 0 elements");if(t%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+e);var o=n.slice();return o[r]=t/e,o}function oi(n,t){var e=t.length;return ce((n=n==null?t.map((function(r,i){return i})):[].concat(n)).every((function(r){return r>=-e&&r<e})),(function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+n})),ce(n.every((function(r){return Ur(r)})),(function(){return"All values in axis param must be integers but got axis "+n})),n.map((function(r){return r<0?e+r:r}))}function _c(n,t){for(var e=[],r=[],i=t!=null&&Array.isArray(t)&&t.length===0,o=t==null||i?null:oi(t,n).sort(),s=0,a=0;a<n.length;++a){if(o!=null){if(o[s]===a&&n[a]!==1)throw new Error("Can't squeeze axis "+a+" since its dim '"+n[a]+"' is not 1");(o[s]==null||o[s]>a)&&n[a]===1&&(e.push(n[a]),r.push(a)),o[s]<=a&&s++}n[a]!==1&&(e.push(n[a]),r.push(a))}return{newShape:e,keptDims:r}}function od(n,t){var e=null;if(n==null||n==="float32")e=new Float32Array(t);else if(n==="int32")e=new Int32Array(t);else{if(n!=="bool")throw new Error("Unknown data type "+n);e=new Uint8Array(t)}return e}function iv(n,t){var e=null;if(n==null||n==="float32")e=new Float32Array(t);else if(n==="int32")e=new Int32Array(t);else if(n==="bool")e=new Uint8Array(t);else{if(n!=="string")throw new Error("Unknown data type "+n);e=new Array(t)}return e}function UI(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function zI(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function VI(n,t){return t!=="complex64"&&(t!=="float32"||n==="complex64")&&(t!=="int32"||n==="float32"||n==="complex64")&&(t!=="bool"||n!=="bool")}function Ms(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array}function a4(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error("Unknown dtype "+n)}function WI(n){if(n==null)return 0;var t=0;return n.forEach((function(e){return t+=e.length})),t}function I1(n){return typeof n=="string"||n instanceof String}function qI(n){return typeof n=="boolean"}function HI(n){return typeof n=="number"}function wd(n){return Array.isArray(n)?wd(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array?"int32":HI(n)?"float32":I1(n)?"string":qI(n)?"bool":"float32"}function gg(n){return!!(n&&n.constructor&&n.call&&n.apply)}function yg(n,t){for(var e=t;e<n;++e)if(n%e==0)return e;return n}function Os(n){var t=n.length;if(t<2)return[];var e=new Array(t-1);e[t-2]=n[t-1];for(var r=t-3;r>=0;--r)e[r]=e[r+1]*n[r+1];return e}function s4(n,t,e){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=Qf(n)),e&&UI(n,t),(function(o,s){return o instanceof Float32Array&&s==="float32"||o instanceof Int32Array&&s==="int32"||o instanceof Uint8Array&&s==="bool"})(n,t))return n;if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool"){for(var r=new Uint8Array(n.length),i=0;i<r.length;++i)Math.round(n[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+t)}function cw(n,t){if(n.length===0)return t[0];var e=n.reduce((function(r,i){return r*i}));if(e===0)return[];if(e!==t.length)throw new Error("["+n+"] does not match the input size.");return(function r(i,o,s){var a=new Array;if(o.length===1)for(var u=o[0],c=0;c<u;c++)a[c]=s[i+c];else{u=o[0];var h=o.slice(1),d=h.reduce((function(v,p){return v*p}));for(c=0;c<u;c++)a[c]=r(i+c*d,h,s)}return a})(0,n,t)}function u4(n,t){for(var e=bd(n,t),r=0;r<e.length;r++)e[r]=1;return e}function bd(n,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool")return new Uint8Array(n);throw new Error("Unknown data type "+t)}function Is(){return Ve().platform.now()}function l4(n){n.forEach((function(t){ce(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+n+"]."}))}))}function GI(n,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Ve().platform.encode(n,t)}function ov(n,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Ve().platform.decode(n,t)}function fw(n,t,e){if(t===0)return 0;if(t===1)return n[0];for(var r=n[n.length-1],i=0;i<n.length-1;++i)r+=e[i]*n[i];return r}function $I(n,t,e){if(t===0)return[];if(t===1)return[n];for(var r=new Array(t),i=0;i<r.length-1;++i)r[i]=Math.floor(n/e[i]),n-=r[i]*e[i];return r[r.length-1]=n,r}var KI=(function(){function n(t,e){this.backendTimer=t,this.logger=e,e==null&&(this.logger=new XI)}return n.prototype.profileKernel=function(t,e,r){var i,o=this,s=this.backendTimer.time((function(){i=r()}));return i.forEach((function(a){a.data().then((function(u){(function(c,h,d){if(h!=="float32")return!1;for(var v=0;v<c.length;v++){var p=c[v];if(isNaN(p)||!isFinite(p))return console.warn("Found "+p+" in the result of '"+d+"'"),!0}})(u,a.dtype,t),s.then((function(c){var h="";c.getExtraProfileInfo!=null&&(h=c.getExtraProfileInfo()),o.logger.logKernelProfile(t,a,u,c.kernelMs,e,h)}))}))})),i},n})(),XI=(function(){function n(){}return n.prototype.logKernelProfile=function(t,e,r,i,o,s){var a=typeof i=="number"?Bf(i+"ms",9):i.error,u=Bf(t,25),c=e.rank,h=e.size,d=Bf(e.shape.toString(),14),v="";for(var p in o){var y=o[p].shape||e.shape,x=y.length;v+=p+": "+x+"D "+(x>0?y:"")+" "}console.log("%c"+u+"	%c"+a+"	%c"+c+"D "+d+"	%c"+h+"	%c"+v+"	%c"+s,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},n})(),hw=20,Mh=3,r0=7;function YI(n,t,e,r){var i=Os(t),o=(function(c,h,d,v){var p=Ct(h),y=v[v.length-1],x=new Array(y).fill(0),w=h.length,_=d==="complex64"?Bh(c):c;if(w>1)for(var E=0;E<p/y;E++)for(var I=E*y,C=0;C<y;C++)x[C]=Math.max(x[C],Oh(_[I+C],0,d).length);return x})(n,t,e,i),s=t.length,a=(function c(h,d,v,p,y,x){x===void 0&&(x=!0);var w=v==="complex64"?2:1,_=d[0],E=d.length;if(E===0)return v==="complex64"?[Oh(Bh(h)[0],0,v)]:v==="bool"?[c4(h[0])]:[h[0].toString()];if(E===1){if(_>hw){var I=Mh*w,C=Array.from(h.slice(0,I)),N=Array.from(h.slice((_-Mh)*w,_*w));return v==="complex64"&&(C=Bh(C),N=Bh(N)),["["+C.map((function(oe,he){return Oh(oe,y[he],v)})).join(", ")+", ..., "+N.map((function(oe,he){return Oh(oe,y[_-Mh+he],v)})).join(", ")+"]"]}return["["+(v==="complex64"?Bh(h):Array.from(h)).map((function(oe,he){return Oh(oe,y[he],v)})).join(", ")+"]"]}var O=d.slice(1),U=p.slice(1),M=p[0]*w,T=[];if(_>hw){for(var j=0;j<Mh;j++){var D=(B=j*M)+M;T.push.apply(T,c(h.slice(B,D),O,v,U,y,!1))}for(T.push("..."),j=_-Mh;j<_;j++)D=(B=j*M)+M,T.push.apply(T,c(h.slice(B,D),O,v,U,y,j===_-1))}else for(j=0;j<_;j++){var B;D=(B=j*M)+M,T.push.apply(T,c(h.slice(B,D),O,v,U,y,j===_-1))}var X=E===2?",":"";for(T[0]="["+T[0]+X,j=1;j<T.length-1;j++)T[j]=" "+T[j]+X;var G=`,
`;for(j=2;j<E;j++)G+=`
`;return T[T.length-1]=" "+T[T.length-1]+"]"+(x?"":G),T})(n,t,e,i,o),u=["Tensor"];return r&&(u.push("  dtype: "+e),u.push("  rank: "+s),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(a.map((function(c){return"    "+c})).join(`
`)),u.join(`
`)}function Oh(n,t,e){return Bf(Array.isArray(n)?parseFloat(n[0].toFixed(r0))+" + "+parseFloat(n[1].toFixed(r0))+"j":I1(n)?"'"+n+"'":e==="bool"?c4(n):parseFloat(n.toFixed(r0)).toString(),t)}function c4(n){return n===0?"false":"true"}function Bh(n){for(var t=[],e=0;e<n.length;e+=2)t.push([n[e],n[e+1]]);return t}var ad=(function(){function n(t,e,r){var i=this;if(this.dtype=e,this.shape=t.slice(),this.size=Ct(t),r!=null){var o=r.length;ce(o===this.size,(function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."}))}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||iv(e,this.size),this.strides=Os(t)}return n.prototype.set=function(t){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),ce(r.length===this.rank,(function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+e.rank+")"}));var o=this.locToIndex(r);this.values[o]=t},n.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.length===0&&(t=[0]);for(var r=0,i=0,o=t;i<o.length;i++){var s=o[i];if(s<0||s>=this.shape[r]){var a="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(a)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]},n.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var e=t[t.length-1],r=0;r<t.length-1;++r)e+=this.strides[r]*t[r];return e},n.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(t/this.strides[r]),t-=e[r]*this.strides[r];return e[e.length-1]=t,e},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.toTensor=function(){return Ps().makeTensor(this.values,this.shape,this.dtype)},n})(),Ps=null,Oe=null,f4=null,vr=(function(){function n(t,e,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=Ct(t),this.strides=Os(t),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return n.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},n.prototype.asScalar=function(){return this.throwIfDisposed(),ce(this.size===1,(function(){return"The array must have only 1 element."})),this.reshape([])},n.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},n.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},n.prototype.as3D=function(t,e,r){return this.throwIfDisposed(),this.reshape([t,e,r])},n.prototype.as4D=function(t,e,r,i){return this.throwIfDisposed(),this.reshape([t,e,r,i])},n.prototype.as5D=function(t,e,r,i,o){return this.throwIfDisposed(),this.reshape([t,e,r,i,o])},n.prototype.asType=function(t){return this.throwIfDisposed(),Oe.cast(this,t)},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.buffer=function(){return xt(this,void 0,void 0,(function(){var t;return wt(this,(function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,Oe.buffer(this.shape,this.dtype,t)]}}))}))},n.prototype.bufferSync=function(){return Oe.buffer(this.shape,this.dtype,this.dataSync())},n.prototype.array=function(){return xt(this,void 0,void 0,(function(){var t;return wt(this,(function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,cw(this.shape,t)]}}))}))},n.prototype.arraySync=function(){return cw(this.shape,this.dataSync())},n.prototype.data=function(){return xt(this,void 0,void 0,(function(){var t,e;return wt(this,(function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=Ps().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:e=r.sent();try{return[2,e.map((function(i){return ov(i)}))]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}}))}))},n.prototype.dataSync=function(){this.throwIfDisposed();var t=Ps().readSync(this.dataId);if(this.dtype==="string")try{return t.map((function(e){return ov(e)}))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},n.prototype.bytes=function(){return xt(this,void 0,void 0,(function(){var t;return wt(this,(function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,Ps().read(this.dataId)];case 1:return t=e.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}}))}))},n.prototype.dispose=function(){this.isDisposed||(Ps().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),n.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},n.prototype.toFloat=function(){return this.asType("float32")},n.prototype.toInt=function(){return this.asType("int32")},n.prototype.toBool=function(){return this.asType("bool")},n.prototype.print=function(t){return t===void 0&&(t=!1),Oe.print(this,t)},n.prototype.reshape=function(t){return this.throwIfDisposed(),Oe.reshape(this,t)},n.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},n.prototype.expandDims=function(t){return t===void 0&&(t=0),Oe.expandDims(this,t)},n.prototype.cumsum=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=!1),r===void 0&&(r=!1),Oe.cumsum(this,t,e,r)},n.prototype.squeeze=function(t){return this.throwIfDisposed(),Oe.squeeze(this,t)},n.prototype.clone=function(){return this.throwIfDisposed(),Oe.clone(this)},n.prototype.oneHot=function(t,e,r){return this.throwIfDisposed(),Oe.oneHot(this,t,e,r)},n.prototype.toString=function(t){return t===void 0&&(t=!1),YI(this.dataSync(),this.shape,this.dtype,t)},n.prototype.tile=function(t){return this.throwIfDisposed(),Oe.tile(this,t)},n.prototype.gather=function(t,e){return e===void 0&&(e=0),this.throwIfDisposed(),Oe.gather(this,t,e)},n.prototype.matMul=function(t,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!1),this.throwIfDisposed(),Oe.matMul(this,t,e,r)},n.prototype.dot=function(t){return this.throwIfDisposed(),Oe.dot(this,t)},n.prototype.norm=function(t,e,r){return t===void 0&&(t="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1),this.throwIfDisposed(),Oe.norm(this,t,e,r)},n.prototype.slice=function(t,e){return this.throwIfDisposed(),Oe.slice(this,t,e)},n.prototype.reverse=function(t){return this.throwIfDisposed(),Oe.reverse(this,t)},n.prototype.concat=function(t,e){return e===void 0&&(e=0),this.throwIfDisposed(),t instanceof n&&(t=[t]),Oe.concat([this].concat(t),e)},n.prototype.split=function(t,e){return e===void 0&&(e=0),this.throwIfDisposed(),Oe.split(this,t,e)},n.prototype.stack=function(t,e){return e===void 0&&(e=0),Oe.stack([this,t],e)},n.prototype.unstack=function(t){return t===void 0&&(t=0),Oe.unstack(this,t)},n.prototype.pad=function(t,e){return e===void 0&&(e=0),Oe.pad(this,t,e)},n.prototype.batchNormalization=function(t,e,r,i,o){return r===void 0&&(r=.001),f4("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,e,o,i,r)},n.prototype.batchNorm=function(t,e,r,i,o){return o===void 0&&(o=.001),this.throwIfDisposed(),Oe.batchNorm(this,t,e,r,i,o)},n.prototype.all=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),Oe.all(this,t,e)},n.prototype.any=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),Oe.any(this,t,e)},n.prototype.logSumExp=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),Oe.logSumExp(this,t,e)},n.prototype.sum=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),Oe.sum(this,t,e)},n.prototype.prod=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),Oe.prod(this,t,e)},n.prototype.mean=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),Oe.mean(this,t,e)},n.prototype.min=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),Oe.min(this,t,e)},n.prototype.max=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),Oe.max(this,t,e)},n.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Oe.argMin(this,t)},n.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Oe.argMax(this,t)},n.prototype.cast=function(t){return this.throwIfDisposed(),Oe.cast(this,t)},n.prototype.add=function(t){return this.throwIfDisposed(),Oe.add(this,t)},n.prototype.addStrict=function(t){return this.throwIfDisposed(),Oe.addStrict(this,t)},n.prototype.atan2=function(t){return this.throwIfDisposed(),Oe.atan2(this,t)},n.prototype.sub=function(t){return this.throwIfDisposed(),Oe.sub(this,t)},n.prototype.subStrict=function(t){return this.throwIfDisposed(),Oe.subStrict(this,t)},n.prototype.pow=function(t){return this.throwIfDisposed(),Oe.pow(this,t)},n.prototype.powStrict=function(t){return this.throwIfDisposed(),Oe.powStrict(this,t)},n.prototype.mul=function(t){return this.throwIfDisposed(),Oe.mul(this,t)},n.prototype.mulStrict=function(t){return this.throwIfDisposed(),Oe.mulStrict(this,t)},n.prototype.div=function(t){return this.throwIfDisposed(),Oe.div(this,t)},n.prototype.divNoNan=function(t){return this.throwIfDisposed(),Oe.divNoNan(this,t)},n.prototype.floorDiv=function(t){return this.throwIfDisposed(),Oe.floorDiv(this,t)},n.prototype.divStrict=function(t){return this.throwIfDisposed(),Oe.divStrict(this,t)},n.prototype.minimum=function(t){return this.throwIfDisposed(),Oe.minimum(this,t)},n.prototype.minimumStrict=function(t){return this.throwIfDisposed(),Oe.minimumStrict(this,t)},n.prototype.maximum=function(t){return this.throwIfDisposed(),Oe.maximum(this,t)},n.prototype.maximumStrict=function(t){return this.throwIfDisposed(),Oe.maximumStrict(this,t)},n.prototype.mod=function(t){return this.throwIfDisposed(),Oe.mod(this,t)},n.prototype.modStrict=function(t){return this.throwIfDisposed(),Oe.modStrict(this,t)},n.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),Oe.squaredDifferenceStrict(this,t)},n.prototype.transpose=function(t){return this.throwIfDisposed(),Oe.transpose(this,t)},n.prototype.notEqual=function(t){return this.throwIfDisposed(),Oe.notEqual(this,t)},n.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),Oe.notEqualStrict(this,t)},n.prototype.less=function(t){return this.throwIfDisposed(),Oe.less(this,t)},n.prototype.lessStrict=function(t){return this.throwIfDisposed(),Oe.lessStrict(this,t)},n.prototype.equal=function(t){return this.throwIfDisposed(),Oe.equal(this,t)},n.prototype.equalStrict=function(t){return this.throwIfDisposed(),Oe.equalStrict(this,t)},n.prototype.lessEqual=function(t){return this.throwIfDisposed(),Oe.lessEqual(this,t)},n.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),Oe.lessEqualStrict(this,t)},n.prototype.greater=function(t){return this.throwIfDisposed(),Oe.greater(this,t)},n.prototype.greaterStrict=function(t){return this.throwIfDisposed(),Oe.greaterStrict(this,t)},n.prototype.greaterEqual=function(t){return this.throwIfDisposed(),Oe.greaterEqual(this,t)},n.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Oe.greaterEqualStrict(this,t)},n.prototype.logicalAnd=function(t){return this.throwIfDisposed(),Oe.logicalAnd(this,t)},n.prototype.logicalOr=function(t){return this.throwIfDisposed(),Oe.logicalOr(this,t)},n.prototype.logicalNot=function(){return this.throwIfDisposed(),Oe.logicalNot(this)},n.prototype.logicalXor=function(t){return this.throwIfDisposed(),Oe.logicalXor(this,t)},n.prototype.where=function(t,e){return this.throwIfDisposed(),Oe.where(t,this,e)},n.prototype.neg=function(){return this.throwIfDisposed(),Oe.neg(this)},n.prototype.ceil=function(){return this.throwIfDisposed(),Oe.ceil(this)},n.prototype.floor=function(){return this.throwIfDisposed(),Oe.floor(this)},n.prototype.sign=function(){return this.throwIfDisposed(),Oe.sign(this)},n.prototype.isNaN=function(){return this.throwIfDisposed(),Oe.isNaN(this)},n.prototype.isInf=function(){return this.throwIfDisposed(),Oe.isInf(this)},n.prototype.isFinite=function(){return this.throwIfDisposed(),Oe.isFinite(this)},n.prototype.exp=function(){return this.throwIfDisposed(),Oe.exp(this)},n.prototype.expm1=function(){return this.throwIfDisposed(),Oe.expm1(this)},n.prototype.log=function(){return this.throwIfDisposed(),Oe.log(this)},n.prototype.log1p=function(){return this.throwIfDisposed(),Oe.log1p(this)},n.prototype.sqrt=function(){return this.throwIfDisposed(),Oe.sqrt(this)},n.prototype.rsqrt=function(){return this.throwIfDisposed(),Oe.rsqrt(this)},n.prototype.square=function(){return this.throwIfDisposed(),Oe.square(this)},n.prototype.reciprocal=function(){return this.throwIfDisposed(),Oe.reciprocal(this)},n.prototype.abs=function(){return this.throwIfDisposed(),Oe.abs(this)},n.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Oe.clipByValue(this,t,e)},n.prototype.relu=function(){return this.throwIfDisposed(),Oe.relu(this)},n.prototype.relu6=function(){return this.throwIfDisposed(),Oe.relu6(this)},n.prototype.elu=function(){return this.throwIfDisposed(),Oe.elu(this)},n.prototype.selu=function(){return this.throwIfDisposed(),Oe.selu(this)},n.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),Oe.leakyRelu(this,t)},n.prototype.prelu=function(t){return this.throwIfDisposed(),Oe.prelu(this,t)},n.prototype.sigmoid=function(){return this.throwIfDisposed(),Oe.sigmoid(this)},n.prototype.logSigmoid=function(){return this.throwIfDisposed(),Oe.logSigmoid(this)},n.prototype.softplus=function(){return this.throwIfDisposed(),Oe.softplus(this)},n.prototype.zerosLike=function(){return this.throwIfDisposed(),Oe.zerosLike(this)},n.prototype.onesLike=function(){return this.throwIfDisposed(),Oe.onesLike(this)},n.prototype.sin=function(){return this.throwIfDisposed(),Oe.sin(this)},n.prototype.cos=function(){return this.throwIfDisposed(),Oe.cos(this)},n.prototype.tan=function(){return this.throwIfDisposed(),Oe.tan(this)},n.prototype.asin=function(){return this.throwIfDisposed(),Oe.asin(this)},n.prototype.acos=function(){return this.throwIfDisposed(),Oe.acos(this)},n.prototype.atan=function(){return this.throwIfDisposed(),Oe.atan(this)},n.prototype.sinh=function(){return this.throwIfDisposed(),Oe.sinh(this)},n.prototype.cosh=function(){return this.throwIfDisposed(),Oe.cosh(this)},n.prototype.tanh=function(){return this.throwIfDisposed(),Oe.tanh(this)},n.prototype.asinh=function(){return this.throwIfDisposed(),Oe.asinh(this)},n.prototype.acosh=function(){return this.throwIfDisposed(),Oe.acosh(this)},n.prototype.atanh=function(){return this.throwIfDisposed(),Oe.atanh(this)},n.prototype.erf=function(){return this.throwIfDisposed(),Oe.erf(this)},n.prototype.round=function(){return this.throwIfDisposed(),Oe.round(this)},n.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),Oe.step(this,t)},n.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Oe.softmax(this,t)},n.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Oe.logSoftmax(this,t)},n.prototype.resizeBilinear=function(t,e){return e===void 0&&(e=!1),this.throwIfDisposed(),Oe.image.resizeBilinear(this,t,e)},n.prototype.resizeNearestNeighbor=function(t,e){return e===void 0&&(e=!1),this.throwIfDisposed(),Oe.image.resizeNearestNeighbor(this,t,e)},n.prototype.conv1d=function(t,e,r,i,o,s){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),Oe.conv1d(this,t,e,r,i,o,s)},n.prototype.conv2d=function(t,e,r,i,o,s){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),Oe.conv2d(this,t,e,r,i,o,s)},n.prototype.conv2dTranspose=function(t,e,r,i,o){return this.throwIfDisposed(),Oe.conv2dTranspose(this,t,e,r,i,o)},n.prototype.depthwiseConv2D=function(t,e,r,i,o,s){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),Oe.depthwiseConv2d(this,t,e,r,i,o,s)},n.prototype.separableConv2d=function(t,e,r,i,o,s){return o===void 0&&(o=[1,1]),s===void 0&&(s="NHWC"),this.throwIfDisposed(),Oe.separableConv2d(this,t,e,r,i,o,s)},n.prototype.avgPool=function(t,e,r,i){return this.throwIfDisposed(),Oe.avgPool(this,t,e,r,i)},n.prototype.maxPool=function(t,e,r,i){return this.throwIfDisposed(),Oe.maxPool(this,t,e,r,i)},n.prototype.localResponseNormalization=function(t,e,r,i){return t===void 0&&(t=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5),Oe.localResponseNormalization(this,t,e,r,i)},n.prototype.pool=function(t,e,r,i,o){return this.throwIfDisposed(),Oe.pool(this,t,e,r,i,o)},n.prototype.variable=function(t,e,r){return t===void 0&&(t=!0),this.throwIfDisposed(),Ps().makeVariable(this,t,e,r)},n.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Oe.unsortedSegmentSum(this,t,e)},n.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Oe.batchToSpaceND(this,t,e)},n.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Oe.spaceToBatchND(this,t,e)},n.prototype.topk=function(t,e){return t===void 0&&(t=1),e===void 0&&(e=!0),this.throwIfDisposed(),Oe.topk(this,t,e)},n.prototype.stridedSlice=function(t,e,r,i,o,s,a,u){return i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u=0),this.throwIfDisposed(),Oe.stridedSlice(this,t,e,r,i,o,s,a,u)},n.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Oe.depthToSpace(this,t,e)},n.prototype.fft=function(){return this.throwIfDisposed(),Oe.spectral.fft(this)},n.prototype.ifft=function(){return this.throwIfDisposed(),Oe.spectral.ifft(this)},n.prototype.rfft=function(){return this.throwIfDisposed(),Oe.spectral.rfft(this)},n.prototype.irfft=function(){return this.throwIfDisposed(),Oe.spectral.irfft(this)},n})();Object.defineProperty(vr,Symbol.hasInstance,{value:function(n){return!!n&&n.dataId!=null&&n.shape!=null&&n.dtype!=null}});var dw,xg,wg,bg,_g,Zf=(function(n){function t(e,r,i,o){var s=n.call(this,e.shape,e.dtype,e.dataId,o)||this;return s.trainable=r,s.name=i,s}return es(t,n),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!mi(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Ps().disposeTensor(this),this.dataId=e.dataId,Ps().incRef(this,null)},t.prototype.dispose=function(){Ps().disposeVariable(this),this.isDisposedInternal=!0},t})(vr);Object.defineProperty(Zf,Symbol.hasInstance,{value:function(n){return n instanceof vr&&n.assign!=null&&n.assign instanceof Function}}),(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(dw||(dw={})),(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(xg||(xg={})),(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(wg||(wg={})),(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(bg||(bg={})),(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(_g||(_g={}));var JI={float32:bg,int32:xg,bool:wg,complex64:_g};function Ai(n,t){if(n==="string"||t==="string"){if(n==="string"&&t==="string")return"string";throw new Error("Can not upcast "+n+" with "+t)}return JI[n][t]}function i0(n){return Ai(n,"int32")}function yr(n,t){if(n.dtype===t.dtype)return[n,t];var e=Ai(n.dtype,t.dtype);return[n.cast(e),t.cast(e)]}function QI(n,t){ce(n.dtype===t.dtype,(function(){return"The dtypes of the first("+n.dtype+") and second("+t.dtype+") input must match"}))}function h4(n){var t=[];return(function e(r,i,o){if(r!=null){if(r instanceof vr)return void i.push(r);if(s=r,!(!Array.isArray(s)&&typeof s!="object")){var s,a=r;for(var u in a){var c=a[u];o.has(c)||(o.add(c),e(c,i,o))}}}})(n,t,new Set),t}var o0,pw=(function(){function n(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return n.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},n})(),ZI=(function(){function n(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new pw}return n.prototype.ready=function(){return xt(this,void 0,void 0,(function(){var t,e,r;return wt(this,(function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then((function(){}))];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),e=0,i.label=1;case 1:return e<t.length?(r=t[e],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(n.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),e=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),n.prototype.backendNames=function(){return Object.keys(this.registryFactory)},n.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},n.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},n.prototype.registerBackend=function(t,e,r){return r===void 0&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:r},!0)},n.prototype.setBackend=function(t){return xt(this,void 0,void 0,(function(){var e,r,i;return wt(this,(function(o){switch(o.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,e=this.initializeBackend(t),r=e.success,e.asyncInit?[4,r]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=r,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new KI(this.backendInstance),[2,!0]}}))}))},n.prototype.setupRegisteredKernels=function(){var t=this;uw(this.backendName).forEach((function(e){e.setupFunc!=null&&e.setupFunc(t.backendInstance)}))},n.prototype.disposeRegisteredKernels=function(t){var e=this;uw(t).forEach((function(r){r.disposeFunc!=null&&r.disposeFunc(e.registry[t])}))},n.prototype.initializeBackend=function(t){var e=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,s=i.then((function(a){return!(o<e.pendingBackendInitId)&&(e.registry[t]=a,e.pendingBackendInit=null,!0)})).catch((function(a){return!(o<e.pendingBackendInitId)&&(e.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(a.stack||a.message),!1)}));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}return this.registry[t]=i,{success:!0,asyncInit:!1}}catch(a){return console.warn("Initialization of backend "+t+" failed"),console.warn(a.stack||a.message),{success:!1,asyncInit:!1}}},n.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},n.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(e,r){return t.registryFactory[r].priority-t.registryFactory[e].priority}))},n.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),e=0;e<t.length;e++){var r=t[e],i=this.initializeBackend(r),o=i.success,s=i.asyncInit;if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")},n.prototype.moveData=function(t,e){var r=this.state.tensorInfo.get(e),i=r.backend,o=this.readSync(e);i.disposeData(e),r.backend=t,t.move(e,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},n.prototype.tidy=function(t,e){var r,i=this,o=null;if(e==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");e=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=t}return this.scopedRun((function(){return i.startScope(o)}),(function(){return i.endScope(r)}),(function(){return(r=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r}))},n.prototype.scopedRun=function(t,e,r){t();try{var i=r();return e(),i}catch(o){throw e(),o}},n.prototype.nextTensorId=function(){return n.nextTensorId++},n.prototype.nextVariableId=function(){return n.nextVariableId++},n.prototype.clone=function(t){var e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),r={x:t};return this.addTapeNode(this.state.activeScope.name,r,[e],(function(i){return{x:function(){return i.toFloat()}}}),[]),e},n.prototype.runKernel=function(t,e,r,i,o){return this.runKernelFunc(null,e,null,t,r,i,o)},n.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},n.prototype.checkKernelForMemLeak=function(t,e,r){var i=this.backend.numDataIds(),o=0;r.forEach((function(u){o+=u.dtype==="complex64"?3:1}));var s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-e-o-s;if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+t+"'")},n.prototype.runKernelFunc=function(t,e,r,i,o,s,a){var u,c=this;s===void 0&&(s=[]),a===void 0&&(a=[]);var h=[],d=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var v,p=function(E){d&&(h=E.map((function(I){return c.keep(c.clone(I))})))},y=this.state.numBytes,x=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var w,_=n4(i,this.backendName);return v=_!=null?function(){var E=c.backend.numDataIds();w=_.kernelFunc({inputs:e,attrs:o,backend:c.backend});var I=Array.isArray(w)?w:[w];c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(i,E,I);var C=I.map((function(O){var U=O.dataId,M=O.shape,T=O.dtype;return c.makeTensorFromDataId(U,M,T)})),N=C.filter((function(O,U){return a[U]}));return p((s||[]).slice().concat(N)),C}:function(){var E=c.backend.numDataIds();w=c.tidy((function(){return t(c.backend,p)}));var I=Array.isArray(w)?w:[w];return c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(i,E,I),I},this.scopedRun((function(){return c.state.kernelDepth++}),(function(){return c.state.kernelDepth--}),(function(){u=c.ENV.getBool("DEBUG")?c.profiler.profileKernel(i,e,(function(){return v()})):v()})),d&&this.addTapeNode(i,e,u,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-y,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-x,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map((function(E){return e[E].shape})),outputShapes:u.map((function(E){return E.shape}))}),Array.isArray(w)?u:u[0]},n.prototype.makeTensor=function(t,e,r,i){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var o=t;r==="string"&&I1(t[0])&&(o=t.map((function(h){return GI(h)})));var s=i.write(o,e,r),a=new vr(e,r,s,this.nextTensorId());if(this.incRef(a,i),r==="string"){var u=this.state.tensorInfo.get(s),c=WI(o);this.state.numBytes+=c-u.bytes,u.bytes=c}return a},n.prototype.makeTensorFromDataId=function(t,e,r,i){var o=new vr(e,r=r||"float32",t,this.nextTensorId());return this.incRef(o,i),o},n.prototype.makeVariable=function(t,e,r,i){e===void 0&&(e=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==t.dtype&&(t=t.asType(i));var o=new Zf(t,e,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},n.prototype.incRef=function(t,e){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(i=t.size*a4(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof Zf||this.track(t)},n.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},n.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var e=this.state.registeredVariables[t];this.disposeVariable(e)}},n.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},n.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},n.prototype.profile=function(t){return xt(this,void 0,void 0,(function(){var e,r;return wt(this,(function(i){return this.state.profiling=!0,e=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(o){return o.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]}))}))},n.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},n.prototype.addTapeNode=function(t,e,r,i,o){var s=this,a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:r,saved:o},u=FI(t);u!=null&&(i=u.gradFunc),i!=null&&(a.gradient=function(c){return c=c.map((function(h,d){if(h==null){var v=r[d],p=bd(v.size,v.dtype);return s.makeTensor(p,v.shape,v.dtype)}return h})),i(c.length>1?c:c[0],o)}),this.state.activeTape.push(a)},n.prototype.keep=function(t){return t.kept=!0,t},n.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},n.prototype.endTape=function(){this.state.gradientDepth--},n.prototype.startScope=function(t){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e},n.prototype.endScope=function(t){for(var e=this,r=h4(t),i=new Set(r.map((function(u){return u.id}))),o=0;o<this.state.activeScope.track.length;o++){var s=this.state.activeScope.track[o];s.kept||i.has(s.id)||s.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach((function(u){u.kept||u.scopeId!==a.id||e.track(u)}))},n.prototype.gradients=function(t,e,r,i){var o=this;if(i===void 0&&(i=!1),ce(e.length>0,(function(){return"gradients() received an empty list of xs."})),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var s=this.scopedRun((function(){return o.startTape()}),(function(){return o.endTape()}),(function(){return o.tidy("forward",t)}));ce(s instanceof vr,(function(){return"The result y returned by f() must be a tensor."}));var a=(function(u,c,h){for(var d={},v={},p=0;p<c.length;p++)d[c[p].id]=!0;for(p=0;p<u.length;p++){var y=(O=u[p]).inputs;for(var x in y){for(var w=y[x],_=!1,E=0;E<c.length;E++)if(d[w.id]){O.outputs.forEach((function(j){return d[j.id]=!0})),_=!0,v[O.id]=!0;break}if(_)break}}var I={};I[h.id]=!0;var C={};for(p=u.length-1;p>=0;p--)for(y=(O=u[p]).inputs,E=0;E<O.outputs.length;E++)if(I[O.outputs[E].id]){for(var x in y)I[y[x].id]=!0,C[O.id]=!0;break}var N=[];for(p=0;p<u.length;p++){var O;if(v[(O=u[p]).id]&&C[O.id]){var U={};for(var x in O.inputs){var M=O.inputs[x];d[M.id]&&(U[x]=M)}var T=Object.assign({},O);T.inputs=U,T.outputs=O.outputs,N.push(T)}}return N})(this.state.activeTape,e,s);if(!i&&a.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var u,c,h={};h[s.id]=r??(u=s.shape,c=u4(Ct(u),"float32"),Se.makeTensor(c,u,"float32")),(function(v,p,y){for(var x=function(_){var E=p[_],I=[];if(E.outputs.forEach((function(U){var M=v[U.id];M!=null?I.push(M):I.push(null)})),E.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+E.kernelName+".");var C=E.gradient(I),N=function(U){if(!(U in C))throw new Error("Cannot backprop through input "+U+". Available gradients found: "+Object.keys(C)+".");var M=y((function(){return C[U]()}));if(M.dtype!=="float32")throw new Error("Error in gradient for op "+E.kernelName+". The gradient of input "+U+" must have 'float32' dtype, but has '"+M.dtype+"'");var T=E.inputs[U];if(!mi(M.shape,T.shape))throw new Error("Error in gradient for op "+E.kernelName+". The gradient of input '"+U+"' has shape '"+M.shape+"', which does not match the shape of the input '"+T.shape+"'");if(v[T.id]==null)v[T.id]=M;else{var j=v[T.id];v[T.id]=j.add(M),j.dispose()}};for(var O in E.inputs)N(O)},w=p.length-1;w>=0;w--)x(w)})(h,a,(function(v){return o.tidy(v)}));var d=e.map((function(v){return h[v.id]}));return o.state.gradientDepth===0&&(o.state.activeTape.forEach((function(v){for(var p=0,y=v.saved;p<y.length;p++)y[p].dispose()})),o.state.activeTape=null),{value:s,grads:d}}))},n.prototype.customGrad=function(t){var e=this;return ce(gg(t),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];ce(i.every((function(a){return a instanceof vr})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var s={};return i.forEach((function(a,u){s[u]=a})),e.runKernelFunc((function(a,u){return ce((r=t.apply(void 0,i.concat([u]))).value instanceof vr,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),ce(gg(r.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),r.value}),s,(function(a,u){var c=r.gradFunc(a,u),h=Array.isArray(c)?c:[c];ce(h.length===i.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),ce(h.every((function(v){return v instanceof vr})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var d={};return h.forEach((function(v,p){d[p]=function(){return v}})),d}))}},n.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},n.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},n.prototype.time=function(t){return xt(this,void 0,void 0,(function(){var e,r;return wt(this,(function(i){switch(i.label){case 0:return e=Is(),[4,this.backend.time(t)];case 1:return(r=i.sent()).wallMs=Is()-e,[2,r]}}))}))},n.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(n.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),n.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new pw,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},n.nextTensorId=0,n.nextVariableId=0,n})(),Se=(function(){var n=(function(){if(o0==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}o0=e}return o0})();if(n._tfengine==null){var t=new LI(n);n._tfengine=new ZI(t)}return(function(e){t4=e})(n._tfengine.ENV),Ps=function(){return n._tfengine},n._tfengine})();function d4(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Au=Ve();Au.registerFlag("DEBUG",(function(){return!1}),(function(n){n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Au.registerFlag("IS_BROWSER",(function(){return d4()})),Au.registerFlag("IS_NODE",(function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0})),Au.registerFlag("IS_CHROME",(function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Au.registerFlag("PROD",(function(){return!1})),Au.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Au.getBool("DEBUG")})),Au.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Au.registerFlag("IS_TEST",(function(){return!1}));var sd,Jo,Yo,xc={},a0={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function e6(n,t){xc[n]=t}function zs(n){n in xc||(xc[n]=(function(e){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=(function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")})(e);return r.addEventListener("webglcontextlost",(function(i){i.preventDefault(),delete xc[e]}),!1),e===1?r.getContext("webgl",a0)||r.getContext("experimental-webgl",a0):r.getContext("webgl2",a0)})(n));var t=xc[n];return t.isContextLost()?(delete xc[n],zs(n)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),xc[n])}function Fv(n,t){return[t,n]}function Xh(n){var t=Ct(n);return mg(Math.ceil(t/4))}function _d(n,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(n/2))]}function P1(n,t){var e,r,i,o,s,a,u,c,h,d=n;return Ve().getNumber("WEBGL_VERSION")===2?(e=d.R32F,r=d.R16F,i=d.RGBA16F,o=d.RGBA32F,s=d.RED,a=4,u=1,c=d.HALF_FLOAT,h=d.FLOAT):(e=n.RGBA,r=n.RGBA,i=n.RGBA,o=d.RGBA,s=n.RGBA,a=4,u=4,c=t!=null?t.HALF_FLOAT_OES:null,h=n.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:n.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:h}}function kt(n,t,e){var r=e();return t&&(function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+i6(i,o))})(n),r}(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(sd||(sd={})),(function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"})(Jo||(Jo={})),(function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Yo||(Yo={}));var t6=596e-10,n6=65504;function r6(n){return!!(Ve().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||t6<Math.abs(n)&&Math.abs(n)<n6)}function i6(n,t){switch(t){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function gp(n,t,e){return Du(n,t,(function(){return n.getExtension(e)}),'Extension "'+e+'" not supported on this browser.')}function o6(n,t,e){var r=Du(n,t,(function(){return n.createShader(n.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(kt(n,t,(function(){return n.shaderSource(r,e)})),kt(n,t,(function(){return n.compileShader(r)})),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function a6(n,t,e){var r=Du(n,t,(function(){return n.createShader(n.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(kt(n,t,(function(){return n.shaderSource(r,e)})),kt(n,t,(function(){return n.compileShader(r)})),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw(function(i,o){var s=s6.exec(o);if(s==null)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var a=+s[1],u=i.split(`
`),c=u.length.toString().length+2,h=u.map((function(w,_){return Bf((_+1).toString(),c)+w})),d=0,v=0;v<h.length;v++)d=Math.max(h[v].length,d);var p=h.slice(0,a-1),y=h.slice(a-1,a),x=h.slice(a);console.log(p.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+Bf(y[0],d),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(x.join(`
`))})(e,n.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var s0,u0,s6=/ERROR: [0-9]+:([0-9]+):/g;function u6(n,t){return Du(n,t,(function(){return n.createProgram()}),"Unable to create WebGLProgram.")}function l6(n,t,e){if(kt(n,t,(function(){return n.linkProgram(e)})),n.getProgramParameter(e,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function l0(n,t,e){if(kt(n,t,(function(){return n.validateProgram(e)})),n.getProgramParameter(e,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function c6(n,t,e){var r=Du(n,t,(function(){return n.createBuffer()}),"Unable to create WebGLBuffer");return kt(n,t,(function(){return n.bindBuffer(n.ARRAY_BUFFER,r)})),kt(n,t,(function(){return n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)})),r}function f6(n,t,e){var r=Du(n,t,(function(){return n.createBuffer()}),"Unable to create WebGLBuffer");return kt(n,t,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r)})),kt(n,t,(function(){return n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW)})),r}function h6(n,t){return Du(n,t,(function(){return n.createTexture()}),"Unable to create WebGLTexture.")}function d6(n,t){var e=Ve().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||t<=0){var r="["+n+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(n>e||t>e)throw r="["+n+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+e+"x"+e+"]")+".")}function p6(n,t){return Du(n,t,(function(){return n.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function vw(n,t,e,r,i,o,s,a){var u=n.getAttribLocation(e,r);return u!==-1&&(kt(n,t,(function(){return n.bindBuffer(n.ARRAY_BUFFER,i)})),kt(n,t,(function(){return n.vertexAttribPointer(u,o,n.FLOAT,!1,s,a)})),kt(n,t,(function(){return n.enableVertexAttribArray(u)})),!0)}function v6(n,t,e,r){w6(n,r),kt(n,t,(function(){return n.activeTexture(n.TEXTURE0+r)})),kt(n,t,(function(){return n.bindTexture(n.TEXTURE_2D,e)}))}function m6(n,t,e,r){return Du(n,t,(function(){return n.getUniformLocation(e,r)}),'uniform "'+r+'" not present in program.')}function g6(n,t,e){return n.getUniformLocation(t,e)}function y6(n,t,e,r,i,o){kt(n,t,(function(){return v6(n,t,r,o)})),kt(n,t,(function(){return n.uniform1i(i,o)}))}function c0(n,t,e,r){kt(n,t,(function(){return n.bindFramebuffer(n.FRAMEBUFFER,r)})),kt(n,t,(function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0)}))}function mw(n,t,e){kt(n,t,(function(){return n.bindFramebuffer(n.FRAMEBUFFER,e)})),kt(n,t,(function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0)}))}function yp(n){var t=n.checkFramebufferStatus(n.FRAMEBUFFER);if(t!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+x6(n,t))}function x6(n,t){switch(t){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Du(n,t,e,r){var i=kt(n,t,(function(){return e()}));if(i==null)throw new Error(r);return i}function w6(n,t){var e=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+n.TEXTURE0;if(r<n.TEXTURE0||r>e)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+e+"]")+".")}function av(n,t){return t===void 0&&(t=2),Ct(n.slice(0,n.length-t))}function sv(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function f0(n){var t=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(t=[av(n)].concat(sv(n))),t}function b6(n,t){var e;t===void 0&&(t=!1);var r=Ve().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,(n=n.map((function(c,h){return h>=n.length-2?o4(n[h]):n[h]}))).length===1&&(n=[2,n[0]])),n.length!==2){var i=_c(n);n=i.newShape}var o=Ct(n);if(n.length<=1&&o<=r)return[1,o];if(n.length===2&&n[0]<=r&&n[1]<=r)return n;if(n.length===3&&n[0]*n[1]<=r&&n[2]<=r)return[n[0]*n[1],n[2]];if(n.length===3&&n[0]<=r&&n[1]*n[2]<=r)return[n[0],n[1]*n[2]];if(n.length===4&&n[0]*n[1]*n[2]<=r&&n[3]<=r)return[n[0]*n[1]*n[2],n[3]];if(n.length===4&&n[0]<=r&&n[1]*n[2]*n[3]<=r)return[n[0],n[1]*n[2]*n[3]];if(t){var s=av(n),a=2,u=2;return n.length&&(a=(e=sv(n))[0],u=e[1]),mg(o=s*(a/2)*(u/2)).map((function(c){return 2*c}))}return mg(o)}function xp(n){return n%2==0}function wp(n,t){if(mi(n=n.slice(-2),t=t.slice(-2))||!n.length||!t.length||n[0]===0||n[1]===0||t[0]===0||t[1]===0)return!0;if(n.length!==t.length){var e=n.slice(-1)[0],r=t.slice(-1)[0];if(e===r||xp(e)&&xp(r)&&(n[0]===1||t[0]===1))return!0}return n[1]===t[1]&&xp(n[0])&&xp(t[0])}function _6(n){if(s0==null){var t=zs(n);s0=t.getParameter(t.MAX_TEXTURE_SIZE)}return s0}function S6(n){if(u0==null){var t=zs(n);u0=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,u0)}function C6(n){if(n===0)return 0;var t=zs(n);return ka(t,"EXT_disjoint_timer_query_webgl2")&&n===2?2:ka(t,"EXT_disjoint_timer_query")?1:0}function ka(n,t){return n.getExtension(t)!=null}function gw(n){try{if(zs(n)!=null)return!0}catch{return!1}return!1}function A6(n){if(n===0)return!1;var t=zs(n);if(n===1){if(!ka(t,"OES_texture_float"))return!1}else if(!ka(t,"EXT_color_buffer_float"))return!1;return Sg(t)}function k6(n){if(n===0)return!1;var t=zs(n);if(n!==1){if(ka(t,"EXT_color_buffer_float"))return Sg(t);if(ka(t,"EXT_color_buffer_half_float")){var e=t.getExtension("EXT_color_buffer_half_float");return(function(r,i){var o=P1(r,i),s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var a=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(s),r.deleteFramebuffer(a),u})(t,e)}return!1}return!!ka(t,"OES_texture_float")&&!!ka(t,"WEBGL_color_buffer_float")&&Sg(t)}function Sg(n){var t=P1(n),e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e),n.texImage2D(n.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var i=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(e),n.deleteFramebuffer(r),i}function E6(n){return n===2&&zs(n).fenceSync!=null}var $t=Ve();function p4(n){Ve().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function st(n,t){return Se.tidy(n,t)}function Io(n){h4(n).forEach((function(t){return t.dispose()}))}function N6(n){return Se.keep(n)}function uv(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];Ve().getBool("IS_TEST")||console.warn.apply(console,n)}function Bl(n,t){var e=n;if(Ms(n))return t==="string"?[]:[n.length];if(!Array.isArray(n))return[];for(var r=[];Array.isArray(e)||Ms(e)&&t!=="string";)r.push(e.length),e=e[0];return Array.isArray(n)&&Ve().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&(function i(o,s,a){if(a=a||[],!Array.isArray(o)&&!Ms(o))return void ce(s.length===0,(function(){return"Element arr["+a.join("][")+"] is a primitive, but should be an array/TypedArray of "+s[0]+" elements"}));ce(s.length>0,(function(){return"Element arr["+a.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"})),ce(o.length===s[0],(function(){return"Element arr["+a.join("][")+"] should have "+s[0]+" elements, but has "+o.length+" elements"}));for(var u=s.slice(1),c=0;c<o.length;++c)i(o[c],u,a.concat(c))})(n,r,[]),r}function yw(n,t,e,r){if(n!=null&&(n!=="numeric"&&n!==t||n==="numeric"&&t==="string"))throw new Error("Argument '"+e+"' passed to '"+r+"' must be "+n+" tensor, but got "+t+" tensor")}function te(n,t,e,r){if(r===void 0&&(r="numeric"),n instanceof vr)return yw(r,n.dtype,t,e),n;var i=wd(n);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),yw(r,i,t,e),n==null||!Ms(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){var o=n==null?"null":n.constructor.name;throw new Error("Argument '"+t+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+o+"'")}var s=Bl(n,i);Ms(n)||Array.isArray(n)||(n=[n]);var a=i!=="string"?s4(n,i,Ve().getBool("DEBUG")):Qf(n,[],!0);return Se.makeTensor(a,s,i)}function lv(n,t,e,r){if(r===void 0&&(r="numeric"),!Array.isArray(n))throw new Error("Argument "+t+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return n.map((function(i,o){return te(i,t+"["+o+"]",e)}),r)}function v4(n,t){for(var e=0;e<n.length;++e)if(n[n.length-e-1]!==t-1-e)return!1;return!0}function I6(n,t,e){for(var r=n.length+t.length,i=[],o=0,s=0,a=0;a<r;a++)e.indexOf(a)===-1?i.push(n[o++]):i.push(t[s++]);return i}function qi(n,t){for(var e=[],r=n.length,i=0;i<r;i++)t.indexOf(i)===-1&&e.push(n[i]);return[e,t.map((function(o){return n[o]}))]}function Po(n,t){return I6(n,t.map((function(e){return 1})),t)}function Xo(n,t,e){ce(v4(t,e),(function(){return n+" supports only inner-most axes for now. Got axes "+t+" and rank-"+e+" input."}))}function Vs(n,t){if(v4(n,t))return null;for(var e=[],r=0;r<t;++r)n.indexOf(r)===-1&&e.push(r);return n.forEach((function(i){return e.push(i)})),e}function R1(n){return n.map((function(t,e){return[e,t]})).sort((function(t,e){return t[1]-e[1]})).map((function(t){return t[0]}))}function Ws(n,t){for(var e=[],r=t-n;r<t;++r)e.push(r);return e}function P6(n,t){var e=n[0].length;n.forEach((function(i,o){ce(i.length===e,(function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"}))})),ce(t>=0&&t<e,(function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."}));var r=n[0];n.forEach((function(i,o){for(var s=0;s<e;s++)ce(s===t||i[s]===r[s],(function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."}))}))}function eh(n,t){for(var e=n[0].slice(),r=1;r<n.length;r++)e[t]+=n[r][t];return e}function ge(n){var t=Object.keys(n);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var e=t[0],r=n[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var i=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];Se.startScope(e);try{var a=r.apply(void 0,o);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Se.endScope(a),a}catch(u){throw Se.endScope(null),u}};return Object.defineProperty(i,"name",{value:e,configurable:!0}),i}$t.registerFlag("HAS_WEBGL",(function(){return $t.getNumber("WEBGL_VERSION")>0})),$t.registerFlag("WEBGL_VERSION",(function(){return gw(2)?2:gw(1)?1:0})),$t.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return $t.get("WEBGL_VERSION")===2})),$t.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),$t.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),$t.registerFlag("WEBGL_PACK",(function(){return $t.getBool("HAS_WEBGL")})),$t.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return $t.getBool("WEBGL_PACK")})),$t.registerFlag("WEBGL_PACK_CLIP",(function(){return $t.getBool("WEBGL_PACK")})),$t.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),$t.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return $t.getBool("WEBGL_PACK")})),$t.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return $t.getBool("WEBGL_PACK")})),$t.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return $t.getBool("WEBGL_PACK")})),$t.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return $t.getBool("WEBGL_PACK")})),$t.registerFlag("WEBGL_PACK_REDUCE",(function(){return $t.getBool("WEBGL_PACK")})),$t.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return $t.getBool("WEBGL_PACK")})),$t.registerFlag("WEBGL_CONV_IM2COL",(function(){return $t.getBool("WEBGL_PACK")})),$t.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return _6($t.getNumber("WEBGL_VERSION"))})),$t.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return S6($t.getNumber("WEBGL_VERSION"))})),$t.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var n=$t.getNumber("WEBGL_VERSION");return n===0?0:C6(n)})),$t.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return $t.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(n=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))));var n})),$t.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return A6($t.getNumber("WEBGL_VERSION"))})),$t.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!$t.getBool("WEBGL_FORCE_F16_TEXTURES")&&$t.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),$t.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return k6($t.getNumber("WEBGL_VERSION"))})),$t.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return E6($t.getNumber("WEBGL_VERSION"))})),$t.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return $t.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),f4=p4;var Ci=ge({complex_:function(n,t){var e=te(n,"real","complex"),r=te(t,"imag","complex");return Rn(e.shape,r.shape,"real and imag shapes, "+e.shape+" and "+r.shape+", must match in call to tf.complex()."),Se.runKernelFunc((function(i){return i.complex(e,r)}),{$real:e,$imag:r})}}),Aa=ge({real_:function(n){var t=te(n,"input","real");return Se.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),Rs=ge({imag_:function(n){var t=te(n,"input","imag");return Se.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function ki(n,t,e){return jl(n,t,Bl(n,e),e)}function jl(n,t,e,r){if(r==null&&(r=wd(n)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ms(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){l4(t);var i=Ct(t),o=Ct(e);ce(i===o,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+i+" values but has "+o}));for(var s=0;s<e.length;++s){var a=e[s],u=s!==e.length-1||a!==Ct(t.slice(s));ce(e[s]===t[s]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+t+"). "}))}}return Ms(n)||Array.isArray(n)||(n=[n]),t=t||e,n=r!=="string"?s4(n,r,Ve().getBool("DEBUG")):Qf(n,[],!0),Se.makeTensor(n,t,r)}function rt(n,t){if((Ms(n)&&t!=="string"||Array.isArray(n))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Ms(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return jl(n,[],[],t)}function Hr(n,t){ih(n);var e=Bl(n,t);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return jl(n,null,e,t)}function Il(n,t,e){if(ih(n),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Bl(n,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return jl(n,t,r,e)}function T1(n,t,e){if(ih(n),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Bl(n,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return jl(n,t,r,e)}function Eo(n,t,e){if(ih(n),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Bl(n,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return jl(n,t,r,e)}function R6(n,t,e){if(ih(n),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Bl(n,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return jl(n,t,r,e)}function T6(n,t,e){if(ih(n),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Bl(n,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return jl(n,t=t||r,r,e)}function L6(n,t,e,r){return t===void 0&&(t=!0),Se.makeVariable(n,t,e,r)}function oh(n,t){if(t===void 0&&(t="float32"),t==="complex64"){var e=oh(n,"float32"),r=Qn(n,"float32");return Ci(e,r)}var i=u4(Ct(n),t);return Se.makeTensor(i,n,t)}function Qn(n,t){if(t===void 0&&(t="float32"),t==="complex64"){var e=Qn(n,"float32"),r=Qn(n,"float32");return Ci(e,r)}var i=bd(Ct(n),t);return Se.makeTensor(i,n,t)}function Bs(n,t,e){return Se.runKernelFunc((function(r){return r.fill(n,t,e)}),{})}function D6(n,t,e){if(e<=0)throw new Error("The number of values should be positive.");return Se.runKernelFunc((function(r){return r.linspace(n,t,e)}),{})}function cv(n,t,e,r){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e===0)throw new Error("Cannot have a step of zero");if(n===t||n<t&&e<0||t<n&&e>1)return Qn([0],r);var i=bd(Math.abs(Math.ceil((t-n)/e)),r);t<n&&e===1&&(e=-1),i[0]=n;for(var o=1;o<i.length;o++)i[o]=i[o-1]+e;return Hr(i,r)}var m4=ge({onesLike_:function(n){var t=te(n,"x","onesLike");if(t.dtype==="complex64"){var e=m4(Aa(t)),r=gn(Rs(t));return Ci(e,r)}return Se.runKernelFunc((function(i){return i.onesLike(t)}),{$x:t},(function(i,o){return{$x:function(){return gn(i)}}}))}}),gn=ge({zerosLike_:function(n){var t=te(n,"x","zerosLike");return Se.runKernelFunc((function(e){return e.zerosLike(t)}),{$x:t},(function(e,r){return{$x:function(){return gn(e)}}}))}}),ti=ge({concat_:function(n,t){t===void 0&&(t=0),ce(n.length>=1,(function(){return"Pass at least one tensor to concat"}));var e=lv(n,"tensors","concat");e[0].dtype==="complex64"&&e.forEach((function(a){if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+a.dtype+". ")})),t=oi(t,e[0].shape)[0];var r=eh(e.map((function(a){return a.shape})),t);if(Ct(r)===0)return ki([],r);if((e=e.filter((function(a){return a.size>0}))).length===1)return e[0];var i=e.map((function(a){return a.shape}));P6(i,t);var o=e,s={axis:t};return Se.runKernelFunc((function(a){return a.concat(e,t)}),o,(function(a){var u=i.map((function(c){return c[t]}));return L1(a,u,t).map((function(c){return function(){return c}}))}),"Concat",s)}}),F6=ge({concat1d_:function(n){return ti(n,0)}}),M6=ge({concat2d_:function(n,t){return ti(n,t)}}),O6=ge({concat3d_:function(n,t){return ti(n,t)}}),B6=ge({concat4d_:function(n,t){return ti(n,t)}}),L1=ge({split_:function(n,t,e){e===void 0&&(e=0);var r,i=te(n,"x","split");return e=oi(e,i.shape)[0],typeof t=="number"?(ce(i.shape[e]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(i.shape[e]/t)):(ce(i.shape[e]===t.reduce((function(o,s){return o+s})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),Se.runKernelFunc((function(o){return o.split(i,r,e)}),{$x:i},(function(o){return{$x:function(){return ti(o,e)}}}))}});function Mc(n,t){return n(t={exports:{}},t.exports),t.exports}var j6=Mc((function(n){(function(t,e,r){function i(a){var u,c=this,h=(u=4022871197,function(d){d=d.toString();for(var v=0;v<d.length;v++){var p=.02519603282416938*(u+=d.charCodeAt(v));p-=u=p>>>0,u=(p*=u)>>>0,u+=4294967296*(p-=u)}return 23283064365386963e-26*(u>>>0)});c.next=function(){var d=2091639*c.s0+23283064365386963e-26*c.c;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=0|d)},c.c=1,c.s0=h(" "),c.s1=h(" "),c.s2=h(" "),c.s0-=h(a),c.s0<0&&(c.s0+=1),c.s1-=h(a),c.s1<0&&(c.s1+=1),c.s2-=h(a),c.s2<0&&(c.s2+=1),h=null}function o(a,u){return u.c=a.c,u.s0=a.s0,u.s1=a.s1,u.s2=a.s2,u}function s(a,u){var c=new i(a),h=u&&u.state,d=c.next;return d.int32=function(){return 4294967296*c.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,h&&(typeof h=="object"&&o(h,c),d.state=function(){return o(c,{})}),d}e&&e.exports?e.exports=s:this.alea=s})(0,n)})),U6=Mc((function(n){(function(t,e,r){function i(a){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},a===(0|a)?u.x=a:c+=a;for(var h=0;h<c.length+64;h++)u.x^=0|c.charCodeAt(h),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function s(a,u){var c=new i(a),h=u&&u.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var v=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(v===0);return v},d.int32=c.next,d.quick=d,h&&(typeof h=="object"&&o(h,c),d.state=function(){return o(c,{})}),d}e&&e.exports?e.exports=s:this.xor128=s})(0,n)})),z6=Mc((function(n){(function(t,e,r){function i(a){var u=this,c="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^d^d<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(0|a)?u.x=a:c+=a;for(var h=0;h<c.length+64;h++)u.x^=0|c.charCodeAt(h),h==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function s(a,u){var c=new i(a),h=u&&u.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var v=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(v===0);return v},d.int32=c.next,d.quick=d,h&&(typeof h=="object"&&o(h,c),d.state=function(){return o(c,{})}),d}e&&e.exports?e.exports=s:this.xorwow=s})(0,n)})),V6=Mc((function(n){(function(t,e,r){function i(a){var u=this;u.next=function(){var c,h,d=u.x,v=u.i;return c=d[v],h=(c^=c>>>7)^c<<24,h^=(c=d[v+1&7])^c>>>10,h^=(c=d[v+3&7])^c>>>3,h^=(c=d[v+4&7])^c<<7,c=d[v+7&7],h^=(c^=c<<13)^c<<9,d[v]=h,u.i=v+1&7,h},(function(c,h){var d,v=[];if(h===(0|h))v[0]=h;else for(h=""+h,d=0;d<h.length;++d)v[7&d]=v[7&d]<<15^h.charCodeAt(d)+v[d+1&7]<<13;for(;v.length<8;)v.push(0);for(d=0;d<8&&v[d]===0;++d);for(d==8?v[7]=-1:v[d],c.x=v,c.i=0,d=256;d>0;--d)c.next()})(u,a)}function o(a,u){return u.x=a.x.slice(),u.i=a.i,u}function s(a,u){a==null&&(a=+new Date);var c=new i(a),h=u&&u.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var v=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(v===0);return v},d.int32=c.next,d.quick=d,h&&(h.x&&o(h,c),d.state=function(){return o(c,{})}),d}e&&e.exports?e.exports=s:this.xorshift7=s})(0,n)})),W6=Mc((function(n){(function(t,e,r){function i(a){var u=this;u.next=function(){var c,h,d=u.w,v=u.X,p=u.i;return u.w=d=d+1640531527|0,h=v[p+34&127],c=v[p=p+1&127],h^=h<<13,c^=c<<17,h^=h>>>15,c^=c>>>12,h=v[p]=h^c,u.i=p,h+(d^d>>>16)|0},(function(c,h){var d,v,p,y,x,w=[],_=128;for(h===(0|h)?(v=h,h=null):(h+="\0",v=0,_=Math.max(_,h.length)),p=0,y=-32;y<_;++y)h&&(v^=h.charCodeAt((y+32)%h.length)),y===0&&(x=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,y>=0&&(x=x+1640531527|0,p=(d=w[127&y]^=v+x)==0?p+1:0);for(p>=128&&(w[127&(h&&h.length||0)]=-1),p=127,y=512;y>0;--y)v=w[p+34&127],d=w[p=p+1&127],v^=v<<13,d^=d<<17,v^=v>>>15,d^=d>>>12,w[p]=v^d;c.w=x,c.X=w,c.i=p})(u,a)}function o(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function s(a,u){a==null&&(a=+new Date);var c=new i(a),h=u&&u.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var v=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(v===0);return v},d.int32=c.next,d.quick=d,h&&(h.X&&o(h,c),d.state=function(){return o(c,{})}),d}e&&e.exports?e.exports=s:this.xor4096=s})(0,n)})),q6=Mc((function(n){(function(t,e,r){function i(a){var u=this,c="";u.next=function(){var d=u.b,v=u.c,p=u.d,y=u.a;return d=d<<25^d>>>7^v,v=v-p|0,p=p<<24^p>>>8^y,y=y-d|0,u.b=d=d<<20^d>>>12^v,u.c=v=v-p|0,u.d=p<<16^v>>>16^y,u.a=y-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=0|a):c+=a;for(var h=0;h<c.length+20;h++)u.b^=0|c.charCodeAt(h),u.next()}function o(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function s(a,u){var c=new i(a),h=u&&u.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var v=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(v===0);return v},d.int32=c.next,d.quick=d,h&&(typeof h=="object"&&o(h,c),d.state=function(){return o(c,{})}),d}e&&e.exports?e.exports=s:this.tychei=s})(0,n)})),wc=Mc((function(n){(function(t,e){var r,i=this,o=256,s=6,a="random",u=e.pow(o,s),c=e.pow(2,52),h=2*c,d=o-1;function v(_,E,I){var C=[],N=x((function M(T,j){var D,B=[],X=typeof T;if(j&&X=="object")for(D in T)try{B.push(M(T[D],j-1))}catch{}return B.length?B:X=="string"?T:T+"\0"})((E=E==1?{entropy:!0}:E||{}).entropy?[_,w(t)]:_??(function(){try{var M;return r&&(M=r.randomBytes)?M=M(o):(M=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(M)),w(M)}catch{var T=i.navigator,j=T&&T.plugins;return[+new Date,i,j,i.screen,w(t)]}})(),3),C),O=new p(C),U=function(){for(var M=O.g(s),T=u,j=0;M<c;)M=(M+j)*o,T*=o,j=O.g(1);for(;M>=h;)M/=2,T/=2,j>>>=1;return(M+j)/T};return U.int32=function(){return 0|O.g(4)},U.quick=function(){return O.g(4)/4294967296},U.double=U,x(w(O.S),t),(E.pass||I||function(M,T,j,D){return D&&(D.S&&y(D,O),M.state=function(){return y(O,{})}),j?(e[a]=M,T):M})(U,N,"global"in E?E.global:this==e,E.state)}function p(_){var E,I=_.length,C=this,N=0,O=C.i=C.j=0,U=C.S=[];for(I||(_=[I++]);N<o;)U[N]=N++;for(N=0;N<o;N++)U[N]=U[O=d&O+_[N%I]+(E=U[N])],U[O]=E;(C.g=function(M){for(var T,j=0,D=C.i,B=C.j,X=C.S;M--;)T=X[D=d&D+1],j=j*o+X[d&(X[D]=X[B=d&B+T])+(X[B]=T)];return C.i=D,C.j=B,j})(o)}function y(_,E){return E.i=_.i,E.j=_.j,E.S=_.S.slice(),E}function x(_,E){for(var I,C=_+"",N=0;N<C.length;)E[d&N]=d&(I^=19*E[d&N])+C.charCodeAt(N++);return w(E)}function w(_){return String.fromCharCode.apply(0,_)}if(e["seed"+a]=v,x(e.random(),t),n.exports){n.exports=v;try{r=require("crypto")}catch{}}})([],Math)}));wc.alea=j6,wc.xor128=U6,wc.xorwow=z6,wc.xorshift7=V6,wc.xor4096=W6,wc.tychei=q6;var Mv=wc.alea,D1=(function(){function n(t,e,r,i,o){this.mean=t,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=o||Math.random();this.random=Mv(s.toString())}return n.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,r,i=!1;!i;){var o=void 0,s=void 0,a=void 0;do a=(o=2*this.random()-1)*o+(s=2*this.random()-1)*s;while(a>=1||a===0);var u=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*o*u,r=this.mean+this.stdDev*s*u,this.truncated&&!this.isValidTruncated(e)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},n.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},n.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},n})(),H6=(function(){function n(t,e,r,i){this.alpha=t,this.beta=1/e,this.dtype=r;var o=i||Math.random();this.randu=Mv(o.toString()),this.randn=new D1(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return n.prototype.nextValue=function(){for(var t,e,r,i,o,s;;){do i=this.randn.nextValue(),s=1+this.c*i;while(s<=0);if(s*=s*s,e=1-.331*(t=i*i)*t,r=.5*t+this.d*(1-s+Math.log(s)),(o=this.randu())<e||Math.log(o)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)},n.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},n})(),G6=(function(){function n(t,e,r,i){var o=this;if(t===void 0&&(t=0),e===void 0&&(e=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=t,this.range=e-t,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+e+" <= 1 and dtype is not float");this.random=Mv(i)}return n.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},n.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},n})();function rn(n,t,e){return t===void 0&&(t="float32"),t=t||"float32",l4(n),new ad(n,t,e)}function $6(n,t){t===void 0&&(t=!1),console.log(n.toString(t))}var g4=ge({batchToSpaceND_:function(n,t,e){var r=te(n,"x","batchToSpaceND"),i=t.reduce((function(o,s){return o*s}));return ce(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),ce(e.length===t.length,(function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+t.length})),ce(r.shape[0]%i==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+i})),Se.runKernelFunc((function(o){return o.batchToSpaceND(r,t,e)}),{$x:r},(function(o){return{$x:function(){return o.spaceToBatchND(t,e)}}}))}}),K6=ge({broadcastTo_:function(n,t){var e=te(n,"broadcastTo","x"),r=e.shape;if(t.some((function(u){return!(u>0)||u%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<e.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+e.rank+".");if(t.length>e.rank){for(var i=e.shape.slice();i.length<t.length;)i.unshift(1);e=e.reshape(i)}for(var o=Array.from(t),s=t.length-1;s>=0;s--)if(e.shape[s]===t[s])o[s]=1;else if(e.shape[s]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var a=o.map((function(u,c){return u>1?c:-1})).filter((function(u){return u>=0}));return a.length===0?e.clone():Se.runKernelFunc((function(u){return u.tile(e,o)}),{input:e},(function(u){return{input:function(){return u.sum(a,!0)}}}))}}),X6=ge({cast_:function(n,t){var e=te(n,"x","cast");if(!zI(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&e.dtype!=="string"||t!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:t};return Se.runKernelFunc((function(i){return i.cast(e,t)}),{x:e},(function(i){return{x:function(){return i.clone()}}}),"Cast",r)}}),Y6=ge({clone_:function(n){var t=te(n,"x","clone",null);return Se.runKernelFunc((function(){return Se.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),J6=ge({cumsum_:function(n,t,e,r){t===void 0&&(t=0),e===void 0&&(e=!1),r===void 0&&(r=!1);var i=te(n,"x","cumsum"),o=Vs([t|=0],i.rank),s=i;o!=null&&(s=i.transpose(o));var a=Ws(1,i.rank)[0],u=Se.runKernelFunc((function(c){return c.cumsum(s,a,e,r)}),{permutedX:s},(function(c){return{permutedX:function(){return c.cumsum(t,e,!r)}}}));return o!=null&&(u=u.transpose(o)),u}}),Q6=ge({depthToSpace_:function(n,t,e){e===void 0&&(e="NHWC");var r=te(n,"x","depthToSpace"),i=e==="NHWC"?r.shape[1]:r.shape[2],o=e==="NHWC"?r.shape[2]:r.shape[3],s=e==="NHWC"?r.shape[3]:r.shape[1];return ce(i*t>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+`  for depthToSpace with input shape
      `+r.shape})),ce(o*t>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+t+` for depthToSpace with input shape
          `+r.shape})),ce(s%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+s+" for depthToSpace with input shape "+r.shape})),Se.runKernelFunc((function(a){return a.depthToSpace(r,t,e)}),{$x:r})}}),Ca=ge({expandDims_:function(n,t){t===void 0&&(t=0);var e=te(n,"x","expandDims",null);ce(t<=e.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=e.shape.slice();return t<0&&(ce(-(e.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"})),t=e.rank+t+1),r.splice(t,0,1),Ja(e,r)}}),y4=ge({eye_:function(n,t,e,r){r===void 0&&(r="float32"),t==null&&(t=n);for(var i=rn([n,t],r),o=n<=t?n:t,s=0;s<o;++s)i.set(1,s,s);var a=i.toTensor().as2D(n,t);if(e==null)return a;if(e.length===1)return jf(Ca(a,0),[e[0],1,1]);if(e.length===2)return jf(Ca(Ca(a,0),0),[e[0],e[1],1,1]);if(e.length===3)return jf(Ca(Ca(Ca(a,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),Z6=ge({multinomial_:function(n,t,e,r){r===void 0&&(r=!1);var i=te(n,"logits","multinomial"),o=i.size,s=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+s);e=e||Math.random();var a=s===1?i.as2D(1,-1):i,u=Se.runKernelFunc((function(c){return c.multinomial(a,r,t,e)}),{logits2D:a});return s===1?u.as1D():u}}),Cg=ge({oneHot_:function(n,t,e,r){if(e===void 0&&(e=1),r===void 0&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var i=te(n,"indices","oneHot","int32"),o=i.shape.concat([t]);return i=i.flatten(),Se.runKernelFunc((function(s){return s.oneHot(i,t,e,r)}),{$indices:i},(function(s){return{$indices:function(){return Qn(i.shape,"float32")}}})).reshape(o)}}),Oc=ge({pad_:function(n,t,e){e===void 0&&(e=0);var r=te(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:t,constantValue:e};return Se.runKernelFunc((function(o){return o.pad(r,t,e)}),{x:r},(function(o){var s=t.map((function(a){return a[0]}));return{x:function(){return o.slice(s,r.shape)}}}),"PadV2",i)}}),eP=ge({pad1d_:function(n,t,e){return e===void 0&&(e=0),ce(t.length===2,(function(){return"Invalid number of paddings. Must be length of 2."})),Oc(n,[t],e)}}),tP=ge({pad2d_:function(n,t,e){return e===void 0&&(e=0),ce(t.length===2&&t[0].length===2&&t[1].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Oc(n,t,e)}}),nP=ge({pad3d_:function(n,t,e){return e===void 0&&(e=0),ce(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Oc(n,t,e)}}),rP=ge({pad4d_:function(n,t,e){return e===void 0&&(e=0),ce(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Oc(n,t,e)}}),iP=ge({rand_:function(n,t,e){var r=Ct(n),i=null;if(e==null||e==="float32")i=new Float32Array(r);else if(e==="int32")i=new Int32Array(r);else{if(e!=="bool")throw new Error("Unknown data type "+e);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=t();return Se.makeTensor(i,n,e)}}),oP=ge({randomNormal_:function(n,t,e,r,i){if(t===void 0&&(t=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new D1(t,e,r,!1,i),s=rn(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),aP=ge({randomGamma_:function(n,t,e,r,i){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new H6(t,e,r,i),s=rn(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),x4=ge({randomUniform_:function(n,t,e,r,i){t===void 0&&(t=0),e===void 0&&(e=1),r===void 0&&(r="float32");for(var o=rn(n,r),s=new G6(t,e,null,i),a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),Ja=ge({reshape_:function(n,t){var e=te(n,"x","reshape",null);t=jI(t,e.size),ce(e.size===Ct(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return Se.runKernelFunc((function(i){return i.reshape(e,t)}),{x:e},(function(i){return{x:function(){return i.reshape(e.shape)}}}),"Reshape",r)}}),w4=ge({spaceToBatchND_:function(n,t,e){var r=te(n,"x","spaceToBatchND");return ce(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),ce(e.length===t.length,(function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+t.length})),ce(r.shape.reduce((function(i,o,s){return s>0&&s<=t.length?i&&(o+e[s-1][0]+e[s-1][1])%t[s-1]==0:i}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+t.toString()})),Se.runKernelFunc((function(i){return i.spaceToBatchND(r,t,e)}),{$x:r},(function(i){return{$x:function(){return i.batchToSpaceND(t,e)}}}))}}),b4=ge({squeeze_:function(n,t){var e=te(n,"x","squeeze");return Ja(e,_c(e.shape,t).newShape)}}),na=ge({stack_:function(n,t){t===void 0&&(t=0);var e=lv(n,"tensors","stack");if(ce(e.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),e.length===1)return e[0].expandDims(t);var r=e[0].rank,i=e[0].shape,o=e[0].dtype;ce(t<=r,(function(){return"Axis must be <= rank of the tensor"})),e.forEach((function(a){Rn(i,a.shape,"All tensors passed to stack must have matching shapes")})),e.forEach((function(a){ce(o===a.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var s=e.map((function(a){return a.expandDims(t)}));return ti(s,t)}}),jf=ge({tile_:function(n,t){var e=te(n,"x","tile",null);ce(e.rank===t.length,(function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+t+"."}));var r=[e],i={reps:t};return Se.runKernelFunc((function(o,s){var a=o.tile(e,t);return s([e]),a}),{x:e},(function(o,s){var a=s[0];return{x:function(){var u=gn(a);if(a.rank===1)for(var c=0;c<t[0];++c)u=u.add(o.slice([c*a.shape[0]],[a.shape[0]]));else if(a.rank===2)for(c=0;c<t[0];++c)for(var h=0;h<t[1];++h)u=u.add(o.slice([c*a.shape[0],h*a.shape[1]],[a.shape[0],a.shape[1]]));else if(a.rank===3)for(c=0;c<t[0];++c)for(h=0;h<t[1];++h)for(var d=0;d<t[2];++d)u=u.add(o.slice([c*a.shape[0],h*a.shape[1],d*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(a.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+a.rank+" tensors yet.");for(c=0;c<t[0];++c)for(h=0;h<t[1];++h)for(d=0;d<t[2];++d)for(var v=0;v<t[3];++v)u=u.add(o.slice([c*a.shape[0],h*a.shape[1],d*a.shape[2],v*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return u}}}),"Tile",i,r)}}),sP=ge({truncatedNormal_:function(n,t,e,r,i){if(t===void 0&&(t=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new D1(t,e,r,!0,i),s=rn(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),ni=ge({unstack_:function(n,t){t===void 0&&(t=0),t=t||0;var e=te(n,"x","unstack");ce(t>=-e.shape.length&&t<e.shape.length,(function(){return"Axis = "+t+" is not in [-"+e.shape.length+", "+e.shape.length+")"})),t<0&&(t+=e.shape.length);var r={axis:t};return Se.runKernelFunc((function(i){return i.unstack(e,t)}),{x:e},(function(i){return{x:function(){return na(i,t)}}}),"Unpack",r)}}),uP=function(n,t){return xt(this,void 0,void 0,(function(){var e,r,i,o,s,a,u,c,h,d;return wt(this,(function(v){switch(v.label){case 0:return e=te(n,"x","setdiff1d"),r=te(t,"y","setdiff1d"),ce(e.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+r.dtype+")."})),ce(e.rank===1,(function(){return"x should be 1D tensor, but got x ("+e.shape+")."})),ce(r.rank===1,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,e.data()];case 1:return i=v.sent(),[4,r.data()];case 2:for(o=v.sent(),s=new Set(o),a=0,h=0;h<i.length;h++)s.has(i[h])||a++;for(u=new ad([a],e.dtype),c=new ad([a],"int32"),h=0,d=0;h<i.length;h++)s.has(i[h])||(u.values[d]=i[h],c.values[d]=h,d++);return[2,[u.toTensor(),c.toTensor()]]}}))}))};function fv(n,t,e,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(t.slice(0))).push(n[0]/e),i=i.concat(n.slice(1));else{i=i.concat(n[0]);for(var o=t.length,s=0;s<o;++s)i=i.concat([n[s+1]/t[s],t[s]]);i=i.concat(n.slice(o+1))}return i}function hv(n,t,e){e===void 0&&(e=!0);var r=[];if(e){r.push(t);for(var i=t+1;i<n;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{var o=[],s=[];for(i=1;i<n;++i)i>=2*t+1||i%2==1?s.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,s)}return r}function dv(n,t,e,r){r===void 0&&(r=!0);var i=[];r?i.push(n[0]/e):i.push(n[0]*e);for(var o=1;o<n.length;++o)o<=t.length?r?i.push(t[o-1]*n[o]):i.push(n[o]/t[o-1]):i.push(n[o]);return i}function _4(n,t){for(var e=[0],r=0;r<t;++r)e.push(n[r][0]);return e}function S4(n,t,e){for(var r=n.slice(0,1),i=0;i<e;++i)r.push(n[i+1]-t[i][0]-t[i][1]);return r}function C4(n,t){if(n.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+n.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>n.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+n.rank);if(n.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+n.shape+".");for(var e=t.shape,r=e[e.length-1],i=1,o=0;o<e.length-1;++o)i*=e[o];var s=n.shape,a=e.slice();a.pop();var u=1;for(o=r;o<n.rank;++o)u*=s[o],a.push(s[o]);var c=Os(n.shape).map((function(h){return h/u})).concat([1]).slice(0,r);return[a,i,u,c]}var A4=30;function h0(n){return n<=A4?n:yg(n,Math.floor(Math.sqrt(n)))}function lP(n,t,e){var r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+e.shape+", indices.shape: "+t.shape+", shape: "+n+", sliceDim: "+r+", and batchDim: "+i+".";if(e.rank<i)throw new Error(o+" update.rank < "+i+". ");if(n.length<r+(e.rank-i))throw new Error(o+" Output shape length < "+(r+(e.rank-i)));if(e.rank!==i+n.length-r)throw new Error(o+" update.rank != "+(i+n.length-r));for(var s=0;s<i;++s)if(e.shape[s]!==t.shape[s])throw new Error(o+" updates.shape["+s+"] ("+e.shape[s]+") != indices.shape["+s+"] ("+t.shape[s]+").");for(s=0;s<e.rank-i;++s)if(e.shape[s+i]!==n[s+r])throw new Error(o+" updates.shape["+(s+i)+"] ("+e.shape[s+i]+") != shape["+(s+i)+"] ("+n[s+i]+")")}function cP(n,t,e){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(n.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+n.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(e.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(n.size===0)throw new Error("Updates specified for empty output. updates shape: "+n.shape)}lP(e,t,n)}function pv(n,t,e){for(var r=t.shape.length,i=r>1?t.shape[r-1]:1,o=e.length,s=1,a=i;a<o;++a)s*=e[a];var u=i<1?1:i;return{sliceRank:i,numUpdates:Ct(t.shape)/u,sliceSize:s,strides:Os(e.slice(0,i)).concat([1]),outputSize:Ct(e)}}function fP(n,t,e){ce(n.rank===t.length,(function(){return"Error in slice"+n.rank+"D: Length of begin "+t+" must match the rank of the array ("+n.rank+")."})),ce(n.rank===e.length,(function(){return"Error in slice"+n.rank+"D: Length of size "+e+" must match the rank of the array ("+n.rank+")."}));for(var r=function(o){ce(t[o]+e[o]<=n.shape[o],(function(){return"Error in slice"+n.rank+"D: begin["+o+"] + size["+o+"] ("+(t[o]+e[o])+") would overflow input.shape["+o+"] ("+n.shape[o]+")"}))},i=0;i<n.rank;++i)r(i)}function xw(n){for(var t=[],e=0;n>0;)1&n&&t.push(e),n/=2,e++;return t}function F1(n,t,e){for(var r=[],i=0;i<n.length;i++)r[i]=Math.ceil((t[i]-n[i])/e[i]);return r}function hP(n,t,e,r,i){var o=t[i],s=e[i]||1;(n&1<<i||o==null)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),o=vg(0,o,a-1)}function dP(n,t,e,r,i){var o=t[i],s=e[i]||1;(n&1<<i||o==null)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),o=s>0?vg(0,o,a):vg(-1,o,a-1)}function k4(n,t,e){for(var r=e.length,i=0;i<e.length;i++)if(e[i]>1){r=i;break}for(i=r+1;i<e.length;i++)if(t[i]>0||e[i]!==n[i])return!1;return!0}function E4(n,t){for(var e=n.length>0?n[n.length-1]:1,r=0;r<n.length-1;r++)e+=n[r]*t[r];return e}function pP(n,t){ce(gg(n),(function(){return"The f passed in variableGrads(f) must be a function"})),ce(t==null||Array.isArray(t)&&t.every((function(h){return h instanceof Zf})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var e=t!=null;if(!e)for(var r in t=[],Se.registeredVariables)t.push(Se.registeredVariables[r]);var i=e?t.filter((function(h){return!h.trainable})):null,o=t.length;ce((t=t.filter((function(h){return h.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."}));var s=Se.gradients(n,t,null,!0),a=s.value,u=s.grads;ce(u.some((function(h){return h!=null})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),ce(a.rank===0,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"}));var c={};return t.forEach((function(h,d){u[d]!=null&&(c[h.name]=u[d])})),i!=null&&i.forEach((function(h){return c[h.name]=null})),{value:a,grads:c}}function Ov(n){return Se.customGrad(n)}var Fu=ge({softmax_:function(n,t){t===void 0&&(t=-1);var e=te(n,"logits","softmax","float32");if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+t);return Se.runKernelFunc((function(r,i){var o=r.softmax(e,t);return i([o]),o}),{logits:e},(function(r,i){var o=i[0],s=r.mul(o);return{logits:function(){return s.sub(s.sum([t],!0).mul(o))}}}),"Softmax",{dim:t},[],[!0])}}),vP=ge({logSoftmax_:function(n,t){t===void 0&&(t=-1);var e=te(n,"logits","logSoftmax");if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+t);return Ov((function(r,i){var o=r.max(t,!0),s=r.sub(o),a=s.toFloat().sub(s.exp().sum(t,!0).log());return i([a]),{value:a,gradFunc:function(u,c){var h=c[0].exp();return u.sub(u.sum(t,!0).mul(h))}}}))(e)}}),N4=(function(){function n(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return n.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},n.prototype.set=function(t,e){this.dataIdsCount++,this.data.set(t,e)},n.prototype.has=function(t){return this.data.has(t)},n.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},n.prototype.numDataIds=function(){return this.dataIdsCount},n})(),I4=(function(){function n(){}return n.prototype.time=function(t){return Fe("time")},n.prototype.read=function(t){return Fe("read")},n.prototype.readSync=function(t){return Fe("readSync")},n.prototype.numDataIds=function(){return Fe("numDataIds")},n.prototype.disposeData=function(t){return Fe("disposeData")},n.prototype.write=function(t,e,r){return Fe("write")},n.prototype.move=function(t,e,r,i){return Fe("move")},n.prototype.memory=function(){return Fe("memory")},n.prototype.floatPrecision=function(){return Fe("floatPrecision")},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.batchMatMul=function(t,e,r,i){return Fe("batchMatMul")},n.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,Fe("fusedBatchMatMul")},n.prototype.slice=function(t,e,r){return Fe("slice")},n.prototype.stridedSlice=function(t,e,r,i){return Fe("stridedSlice")},n.prototype.unstack=function(t,e){return Fe("unstack")},n.prototype.reverse=function(t,e){return Fe("reverse")},n.prototype.concat=function(t,e){return Fe("concat")},n.prototype.neg=function(t){return Fe("neg")},n.prototype.add=function(t,e){return Fe("add")},n.prototype.addN=function(t){return Fe("addN")},n.prototype.subtract=function(t,e){return Fe("subtract")},n.prototype.multiply=function(t,e){return Fe("multiply")},n.prototype.realDivide=function(t,e){return Fe("realDivide")},n.prototype.floorDiv=function(t,e){return Fe("floorDiv")},n.prototype.sum=function(t,e){return Fe("sum")},n.prototype.prod=function(t,e){return Fe("prod")},n.prototype.unsortedSegmentSum=function(t,e,r){return Fe("unsortedSegmentSum")},n.prototype.argMin=function(t,e){return Fe("argMin")},n.prototype.argMax=function(t,e){return Fe("argMax")},n.prototype.equal=function(t,e){return Fe("equal")},n.prototype.notEqual=function(t,e){return Fe("notEqual")},n.prototype.less=function(t,e){return Fe("less")},n.prototype.lessEqual=function(t,e){return Fe("lessEqual")},n.prototype.greater=function(t,e){return Fe("greater")},n.prototype.greaterEqual=function(t,e){return Fe("greaterEqual")},n.prototype.logicalNot=function(t){return Fe("logicalNot")},n.prototype.logicalAnd=function(t,e){return Fe("logicalAnd")},n.prototype.logicalOr=function(t,e){return Fe("logicalOr")},n.prototype.where=function(t){return Fe("where")},n.prototype.select=function(t,e,r){return Fe("select")},n.prototype.topk=function(t,e,r){return Fe("topk")},n.prototype.min=function(t,e){return Fe("min")},n.prototype.minimum=function(t,e){return Fe("minimum")},n.prototype.mod=function(t,e){return Fe("mod")},n.prototype.max=function(t,e){return Fe("max")},n.prototype.maximum=function(t,e){return Fe("maximum")},n.prototype.all=function(t,e){return Fe("all")},n.prototype.any=function(t,e){return Fe("any")},n.prototype.squaredDifference=function(t,e){return Fe("squaredDifference")},n.prototype.ceil=function(t){return Fe("ceil")},n.prototype.floor=function(t){return Fe("floor")},n.prototype.round=function(t){return Fe("round")},n.prototype.sign=function(t){return Fe("sign")},n.prototype.isNaN=function(t){return Fe("isNaN")},n.prototype.isInf=function(t){return Fe("isInf")},n.prototype.isFinite=function(t){return Fe("isFinite")},n.prototype.pow=function(t,e){return Fe("pow")},n.prototype.exp=function(t){return Fe("exp")},n.prototype.expm1=function(t){return Fe("expm1")},n.prototype.softmax=function(t,e){return Fe("softmax")},n.prototype.log=function(t){return Fe("log")},n.prototype.log1p=function(t){return Fe("log1p")},n.prototype.sqrt=function(t){return Fe("sqrt")},n.prototype.rsqrt=function(t){return Fe("rsqrt")},n.prototype.square=function(t){return Fe("square")},n.prototype.reciprocal=function(t){return Fe("reciprocal")},n.prototype.relu=function(t){return Fe("relu")},n.prototype.relu6=function(t){return Fe("relu6")},n.prototype.prelu=function(t,e){return Fe("prelu")},n.prototype.elu=function(t){return Fe("elu")},n.prototype.eluDer=function(t,e){return Fe("eluDer")},n.prototype.selu=function(t){return Fe("selu")},n.prototype.int=function(t){return Fe("int")},n.prototype.clip=function(t,e,r){return Fe("clip")},n.prototype.abs=function(t){return Fe("abs")},n.prototype.complexAbs=function(t){return Fe("complexAbs")},n.prototype.sigmoid=function(t){return Fe("sigmoid")},n.prototype.softplus=function(t){return Fe("softplus")},n.prototype.sin=function(t){return Fe("sin")},n.prototype.cos=function(t){return Fe("cos")},n.prototype.tan=function(t){return Fe("tan")},n.prototype.asin=function(t){return Fe("asin")},n.prototype.acos=function(t){return Fe("acos")},n.prototype.atan=function(t){return Fe("atan")},n.prototype.atan2=function(t,e){return Fe("atan2")},n.prototype.sinh=function(t){return Fe("sinh")},n.prototype.cosh=function(t){return Fe("cosh")},n.prototype.tanh=function(t){return Fe("tanh")},n.prototype.asinh=function(t){return Fe("asinh")},n.prototype.acosh=function(t){return Fe("acosh")},n.prototype.atanh=function(t){return Fe("atanh")},n.prototype.erf=function(t){return Fe("erf")},n.prototype.step=function(t,e){return Fe("step")},n.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Fe("fusedConv2d")},n.prototype.conv2d=function(t,e,r){return Fe("conv2d")},n.prototype.conv2dDerInput=function(t,e,r){return Fe("conv2dDerInput")},n.prototype.conv2dDerFilter=function(t,e,r){return Fe("conv2dDerFilter")},n.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Fe("fusedDepthwiseConv2D")},n.prototype.depthwiseConv2D=function(t,e,r){return Fe("depthwiseConv2D")},n.prototype.depthwiseConv2DDerInput=function(t,e,r){return Fe("depthwiseConv2DDerInput")},n.prototype.depthwiseConv2DDerFilter=function(t,e,r){return Fe("depthwiseConv2DDerFilter")},n.prototype.conv3d=function(t,e,r){return Fe("conv3d")},n.prototype.conv3dDerInput=function(t,e,r){return Fe("conv3dDerInput")},n.prototype.conv3dDerFilter=function(t,e,r){return Fe("conv3dDerFilter")},n.prototype.maxPool=function(t,e){return Fe("maxPool")},n.prototype.maxPoolBackprop=function(t,e,r,i){return Fe("maxPoolBackprop")},n.prototype.avgPool=function(t,e){return Fe("avgPool")},n.prototype.avgPoolBackprop=function(t,e,r){return Fe("avgPoolBackprop")},n.prototype.avgPool3d=function(t,e){return Fe("avgPool3d")},n.prototype.avgPool3dBackprop=function(t,e,r){return Fe("avgPool3dBackprop")},n.prototype.maxPool3d=function(t,e){return Fe("maxPool3d")},n.prototype.maxPool3dBackprop=function(t,e,r,i){return Fe("maxPool3dBackprop")},n.prototype.reshape=function(t,e){return Fe("reshape")},n.prototype.cast=function(t,e){return Fe("cast")},n.prototype.tile=function(t,e){return Fe("tile")},n.prototype.pad=function(t,e,r){return Fe("pad")},n.prototype.transpose=function(t,e){return Fe("transpose")},n.prototype.gather=function(t,e,r){return Fe("gather")},n.prototype.gatherND=function(t,e){return Fe("gatherND")},n.prototype.scatterND=function(t,e,r){return Fe("scatterND")},n.prototype.batchToSpaceND=function(t,e,r){return Fe("batchToSpaceND")},n.prototype.spaceToBatchND=function(t,e,r){return Fe("spaceToBatchND")},n.prototype.resizeBilinear=function(t,e,r,i){return Fe("resizeBilinear")},n.prototype.resizeBilinearBackprop=function(t,e,r){return Fe("resizeBilinearBackprop")},n.prototype.resizeNearestNeighbor=function(t,e,r,i){return Fe("resizeNearestNeighbor")},n.prototype.resizeNearestNeighborBackprop=function(t,e,r){return Fe("resizeNearestNeighborBackprop")},n.prototype.batchNormalization=function(t,e,r,i,o,s){return Fe("batchNormalization")},n.prototype.localResponseNormalization4D=function(t,e,r,i,o){return Fe("localResponseNormalization4D")},n.prototype.LRNGrad=function(t,e,r,i,o,s,a){return Fe("LRNGrad")},n.prototype.multinomial=function(t,e,r,i){return Fe("multinomial")},n.prototype.oneHot=function(t,e,r,i){return Fe("oneHot")},n.prototype.cumsum=function(t,e,r,i){return Fe("cumsum")},n.prototype.nonMaxSuppression=function(t,e,r,i,o){return Fe("nonMaxSuppression")},n.prototype.fft=function(t){return Fe("fft")},n.prototype.ifft=function(t){return Fe("ifft")},n.prototype.complex=function(t,e){return Fe("complex")},n.prototype.real=function(t){return Fe("real")},n.prototype.imag=function(t){return Fe("imag")},n.prototype.cropAndResize=function(t,e,r,i,o,s){return Fe("cropAndResize")},n.prototype.depthToSpace=function(t,e,r){return Fe("depthToSpace")},n.prototype.split=function(t,e,r){return Fe("split")},n.prototype.sparseToDense=function(t,e,r,i){return Fe("sparseToDense")},n.prototype.diag=function(t){return Fe("diag")},n.prototype.fill=function(t,e,r){return Fe("fill")},n.prototype.onesLike=function(t){return Fe("onesLike")},n.prototype.zerosLike=function(t){return Fe("zerosLike")},n.prototype.linspace=function(t,e,r){return Fe("linspace")},n.prototype.dispose=function(){return Fe("dispose")},n})();function Fe(n){throw new Error("'"+n+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function kl(n,t){for(var e=n.length,r=[],i=0;i<e;i++){var o=e-1-i,s=n[o]||1;(t[t.length-1-i]||1)>1&&s===1&&r.unshift(o)}return r}function ri(n,t){for(var e=[],r=0;r<t.length;r++){var i=n[n.length-r-1],o=t.length-r-1,s=t[o];(i==null||i===1&&s>1)&&e.unshift(o)}return e}function pn(n,t){for(var e=[],r=Math.max(n.length,t.length),i=0;i<r;i++){var o=n[n.length-i-1];o==null&&(o=1);var s=t[t.length-i-1];if(s==null&&(s=1),o===1)e.unshift(s);else if(s===1)e.unshift(o);else{if(o!==s)throw Error("Operands could not be broadcast together with shapes "+n+" and "+t+".");e.unshift(o)}}return e}function ud(n,t,e,r,i,o,s){s===void 0&&(s="channelsLast");var a,u=gv(t),c=u[0],h=u[1];if(s==="channelsLast")a=[c,h,n[3],n[3]];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);a=[c,h,n[1],n[1]]}return Bc(n,a,e,r,i,o,!1,s)}function vv(n,t,e,r,i,o,s){s===void 0&&(s="NDHWC");var a,u,c=Ag(t),h=c[0],d=c[1],v=c[2];if(s==="NDHWC")u="channelsLast",a=[h,d,v,n[4],n[4]];else{if(s!=="NCDHW")throw new Error("Unknown dataFormat "+s);u="channelsFirst",a=[h,d,v,n[1],n[1]]}return mv(n,a,e,r,i,!1,u,o)}function Bc(n,t,e,r,i,o,s,a){s===void 0&&(s=!1),a===void 0&&(a="channelsLast");var u=[-1,-1,-1,-1],c=u[0],h=u[1],d=u[2],v=u[3];if(a==="channelsLast")c=n[0],h=n[1],d=n[2],v=n[3];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);c=n[0],v=n[1],h=n[2],d=n[3]}var p,y=t[0],x=t[1],w=t[3],_=gv(e),E=_[0],I=_[1],C=gv(r),N=C[0],O=C[1],U=Uf(y,N),M=Uf(x,O),T=(function(G,oe,he,ae,W,ne,se,$){var F,K,Q;if(typeof G=="number"){F={top:G,bottom:G,left:G,right:G,type:G===0?"VALID":"NUMBER"};var ue=(function(be,De,Re,Xe,ee){Xe==null&&(Xe=P4(be,De,Re));var Je=be[0],Rt=be[1],ft=Yh((Je-De+2*Xe)/Re+1,ee);ce(Ur(ft),(function(){return"The output # of rows ("+ft+") must be an integer. Change the stride and/or zero pad parameters"}));var He=Yh((Rt-De+2*Xe)/Re+1,ee);return ce(Ur(He),(function(){return"The output # of columns ("+He+") must be an integer. Change the stride and/or zero pad parameters"})),[ft,He]})([oe,he],ne,ae,G,$);K=ue[0],Q=ue[1]}else if(G==="same"){K=Math.ceil(oe/ae),Q=Math.ceil(he/W);var de=Math.max(0,(K-1)*ae+ne-oe),ve=Math.max(0,(Q-1)*W+se-he),we=Math.floor(de/2),Ce=de-we,Le=Math.floor(ve/2);F={top:we,bottom:Ce,left:Le,right:ve-Le,type:"SAME"}}else{if(G!=="valid")throw Error("Unknown padding parameter: "+G);F={top:0,bottom:0,left:0,right:0,type:"VALID"},K=Math.ceil((oe-ne+1)/ae),Q=Math.ceil((he-se+1)/W)}return{padInfo:F,outHeight:K,outWidth:Q}})(i,h,d,E,I,U,M,o),j=T.padInfo,D=T.outHeight,B=T.outWidth,X=s?w*v:w;return a==="channelsFirst"?p=[c,X,D,B]:a==="channelsLast"&&(p=[c,D,B,X]),{batchSize:c,dataFormat:a,inHeight:h,inWidth:d,inChannels:v,outHeight:D,outWidth:B,outChannels:X,padInfo:j,strideHeight:E,strideWidth:I,filterHeight:y,filterWidth:x,effectiveFilterHeight:U,effectiveFilterWidth:M,dilationHeight:N,dilationWidth:O,inShape:n,outShape:p,filterShape:t}}function mv(n,t,e,r,i,o,s,a){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],h=u[1],d=u[2],v=u[3],p=u[4];if(s==="channelsLast")c=n[0],h=n[1],d=n[2],v=n[3],p=n[4];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);c=n[0],p=n[1],h=n[2],d=n[3],v=n[4]}var y,x=t[0],w=t[1],_=t[2],E=t[4],I=Ag(e),C=I[0],N=I[1],O=I[2],U=Ag(r),M=U[0],T=U[1],j=U[2],D=Uf(x,M),B=Uf(w,T),X=Uf(_,j),G=(function(se,$,F,K,Q,ue,de,ve,we,Ce,Le){var be,De,Re,Xe;if(typeof se=="number"){be={top:se,bottom:se,left:se,right:se,front:se,back:se,type:se===0?"VALID":"NUMBER"};var ee=(function(sn,Vt,jt,Xt,Ft,lt){Ft==null&&(Ft=P4(sn,Vt,Xt));var Ut=sn[0],dt=sn[1],Xn=sn[2],un=Yh((Ut-Vt+2*Ft)/Xt+1,lt);ce(Ur(un),(function(){return"The output # of depths ("+un+") must be an integer. Change the stride and/or zero pad parameters"}));var Yt=Yh((dt-Vt+2*Ft)/Xt+1,lt);ce(Ur(Yt),(function(){return"The output # of rows ("+Yt+") must be an integer. Change the stride and/or zero pad parameters"}));var Qt=Yh((Xn-Vt+2*Ft)/Xt+1,lt);return ce(Ur(Qt),(function(){return"The output # of columns ("+Qt+") must be an integer. Change the stride and/or zero pad parameters"})),[un,Yt,Qt,jt]})([$,F,K,1],ve,1,Q,se,Le);De=ee[0],Re=ee[1],Xe=ee[2]}else if(se==="same"){De=Math.ceil($/Q),Re=Math.ceil(F/ue),Xe=Math.ceil(K/de);var Je=(De-1)*Q+ve-$,Rt=(Re-1)*ue+we-F,ft=(Xe-1)*de+Ce-K,He=Math.floor(Je/2),mt=Je-He,nt=Math.floor(Rt/2),ht=Rt-nt,ut=Math.floor(ft/2);be={top:nt,bottom:ht,left:ut,right:ft-ut,front:He,back:mt,type:"SAME"}}else{if(se!=="valid")throw Error("Unknown padding parameter: "+se);be={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},De=Math.ceil(($-ve+1)/Q),Re=Math.ceil((F-we+1)/ue),Xe=Math.ceil((K-Ce+1)/de)}return{padInfo:be,outDepth:De,outHeight:Re,outWidth:Xe}})(i,h,d,v,C,N,O,D,B,X,a),oe=G.padInfo,he=G.outDepth,ae=G.outHeight,W=G.outWidth,ne=o?E*p:E;return s==="channelsFirst"?y=[c,ne,he,ae,W]:s==="channelsLast"&&(y=[c,he,ae,W,ne]),{batchSize:c,dataFormat:s,inDepth:h,inHeight:d,inWidth:v,inChannels:p,outDepth:he,outHeight:ae,outWidth:W,outChannels:ne,padInfo:oe,strideDepth:C,strideHeight:N,strideWidth:O,filterDepth:x,filterHeight:w,filterWidth:_,effectiveFilterDepth:D,effectiveFilterHeight:B,effectiveFilterWidth:X,dilationDepth:M,dilationHeight:T,dilationWidth:j,inShape:n,outShape:y,filterShape:t}}function P4(n,t,e,r){r===void 0&&(r=1);var i=Uf(t,r);return Math.floor((n[0]*(e-1)-e+i)/2)}function gv(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function Ag(n){return typeof n=="number"?[n,n,n]:n}function Uf(n,t){return t<=1?n:n+(n-1)*(t-1)}function Yh(n,t){if(!t)return n;switch(t){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error("Unknown roundingMode "+t)}}function th(n){var t=gv(n),e=t[0],r=t[1],i=t[2];return e===1&&r===1&&i===1}function Ro(n,t){return th(n)||th(t)}function M1(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+n)}function R4(n,t,e){if(t==="complex64"){if(n.dtype==="complex64")return n.clone();var r=Qn(n.shape),i=n.toFloat(),o=e.complex(i,r);return r.dispose(),i.dispose(),o}if(!VI(n.dtype,t))return Se.makeTensorFromDataId(n.dataId,n.shape,t);if(n.dtype==="complex64"){var s=e.real(n);return o=s.cast(t),s.dispose(),o}if(t==="int32")return e.int(n);if(t==="bool"){var a=rt(0,n.dtype);return o=e.notEqual(n,a),a.dispose(),o}throw new Error("Error in Cast: failed to cast "+n.dtype+" to "+t)}function kg(n,t){return Se.makeTensorFromDataId(n.dataId,t,n.dtype)}function T4(n,t,e){var r=(t-n)/(e-1),i=bd(e,"float32");i[0]=n;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return Hr(i,"float32")}function Eg(n,t){if(n.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+n.length+", imag: "+t.length+".");for(var e=new Float32Array(2*n.length),r=0;r<e.length;r+=2)e[r]=n[r/2],e[r+1]=t[r/2];return e}function ww(n,t){return{real:n[2*t],imag:n[2*t+1]}}function mP(n,t,e,r){n[2*r]=t,n[2*r+1]=e}function gP(n,t,e){var r=(e?2:-2)*Math.PI*(n/t);return{real:Math.cos(r),imag:Math.sin(r)}}function yP(n,t,e){var r=(function(o,s,a){return(function(u,c,h){for(var d=0,v=u.length,p=0,y=!1;d<v;){var x=h(c,u[p=d+(v-d>>>1)]);x>0?d=p+1:(v=p,y=!x)}return y?d:-d-1})(o,s,a||xP)})(n,t,e),i=r<0?-(r+1):r;n.splice(i,0,t)}function xP(n,t){return n>t?1:n<t?-1:0}function O1(n,t,e,r,i){return L4(n,t,e,r,i,0).selectedIndices}function B1(n,t,e,r,i,o){var s=L4(n,t,e,r,i,o);return s.numValidOutputs.dispose(),{selectedIndices:s.selectedIndices,selectedScores:s.selectedScores}}function L4(n,t,e,r,i,o,s,a){a===void 0&&(a=!1);for(var u=Array.from(t).map((function(C,N){return{score:C,boxIndex:N,suppressBeginIndex:0}})).filter((function(C){return C.score>i})).sort(bw),c=o>0?-.5/o:0,h=[],d=[];h.length<e&&u.length>0;){var v=u.pop(),p=v.score,y=v.boxIndex,x=v.suppressBeginIndex;if(p<i)break;for(var w=!1,_=h.length-1;_>=x;--_){var E=wP(n,y,h[_]);if(E>=r){w=!0;break}if(v.score=v.score*bP(r,c,E),v.score<=i)break}v.suppressBeginIndex=h.length,w||(v.score===p?(h.push(y),d.push(v.score)):v.score>i&&yP(u,v,bw))}var I=h.length;return a&&(h.fill(0,I),d.fill(0,I)),{selectedIndices:Hr(h,"int32"),selectedScores:Hr(d,"float32"),numValidOutputs:rt(I,"int32")}}function wP(n,t,e){var r=n.subarray(4*t,4*t+4),i=n.subarray(4*e,4*e+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),h=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),v=Math.max(i[1],i[3]),p=(a-o)*(u-s),y=(d-c)*(v-h);if(p<=0||y<=0)return 0;var x=Math.max(o,c),w=Math.max(s,h),_=Math.min(a,d),E=Math.min(u,v),I=Math.max(_-x,0)*Math.max(E-w,0);return I/(p+y-I)}function bP(n,t,e){var r=Math.exp(t*e*e);return e<=n?r:0}function bw(n,t){return n.score-t.score||n.score===t.score&&t.boxIndex-n.boxIndex}function D4(n,t,e){var r=new Array(n.rank).fill(0),i=n.shape.slice();return t.map((function(o){i[e]=o;var s=n.slice(r,i);return r[e]+=o,s}))}function F4(n,t){for(var e=new Array(n.rank),r=0;r<e.length;r++)e[r]=n.shape[r]*t[r];var i=rn(e,n.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),s=new Array(n.rank),a=0;a<s.length;a++)s[a]=o[a]%n.shape[a];var u=n.locToIndex(s);i.values[r]=n.values[u]}return i.toTensor()}function M4(n,t,e,r,i){for(var o=t[t.length-1],s=[n.length/o,o],a=s[0],u=s[1],c=od(e,a*r),h=od("int32",a*r),d=0;d<a;d++){for(var v=d*u,p=n.subarray(v,v+u),y=[],x=0;x<p.length;x++)y.push({value:p[x],index:x});y.sort((function(C,N){return N.value-C.value}));var w=d*r,_=c.subarray(w,w+r),E=h.subarray(w,w+r);for(x=0;x<r;x++)_[x]=y[x].value,E[x]=y[x].index}var I=t.slice();return I[I.length-1]=r,[ki(c,I,e),ki(h,I,"int32")]}function j1(n,t){for(var e=[],r=0;r<t.length;r++)t[r]&&e.push(r);var i=rn(n,"int32"),o=rn([e.length,n.length],"int32");for(r=0;r<e.length;r++){var s=i.indexToLoc(e[r]),a=r*n.length;o.values.set(s,a)}return o.toTensor()}var _P=function(n,t){this.outputShape=[],this.outputShape=n,this.variableNames=t.map((function(i,o){return"T"+o}));var e=[];this.variableNames.forEach((function(i){e.push("float v"+i+" = get"+i+"AtOutCoords();")}));var r=this.variableNames.map((function(i){return"v"+i})).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},SP=function(n,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=t.map((function(i,o){return"T"+o}));var e=[];this.variableNames.forEach((function(i){e.push("vec4 v"+i+" = get"+i+"AtOutCoords();")}));var r=this.variableNames.map((function(i){return"v"+i})).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},CP=function(n,t,e){this.variableNames=["A"];var r=n.windowSize,i=n.batchSize,o=n.inSize,s=Math.ceil(o/r);e||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];var a=t==="max"?">":"<",u=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+a+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function O4(n,t){return["x","y","z","w","u","v"].slice(0,t).map((function(e){return n+"."+e}))}function No(n,t){return t===1?[n]:O4(n,t)}function Gi(){var n,t,e,r,i,o,s,a,u,c;return Ve().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",t="in",e="out",r="in",i="texture",o="outputColor",s="out vec4 outputColor;",a=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",t="attribute",e="varying",r="varying",i="texture2D",o="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:t,varyingVs:e,varyingFs:r,texture2D:i,output:o,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:u,defineRound:c}}function Ac(n,t,e){e===void 0&&(e="index");var r=Os(t);return r.map((function(i,o){return"int "+n[o]+" = "+e+" / "+i+"; "+(o===r.length-1?"int "+n[o+1]+" = "+e+" - "+n[o]+" * "+i:"index -= "+n[o]+" * "+i)+";"})).join("")}function U1(n){var t=Os(n).map((function(e){return e.toString()}));return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var B4=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function AP(n,t,e,r){var i=[];n.forEach((function(p){var y=Ct(p.shapeInfo.logicalShape);p.shapeInfo.isUniform?i.push("uniform float "+p.name+(y>1?"["+y+"]":"")+";"):(i.push("uniform sampler2D "+p.name+";"),i.push("uniform int offset"+p.name+";"))}));var o,s,a=i.join(`
`),u=n.map((function(p){return(function(y,x,w){w===void 0&&(w=!1);var _="";_+=w?j4(y):kf(y);var E=y.shapeInfo.logicalShape,I=x.logicalShape;return E.length<=I.length&&(_+=w?(function(C,N){var O,U=C.name,M=U.charAt(0).toUpperCase()+U.slice(1),T="get"+M+"AtOutCoords",j=C.shapeInfo.logicalShape.length,D=N.logicalShape.length,B=kl(C.shapeInfo.logicalShape,N.logicalShape),X=Kn(D),G=D-j,oe=["x","y","z","w","u","v"];O=j===0?"":D<2&&B.length>=1?"coords = 0;":B.map((function(F){return"coords."+oe[F+G]+" = 0;"})).join(`
`);var he="";he=D<2&&j>0?"coords":C.shapeInfo.logicalShape.map((function(F,K){return"coords."+oe[K+G]})).join(", ");var ae="return outputValue;",W=Ct(C.shapeInfo.logicalShape)===1,ne=Ct(N.logicalShape)===1;if(j!==1||W||ne){if(W&&!ne)ae=D===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(B.length){var se=j-2,$=j-1;B.indexOf(se)>-1&&B.indexOf($)>-1?ae="return vec4(outputValue.x);":B.indexOf(se)>-1?ae="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":B.indexOf($)>-1&&(ae="return vec4(outputValue.xx, outputValue.zz);")}}else ae=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+T+`() {
      `+X+` coords = getOutputCoords();
      `+O+`
      vec4 outputValue = get`+M+"("+he+`);
      `+ae+`
    }
  `})(y,x):(function(C,N){var O=C.name,U=O.charAt(0).toUpperCase()+O.slice(1),M="get"+U+"AtOutCoords",T=N.texShape,j=C.shapeInfo.texShape,D=C.shapeInfo.logicalShape.length,B=N.logicalShape.length;if(!C.shapeInfo.isUniform&&D===B&&C.shapeInfo.flatOffset==null&&mi(j,T))return`
      float `+M+`() {
        return sampleTexture(`+O+`, resultUV);
      }
    `;var X,G=Kn(B),oe=kl(C.shapeInfo.logicalShape,N.logicalShape),he=B-D,ae=["x","y","z","w","u","v"];X=D===0?"":B<2&&oe.length>=1?"coords = 0;":oe.map((function(ne){return"coords."+ae[ne+he]+" = 0;"})).join(`
`);var W="";return W=B<2&&D>0?"coords":C.shapeInfo.logicalShape.map((function(ne,se){return"coords."+ae[se+he]})).join(", "),`
    float `+M+`() {
      `+G+` coords = getOutputCoords();
      `+X+`
      return get`+U+"("+W+`);
    }
  `})(y,x)),_})(p,t,r)})).join(`
`),c=t.texShape,h=Gi(),d=(function(p){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+p.texture2D+`(textureSampler, uv).r;
    }
  `})(h),v=(function(p){return p.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+p.varyingFs+` vec2 resultUV;
    `+p.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+p.defineSpecialNaN+`
    `+p.defineSpecialInf+`
    `+p.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+kP+`
    `+EP+`
    `+NP+`
  `})(h);return t.isPacked?(o=(function(p,y){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(C,N){var O=[Math.ceil(N[0]/2),Math.ceil(N[1]/2)];return O[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+O[1]+`.0);
      }
    `:O[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+O[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));
      return 2 * (resTexRC.x * `+O[1]+` + resTexRC.y);
    }
  `})(0,y);case 2:return(function(C,N){var O=[Math.ceil(N[0]/2),Math.ceil(N[1]/2)];if(mi(C,N))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+O[0]+", "+O[1]+`));
      }
    `;var U=Math.ceil(C[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));

      int index = resTexRC.x * `+O[1]+` + resTexRC.y;
      int r = 2 * (index / `+U+`);
      int c = imod(index, `+U+`) * 2;

      return ivec2(r, c);
    }
  `})(p,y);case 3:return x=p,w=y,_=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],E=Math.ceil(x[2]/2),I=E*Math.ceil(x[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      int b = index / `+I+`;
      index -= b * `+I+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return(function(C,N){for(var O=[Math.ceil(N[0]/2),Math.ceil(N[1]/2)],U=Math.ceil(C[C.length-1]/2),M=U*Math.ceil(C[C.length-2]/2),T=M,j="",D="b, r, c",B=2;B<C.length-1;B++)T*=C[C.length-B-1],j=`
      int b`+B+" = index / "+T+`;
      index -= b`+B+" * "+T+`;
    `+j,D="b"+B+", "+D;return`
    ivec`+C.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));
      int index = resTexRC.x * `+O[1]+` + resTexRC.y;

      `+j+`

      int b = index / `+M+`;
      index -= b * `+M+`;

      int r = 2 * (index / `+U+`);
      int c = imod(index, `+U+`) * 2;

      return ivec`+C.length+"("+D+`);
    }
  `})(p,y)}var x,w,_,E,I})(t.logicalShape,c),s=(function(p){return`
    void setOutput(vec4 val) {
      `+p.output+` = val;
    }
  `})(h)):(o=(function(p,y){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(_,E){return E[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+E[1]+`.0);
      }
    `:E[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+E[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+E[0]+", "+E[1]+`));
      return resTexRC.x * `+E[1]+` + resTexRC.y;
    }
  `})(0,y);case 2:return(function(_,E){return mi(_,E)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+E[0]+", "+E[1]+`));
      }
    `:_[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+E[0]+", "+E[1]+`));
        int index = resTexRC.x * `+E[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:_[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+E[0]+", "+E[1]+`));
        int index = resTexRC.x * `+E[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+E[0]+", "+E[1]+`));
      int index = resTexRC.x * `+E[1]+` + resTexRC.y;
      int r = index / `+_[1]+`;
      int c = index - r * `+_[1]+`;
      return ivec2(r, c);
    }
  `})(p,y);case 3:return x=y,w=Ac(["r","c","d"],p),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+w+`
      return ivec3(r, c, d);
    }
  `;case 4:return(function(_,E){var I=Ac(["r","c","d","d2"],_);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+E[0]+", "+E[1]+`));
      int index = resTexRC.x * `+E[1]+` + resTexRC.y;
      `+I+`
      return ivec4(r, c, d, d2);
    }
  `})(p,y);case 5:return(function(_,E){var I=Ac(["r","c","d","d2","d3"],_);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+E[0]+`,
                             `+E[1]+`));

      int index = resTexRC.x * `+E[1]+` + resTexRC.y;

      `+I+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `})(p,y);case 6:return(function(_,E){var I=Ac(["r","c","d","d2","d3","d4"],_);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+E[0]+", "+E[1]+`));
      int index = resTexRC.x * `+E[1]+` + resTexRC.y;

      `+I+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `})(p,y);default:throw new Error(p.length+"-D output sampling is not yet supported")}var x,w})(t.logicalShape,c),s=(function(p){return`
    void setOutput(float val) {
      `+p.output+` = vec4(val, 0, 0, 0);
    }
  `})(h)),r&&(v+=IP),[v,d,s,a,o,u,e].join(`
`)}function kf(n){var t=n.shapeInfo.logicalShape;switch(t.length){case 0:return(function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var o=e.shapeInfo.texShape,s=o[0],a=o[1];if(s===1&&a===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=e.shapeInfo.texShape,c=u[0],h=u[1],d=mc(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+c+", "+h+", "+d+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(n);case 1:return(function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+xf(e)+`
      }
    `;var o=e.shapeInfo.texShape,s=o[0],a=o[1];if(a===1&&s===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=mc(r);return a===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+s+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+a+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+s+", "+a+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(n);case 2:return(function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=e.shapeInfo.texShape;if(s!=null&&mi(r,s)){var a=s[0],u=s[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+a+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var c=_c(r),h=c.newShape,d=c.keptDims,v=h;if(v.length<r.length){var p=Ef(e,v);return`
      `+kf(p)+`
      float `+o+`(int row, int col) {
        return `+o+"("+Nf(["row","col"],d)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+xf(e)+`
      }
    `;var y=s[0],x=s[1],w=mc(i);return x===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+y+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:y===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+x+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+w+`;
    vec2 uv = uvFromFlat(`+y+", "+x+`, index);
    return sampleTexture(`+i+`, uv);
  }
`})(n);case 3:return(function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[1]*r[2],a=r[2],u=_c(r),c=u.newShape,h=u.keptDims,d=c;if(d.length<r.length){var v=Ef(e,d);return`
        `+kf(v)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+Nf(["row","col","depth"],h)+`);
        }
      `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+s+", "+a+`, 1)));
        `+xf(e)+`
      }
    `;var p=e.shapeInfo.texShape,y=p[0],x=p[1],w=e.shapeInfo.flatOffset;if(x===s&&w==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+a+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+x+".0, "+y+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(x===a&&w==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+x+".0, "+y+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var _=mc(i);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+s+" + col * "+a+" + depth + "+_+`;
        vec2 uv = uvFromFlat(`+y+", "+x+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `})(n);case 4:return(function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[3],a=r[2]*s,u=r[1]*a,c=_c(r),h=c.newShape,d=c.keptDims;if(h.length<r.length){var v=Ef(e,h);return`
      `+kf(v)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+Nf(["row","col","depth","depth2"],d)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+a+", "+s+`, 1)));
        `+xf(e)+`
      }
    `;var p=e.shapeInfo.flatOffset,y=e.shapeInfo.texShape,x=y[0],w=y[1];if(w===u&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+a+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+w+".0, "+x+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(w===s&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+w+".0, "+x+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var _=mc(i);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+a+` +
          depth * `+s+` + depth2;
      vec2 uv = uvFromFlat(`+x+", "+w+", index + "+_+`);
      return sampleTexture(`+i+`, uv);
    }
  `})(n);case 5:return(function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[4],a=r[3]*s,u=r[2]*a,c=r[1]*u,h=_c(r),d=h.newShape,v=h.keptDims;if(d.length<r.length){var p=Ef(e,d);return`
      `+kf(p)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+Nf(["row","col","depth","depth2","depth3"],v)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+c+", "+u+", "+a+", "+s+`)) +
          depth3;
        `+xf(e)+`
      }
    `;var y=e.shapeInfo.flatOffset,x=e.shapeInfo.texShape,w=x[0],_=x[1];if(_===c&&y==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+a+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+w+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(_===s&&y==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+w+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var E=mc(i);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+u+" + depth * "+a+` +
          depth2 * `+s+" + depth3 + "+E+`;
      vec2 uv = uvFromFlat(`+w+", "+_+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `})(n);case 6:return(function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=_c(r),a=s.newShape,u=s.keptDims;if(a.length<r.length){var c=Ef(e,a);return`
      `+kf(c)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+Nf(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var h=r[5],d=r[4]*h,v=r[3]*d,p=r[2]*v,y=r[1]*p;if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+y+", "+p+", "+v+", "+d+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+h+`, 1)));
        `+xf(e)+`
      }
    `;var x=e.shapeInfo.flatOffset,w=e.shapeInfo.texShape,_=w[0],E=w[1];if(E===y&&x==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+p+", "+v+", "+d+", "+h+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+E+".0, "+_+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(E===h&&x==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+E+".0, "+_+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var I=mc(i);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+y+" + col * "+p+" + depth * "+v+` +
          depth2 * `+d+" + depth3 * "+h+" + depth4 + "+I+`;
      vec2 uv = uvFromFlat(`+_+", "+E+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `})(n);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function j4(n){var t,e,r;switch(n.shapeInfo.logicalShape.length){case 0:return t=n.name,e="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Gi(),`
    vec4 `+e+`() {
      return `+r.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return(function(i){var o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),a=i.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=Gi();return`
    vec4 `+s+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+c.texture2D+"("+o+`, uv);
    }
  `})(n);case 2:return(function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),u=i.shapeInfo.texShape,c=u[0],h=u[1],d=Gi();if(u!=null&&mi(o,u))return`
      vec4 `+a+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+h+".0, "+c+`.0);

        return `+d.texture2D+"("+s+`, uv);
      }
    `;var v=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],p=Math.ceil(o[1]/2);return`
    vec4 `+a+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+p+", "+v[0]+", "+v[1]+`, row, col);
      return `+d.texture2D+"("+s+`, uv);
    }
  `})(n);case 3:return(function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),u=i.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(o[0]===1){var h=o.slice(1),d=Ef(i,h);return`
        `+j4(d)+`
        vec4 `+a+`(int b, int row, int col) {
          return `+a+"("+Nf(["b","row","col"],[1,2])+`);
        }
      `}var v=c[0],p=c[1],y=Math.ceil(o[2]/2),x=y*Math.ceil(o[1]/2),w=Gi();return`
    vec4 `+a+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+v+", "+p+", "+x+", "+y+`, b, row, col);
      return `+w.texture2D+"("+s+`, uv);
    }
  `})(n);default:return(function(i){for(var o=i.shapeInfo.logicalShape,s=o.length,a=i.name,u="get"+a.charAt(0).toUpperCase()+a.slice(1),c=i.shapeInfo.texShape,h=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],d=h[0],v=h[1],p=Math.ceil(o[s-1]/2),y=p*Math.ceil(o[s-2]/2),x="int b, int row, int col",w="b * "+y+" + (row / 2) * "+p+" + (col / 2)",_=2;_<s-1;_++)x="int b"+_+", "+x,y*=o[s-_-1],w="b"+_+" * "+y+" + "+w;var E=Gi();return`
    vec4 `+u+"("+x+`) {
      int index = `+w+`;
      int texR = index / `+v+`;
      int texC = index - texR * `+v+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+", "+d+`);
      return `+E.texture2D+"("+a+`, uv);
    }
  `})(n)}}var kP=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,EP=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,NP=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,IP=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function mc(n){return"offset"+n}function xf(n){var t=n.name,e=Ct(n.shapeInfo.logicalShape);return e<2?"return "+t+";":`
    for (int i = 0; i < `+e+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function Kn(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error("GPU for rank "+n+" is not yet supported")}function Ef(n,t){var e=JSON.parse(JSON.stringify(n));return e.shapeInfo.logicalShape=t,e}function Nf(n,t){return t.map((function(e){return n[e]})).join(", ")}var PP=function(n,t,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ce(n.length>2,(function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."}));var i=n[n.length-1],o=Math.ceil(i/t);this.outputShape=n.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var s,a,u=this.outputShape,c=u.length,h=Kn(c),d=No("coords",c);if(o===1){var v=Kn(a=c+1);s=`
        `+v+" sourceLocR = "+v+"("+d.join()+`, 0);
        ++`+d[c-1]+`;
        `+v+" sourceLocG = "+v+"("+d.join()+`, 0);
        ++`+d[c-2]+`;
        `+v+" sourceLocA = "+v+"("+d.join()+`, 0);
        --`+d[c-1]+`;
        `+v+" sourceLocB = "+v+"("+d.join()+`, 0);
        --`+d[c-2]+";"}else a=c,s=`
        `+h+` sourceLocR = coords;
        ++`+d[c-1]+`;
        `+h+` sourceLocG = coords;
        ++`+d[c-2]+`;
        `+h+` sourceLocA = coords;
        --`+d[c-1]+`;
        `+h+` sourceLocB = coords;
        --`+d[c-2]+";";var p=["x","y","z","w","u","v"].slice(0,a),y="."+p[a-1],x=p.map((function(M){return"int "+M})),w=No("sourceLocR",a-1).concat("inIdx.r"),_=No("sourceLocG",a-1).concat("inIdx.g"),E=No("sourceLocB",a-1).concat("inIdx.b"),I=No("sourceLocA",a-1).concat("inIdx.a"),C=e==="max"?"greaterThan":"lessThan",N=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+w.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+E.join()+`),
                             getBestIndicesAChannel(`+I.join()+")));",O=`vec4(
            getAChannel(`+w.join()+`),
            hasNextCol ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow ? getAChannel(`+E.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+I.join()+") : 0.)",U=r?"":`
      float getBestIndicesAChannel(`+x.join()+`) {
        return getChannel(getBestIndicesA(`+p.join()+`),
                                          vec2(`+p.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+x.join()+`) {
        return getChannel(getA(`+p.join()+`),
                               vec2(`+p.slice(-2).join()+`));
      }
      `+U+`
      void main() {
        `+h+` coords = getOutputCoords();
        bool hasNextCol = `+d[c-1]+" < "+(u[c-1]-1)+`;
        bool hasNextRow = `+d[c-2]+" < "+(u[c-2]-1)+`;
        `+s+`
        ivec4 srcIdx = ivec4(sourceLocR`+y+", sourceLocG"+y+`,
          sourceLocB`+y+", sourceLocA"+y+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+O+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+N+`
          vec4 candidate = `+O+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+C+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},RP=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var t=n.filterHeight,e=n.filterWidth,r=n.strideHeight,i=n.strideWidth,o=n.dilationHeight,s=n.dilationWidth,a=n.effectiveFilterHeight,u=n.effectiveFilterWidth,c=a-1-n.padInfo.top,h=u-1-n.padInfo.left,d=1/(t*e);this.userCode=`
      const ivec2 pads = ivec2(`+c+", "+h+`);
      const float avgMultiplier = float(`+d+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+s+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},TP=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var t=n.filterDepth,e=n.filterHeight,r=n.filterWidth,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,u=n.dilationHeight,c=n.dilationWidth,h=n.effectiveFilterDepth,d=n.effectiveFilterHeight,v=n.effectiveFilterWidth,p=h-1-n.padInfo.front,y=d-1-n.padInfo.top,x=v-1-n.padInfo.left,w=1/(t*e*r);this.userCode=`
      const ivec3 pads = ivec3(`+p+", "+y+", "+x+`);
      const float avgMultiplier = float(`+w+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+d+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+v+`;
                wC += `+c+`) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},LP=function(n,t,e,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],pn(n,t),pn(n,e);var s="0.0";r!=null&&(pn(n,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="1.0";i!=null&&(pn(n,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+s+`;
        float scale = `+a+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},DP=function(n,t,e,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],pn(n,t),pn(n,e);var s="vec4(0.0)";r!=null&&(pn(n,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="vec4(1.0)";i!=null&&(pn(n,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = `+s+`;
        vec4 scale = `+a+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},FP="return areal * breal - aimag * bimag;",MP="return areal * bimag + aimag * breal;",_w=function(n,t,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=pn(t,e),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+n+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},d0="return a + b;",p0="return a - b;",Sw="return a * b;",U4="return (a < 0.) ? b * a : a;",Nr=function(n,t,e){this.variableNames=["A","B"],this.outputShape=pn(t,e),this.userCode=`
      float binaryOperation(float a, float b) {
        `+n+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},z4=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Nu=function(n,t,e,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=pn(t,e);var i=this.outputShape.length,o="";if(r)if(i===0||Ct(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+Kn(i)+` coords = getOutputCoords();
        `,i===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var s=No("coords",i);o+=`
            bool nextRowOutOfBounds =
              (`+s[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+s[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+n+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},OP=(function(){function n(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return n.prototype.getCustomSetupFunc=function(t,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,t),i.gl.uniform1f(r.maxLoc,e)}},n})(),BP=(function(){function n(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return n.prototype.getCustomSetupFunc=function(t,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,t),i.gl.uniform1f(r.maxLoc,e)}},n})(),jP=function(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},UP=function(n){this.outputShape=[],this.outputShape=eh(n,1),this.variableNames=n.map((function(a,u){return"T"+u}));var t=new Array(n.length-1);t[0]=n[0][1];for(var e=1;e<t.length;e++)t[e]=t[e-1]+n[e][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<t.length;e++){var i=t[e-1];r.push("else if (yC < "+t[e]+") setOutput(getT"+e+"(yR, yC-"+i+"));")}var o=t.length,s=t[t.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+s+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},zP=function(n,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=eh(n,t);var e=this.outputShape,r=e.length,i=Kn(r),o=No("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map((function(w,_){return"T"+_}));var a=new Array(n.length-1);a[0]=n[0][t];for(var u=1;u<a.length;u++)a[u]=a[u-1]+n[u][t];var c=s[t],h=s.slice(-2),d=s.join(),v="if ("+c+" < "+a[0]+`) {
        return getChannel(
            getT0(`+d+"), vec2("+h.join()+`));
        }`;for(u=1;u<a.length;u++){var p=a[u-1];v+=`
        if (`+c+" < "+a[u]+"  && "+c+" >= "+a[u-1]+`) {
          return getChannel(
            getT`+u+"("+bp(s,c,p)+`),
            vec2(`+bp(h,c,p)+`));
        }`}var y=a.length,x=a[a.length-1];v+=`
        return getChannel(
          getT`+y+"("+bp(s,c,x)+`),
          vec2(`+bp(h,c,x)+"));",this.userCode=`
      float getValue(`+s.map((function(w){return"int "+w}))+`) {
        `+v+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+e[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+e[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+e[r-2]+` &&
            `+o[r-1]+" < "+e[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function bp(n,t,e){var r=n.indexOf(t);return n.map((function(i,o){return o===r?i+" - "+e:i})).join()}var VP=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var t=n.strideHeight,e=n.strideWidth,r=n.padInfo.top,i=n.padInfo.left,o=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},WP=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var t=n.filterHeight,e=n.filterWidth,r=n.strideHeight,i=n.strideWidth,o=n.dataFormat==="channelsLast",s=t-1-n.padInfo.top,a=e-1-n.padInfo.left,u=o?1:2,c=o?2:3,h=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+h+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+c+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},qP=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var t=n.strideDepth,e=n.strideHeight,r=n.strideWidth,i=n.padInfo.front,o=n.padInfo.top,s=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yF = 0; yF < `+n.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+i+`;

            if (xF < 0 || xF >= `+n.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+n.outHeight+`; yR++) {
              int xR = wR + yR * `+e+" - "+o+`;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+n.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+s+`;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},HP=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var t=n.filterDepth,e=n.filterHeight,r=n.filterWidth,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=t-1-n.padInfo.front,u=e-1-n.padInfo.top,c=r-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+a+", "+u+", "+c+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+n.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+e+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+e+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},GP=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var t=n.strideHeight,e=n.strideWidth,r=n.padInfo.top,i=n.padInfo.left,o=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},$P=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var t=n.filterHeight,e=n.filterWidth,r=n.strideHeight,i=n.strideWidth,o=t-1-n.padInfo.top,s=e-1-n.padInfo.left,a=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+a+`; dm++) {
              int d2 = d1 * `+a+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Cw=function(n,t,e,r){t===void 0&&(t=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var i=n.padInfo.top,o=n.padInfo.left,s=n.strideHeight,a=n.strideWidth,u=n.dilationHeight,c=n.dilationWidth,h=n.filterHeight,d=n.filterWidth,v=4*Math.floor(n.inChannels/4),p=n.inChannels%4,y=n.dataFormat==="channelsLast",x=y?1:2,w=y?2:3,_=y?3:1,E="",I="";e&&(E=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,I="result = activation(result);");var C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+E+`

      const ivec2 strides = ivec2(`+s+", "+a+`);
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+_+`];

        ivec2 xRCCorner =
            ivec2(coords[`+x+"], coords["+w+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+c+`;

            if (xC < 0 || xC >= `+n.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+v+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+y+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(p===1)+`) {

              if (`+y+`) {
                dotProd +=
                    getX(batch, xR, xC, `+v+`) *
                    getW(wR, wC, `+v+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+v+`, xR, xC) *
                    getW(wR, wC, `+v+`, d2);
              }

            } else if (`+(p===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2)
              );

              if (`+y+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(p===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2),
                getW(wR, wC, `+v+` + 2, d2)
              );

              if (`+y+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1),
                  getX(batch, xR, xC, `+v+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC),
                  getX(batch, `+v+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+C+`
        `+I+`
        setOutput(result);
      }
    `},KP=function(n){this.variableNames=["x","W"],this.outputShape=n.outShape;var t=n.padInfo.front,e=n.padInfo.top,r=n.padInfo.left,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,u=n.dilationHeight,c=n.dilationWidth,h=n.filterDepth,d=n.filterHeight,v=n.filterWidth,p=4*Math.floor(n.inChannels/4),y=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+o+", "+s+`);
      const ivec3 pads = ivec3(`+t+", "+e+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+h+`; wF++) {
          int xF = xFCorner + wF * `+a+`;

          if (xF < 0 || xF >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+v+`; wC++) {
              int xC = xCCorner + wC * `+c+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+p+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(y===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+p+`) *
                  getW(wF, wR, wC, `+p+`, d2);
              } else if (`+(y===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(y===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1),
                  getX(batch, xF, xR, xC, `+p+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2),
                  getW(wF, wR, wC, `+p+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Aw=function(n,t,e,r){t===void 0&&(t=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var i=n.inHeight,o=n.inWidth,s=n.padInfo.top,a=n.padInfo.left,u=n.strideHeight,c=n.strideWidth,h=n.dilationHeight,d=n.dilationWidth,v=n.filterHeight,p=n.filterWidth,y=n.outChannels/n.inChannels,x="",w="";e&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,w="result = activation(result);");var _=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+u+", "+c+`);
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+y+`;
        int q = d2 - d1 * `+y+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+v+`; wR++) {
          int xR = xRCorner + wR * `+h+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+_+`
        `+w+`
        setOutput(result);
      }
    `},kw=function(n,t,e,r){t===void 0&&(t=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;for(var i=n.inHeight,o=n.inWidth,s=n.padInfo.top,a=n.padInfo.left,u=n.strideHeight,c=n.strideWidth,h=n.dilationHeight,d=n.dilationWidth,v=n.filterHeight,p=n.filterWidth,y=p,x="int xR; int xC; int xCOffset;",w=0;w<v;w++)for(var _=0;_<p;_++)x+=`
          vec4 xTexelR`+w+"C"+2*_+` = vec4(0.);
          vec4 wR`+w+"C"+_+` = vec4(0.);
          vec4 xR`+w+"C"+_+" = vec4(0.);";for(w=0;w<v;w++)for(var E=0;E<y;E++){if(x+=`
          xR = xRCorner + `+w*h+`;
          xC = xCCorner + `+(_=2*E)*d+`;
        `,c===1){if(_<p&&(x+=a%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+w+"C"+_+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+w+"C"+_+" = vec4(previous.zw, xTexelR"+w+"C"+_+`.xy);
                } else {
                  xR`+w+"C"+_+" = vec4(0, 0, xTexelR"+w+"C"+_+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xR`+w+"C"+_+" = xTexelR"+w+"C"+_+`;
              `,_+1<p)){var I=a%2==0?o4(d):d;d%2==0&&a%2==1||d%2!=0&&a%2!=1?(x+=`
                  xCOffset = xC + `+a%2+" + "+I+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,d>1&&(x+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+w+"C"+_+` = vec4(0.);
                    }
                  `),x+=`
                  xR`+w+"C"+(_+1)+` = vec4(
                    xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.xy);
                `):x+=`
                  xCOffset = xC + `+I+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+w+"C"+(_+1)+" = xTexelR"+w+"C"+(_+2)+`;
                `}}else _<p&&(x+=`
              if(xR >= 0 && xR < `+i+`) {
            `,a%2==1?(x+=`
                xCOffset = xC + 1 - `+c+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+w+"C"+(_+2)+` = vec4(0.);
                }

                xR`+w+"C"+_+` = vec4(
                  xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.zw);
              `,_+1<p&&(x+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+c+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+w+"C"+(_+1)+" = vec4(xTexelR"+w+"C"+(_+2)+`.xy, final.xy);
                `)):(x+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + `+c+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+(_+2)+` = vec4(0.);
                }

                xR`+w+"C"+_+` = vec4(
                  xTexelR`+w+"C"+_+".xy, xTexelR"+w+"C"+(_+2)+`.xy);
              `,_+1<p&&(x+=`
                  xR`+w+"C"+(_+1)+` = vec4(
                    xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.zw);
                `)),x+="}");_<p&&(x+=`
            vec4 wTexelR`+w+"C"+_+" = getW("+w+", "+_+`, d1, q);
            wR`+w+"C"+_+" = vec4(wTexelR"+w+"C"+_+".xz, wTexelR"+w+"C"+_+`.xz);
          `,_+1<p&&(x+=`
              vec4 wTexelR`+w+"C"+(_+1)+" = getW("+w+", "+(_+1)+`, d1, q);
              wR`+w+"C"+(_+1)+` =
                vec4(wTexelR`+w+"C"+(_+1)+".xz, wTexelR"+w+"C"+(_+1)+".xz);"))}for(w=0;w<v;w++)for(_=0;_<p;_++)x+="dotProd += xR"+w+"C"+_+" * wR"+w+"C"+_+";";var C="",N="";e&&(C=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`vec4 activation(vec4 x) {
          `+e+`
        }`,N="result = activation(result);");var O=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+C+`

      const ivec2 strides = ivec2(`+u+", "+c+`);
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+x+`

        vec4 result = dotProd;
        `+O+`
        `+N+`
        setOutput(result);
      }
    `},XP=function(n,t,e,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=n[0],s=n[1],a=n[2],u=n[3],c=t[0],h=e[0],d=e[1];this.outputShape=[c,h,d,u];var v=r==="bilinear"?1:0,p=[s-1+".0",a-1+".0"],y=p[0],x=p[1],w=h>1?[""+(s-1)/(h-1),"(y2-y1) * height_ratio","y1*"+y+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+y],_=w[0],E=w[1],I=w[2],C=d>1?[""+(a-1)/(d-1),"(x2-x1) * width_ratio","x1*"+x+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+x],N=C[0],O=C[1],U=C[2];this.userCode=`
      const float height_ratio = float(`+_+`);
      const float width_ratio = float(`+N+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+E+`;
        float width_scale = `+O+`;

        float in_y = `+I+`;
        if( in_y < 0.0 || in_y > `+y+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+U+`;
        if( in_x < 0.0 || in_x > `+x+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+v+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},YP=function(n,t,e){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=n[n.length-1],o=e?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(e?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Kn(r)+` coords = getOutputCoords();
        int end = `+Ew(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+Ew(r,"coords")+` = idx;
          val += getX(`+(function(s,a){if(s===1)return""+a;if(s===2)return a+".x, "+a+".y";if(s===3)return a+".x, "+a+".y, "+a+".z";if(s===4)return a+".x, "+a+".y, "+a+".z, "+a+".w";throw Error("Cumulative sum for rank "+s+" is not yet supported")})(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function Ew(n,t){if(n===1)return""+t;if(n===2)return t+".y";if(n===3)return t+".z";if(n===4)return t+".w";throw Error("Cumulative sum for rank "+n+" is not yet supported")}var JP=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=sd.DENSE;var t=Xh(n),e=Gi();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ac(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+e.output+` = result;
      }
    `},QP=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=sd.DENSE;var t=Xh(n),e=Gi();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ac(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+e.output+` = result;
      }
    `},ZP=(function(){function n(t,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+e+`;
      int offset_h = imod(h, `+e+`);
      int in_w = w / `+e+`;
      int offset_w = imod(w, `+e+`);
      int offset_d = (offset_h * `+e+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return n.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},n.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},n.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},n.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},n.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},n})(),eR=function(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},tR=function(n){this.variableNames=["A"],this.outTexUsage=Jo.DOWNLOAD;var t=Gi();this.outputShape=n,this.userCode=`
      `+B4+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},nR=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Jo.DOWNLOAD;var t=Gi();this.outputShape=n,this.userCode=`
      `+B4+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},rR=function(n,t,e){e===void 0&&(e=!1),this.variableNames=["A"];var r=Gi(),i=t[0],o=t[1];this.outputShape=n;var s="result";e&&(s="floor(result * 255. + 0.5)"),this.userCode=`
      `+U1(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+s+`, 0., 0., 0.);
      }
    `},iR=function(n,t,e){e===void 0&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Gi(),i=t[0],o=t[1];this.outputShape=n;var s="",a="result";e&&(a="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var h=2*u+c;s+=`
          localCoords = coords;
          if(localCoords[2] + `+c+" < "+n[2]+`) {
            localCoords[2] += `+c+`;
            if(localCoords[1] + `+u+" < "+n[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+h+`] = values[0];
              } else if(offset == 1) {
                result[`+h+`] = values[1];
              } else if(offset == 2) {
                result[`+h+`] = values[2];
              } else {
                result[`+h+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+U1(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+s+`

        `+r.output+" = "+a+`;
      }
    `},oR="return real * expR - imag * expI;",aR="return real * expI + imag * expR;",Nw=function(n,t,e){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var i=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=e?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+n+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},sR=(function(){function n(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return n.prototype.getCustomSetupFunc=function(t){var e=this;return function(r,i){e.valueLoc==null&&(e.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(e.valueLoc,t)}},n})(),uR=function(n,t,e){this.variableNames=["A","indices"];var r=n.slice();r[e]=t,this.outputShape=r,this.rank=r.length;var i=Kn(this.rank),o=(function(s,a){var u=s.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w"],h=[],d=0;d<s.length;d++)d===a?h.push("int(getIndices("+c[d]+"))"):h.push(""+c[d]);return h.join()})(n,e);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},lR=function(n,t,e){this.sliceDim=n,this.strides=t,this.variableNames=["x","indices"],this.outputShape=e;var r=Kn(t.length),i=Kn(e.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function cR(n,t){var e=Gi();return o6(n,t,e.version+`
    precision highp float;
    `+e.attribute+` vec3 clipSpacePos;
    `+e.attribute+` vec2 uv;
    `+e.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function fR(n,t){return c6(n,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function hR(n,t){return f6(n,t,new Uint16Array([0,1,2,2,1,3]))}function Sd(n,t,e,r,i,o,s){d6(e,r);var a=h6(n,t),u=n.TEXTURE_2D;return kt(n,t,(function(){return n.bindTexture(u,a)})),kt(n,t,(function(){return n.texParameteri(u,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)})),kt(n,t,(function(){return n.texParameteri(u,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)})),kt(n,t,(function(){return n.texParameteri(u,n.TEXTURE_MIN_FILTER,n.NEAREST)})),kt(n,t,(function(){return n.texParameteri(u,n.TEXTURE_MAG_FILTER,n.NEAREST)})),kt(n,t,(function(){return n.texImage2D(u,0,i,e,r,0,o,s,null)})),kt(n,t,(function(){return n.bindTexture(n.TEXTURE_2D,null)})),a}function dR(n,t,e,r,i){var o=Fv(e,r);return Sd(n,t,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,n.FLOAT)}function pR(n,t,e,r,i){var o=Fv(e,r);return Sd(n,t,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function vR(n,t,e,r,i){var o=Fv(e,r);return Sd(n,t,o[0],o[1],n.RGBA,n.RGBA,n.UNSIGNED_BYTE)}function mR(n,t,e,r,i){var o=_d(e,r);return Sd(n,t,o[0],o[1],i.internalFormatPackedFloat,n.RGBA,n.FLOAT)}function gR(n,t,e,r,i){var o=_d(e,r);return Sd(n,t,o[0],o[1],i.internalFormatPackedHalfFloat,n.RGBA,i.textureTypeHalfFloat)}function yR(n,t,e,r){return kt(n,t,(function(){return n.bindBuffer(n.ARRAY_BUFFER,r)})),vw(n,t,e,"clipSpacePos",r,3,20,0)&&vw(n,t,e,"uv",r,2,20,12)}function xR(n,t,e,r,i,o,s){var a,u,c;kt(n,t,(function(){return n.bindTexture(n.TEXTURE_2D,e)})),o instanceof Uint8Array?(a=new Uint8Array(r*i*4),u=n.UNSIGNED_BYTE,c=n.RGBA):(a=new Float32Array(r*i*4),u=n.FLOAT,c=s.internalFormatPackedFloat),a.set(o),kt(n,t,(function(){return n.texImage2D(n.TEXTURE_2D,0,c,r,i,0,n.RGBA,u,a)})),kt(n,t,(function(){return n.bindTexture(n.TEXTURE_2D,null)}))}function wR(n,t,e,r){kt(n,t,(function(){return n.bindTexture(n.TEXTURE_2D,e)})),r.data instanceof Uint8Array?kt(n,t,(function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,r.data)})):kt(n,t,(function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)})),kt(n,t,(function(){return n.bindTexture(n.TEXTURE_2D,null)}))}function bR(n,t,e,r,i){var o=n.createBuffer();kt(n,t,(function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,o)}));var s=16*e*r;return kt(n,t,(function(){return n.bufferData(n.PIXEL_PACK_BUFFER,s,n.STREAM_READ)})),kt(n,t,(function(){return n.readPixels(0,0,r,e,n.RGBA,n.FLOAT,0)})),kt(n,t,(function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,null)})),o}function _R(n,t,e){var r=n,i=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function SR(n,t,e,r,i){var o=Fv(e,r),s=o[0],a=o[1],u=new Uint8Array(e*r*4);return kt(n,t,(function(){return n.readPixels(0,0,s,a,i.downloadTextureFormat,n.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function CR(n,t,e,r,i,o,s,a){var u=n,c=new Float32Array((function(h,d){var v=_d(h,d);return v[0]*v[1]*4})(o,s));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function AR(n,t,e,r){var i=new Float32Array(e*r*4);return kt(n,t,(function(){return n.readPixels(0,0,r,e,n.RGBA,n.FLOAT,i)})),i}var kR=(function(){function n(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=Ve().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,e6(e,t)):this.gl=zs(e);var r="WEBGL_color_buffer_float";if(Ve().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=gp(this.gl,this.debug,"OES_texture_float"),ka(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=gp(this.gl,this.debug,"OES_texture_half_float");else if(Ve().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ka(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=gp(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Ve().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ka(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!ka(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=fR(this.gl,this.debug),this.indexBuffer=hR(this.gl,this.debug),this.framebuffer=p6(this.gl,this.debug),this.textureConfig=P1(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(n.prototype,"debug",{get:function(){return Ve().getBool("DEBUG")},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;kt(e,this.debug,(function(){return e.finish()})),kt(e,this.debug,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),kt(e,this.debug,(function(){return e.deleteFramebuffer(t.framebuffer)})),kt(e,this.debug,(function(){return e.bindBuffer(e.ARRAY_BUFFER,null)})),kt(e,this.debug,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)})),kt(e,this.debug,(function(){return e.deleteBuffer(t.indexBuffer)})),this.disposed=!0}},n.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),dR(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),pR(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),vR(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),wR(this.gl,this.debug,t,e)},n.prototype.uploadDenseMatrixToTexture=function(t,e,r,i){this.throwIfDisposed(),xR(this.gl,this.debug,t,e,r,i,this.textureConfig)},n.prototype.createFloat16PackedMatrixTexture=function(t,e){return this.throwIfDisposed(),gR(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),mR(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(mw(this.gl,this.debug,this.framebuffer),this.outputTexture=null),kt(this.gl,this.debug,(function(){return e.gl.deleteTexture(t)}))},n.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,r){var i=this;return this.downloadMatrixDriver(t,(function(){return SR(i.gl,i.debug,e,r,i.textureConfig)}))},n.prototype.downloadPackedMatrixFromBuffer=function(t,e,r,i,o,s){return CR(this.gl,t,0,0,0,o,s,this.textureConfig)},n.prototype.downloadFloat32MatrixFromBuffer=function(t,e){return _R(this.gl,t,e)},n.prototype.createBufferFromTexture=function(t,e,r){this.bindTextureToFrameBuffer(t);var i=bR(this.gl,this.debug,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},n.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},n.prototype.createFence=function(t){var e,r,i=this;if(Ve().getBool("WEBGL_FENCE_API_ENABLED")){var o=t,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var a=o.clientWaitSync(s,0,0);return a===o.ALREADY_SIGNALED||a===o.CONDITION_SATISFIED},e=s}else Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(e,Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:e,isFencePassed:r}},n.prototype.downloadMatrixFromPackedTexture=function(t,e,r){var i=this;return this.downloadMatrixDriver(t,(function(){return AR(i.gl,i.debug,e,r)}))},n.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,r=a6(e,this.debug,t),i=cR(e,this.debug),o=u6(e,this.debug);return kt(e,this.debug,(function(){return e.attachShader(o,i)})),kt(e,this.debug,(function(){return e.attachShader(o,r)})),l6(e,this.debug,o),this.debug&&l0(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=yR(e,this.debug,this.program,this.vertexBuffer)),o},n.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&kt(this.gl,this.debug,(function(){return e.gl.deleteProgram(t)}))},n.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&l0(this.gl,this.debug,this.program),kt(this.gl,this.debug,(function(){return e.gl.useProgram(t)}))},n.prototype.getUniformLocation=function(t,e,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?m6(this.gl,this.debug,t,e):g6(this.gl,t,e)},n.prototype.getAttributeLocation=function(t,e){var r=this;return this.throwIfDisposed(),kt(this.gl,this.debug,(function(){return r.gl.getAttribLocation(t,e)}))},n.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},n.prototype.setInputMatrixTexture=function(t,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),y6(this.gl,this.debug,this.program,t,e,r)},n.prototype.setOutputMatrixTexture=function(t,e,r){this.setOutputMatrixTextureDriver(t,r,e)},n.prototype.setOutputPackedMatrixTexture=function(t,e,r){this.throwIfDisposed();var i=_d(e,r),o=i[0],s=i[1];this.setOutputMatrixTextureDriver(t,o,s)},n.prototype.setOutputMatrixWriteRegion=function(t,e,r,i){this.setOutputMatrixWriteRegionDriver(r,t,i,e)},n.prototype.setOutputPackedMatrixWriteRegion=function(t,e,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},n.prototype.debugValidate=function(){this.program!=null&&l0(this.gl,this.debug,this.program),yp(this.gl)},n.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),kt(t,this.debug,(function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}))},n.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),kt(this.gl,this.debug,(function(){return t.gl.finish()}))},n.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=gp(this.gl,this.debug,Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},n.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},n.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},n.prototype.beginQuery=function(){if(Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},n.prototype.endQuery=function(){if(Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT)}},n.prototype.waitForQueryAndGetTime=function(t){return xt(this,void 0,void 0,(function(){var e=this;return wt(this,(function(r){switch(r.label){case 0:return[4,lw((function(){return e.disposed||e.isQueryAvailable(t,Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return r.sent(),[2,this.getQueryTime(t,Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},n.prototype.getQueryTime=function(t,e){if(e===0)return null;if(e===2){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(t,i.QUERY_RESULT_EXT)/1e6},n.prototype.isQueryAvailable=function(t,e){if(e===0)return!0;if(e===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},n.prototype.pollFence=function(t){var e=this;return new Promise((function(r){e.addItemToPoll((function(){return t.isFencePassed()}),(function(){return r()}))}))},n.prototype.pollItems=function(){for(var t=(function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1})(this.itemsToPoll.map((function(r){return r.isDoneFn}))),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},n.prototype.addItemToPoll=function(t,e){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||lw((function(){return r.pollItems(),r.itemsToPoll.length===0}))},n.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),c0(this.gl,this.debug,t,this.framebuffer),this.debug&&yp(this.gl)},n.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(c0(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&yp(this.gl)):mw(this.gl,this.debug,this.framebuffer)},n.prototype.downloadMatrixDriver=function(t,e){this.bindTextureToFrameBuffer(t);var r=e();return this.unbindTextureToFrameBuffer(),r},n.prototype.setOutputMatrixTextureDriver=function(t,e,r){this.throwIfDisposed();var i=this.gl;c0(i,this.debug,t,this.framebuffer),this.debug&&yp(i),this.outputTexture=t,kt(i,this.debug,(function(){return i.viewport(0,0,e,r)})),kt(i,this.debug,(function(){return i.scissor(0,0,e,r)}))},n.prototype.setOutputMatrixWriteRegionDriver=function(t,e,r,i){var o=this;this.throwIfDisposed(),kt(this.gl,this.debug,(function(){return o.gl.scissor(t,e,r,i)}))},n.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},n.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},n})();function Iw(n,t){if(n.length!==t.length)throw Error("Binary was compiled with "+n.length+" inputs, but was executed with "+t.length+" inputs");n.forEach((function(e,r){var i=e.logicalShape,o=t[r],s=o.shape;if(!mi(i,s))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+s+" must match");if(!e.isUniform||!o.isUniform){var a=e.texShape,u=o.isUniform?null:o.texData.texShape;if(!mi(a,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+u+" must match")}}))}var ER=function(n,t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var r=e.filterWidth,i=e.inChannels,o=e.strideWidth,s=e.strideHeight,a=e.padInfo,u=e.outWidth,c=e.dilationWidth,h=e.dilationHeight,d=e.dataFormat,v=a.left,p=a.top,y=i*r,x=Gi(),w=d==="channelsLast",_=w?0:1,E=w?1:2,I="",C=0;C<=1;C++)for(var N=0;N<=1;N++)I+=`
          blockIndex = rc.y + `+N+`;
          pos = rc.x + `+C+`;

          if(blockIndex < `+n[1]+" && pos < "+n[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+s+" - "+p+`;
            d0 = offsetY + `+h+" * (pos / "+y+`);

            if(d0 < `+t[_]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+o+". - "+v+`.);
              d1 = offsetX + `+c+" * (int(mod(float(pos), "+y+".) / "+i+`.));

              if(d1 < `+t[E]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+w+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*C+N)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*C+N)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+I+`

        `+x.output+` = result;
      }
    `},NR=function(n,t,e,r,i){this.variableNames=["x"],this.outputShape=[];var o,s=t,a=n[3]-1;this.outputShape=n;var u="float("+e+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+s+"; j <= "+s+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+a+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},IR=function(n,t,e,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=t,this.bias=e,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+e+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},PR=function(n,t,e,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=t,a=n[3]-1;this.outputShape=n;var u="float("+e+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+s+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+s+"; j <= "+s+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+a+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},RR=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var t=n.strideHeight,e=n.strideWidth,r=n.dilationHeight,i=n.effectiveFilterHeight,o=n.effectiveFilterWidth,s=i-1-n.padInfo.top,a=o-1-n.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+e+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},TR=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var t=n.strideDepth,e=n.strideHeight,r=n.strideWidth,i=n.dilationDepth,o=n.dilationHeight,s=n.dilationWidth,a=n.effectiveFilterDepth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,h=a-1-n.padInfo.front,d=u-1-n.padInfo.top,v=c-1-n.padInfo.left,p=a*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+d+", "+v+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+a+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+e+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+c+`;
                wC += `+s+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+p+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+c+` +
                  wR * `+c+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},v0=function(n,t,e,r,i,o,s){e===void 0&&(e=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=null),s===void 0&&(s=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var a=e?n[1]:n[2],u=Math.ceil(a/2),c=e?"i * 2, rc.y":"rc.y, i * 2",h=r?"rc.z, i * 2":"i * 2, rc.z",d=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",y="";o&&(p=s?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,y="result = activation(result);");var x=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+c+`);
          vec4 b = getMatrixB(rc.x, `+h+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+d[0]+" * "+v[0]+`);
          result += (`+d[1]+" * "+v[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+x+`

        `+y+`

        setOutput(result);
      }
    `},LR=(function(){function n(t,e,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(e-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(e-1)+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(t){var e=this;return function(r,i){e.seedLoc==null&&(e.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(e.seedLoc,t)}},n})(),DR=function(n,t,e,r){this.variableNames=["indices"],this.outputShape=[n,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+e+`),
                      float(index == coords.y)));
      }
    `},FR=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;var t=n.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var e=No("rc",t),r=Kn(t),i=(function(a,u,c){if(a===1)return"rc > "+u[0];for(var h="",d=a-2;d<a;d++)h+=c[d]+" >= "+u[d],d<a-1&&(h+="||");return h})(t,n,e),o=(function(a,u,c,h){if(a===1)return"";var d=h.slice(-2);return`
    int r = `+d[0]+`;
    int c = `+d[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+c+`;
  `})(t,n[n.length-1],n[n.length-2],e),s=(function(a,u){var c=a.length,h=(function(d,v){for(var p=[],y=0;y<=1;y++)for(var x=0;x<=1;x++){for(var w=(y===0?"r":"rp1")+", "+(x===0?"c":"cp1"),_=2;_<d;_++)w=v[v.length-1-_]+","+w;p.push(w)}return p})(c,u);return c===1?`getA(rc),
            rc + 1 >= `+a[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+h[0]+`),
          cEdge ? 0. : getA(`+h[1]+`),
          rEdge ? 0. : getA(`+h[2]+`),
          rEdge || cEdge ? 0. : getA(`+h[3]+")"})(n,e);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+s+`));
          }
        }
      `}},MR=function(n,t,e){this.variableNames=["x"],this.outputShape=t.map((function(u,c){return u[0]+n[c]+u[1]}));var r=n.length,i=Kn(r),o=t.map((function(u){return u[0]})).join(","),s=t.map((function(u,c){return u[0]+n[c]})).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+o+`);
      `+i+" end = "+i+"("+s+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+e+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+a+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+s+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+e+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},OR=function(n,t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(w,_){return w[0]+n[_]+w[1]}));for(var r=n.length,i=Kn(r),o=t.map((function(w){return w[0]})).join(","),s=t.map((function(w,_){return w[0]+n[_]})).join(","),a=No("rc",r),u=No("source",r),c=a[r-1]+" < "+this.outputShape[r-1],h=r===1?"source":"vec2("+u.slice(-2).join()+")",d=[i+" rc = outputLoc;",a[r-1]+` += 1;
       if(`+c+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+a[r-2]+` += 1;
       if(`+a[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+a[r-1]+` += 1;
         if(`+c+") {"],v=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",y=0,x=r===1?2:4;y<x;y++)p+=`
        `+d[y]+`
        if (`+v+`) {
          result[`+y+"] = float("+e+`);
        } else {
          `+i+` source = rc - start;
          result[`+y+"] = getChannel(getX("+u.join()+"), "+h+`);
        }
      `;p+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+o+`);
      const `+i+" end = "+i+"("+s+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+p+`
        setOutput(result);
      }
    `},m0=function(n,t,e){if(this.variableNames=["x"],t==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,i=n.strideHeight,o=n.strideWidth,s=n.dilationHeight,a=n.dilationWidth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,h=n.padInfo.top,d=n.padInfo.left;this.outputShape=n.outShape;var v=t==="avg",p="0.0";if(v||(p="-1.0 / 1e-20"),e)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+o+`);
        const ivec2 pads = ivec2(`+h+", "+d+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+s+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+c+`;
                wC += `+a+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+c+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(y="avgValue / count");var x=4*Math.floor(r/4),w=r%4,_=`
      if (`+v+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+o+`);
      const ivec2 pads = ivec2(`+h+", "+d+`);
      const float initializationValue = `+p+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+p+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+s+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+x+`; wC += 4) {
            int xC = xCCorner + wC * `+a+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              getValue(batch, xR, xC + 3 * `+a+`, d)
            );

            `+_+`
          }

          int xC = xCCorner + `+x+`;
          if (`+(w===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(w===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(w===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              initializationValue
            );

            `+_+`
          }
        }
        setOutput(`+y+`);
      }
    `}},g0=function(n,t,e){if(this.variableNames=["x"],t==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,u=n.dilationHeight,c=n.dilationWidth,h=n.effectiveFilterDepth,d=n.effectiveFilterHeight,v=n.effectiveFilterWidth,p=n.padInfo.front,y=n.padInfo.top,x=n.padInfo.left;this.outputShape=n.outShape;var w=t==="avg",_="0.0";if(w||(_="-1.0 / 1e-20"),e)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+o+", "+s+`);
        const ivec3 pads = ivec3(`+p+", "+y+", "+x+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+h+`;
              wD += `+a+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+n.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+d+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+v+`;
                  wC += `+c+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+d+" * "+v+` +
                      wR * `+v+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var E=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(E="avgValue / count");var I=4*Math.floor(r/4),C=r%4,N=`
      if (`+w+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+o+", "+s+`);
      const ivec3 pads = ivec3(`+p+", "+y+", "+x+`);
      const float initializationValue = `+_+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+_+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+a+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+I+`; wC += 4) {
              int xC = xCCorner + wC * `+c+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+c+`, ch)
              );

              `+N+`
            }

            int xC = xCCorner + `+I+`;
            if (`+(C===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+N+`
            } else if (`+(C===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                initializationValue,
                initializationValue
              );

              `+N+`
            } else if (`+(C===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                initializationValue
              );

              `+N+`
            }
          }
          setOutput(`+E+`);
        }
      }
    `}},BR=function(n,t){this.variableNames=["x"];var e=n.windowSize,r=n.batchSize,i=n.inSize,o=Math.ceil(i/e);this.outputShape=[r,o];var s="0.0",a="";t==="prod"?s="1.0":t==="min"?(s="1.0 / 1e-20",a="min"):t==="max"&&(s="-1.0 / 1e-20",a="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?u="sumValue":t==="prod"?u="prodValue":t==="all"?u="allValue":t==="any"&&(u="anyValue");var c=4*Math.floor(e/4),h=e%4,d=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+a+`(values, minMaxValue);
      }
    `,v="vec4";t==="all"?(s="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,v="bvec4"):t==="any"&&(s="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,v="bvec4");var p="";i%e>0&&(p=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+s+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+p+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        vec4 minMaxValue = vec4(`+s+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+c+`; i += 4) {
          int inIdx = inOffset + i;
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+d+`
        }

        int inIdx = inOffset + `+c+`;
        if (`+(h===1)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(h===2)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(h===3)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+d+`
        }
        setOutput(`+u+`);
      }
    `},jR=function(n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var e="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),e+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Ac(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+U1(n)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+n[1]+`;
        int cols = `+n[2]+`;

        `+e+`

        setOutput(result);
      }
    `},UR=function(n,t,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],o=r[2],s=n.shape,a=s[1],u=s[2],c=[e&&a>1?i-1:i,e&&u>1?o-1:o],h=[e&&a>1?a-1:a,e&&u>1?u-1:u],d=c[0]/h[0],v=c[1]/h[1],p=1/d,y=1/v,x=2*Math.ceil(p)+2,w=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},zR=function(n,t,e,r){this.variableNames=["A"],this.outputShape=[];var i=n[0],o=n[1],s=n[2],a=n[3];this.outputShape=[i,t,e,a];var u=[r&&t>1?o-1:o,r&&e>1?s-1:s],c=[r&&t>1?t-1:t,r&&e>1?e-1:e];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},VR=function(n,t,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=n[0],o=n[1],s=n[2],a=n[3];this.outputShape=[i,t,e,a];var u=[r&&t>1?o-1:o,r&&e>1?s-1:s],c=[r&&t>1?t-1:t,r&&e>1?e-1:e];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`,
          `+u[1]/c[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+s+`.0,
                                     `+s+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(a-1)+`;
        bool hasNextRow = coords.z < `+(e-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},WR=function(n,t,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],o=r[2],s=n.shape,a=s[1],u=s[2],c=[e&&a>1?i-1:i,e&&u>1?o-1:o],h=[e&&a>1?a-1:a,e&&u>1?u-1:u],d=c[0]/h[0],v=c[1]/h[1],p=1/d,y=1/v,x=2*Math.ceil(p)+2,w=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+c[0]+`) *
                (float(dyR) / float(`+h[0]+`));

            float sourceFracCol =
                float(`+c[1]+`) *
                  (float(dyC) / float(`+h[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+e+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+e+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},qR=function(n,t,e,r){this.variableNames=["A"],this.outputShape=[];var i=n[0],o=n[1],s=n[2],a=n[3];this.outputShape=[i,t,e,a];var u=[r&&t>1?o-1:o,r&&e>1?s-1:s],c=[r&&t>1?t-1:t,r&&e>1?e-1:e],h=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+h+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},HR=function(n,t){this.variableNames=["x"];var e=n.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=n,e!==1){var r=n.map((function(o,s){return(function(a){return t.indexOf(a)!==-1&&n[a]!==1?n[a]+" - coords["+a+"] - 1":"coords["+a+"]"})(s)})).join(","),i=Kn(e);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+n[0]+` - coord - 1));
        }
      `},GR=function(n,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=n.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=n;var r=No("rc",e),i=r[e-1]+" + 1 < "+this.outputShape[e-1],o=r[e-2]+" + 1 < "+this.outputShape[e-2],s=Kn(e);function a(u){var c=n.map((function(h,d){return(function(v,p){return t.indexOf(v)!==-1&&n[v]!==1?n[v]+" - "+p[v]+" - 1":""+p[v]})(d,u)}));return"getChannel(getX("+c.join(",")+"), vec2("+c.slice(-2).join(",")+"))"}this.userCode=e===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+n[0]+` - rc - 1),
            `+n[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+n[0]+` - (rc  + 1) - 1),
                `+n[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+s+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+(function(u){return a(u)})(r.slice())+`;
          if(`+i+`){
            result.g = `+(function(u){return u[e-1]="("+u[e-1]+" + 1)",a(u)})(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+(function(u){return u[e-2]="("+u[e-2]+" + 1)",a(u)})(r.slice())+`;
            if(`+i+`) {
              result.a = `+(function(u){return u[e-1]="("+u[e-1]+" + 1)",u[e-2]="("+u[e-2]+" + 1)",a(u)})(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},Pw=function(n,t,e,r,i,o,s){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var a=Kn(i.length),u=Kn(o.length),c="";e===1?c="i":e===2&&(c="i, j");var h="getIndices("+c+")",d="";r===1?d="i":r===2&&(d="i, coords[1]");var v="getUpdates("+d+")",p=t>1?"strides[j]":"strides";this.userCode=`
        `+a+" strides = "+a+"("+i+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+n+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+h+`);
              flattenedIndex += index * `+p+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+v+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},$R=function(n,t){this.variableNames=["x","segmentIds"];var e=n.windowSize,r=n.batchSize,i=n.inSize,o=n.numSegments,s=o*Math.ceil(i/e);this.outputShape=[r,s];var a=4*Math.floor(e/4),u=e%4,c=`
        sumValue += dot(values, segFilter);
    `,h="";i%e>0&&(h=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var d="";i%e>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+d+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+e+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+a+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+c+`
        }

        int inIdx = inOffset + `+a+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+c+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+c+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+c+`
        }
        setOutput(sumValue);
      }
    `},KR=function(n,t,e){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,e>4)throw Error("Where for rank "+e+" is not yet supported");if(e===1)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[],u=0;u<t.length;u++)a.push(""+o[u]),u<n&&s.push(""+o[u]);r=s.join(),i=a.join()}var c=Kn(e);this.userCode=`
      void main() {
        `+c+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},XR=(function(){function n(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e,r=Kn(this.rank),i="uniform int start["+this.rank+"];",o=(function(s){if(s===1)return"sourceLoc";if(s<=6)return y0.slice(0,s).map((function(a){return"sourceLoc."+a})).join(",");throw Error("Slicing for rank "+s+" is not yet supported")})(this.rank);e=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+t.map((function(s,a){return"sourceLoc."+y0[a]+" = start["+a+"] + coords."+y0[a]+";"})).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+e+`
        setOutput(getSource(`+o+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,t)}},n})(),y0=["x","y","z","w","u","v"],YR=(function(){function n(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var e=Kn(this.rank),r=No("coords",this.rank),i=No("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",s="getChannel(getSource("+i.join()+"), "+o+")",a=`
      result.x = `+s+`;
      if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+s+`;
        --`+i[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+s+`;
        if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+s+`;
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            `+e+"("+t.map((function(h,d){return"start["+d+"]"})).join()+");":t.map((function(h,d){return i[d]+" = "+r[d]+" + start["+d+"];"})).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+e+` coords = getOutputCoords();
        `+e+` sourceLoc;
        `+c+`
        vec4 result = vec4(0.);
        `+a+`
        `+u+`
        setOutput(result);
      }
    `}return n.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,t)}},n})(),JR=function(n,t,e){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=Kn(e.length),o=Kn(e.length),s="";if(r===1)s="coords * strides + begin";else{var a=0;s=e.map((function(u,c){return a++,e.length===1?"coords * strides["+c+"] + begin["+c+"]":"coords["+(a-1)+"] * strides["+c+"] + begin["+c+"]"})).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+n+`);
      `+i+" strides = "+i+"("+t+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+s+`));
      }
    `},QR=(function(){function n(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return n.prototype.acquireTexture=function(t,e,r){var i,o=Rw(e,r),s=Tw(t,o,r);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]),this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[s].shift();return this.usedTextures[s].push(a),a}return this.numUsedTextures++,this.log(),o===Yo.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===Yo.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===Yo.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===Yo.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===Yo.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[s].push(i),i},n.prototype.releaseTexture=function(t,e,r,i){if(this.freeTextures!=null){var o=Tw(e,Rw(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(t),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[o],a=s.indexOf(t);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(a,1),this.log()}},n.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},n.prototype.getNumUsedTextures=function(){return this.numUsedTextures},n.prototype.getNumFreeTextures=function(){return this.numFreeTextures},n.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var e in this.freeTextures)this.freeTextures[e].forEach((function(r){t.gpgpu.deleteMatrixTexture(r)}));for(var e in this.usedTextures)this.usedTextures[e].forEach((function(i){t.gpgpu.deleteMatrixTexture(i)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},n})();function Rw(n,t){if(n===Jo.UPLOAD)return Yo.PACKED_2X2_FLOAT32;if(n===Jo.RENDER||n==null)return(function(e){return Ve().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Yo.PACKED_2X2_FLOAT32:Yo.UNPACKED_FLOAT32:e?Yo.PACKED_2X2_FLOAT16:Yo.UNPACKED_FLOAT16})(t);if(n===Jo.DOWNLOAD||n===Jo.PIXELS)return Yo.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+n)}function Tw(n,t,e){return n[0]+"_"+n[1]+"_"+t+"_"+e}var ZR=function(n,t){this.variableNames=["A"];for(var e=new Array(n.length),r=0;r<e.length;r++)e[r]=n[r]*t[r];this.outputShape=e,this.rank=e.length;var i=Kn(this.rank),o=(function(s){var a=s.length;if(a>5)throw Error("Tile for rank "+a+" is not yet supported");if(a===1)return"imod(resRC, "+s[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],c=[],h=0;h<s.length;h++)c.push("imod("+u[h]+", "+s[h]+")");return c.join()})(n);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},eT=function(n,t){this.variableNames=["A"];for(var e=new Array(n.length),r=0;r<e.length;r++)e[r]=n[t[r]];this.outputShape=e,this.rank=e.length;var i=Kn(this.rank),o=(function(s){var a=s.length;if(a>6)throw Error("Transpose for rank "+a+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],c=new Array(a),h=0;h<s.length;h++)c[s[h]]=u[h];return c.join()})(t);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},tT=function(n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(n.length),r=0;r<e.length;r++)e[r]=n[t[r]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Kn(this.rank),o=O4("rc",this.rank),s=new Array(this.rank);for(r=0;r<t.length;r++)s[t[r]]=o[r];var a="vec2("+s.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+e[this.rank-1],c="getChannel(getA("+s.join()+"), "+a+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+c+`;
      if(`+u+`) {
        result[1] = `+c+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+e[this.rank-2]+`) {
        result[2] = `+c+`;
        if(`+u+`) {
          result[3] = `+c+`;
        }
      }
      setOutput(result);
    }
    `},z1=1.7580993408473768,V1=1.0507009873554805,an=function(n,t){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},ts="if (isnan(x)) return x;",nT="return x;",Lw="return abs(x);",V4=ts+`
  return (x < 0.0) ? 0.0 : x;
`,W4=ts+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,q4="return (x >= 0.0) ? x : (exp(x) - 1.0);",rT=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+z1+`;
  float scale = `+V1+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Dw="return -x;",Fw="return ceil(x);",Mw="return floor(x);",Ow="return exp(x);",Bw="return exp(x) - 1.0;",iT=ts+`
  return sin(x);
`,oT=ts+`
  return cos(x);
`,aT=ts+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,sT=ts+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,uT=ts+`
  return atan(x);
`,lT=ts+"return log(x + sqrt(x * x + 1.0));",cT=ts+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,fT=ts+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,_p="return x;",hT="return x;",H4=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,G4=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,$4=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,jh=function(n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},dT=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n;var t=n.length,e=No("rc",t),r=Kn(t),i=(function(a,u){if(a===1)return"rc";for(var c="",h=0;h<a;h++)c+=u[h],h<a-1&&(c+=",");return c})(t,e),o=e.slice(-2),s=t<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+s+`));
      }
    `},Sp={};function Cp(n,t){if(t===void 0&&(t=!1),n==="linear")return t?hT:nT;if(n==="relu")return t?H4:V4;if(n==="elu")return t?$4:q4;if(n==="relu6")return t?G4:W4;if(n==="prelu")return t?z4:U4;throw new Error("Activation "+n+" has not been implemented for the WebGL backend.")}var pT=600,vT=(function(n){function t(e){var r,i=n.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!Ve().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){var o=zs(Ve().getNumber("WEBGL_VERSION"));i.binaryCache=((r=Ve().getNumber("WEBGL_VERSION"))in Sp||(Sp[r]={}),Sp[r]),i.gpgpu=new kR(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=e,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=e.gl.canvas;return i.textureManager=new QR(i.gpgpu),i.numMBBeforeWarning=Ve().global.screen==null?1024:Ve().global.screen.height*Ve().global.screen.width*window.devicePixelRatio*pT/1024/1024,i.texData=new N4(i,Se),i}return es(t,n),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,r,i){if(Ve().getBool("DEBUG")&&this.checkNumericalProblems(e),i==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:i,values:e,usage:Jo.UPLOAD}),o},t.prototype.move=function(e,r,i,o){if(Ve().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:i,dtype:o,values:r,usage:Jo.UPLOAD})},t.prototype.readSync=function(e){var r=this.texData.get(e),i=r.values,o=r.dtype,s=r.complexTensors,a=r.slice,u=r.shape,c=r.isPacked;if(a!=null){var h=void 0;h=c?new jh(u,_p):new an(u,_p);var d=this.runWebGLProgram(h,[{dataId:e,shape:u,dtype:o}],o),v=this.readSync(d.dataId);return this.disposeData(d.dataId),v}if(i!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return i;var p,y,x=this.activeTimers!=null;return x&&(p=Is()),o==="complex64"?y=Eg(s.real.dataSync(),s.imag.dataSync()):y=this.getValuesFromTexture(e),x&&(this.downloadWaitMs+=Is()-p),this.convertAndCacheOnCPU(e,y)},t.prototype.read=function(e){return xt(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,d,v,p,y,x,w,_,E,I,C,N,O,U,M;return wt(this,(function(T){switch(T.label){case 0:if(this.pendingRead.has(e))return r=this.pendingRead.get(e),[2,new Promise((function(j){return r.push(j)}))];if(i=this.texData.get(e),o=i.values,s=i.shape,a=i.slice,u=i.dtype,c=i.complexTensors,h=i.isPacked,a!=null)return d=void 0,d=h?new jh(s,_p):new an(s,_p),v=this.runWebGLProgram(d,[{dataId:e,shape:s,dtype:u}],u),p=this.read(v.dataId),this.disposeData(v.dataId),[2,p];if(o!=null)return[2,this.convertAndCacheOnCPU(e)];if(!Ve().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ve().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return y=null,u!=="complex64"&&Ve().get("WEBGL_BUFFER_SUPPORTED")&&(x=this.decode(e),w=this.texData.get(x.dataId),y=(M=this.gpgpu).createBufferFromTexture.apply(M,[w.texture].concat(Xh(s)))),this.pendingRead.set(e,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:T.sent(),T.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([c.real.data(),c.imag.data()])];case 3:return E=T.sent(),I=E[0],C=E[1],_=Eg(I,C),[3,5];case 4:y==null?_=this.getValuesFromTexture(e):(N=Ct(s),_=this.gpgpu.downloadFloat32MatrixFromBuffer(y,N)),T.label=5;case 5:return x!=null&&this.disposeData(x.dataId),O=this.convertAndCacheOnCPU(e,_),U=this.pendingRead.get(e),this.pendingRead.delete(e),U.forEach((function(j){return j(O)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,O]}}))}))},t.prototype.checkNumericalProblems=function(e){if(e!=null)for(var r=0;r<e.length;r++){var i=e[r];if(!r6(i))throw Ve().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(e){var r,i=this.texData.get(e),o=i.shape,s=i.dtype,a=i.isPacked,u=Ct(o);if(Ve().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var c=this.decode(e),h=this.texData.get(c.dataId),d=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[h.texture].concat(Xh(o))).subarray(0,u);return this.disposeData(c.dataId),d}var v=Ve().getBool("WEBGL_PACK")&&a===!0,p=v?f0(o):o,y=v?new nR(p):new tR(p),x=this.runWebGLProgram(y,[{shape:p,dtype:s,dataId:e}],"float32"),w=this.texData.get(x.dataId),_=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(w.texture,w.texShape[0],w.texShape[1]).subarray(0,u);return this.disposeData(x.dataId),_},t.prototype.time=function(e){return xt(this,void 0,void 0,(function(){var r,i,o,s,a,u,c;return wt(this,(function(h){switch(h.label){case 0:return r=this.activeTimers,i=[],o=!1,this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,e(),s=Qf(this.activeTimers.map((function(d){return d.query}))).filter((function(d){return d!=null})),a=Qf(this.activeTimers.map((function(d){return d.name}))).filter((function(d){return d!=null})),this.activeTimers=r,o&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(s)]:[3,2];case 1:return c=h.sent(),u.kernelMs=OI(c),u.getExtraProfileInfo=function(){return c.map((function(d,v){return{name:a[v],ms:d}})).map((function(d){return d.name+": "+d.ms})).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},h.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Is(),endMs:null}},t.prototype.endTimer=function(e){return Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Is(),e)},t.prototype.getQueryTime=function(e){return xt(this,void 0,void 0,(function(){var r;return wt(this,(function(i){return Ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(r=e).endMs-r.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var r=this.texData.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var r=this.texData.get(e),i=r.texture,o=r.dtype,s=r.texShape,a=r.usage,u=r.isPacked,c=r.slice,h=c&&c.origDataId||e,d=this.dataRefCount.get(h);d>1?this.dataRefCount.set(h,d-1):(this.dataRefCount.delete(h),i!=null&&(this.numBytesInGPU-=this.computeBytes(s,o),this.textureManager.releaseTexture(i,s,a,u)));var v=this.texData.get(e);v.texture=null,v.texShape=null,v.isPacked=!1,v.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return Ve().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Se.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&e.every((function(o){return i.texData.get(o.dataId).texture==null&&o.size<r}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,r){var i=this.makeOutput(e.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:Se.keep(e.clone()),imag:Se.keep(r.clone())},i},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,r,i){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,r,i);if(Ct(i)===0)return ki([],i,e.dtype);var o=this.texData.get(e.dataId).isPacked,s=k4(e.shape,r,i);if(o||!s){var a=Ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new YR(i):new XR(i),u=a.getCustomSetupFunc(r);return this.compileAndRun(a,[e],null,u)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,r,i)},t.prototype.shallowSlice=function(e,r,i){var o=this.texData.get(e.dataId),s=this.makeOutput(i,e.dtype),a=this.texData.get(s.dataId);Object.assign(a,o),a.shape=i,a.dtype=e.dtype;var u=E4(r,e.strides);o.slice&&(u+=o.slice.flatOffset),a.slice={flatOffset:u,origDataId:o.slice&&o.slice.origDataId||e.dataId};var c=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,c+1),s},t.prototype.stridedSlice=function(e,r,i,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,r,i,o);var s=F1(r,i,o);if(s.some((function(u){return u===0})))return ki([],s);var a=new JR(r,o,s);return this.compileAndRun(a,[e])},t.prototype.reverse=function(e,r){var i=Ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GR(e.shape,r):new HR(e.shape,r);return this.compileAndRun(i,[e])},t.prototype.concat=function(e,r){if(e[0].dtype==="complex64"){var i=e.map((function(p){return Aa(p)})),o=e.map((function(p){return Rs(p)}));return Ci(this.concat(i,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,r);if(e.length===1)return e[0];if(e.length>Ve().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var s=Math.floor(e.length/2),a=this.concat(e.slice(0,s),r),u=this.concat(e.slice(s),r);return this.concat([a,u],r)}if(Ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var c=new zP(e.map((function(p){return p.shape})),r);return this.compileAndRun(c,e)}var h=eh(e.map((function(p){return p.shape})),r),d=e.map((function(p){return p.as2D(-1,Ct(p.shape.slice(r)))})),v=new UP(d.map((function(p){return p.shape})));return this.compileAndRun(v,d).reshape(h)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Dw,e.dtype);var r=new an(e.shape,Dw);return this.compileAndRun(r,[e])},t.prototype.batchMatMul=function(e,r,i,o){var s=i?e.shape[2]:e.shape[1],a=o?r.shape[1]:r.shape[2],u=i?e.shape[1]:e.shape[2],c=e.shape[0];if((s===1||a===1)&&u>1e3){i&&(e=e.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var h=a===1?e:e.as3D(c,u,1),d=a===1?2:1,v=a===1?r.as3D(c,1,u):r;return this.multiply(h,v).sum(d,!0)}var p=Ai(e.dtype,r.dtype),y=new v0(e.shape,[c,s,a],i,o);return this.compileAndRun(y,[e,r],p)},t.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,s=e.transposeB,a=e.bias,u=e.activation,c=e.preluActivationWeights,h=o?r.shape[2]:r.shape[1],d=s?i.shape[1]:i.shape[2],v=r.shape[0],p=Ai(r.dtype,i.dtype),y=a!=null,x=c!=null,w=u?Cp(u,!0):null,_=new v0(r.shape,[v,h,d],o,s,y,w,x),E=[r,i];return a&&E.push(a),c&&E.push(c),this.compileAndRun(_,E,p)},t.prototype.multiply=function(e,r){if(e.dtype==="complex64"){var i=this.texData.get(e.dataId),o=this.texData.get(r.dataId),s=new _w(FP,e.shape,r.shape),a=new _w(MP,e.shape,r.shape),u=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],c=this.compileAndRun(s,u),h=this.compileAndRun(a,u),d=this.complex(c,h);return c.dispose(),h.dispose(),d}if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.multiply(e,r);if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,Sw,e.dtype);var v=new Nr(Sw,e.shape,r.shape);return this.compileAndRun(v,[e,r],e.dtype)},t.prototype.batchNormalization=function(e,r,i,o,s,a){var u=[e,r,i],c=null;a!=null&&(c=a.shape,u.push(a));var h=null;if(s!=null&&(h=s.shape,u.push(s)),Ve().getBool("WEBGL_PACK_NORMALIZATION")){var d=new DP(e.shape,r.shape,i.shape,c,h,o);return this.compileAndRun(d,u)}var v=new LP(e.shape,r.shape,i.shape,c,h,o);return this.compileAndRun(v,u)},t.prototype.localResponseNormalization4D=function(e,r,i,o,s){var a=Ve().getBool("WEBGL_PACK_NORMALIZATION")?new PR(e.shape,r,i,o,s):new NR(e.shape,r,i,o,s);return this.compileAndRun(a,[e])},t.prototype.LRNGrad=function(e,r,i,o,s,a,u){var c=new IR(r.shape,o,s,a,u);return this.compileAndRun(c,[r,i,e])},t.prototype.tile=function(e,r){if(e.dtype==="string"){var i=this.readSync(e.dataId).map((function(s){return ov(s)}));return F4(rn(e.shape,e.dtype,i),r)}var o=new ZR(e.shape,r);return this.compileAndRun(o,[e])},t.prototype.pad=function(e,r,i){var o=Ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OR(e.shape,r,i):new MR(e.shape,r,i);return this.compileAndRun(o,[e])},t.prototype.transpose=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,r);var i=Ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tT(e.shape,r):new eT(e.shape,r);return this.compileAndRun(i,[e])},t.prototype.gather=function(e,r,i){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.gather(e,r,i);var o=new uR(e.shape,r.size,i);return this.compileAndRun(o,[e,r])},t.prototype.batchToSpaceND=function(e,r,i){ce(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var o=r.reduce((function(d,v){return d*v})),s=fv(e.shape,r,o),a=hv(s.length,r.length),u=dv(e.shape,r,o),c=_4(i,r.length),h=S4(u,i,r.length);return e.reshape(s).transpose(a).reshape(u).slice(c,h)},t.prototype.spaceToBatchND=function(e,r,i){ce(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var o=r.reduce((function(v,p){return v*p})),s=[[0,0]];s.push.apply(s,i);for(var a=1+r.length;a<e.shape.length;++a)s.push([0,0]);var u=e.pad(s),c=fv(u.shape,r,o,!1),h=hv(c.length,r.length,!1),d=dv(u.shape,r,o,!1);return u.reshape(c).transpose(h).reshape(d)},t.prototype.reduce=function(e,r,i){var o=e.shape[0],s=e.shape[1],a=h0(s),u=new BR({windowSize:a,inSize:s,batchSize:o},r),c=this.compileAndRun(u,[e],i);return c.shape[1]===1?c:this.reduce(c,r,i)},t.prototype.argReduce=function(e,r,i){i===void 0&&(i=null);var o=e.shape[0],s=e.shape[1];i!=null&&(o=i.shape[0],s=i.shape[1]);var a=h0(s),u=new CP({windowSize:a,inSize:s,batchSize:o},r,i==null),c=[e];i!=null&&c.push(i);var h=this.compileAndRun(u,c,"int32");return h.shape[1]===1?h:this.argReduce(e,r,h)},t.prototype.argReducePacked=function(e,r,i){i===void 0&&(i=null);var o=i!=null?i.shape:e.shape,s=h0(o[o.length-1]),a=new PP(o,s,r,i==null),u=i==null?[e]:[e,i],c=this.compileAndRun(a,u,"int32");return c.rank===e.rank?this.argReducePacked(e,r,c):c},t.prototype.sum=function(e,r){Xo("sum",r,e.rank);var i=qi(e.shape,r),o=i[0],s=Ct(i[1]),a=e.as2D(-1,s),u=i0(e.dtype);return this.reduce(a,"sum",u).reshape(o)},t.prototype.prod=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,r);var i=qi(e.shape,r),o=i[0],s=Ct(i[1]),a=e.as2D(-1,s),u=i0(e.dtype);return this.reduce(a,"prod",u).reshape(o)},t.prototype.unsortedSegmentSum=function(e,r,i){var o=0,s=Vs([o],e.rank),a=e;s!=null&&(a=e.transpose(s),o=Ws(1,e.rank)[0]);var u=(function(p,y,x){for(var w=[],_=p.length,E=0;E<_;E++)E!==y?w.push(p[E]):w.push(x);return w})(a.shape,o,i),c=Ct([a.shape[o]]),h=a.as2D(-1,c),d=i0(e.dtype),v=this.segOpCompute(h,"unsortedSegmentSum",r,d,i).reshape(u);return s!=null&&(v=v.transpose(R1(s))),v},t.prototype.segOpCompute=function(e,r,i,o,s){var a=e.shape[0],u=e.shape[1],c=(function(v,p){var y,x=!1;for(v<=A4?(y=v,x=!0):y=yg(v,Math.floor(Math.sqrt(v)));!x;)y>p||y===v?x=!0:y=yg(v,y+1);return y})(u,s),h=new $R({windowSize:c,inSize:u,batchSize:a,numSegments:s}),d=this.compileAndRun(h,[e,i],o);return d.shape[1]===s?d:(i=cv(0,s).tile([u/c]),this.segOpCompute(d,r,i,o,s))},t.prototype.argMinMaxReduce=function(e,r,i){var o=[r];if(Xo("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,e.rank),!Ve().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var s=qi(e.shape,o),a=s[0],u=Ct(s[1]),c=e.as2D(-1,u);return this.argReduce(c,i).reshape(a)}return this.argReducePacked(e,i)},t.prototype.argMin=function(e,r){return this.argMinMaxReduce(e,r,"min")},t.prototype.argMax=function(e,r){return this.argMinMaxReduce(e,r,"max")},t.prototype.cumsum=function(e,r,i,o){if(r!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+r);var s=new YP(e.shape,i,o);return this.compileAndRun(s,[e])},t.prototype.equal=function(e,r){if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(equal(a, b));
`,"bool");var i=new Nr("return float(a == b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.notEqual=function(e,r){if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new Nr("return float(a != b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.less=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.less(e,r);if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new Nr("return float(a < b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.lessEqual=function(e,r){if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new Nr("return float(a <= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.greater=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.greater(e,r);if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new Nr("return float(a > b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.greaterEqual=function(e,r){if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new Nr("return float(a >= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.logicalNot=function(e){var r=new an(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[e])},t.prototype.logicalAnd=function(e,r){if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new Nr("return float(a >= 1.0 && b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.logicalOr=function(e,r){if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new Nr("return float(a >= 1.0 || b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.select=function(e,r,i){var o=new KR(e.rank,r.shape,r.rank);return this.compileAndRun(o,[e,r,i],Ai(r.dtype,i.dtype))},t.prototype.where=function(e){uv("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=e.dataSync();return j1(e.shape,r)},t.prototype.topk=function(e,r,i){return M4(e.dataSync(),e.shape,e.dtype,r)},t.prototype.min=function(e,r){Xo("min",r,e.rank);var i=qi(e.shape,r),o=i[0],s=Ct(i[1]),a=e.as2D(-1,s);return this.reduce(a,"min",a.dtype).reshape(o)},t.prototype.minimum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.minimum(e,r);var i=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nu(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Nr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.mod=function(e,r){var i=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nu(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Nr(`if (b == 0.0) return NAN;
  return mod(a, b);`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.max=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,r);Xo("max",r,e.rank);var i=qi(e.shape,r),o=i[0],s=Ct(i[1]),a=e.as2D(-1,s);return this.reduce(a,"max",a.dtype).reshape(o)},t.prototype.maximum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.maximum(e,r);var i=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nu(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Nr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.all=function(e,r){Xo("all",r,e.rank);var i=qi(e.shape,r),o=i[0],s=Ct(i[1]),a=e.as2D(-1,s);return this.reduce(a,"all",a.dtype).reshape(o)},t.prototype.any=function(e,r){Xo("any",r,e.rank);var i=qi(e.shape,r),o=i[0],s=Ct(i[1]),a=e.as2D(-1,s);return this.reduce(a,"any",a.dtype).reshape(o)},t.prototype.realDivide=function(e,r){if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new Nr(`
if (a == b) {
  return 1.0;
};
return a / b;`,e.shape,r.shape);return this.compileAndRun(i,[e,r],"float32")},t.prototype.floorDiv=function(e,r){if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new Nr(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,e.shape,r.shape);return this.compileAndRun(i,[e,r],"int32")},t.prototype.add=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,d0);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.add(e,r);var i=Ai(e.dtype,r.dtype);if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,d0,i);var o=new Nr(d0,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},t.prototype.packedUnaryOp=function(e,r,i){var o=new jh(e.shape,r);return this.compileAndRun(o,[e],i)},t.prototype.packedBinaryOp=function(e,r,i,o,s){s===void 0&&(s=!1);var a=new Nu(i,e.shape,r.shape,s);return this.compileAndRun(a,[e,r],o)},t.prototype.complexSeparableBinaryOp=function(e,r,i){var o=this,s=this.texData.get(e.dataId),a=this.texData.get(r.dataId),u=[[s.complexTensors.real,a.complexTensors.real],[s.complexTensors.imag,a.complexTensors.imag]].map((function(v){var p=v[0],y=v[1],x=o.makeComplexComponentTensorInfo(e,p),w=o.makeComplexComponentTensorInfo(r,y),_=new Nr(i,e.shape,r.shape);return o.compileAndRun(_,[x,w],Ai(p.dtype,y.dtype))})),c=u[0],h=u[1],d=this.complex(c,h);return c.dispose(),h.dispose(),d},t.prototype.makeComplexComponentTensorInfo=function(e,r){return{dataId:r.dataId,dtype:r.dtype,shape:e.shape}},t.prototype.addN=function(e){if(e.length===1)return e[0];if(e.length>Ve().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),i=this.addN(e.slice(0,r)),o=this.addN(e.slice(r));return this.addN([i,o])}var s=e.map((function(c){return c.dtype})).reduce((function(c,h){return Ai(c,h)})),a=e.map((function(c){return c.shape})),u=Ve().getBool("WEBGL_PACK")?new SP(e[0].shape,a):new _P(e[0].shape,a);return this.compileAndRun(u,e,s)},t.prototype.subtract=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,p0);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.subtract(e,r);var i=Ai(e.dtype,r.dtype);if(Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,p0,e.dtype);var o=new Nr(p0,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},t.prototype.pow=function(e,r){var i=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nu(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Nr(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,e.shape,r.shape),o=Ai(e.dtype,r.dtype);return this.compileAndRun(i,[e,r],o)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Fw,e.dtype);var r=new an(e.shape,Fw);return this.compileAndRun(r,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Mw,e.dtype);var r=new an(e.shape,Mw);return this.compileAndRun(r,[e])},t.prototype.sign=function(e){var r=new an(e.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[e])},t.prototype.isNaN=function(e){var r=new an(e.shape,"return float(isnan(x));");return this.compileAndRun(r,[e],"bool")},t.prototype.isInf=function(e){var r=new an(e.shape,"return float(isinf(x));");return this.compileAndRun(r,[e],"bool")},t.prototype.isFinite=function(e){var r=new an(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[e],"bool")},t.prototype.round=function(e){var r=new an(e.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ow,e.dtype);var r=new an(e.shape,Ow);return this.compileAndRun(r,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Bw,e.dtype);var r=new an(e.shape,Bw);return this.compileAndRun(r,[e])},t.prototype.softmax=function(e,r){var i=oi([r],e.shape),o=this.max(e,i),s=Po(o.shape,i),a=this.subtract(e,o.reshape(s)),u=this.exp(a),c=this.sum(u,i).reshape(s);return this.realDivide(u,c)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,e.dtype);var r=new an(e.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[e])},t.prototype.log1p=function(e){var r=new an(e.shape,"return log(1.0 + x);");return this.compileAndRun(r,[e])},t.prototype.sqrt=function(e){var r=new an(e.shape,"return sqrt(x);");return this.compileAndRun(r,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var r=new an(e.shape,"return inversesqrt(x);");return this.compileAndRun(r,[e])},t.prototype.reciprocal=function(e){var r=new an(e.shape,"return 1.0 / x;");return this.compileAndRun(r,[e])},t.prototype.relu=function(e){var r;return r=Ve().getBool("WEBGL_PACK")?new jh(e.shape,H4):new an(e.shape,V4),this.compileAndRun(r,[e])},t.prototype.relu6=function(e){var r;return r=Ve().getBool("WEBGL_PACK")?new jh(e.shape,G4):new an(e.shape,W4),this.compileAndRun(r,[e])},t.prototype.prelu=function(e,r){var i=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nu(z4,e.shape,r.shape):new Nr(U4,e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.elu=function(e){if(Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,$4,e.dtype);var r=new an(e.shape,q4);return this.compileAndRun(r,[e])},t.prototype.eluDer=function(e,r){var i=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nu(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,e.shape,r.shape):new Nr("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.selu=function(e){var r=new an(e.shape,rT);return this.compileAndRun(r,[e])},t.prototype.int=function(e){var r=new an(e.shape,"return float(int(x));");return this.compileAndRun(r,[e],"int32")},t.prototype.clip=function(e,r,i){var o,s=(o=Ve().getBool("WEBGL_PACK_CLIP")?new BP(e.shape):new OP(e.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(o,[e],null,s)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(Ve().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Lw,e.dtype);var r=new an(e.shape,Lw);return this.compileAndRun(r,[e])},t.prototype.complexAbs=function(e){var r=this.texData.get(e.dataId),i=new jP(e.shape),o=[this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)];return this.compileAndRun(i,o)},t.prototype.sigmoid=function(e){var r=new an(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[e])},t.prototype.softplus=function(e){var r=new an(e.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[e])},t.prototype.sin=function(e){var r=new an(e.shape,iT);return this.compileAndRun(r,[e])},t.prototype.cos=function(e){var r=new an(e.shape,oT);return this.compileAndRun(r,[e])},t.prototype.tan=function(e){var r=new an(e.shape,"return tan(x);");return this.compileAndRun(r,[e])},t.prototype.asin=function(e){var r=new an(e.shape,aT);return this.compileAndRun(r,[e])},t.prototype.acos=function(e){var r=new an(e.shape,sT);return this.compileAndRun(r,[e])},t.prototype.atan=function(e){var r=new an(e.shape,uT);return this.compileAndRun(r,[e])},t.prototype.atan2=function(e,r){var i=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nu(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new Nr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.sinh=function(e){var r=new an(e.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},t.prototype.cosh=function(e){var r=new an(e.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},t.prototype.tanh=function(e){var r=new an(e.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[e])},t.prototype.asinh=function(e){var r=new an(e.shape,lT);return this.compileAndRun(r,[e])},t.prototype.acosh=function(e){var r=new an(e.shape,cT);return this.compileAndRun(r,[e])},t.prototype.atanh=function(e){var r=new an(e.shape,fT);return this.compileAndRun(r,[e])},t.prototype.erf=function(e){var r=new an(e.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[e])},t.prototype.step=function(e,r){var i=new an(e.shape,(function(o){return o===void 0&&(o=0),ts+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `})(r));return this.compileAndRun(i,[e])},t.prototype.conv2dByMatMul=function(e,r,i,o,s,a){var u=e.shape,c=this.texData.get(e.dataId),h=i.inChannels,d=u[0]*u[1]*u[2],v=i.outChannels,p=i.dataFormat==="channelsLast",y=(d===1||v===1)&&h>1e3,x=u[2]%2!=0&&!!c.isPacked;if(y||!Ve().getBool("WEBGL_LAZILY_UNPACK")||!Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!x){var w=p?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],_=this.reshape(e,[1,w,i.inChannels]),E=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:_,b:E,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:a}),i.outShape)}var I=p?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),C={dataId:e.dataId,shape:[1,I,i.inChannels],dtype:e.dtype},N=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,ce(wp(c.shape,C.shape),(function(){return"packed reshape "+c.shape+" to "+C.shape+" isn't free"}));var O=this.reshape(r,[1,i.inChannels,i.outChannels]),U=this.fusedBatchMatMul({a:C,b:O,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:a}),M=this.texData.get(U.dataId);return ce(M.isPacked,(function(){return"batchMatMul result is expected to be packed"})),c.shape=N,M.shape=i.outShape,Se.makeTensorFromDataId(U.dataId,i.outShape,U.dtype)},t.prototype.conv2dWithIm2Row=function(e,r,i,o,s,a){var u=i.filterWidth,c=i.filterHeight,h=i.inChannels,d=i.outWidth,v=i.outHeight,p=i.dataFormat==="channelsLast",y=u*c*h,x=v*d,w=[y,x],_=e.squeeze([0]),E=r.reshape([1,y,-1]),I=new ER(w,_.shape,i),C=this.compileAndRun(I,[_]).reshape([1,w[0],w[1]]),N=o!=null,O=a!=null,U=s?Cp(s,!0):null,M=new v0(C.shape,[1,x,i.outChannels],!0,!1,N,U,O),T=[C,E];o&&T.push(o),O&&T.push(a);var j=this.compileAndRun(M,T);return p?j.reshape([1,v,d,i.outChannels]):j.reshape([1,i.outChannels,v,d])},t.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,s=e.bias,a=e.activation,u=e.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,o,s,a,u);if(Ve().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,o,s,a,u);var c=s!=null,h=u!=null,d=a?Cp(a,!1):null,v=new Cw(o,c,d,h),p=[r,i];return s&&p.push(s),u&&p.push(u),this.compileAndRun(v,p)},t.prototype.conv2d=function(e,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(e,r,i);if(Ve().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,r,i);var o=new Cw(i);return this.compileAndRun(o,[e,r])},t.prototype.conv2dDerInput=function(e,r,i){var o=new WP(i);return this.compileAndRun(o,[e,r])},t.prototype.conv2dDerFilter=function(e,r,i){var o=new VP(i);return this.compileAndRun(o,[e,r])},t.prototype.fusedDepthwiseConv2D=function(e){var r,i=e.input,o=e.filter,s=e.convInfo,a=e.bias,u=e.activation,c=e.preluActivationWeights,h=Ve().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1,d=u?Cp(u,h):null,v=[i,o],p=a!=null,y=c!=null;return p&&v.push(a),y&&v.push(c),h?(r=new kw(s,p,d,y),this.compileAndRun(r,v)):(r=new Aw(s,p,d,y),this.compileAndRun(r,v))},t.prototype.depthwiseConv2D=function(e,r,i){var o;return Ve().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new kw(i),this.compileAndRun(o,[e,r])):(o=new Aw(i),this.compileAndRun(o,[e,r]))},t.prototype.depthwiseConv2DDerInput=function(e,r,i){var o=new $P(i);return this.compileAndRun(o,[e,r])},t.prototype.depthwiseConv2DDerFilter=function(e,r,i){var o=new GP(i);return this.compileAndRun(o,[e,r])},t.prototype.conv3d=function(e,r,i){var o=new KP(i);return this.compileAndRun(o,[e,r])},t.prototype.conv3dDerInput=function(e,r,i){var o=new HP(i);return this.compileAndRun(o,[e,r])},t.prototype.conv3dDerFilter=function(e,r,i){var o=new qP(i);return this.compileAndRun(o,[e,r])},t.prototype.maxPool=function(e,r){var i=new m0(r,"max",!1);return this.compileAndRun(i,[e])},t.prototype.avgPool=function(e,r){var i=new m0(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},t.prototype.maxPoolBackprop=function(e,r,i,o){var s=new m0(o,"max",!0),a=this.compileAndRun(s,[r]),u=new RR(o),c=this.compileAndRun(u,[e,a],r.dtype);return a.dispose(),c},t.prototype.avgPoolBackprop=function(e,r,i){var o=new RP(i);return this.compileAndRun(o,[e],r.dtype)},t.prototype.cast=function(e,r){return R4(e,r,this)},t.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),s=0,a=0;a<e.rank;a++)a!==r&&(o[s++]=e.shape[a]);var u=new Array(e.rank).fill(0),c=e.shape.slice();c[r]=1;var h=new Array(i);for(a=0;a<h.length;a++)u[r]=a,h[a]=this.slice(e,u,c).reshape(o);return h},t.prototype.avgPool3d=function(e,r){var i=new g0(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,r,i){var o=new TP(i);return this.compileAndRun(o,[e],r.dtype)},t.prototype.maxPool3d=function(e,r){var i=new g0(r,"max",!1);return this.compileAndRun(i,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,r,i,o){var s=new g0(o,"max",!0),a=this.compileAndRun(s,[r]),u=new TR(o),c=this.compileAndRun(u,[e,a],r.dtype);return a.dispose(),c},t.prototype.reshape=function(e,r){var i=this.texData.get(e.dataId);if(i.isPacked&&!wp(e.shape,r)&&(i.texture===null||!wp(i.shape,r))){var o=this.packedReshape(e,r);return Se.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return kg(e,r)},t.prototype.resizeBilinear=function(e,r,i,o){var s=Ve().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new VR(e.shape,r,i,o):new zR(e.shape,r,i,o);return this.compileAndRun(s,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,r,i){var o=new UR(e,r,i);return this.compileAndRun(o,[e])},t.prototype.resizeNearestNeighbor=function(e,r,i,o){var s=new qR(e.shape,r,i,o);return this.compileAndRun(s,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,r,i){var o=new WR(e,r,i);return this.compileAndRun(o,[e])},t.prototype.multinomial=function(e,r,i,o){var s=r?e:Fu(e),a=s.shape[0],u=s.shape[1],c=new LR(a,u,i),h=c.getCustomSetupFunc(o);return this.compileAndRun(c,[s],"int32",h)},t.prototype.oneHot=function(e,r,i,o){var s=new DR(e.size,r,i,o);return this.compileAndRun(s,[e])},t.prototype.diag=function(e){var r=new eR(e.size);return this.compileAndRun(r,[e])},t.prototype.nonMaxSuppression=function(e,r,i,o,s){return uv("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),O1(e.dataSync(),r.dataSync(),i,o,s)},t.prototype.cropAndResize=function(e,r,i,o,s,a){var u=new XP(e.shape,r.shape,o,s,a);return this.compileAndRun(u,[e,r,i],"float32")},t.prototype.depthToSpace=function(e,r,i){ce(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));var o=e.shape[0],s=i==="NHWC"?e.shape[1]:e.shape[2],a=i==="NHWC"?e.shape[2]:e.shape[3],u=i==="NHWC"?e.shape[3]:e.shape[1],c=s*r,h=a*r,d=u/(r*r),v=new ZP(i==="NHWC"?[o,c,h,d]:[o,d,c,h],r,i);return this.compileAndRun(v,[e])},t.prototype.split=function(e,r,i){return D4(e,r,i)},t.prototype.scatterND=function(e,r,i){var o=pv(0,e,i),s=o.sliceRank,a=o.numUpdates,u=o.sliceSize,c=o.strides,h=o.outputSize,d=[h/u,u],v=e.reshape([a,s]),p=r.reshape([a,u]);if(h===0)return kg(ki([]),i);var y=rt(0),x=new Pw(a,s,v.rank,p.rank,c,d);return this.compileAndRun(x,[p,v,y]).reshape(i)},t.prototype.sparseToDense=function(e,r,i,o){var s=pv(0,e,i),a=s.sliceRank,u=s.numUpdates,c=s.strides,h=s.outputSize,d=new Pw(u,a,e.rank,r.rank,c,[h,1]);return this.compileAndRun(d,[r,e,o]).reshape(i)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,r){var i=this.texData.get(e.dataId),o=new Nw(oR,e.shape,r),s=new Nw(aR,e.shape,r),a=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag)],u=this.compileAndRun(o,a),c=this.compileAndRun(s,a),h=this.complex(u,c).as2D(e.shape[0],e.shape[1]);return u.dispose(),c.dispose(),h},t.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],s=C4(e,r),a=s[0],u=s[1],c=s[2],h=s[3],d=r.reshape([u,o]),v=e.reshape([e.size/c,c]),p=new lR(o,h,[u,c]);return this.compileAndRun(p,[v,d]).reshape(a)},t.prototype.fill=function(e,r,i){if((i=i||wd(r))==="string"){var o=iv(i,Ct(e));return o.fill(r),Se.makeTensor(o,e,i,this)}var s=new sR(e,r),a=s.getCustomSetupFunc(r);return this.compileAndRun(s,[],i,a)},t.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},t.prototype.linspace=function(e,r,i){return T4(e,r,i)},t.prototype.makeTensorInfo=function(e,r){var i=this.write(null,e,r);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:r}},t.prototype.makeOutput=function(e,r){var i=this.makeTensorInfo(e,r).dataId;return Se.makeTensorFromDataId(i,e,r,this)},t.prototype.unpackTensor=function(e){var r=new dT(e.shape);return this.runWebGLProgram(r,[e],e.dtype)},t.prototype.packTensor=function(e){var r=new FR(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,r){var i=[av(e.shape)].concat(sv(e.shape)),o={dtype:e.dtype,shape:i,dataId:e.dataId},s=[av(r)].concat(sv(r)),a=new jR(s,i),u=this.runWebGLProgram(a,[o],e.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},t.prototype.decode=function(e){var r,i=this.texData.get(e),o=i.isPacked,s=i.shape,a=i.dtype,u=f0(s);return r=o?new QP(u):new JP(u),{dtype:a,shape:s,dataId:this.runWebGLProgram(r,[{shape:u,dtype:a,dataId:e}],a,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,r,i,o,s){var a=this;s===void 0&&(s=!1);var u=this.makeTensorInfo(e.outputShape,i),c=this.texData.get(u.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===sd.DENSE){var h=Xh(e.outputShape);c.texShape=h.map((function(I){return 2*I}))}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),Ct(u.shape)===0)return c.values=od(u.dtype,0),u;var d=[],v=r.map((function(I){if(I.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var C=a.texData.get(I.dataId);if(C.texture==null){if(!e.packedInputs&&Ct(I.shape)<=Ve().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:I.shape,texData:null,isUniform:!0,uniformValues:C.values};e.packedInputs&&(C.isPacked=!0,C.shape=I.shape)}else if(!!C.isPacked!=!!e.packedInputs)I=C.isPacked?a.unpackTensor(I):a.packTensor(I),d.push(I),C=a.texData.get(I.dataId);else if(C.isPacked&&!wp(C.shape,I.shape)){var N=I,O=I.shape;I.shape=C.shape,I=a.packedReshape(I,O),d.push(I),C=a.texData.get(I.dataId),N.shape=O}return a.uploadToGPU(I.dataId),{shape:I.shape,texData:C,isUniform:!1}}));this.uploadToGPU(u.dataId);var p,y={shape:u.shape,texData:c,isUniform:!1},x=(function(I,C,N){var O="";C.concat(N).forEach((function(T){var j=T.texData!=null&&T.texData.slice!=null&&T.texData.slice.flatOffset>0,D=T.isUniform?"uniform":T.texData.texShape;O+=T.shape+"_"+D+"_"+j}));var U=I.userCode,M=I.constructor.name;return M+="_"+O+"_"+U})(e,v,y),w=this.getAndSaveBinary(x,(function(){return(function(I,C,N,O){var U=C.userCode,M=N.map((function(W,ne){var se={logicalShape:W.shape,texShape:W.isUniform?null:W.texData.texShape,isUniform:W.isUniform,isPacked:!W.isUniform&&W.texData.isPacked,flatOffset:null};return W.texData!=null&&W.texData.slice!=null&&W.texData.slice.flatOffset>0&&(se.flatOffset=W.texData.slice.flatOffset),{name:C.variableNames[ne],shapeInfo:se}})),T=M.map((function(W){return W.shapeInfo})),j={logicalShape:O.shape,texShape:O.texData.texShape,isUniform:!1,isPacked:O.texData.isPacked,flatOffset:null},D=AP(M,j,U,C.packedInputs),B=I.createProgram(D),X=null,G=I.getUniformLocation(B,"NAN",!1);Ve().getNumber("WEBGL_VERSION")===1&&(X=I.getUniformLocation(B,"INFINITY",!1));for(var oe={},he=0;he<C.variableNames.length;he++){var ae=C.variableNames[he];oe[ae]=I.getUniformLocation(B,ae,!1),oe["offset"+ae]=I.getUniformLocation(B,"offset"+ae,!1)}return{program:C,source:D,webGLProgram:B,uniformLocations:oe,inShapeInfos:T,outShapeInfo:j,infLoc:X,nanLoc:G}})(a.gpgpu,e,v,y)})),_=this.activeTimers!=null;if(_&&(p=this.startTimer()),(function(I,C,N,O,U){Iw(C.inShapeInfos,N),Iw([C.outShapeInfo],[O]);var M=O.texData.texture,T=O.texData.texShape;O.texData.isPacked?I.setOutputPackedMatrixTexture(M,T[0],T[1]):I.setOutputMatrixTexture(M,T[0],T[1]),I.setProgram(C.webGLProgram),Ve().getNumber("WEBGL_VERSION")===1&&C.infLoc!==null&&I.gl.uniform1f(C.infLoc,1/0),C.nanLoc!==null&&I.gl.uniform1f(C.nanLoc,NaN),N.forEach((function(j,D){var B=C.program.variableNames[D],X=C.uniformLocations[B],G=C.uniformLocations["offset"+B];if(X!=null)if(j.isUniform)if(Ct(j.shape)<2)I.gl.uniform1f(X,j.uniformValues[0]);else{var oe=j.uniformValues;oe instanceof Float32Array||(oe=new Float32Array(oe)),I.gl.uniform1fv(X,oe)}else j.texData.slice!=null&&G!=null&&I.gl.uniform1i(G,j.texData.slice.flatOffset),I.setInputMatrixTexture(j.texData.texture,X,D)})),U!=null&&U(I,C.webGLProgram),I.executeProgram()})(this.gpgpu,w,v,y,o),d.forEach((function(I){return a.disposeData(I.dataId)})),_&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)})),!Ve().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&s===!1){var E=this.unpackTensor(u);return this.disposeData(u.dataId),E}return u},t.prototype.compileAndRun=function(e,r,i,o,s){s===void 0&&(s=!1),i=i||r[0].dtype;var a=this.runWebGLProgram(e,r,i,o,s);return Se.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},t.prototype.getAndSaveBinary=function(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(Ve().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(r){e.gpgpu.deleteProgram(e.binaryCache[r].webGLProgram),delete e.binaryCache[r]})),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=st((function(){if(!Ve().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=Ve().getBool("DEBUG");Ve().set("DEBUG",!1);var i=e.abs(rt(1e-8)).dataSync()[0];if(Ve().set("DEBUG",r),i>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var r,i=this.texData.get(e),o=i.shape,s=i.dtype,a=i.values,u=i.texture,c=i.usage,h=i.isPacked;if(u==null){var d,v=this.activeTimers!=null;v&&(d=Is());var p=i.texShape;if(p==null&&(p=b6(o,h),i.texShape=p),a!=null){var y=f0(o),x=void 0,w=p[1],_=p[0],E=a instanceof Uint8Array;h?(w=(r=_d(p[0],p[1]))[0],_=r[1],x=new iR(y,[_,w],E)):x=new rR(y,[_,w],E);var I=this.makeTensorInfo([_,w],s);this.texData.get(I.dataId).usage=E?Jo.PIXELS:Jo.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(I.dataId),w,_,a);var C=this.runWebGLProgram(x,[I],s,null,!0),N=this.texData.get(C.dataId);i.texture=N.texture,i.texShape=N.texShape,i.isPacked=N.isPacked,i.usage=N.usage,this.disposeData(I.dataId),this.texData.delete(C.dataId),i.values=null,v&&(this.uploadWaitMs+=Is()-d)}else{var O=this.acquireTexture(p,c,s,h);i.texture=O}}},t.prototype.convertAndCacheOnCPU=function(e,r){var i=this.texData.get(e),o=i.dtype;return this.releaseGPUData(e),r!=null&&(i.values=(function(s,a){if(a==="float32"||a==="complex64")return s;if(a==="int32"||a==="bool"){for(var u=a==="int32"?new Int32Array(s.length):new Uint8Array(s.length),c=0;c<u.length;++c)u[c]=Math.round(s[c]);return u}throw new Error("Unknown dtype "+a)})(r,o)),i.values},t.prototype.acquireTexture=function(e,r,i,o){if(this.numBytesInGPU+=this.computeBytes(e,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+s+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,r,o)},t.prototype.computeBytes=function(e,r){return e[0]*e[1]*a4(r)},t})(I4);d4()&&Se.registerBackend("webgl",(function(){return new vT}),2);var mT=ge({square_:function(n){var t=te(n,"x","square"),e=[t];return Se.runKernelFunc((function(r,i){return i([t]),r.square(t)}),{x:t},null,"Square",{},e,[])}}),ld="SquaredDifference",K4=ge({squaredDifference_:function(n,t){var e,r=te(n,"a","squaredDifference"),i=te(t,"b","squaredDifference");e=yr(r,i),r=e[0],i=e[1],pn(r.shape,i.shape);var o={a:r,b:i},s=[r,i];return Se.runKernelFunc((function(a,u){var c=a.squaredDifference(r,i);return u([r,i]),c}),o,(function(a,u){var c=u[0],h=u[1],d=rt(2);return{a:function(){return a.mul(c.sub(h).mul(d))},b:function(){return a.mul(h.sub(c).mul(d))}}}),ld,{},s,[])}}),gT=ge({abs_:function(n){var t=te(n,"x","abs");return t.dtype==="complex64"?Se.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):Se.runKernelFunc((function(e,r){var i=e.abs(t);return r([t]),i}),{x:t},(function(e,r){var i=r[0];return{x:function(){return e.mul(i.toFloat().step(-1))}}}),"Abs")}}),yT=ge({acos_:function(n){var t=te(n,"x","acos");return Se.runKernelFunc((function(e,r){var i=e.acos(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.divStrict(rt(1).sub(i.toFloat().square()).sqrt()).neg()}}}))}}),xT=ge({acosh_:function(n){var t=te(n,"x","acosh");return Se.runKernelFunc((function(e,r){var i=e.acosh(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.divStrict(i.toFloat().square().sub(1).sqrt())}}}))}}),wT=ge({asin_:function(n){var t=te(n,"x","asin");return Se.runKernelFunc((function(e,r){var i=e.asin(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.divStrict(rt(1).sub(i.toFloat().square()).sqrt())}}}))}}),bT=ge({asinh_:function(n){var t=te(n,"x","asinh");return Se.runKernelFunc((function(e,r){var i=e.asinh(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.divStrict(rt(1).add(i.toFloat().square()).sqrt())}}}))}}),_T=ge({atan_:function(n){var t=te(n,"x","atan");return Se.runKernelFunc((function(e,r){var i=e.atan(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().square().add(1))}}}))}}),ST=ge({atanh_:function(n){var t=te(n,"x","atanh");return Se.runKernelFunc((function(e,r){var i=e.atanh(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.div(rt(1).sub(i.toFloat().square()))}}}))}}),CT=ge({ceil_:function(n){var t=te(n,"x","ceil");return Se.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return gn(e)}}}))}}),W1=ge({clipByValue_:function(n,t,e){var r=te(n,"x","clipByValue");ce(t<=e,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+e+")."}));var i=[r],o={min:t,max:e};return Se.runKernelFunc((function(s,a){var u=s.clip(r,t,e);return a([r]),u}),{x:r},(function(s,a){var u=a[0];return{x:function(){return s.where(u.greaterEqual(t).logicalAnd(u.lessEqual(e)),gn(s))}}}),"ClipByValue",o,i)}}),AT=ge({cos_:function(n){var t=te(n,"x","cos"),e=[t];return Se.runKernelFunc((function(r,i){var o=r.cos(t);return i([t]),o}),{x:t},(function(r,i){var o=i[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}}),"Cos",{},e)}}),kT=ge({cosh_:function(n){var t=te(n,"x","cosh");return Se.runKernelFunc((function(e,r){var i=e.cosh(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(e)}}}))}}),ET=ge({erf_:function(n){var t=te(n,"x","erf");return ce(t.dtype==="int32"||t.dtype==="float32",(function(){return"Input dtype must be `int32` or `float32`."})),t.dtype==="int32"&&(t=t.toFloat()),Se.runKernelFunc((function(e,r){var i=e.erf(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Ng=ge({exp_:function(n){var t=te(n,"x","exp");return Se.runKernelFunc((function(e,r){var i=e.exp(t);return r([i]),i}),{x:t},(function(e,r){return{x:function(){return e.mulStrict(r[0])}}}),"Exp",{},[],[!0])}}),NT=ge({expm1_:function(n){var t=te(n,"x","expm1");return Se.runKernelFunc((function(e,r){var i=e.expm1(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.mul(i.exp())}}}))}}),IT=ge({floor_:function(n){var t=te(n,"x","floor");return Se.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return gn(e)}}}))}}),PT=ge({log_:function(n){var t=te(n,"x","log"),e=[t];return Se.runKernelFunc((function(r,i){var o=r.log(t);return i([t]),o}),{x:t},(function(r,i){var o=i[0];return{x:function(){return r.div(o.toFloat())}}}),"Log",{},e)}}),RT=ge({log1p_:function(n){var t=te(n,"x","log1p");return Se.runKernelFunc((function(e,r){var i=e.log1p(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.div(i.add(1))}}}))}}),TT=ge({logSigmoid_:function(n){var t=te(n,"x","logSigmoid");return Se.runKernelFunc((function(e,r){var i=e.softplus(t.neg()).neg();return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.mul(i.neg().sigmoid())}}}))}}),yv=ge({neg_:function(n){var t=te(n,"x","neg"),e=[t];return Se.runKernelFunc((function(r){return r.neg(t)}),{x:t},(function(r){return{x:function(){return r.neg()}}}),"Neg",{},e)}}),LT=ge({reciprocal_:function(n){var t=te(n,"x","reciprocal");return Se.runKernelFunc((function(e,r){var i=e.reciprocal(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.div(i.square().neg())}}}))}}),DT=ge({round_:function(n){var t=te(n,"x","round");return Se.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return gn(e)}}}))}}),X4=ge({rsqrt_:function(n){var t=te(n,"x","rsqrt"),e=[t];return Se.runKernelFunc((function(r,i){var o=r.rsqrt(t);return i([t]),o}),{x:t},(function(r,i){var o=i[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},e)}}),Y4=ge({sigmoid_:function(n){var t=te(n,"x","sigmoid");return Se.runKernelFunc((function(e,r){var i=e.sigmoid(t);return r([i]),i}),{x:t},(function(e,r){var i=r[0];return{x:function(){return e.mul(i.mul(rt(1).sub(i)))}}}),"Sigmoid")}}),FT=ge({sign_:function(n){var t=te(n,"x","sign");return Se.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return gn(e)}}}))}}),MT=ge({isNaN_:function(n){var t=te(n,"x","isNaN");return Se.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return gn(e)}}}))}}),OT=ge({isInf_:function(n){var t=te(n,"x","isInf");return Se.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return gn(e)}}}))}}),BT=ge({isFinite_:function(n){var t=te(n,"x","isFinite");return Se.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return gn(e)}}}))}}),jT=ge({sin_:function(n){var t=te(n,"x","sin"),e=[t];return Se.runKernelFunc((function(r,i){var o=r.sin(t);return i([t]),o}),{x:t},(function(r,i){var o=i[0];return{x:function(){return o.toFloat().cos().mul(r)}}}),"Sin",{},e)}}),UT=ge({sinh_:function(n){var t=te(n,"x","sinh");return Se.runKernelFunc((function(e,r){var i=e.sinh(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(e)}}}))}}),zT=ge({softplus_:function(n){var t=te(n,"x","softplus");return Se.runKernelFunc((function(e,r){var i=e.softplus(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.mul(i.sigmoid())}}}))}}),VT=ge({sqrt_:function(n){var t=te(n,"x","sqrt");return Se.runKernelFunc((function(e,r){var i=e.sqrt(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().sqrt().mul(2))}}}))}}),WT=ge({step_:function(n,t){t===void 0&&(t=0);var e=te(n,"x","step");return Se.runKernelFunc((function(r){return r.step(e,t)}),{$x:e},(function(r){return{$x:function(){return gn(r)}}}))}}),qT=ge({tan_:function(n){var t=te(n,"x","tan");return Se.runKernelFunc((function(e,r){var i=e.tan(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return e.div(i.cos().square())}}}))}}),HT=ge({tanh_:function(n){var t=te(n,"x","tanh");return Se.runKernelFunc((function(e,r){var i=e.tanh(t);return r([i]),i}),{x:t},(function(e,r){var i=r[0];return{x:function(){return rt(1).sub(i.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}});function J4(n,t,e,r,i,o){var s,a,u=te(n,"x","batchNorm"),c=te(t,"mean","batchNorm"),h=te(e,"variance","batchNorm");return i!=null&&(s=te(i,"scale","batchNorm")),r!=null&&(a=te(r,"offset","batchNorm")),ce(u.rank===2,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),ce(c.rank===2||c.rank===1,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."})),ce(h.rank===2||h.rank===1,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+h.rank+"."})),s!=null&&ce(s.rank===2||s.rank===1,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."})),a!=null&&ce(a.rank===2||a.rank===1,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+a.rank+"."})),Cd(u,c,h,a,s,o)}function Q4(n,t,e,r,i,o){var s,a,u=te(n,"x","batchNorm"),c=te(t,"mean","batchNorm"),h=te(e,"variance","batchNorm");return i!=null&&(s=te(i,"scale","batchNorm")),r!=null&&(a=te(r,"offset","batchNorm")),ce(u.rank===3,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),ce(c.rank===3||c.rank===1,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."})),ce(h.rank===3||h.rank===1,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+h.rank+"."})),s!=null&&ce(s.rank===3||s.rank===1,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."})),a!=null&&ce(a.rank===3||a.rank===1,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+a.rank+"."})),Cd(u,c,h,a,s,o)}function Z4(n,t,e,r,i,o){var s,a,u=te(n,"x","batchNorm"),c=te(t,"mean","batchNorm"),h=te(e,"variance","batchNorm");return i!=null&&(s=te(i,"scale","batchNorm")),r!=null&&(a=te(r,"offset","batchNorm")),ce(u.rank===4,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),ce(c.rank===4||c.rank===1,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."})),ce(h.rank===4||h.rank===1,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+h.rank+"."})),s!=null&&ce(s.rank===4||s.rank===1,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."})),a!=null&&ce(a.rank===4||a.rank===1,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+a.rank+"."})),Cd(u,c,h,a,s,o)}function Cd(n,t,e,r,i,o){o==null&&(o=.001);var s,a,u,c=te(n,"x","batchNorm"),h=te(t,"mean","batchNorm"),d=te(e,"variance","batchNorm");i!=null&&(s=te(i,"scale","batchNorm")),r!=null&&(a=te(r,"offset","batchNorm")),ce(h.rank===d.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),ce(a==null||h.rank===a.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),ce(s==null||h.rank===s.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),u=c.rank===0||c.rank===1?c.as4D(1,1,1,c.size):c.rank===2?c.as4D(1,1,c.shape[0],c.shape[1]):c.rank===3?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var v=[c,h,d,s];return Se.runKernelFunc((function(p,y){var x=p.batchNormalization(u,Ap(h),Ap(d),o,Ap(s),Ap(a));return y([c,h,d,s]),x}),{x:c,mean:h,variance:d,scale:s,offset:a},(function(p,y){var x=y,w=x[0],_=x[1],E=x[2],I=x[3],C=I??rt(1),N=ri(_.shape,u.shape),O=[];if(_.rank===1){for(var U=0;U<u.shape.length-1;++U)O.push(u.shape[U]);O.push(1)}var M=w.sub(_),T=p.mul(C),j=X4(E.add(rt(o))),D=j.mul(j).mul(j).mul(rt(-.5));return{x:function(){return _.rank===1?p.mul(jf(j.as4D(1,1,1,_.shape[0]),O)).mul(C).reshape(w.shape):p.mul(j).mul(C).reshape(w.shape)},mean:function(){var B=j.mul(rt(-1)).mul(T);return _.rank===1&&(B=B.sum(N)),B.reshape(_.shape)},variance:function(){var B=D.mul(M).mul(T);return _.rank===1&&(B=B.sum(N)),B.reshape(_.shape)},scale:function(){var B=M.mul(j),X=p.mul(B);return _.rank===1&&(X=X.sum(N)),X.reshape(_.shape)},offset:function(){var B=p;return _.rank===1&&(B=B.sum(N)),B.reshape(_.shape)}}}),"BatchNormalization",{varianceEpsilon:o},v).reshape(c.shape)}function Ap(n){return n==null?null:n.rank===0?n.as1D():n.rank===1?n:n.rank===2?n.as4D(1,1,n.shape[0],n.shape[1]):n.rank===3?n.as4D(1,n.shape[0],n.shape[1],n.shape[2]):n}function Bv(){p4("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var GT=ge({batchNormalization2d_:function(n,t,e,r,i,o){return r===void 0&&(r=.001),Bv(),J4(n,t,e,o,i,r)}}),$T=ge({batchNormalization3d_:function(n,t,e,r,i,o){return r===void 0&&(r=.001),Bv(),Q4(n,t,e,o,i,r)}}),KT=ge({batchNormalization4d_:function(n,t,e,r,i,o){return r===void 0&&(r=.001),Bv(),Z4(n,t,e,o,i,r)}}),XT=ge({batchNormalization_:function(n,t,e,r,i,o){return r===void 0&&(r=.001),Bv(),Cd(n,t,e,o,i,r)}}),e_=ge({batchNorm_:Cd}),YT=ge({batchNorm2d_:J4}),JT=ge({batchNorm3d_:Q4}),QT=ge({batchNorm4d_:Z4}),jv=ge({logicalAnd_:function(n,t){var e=te(n,"a","logicalAnd","bool"),r=te(t,"b","logicalAnd","bool");return pn(e.shape,r.shape),Se.runKernelFunc((function(i){return i.logicalAnd(e,r)}),{a:e,b:r},null,"LogicalAnd")}}),ZT=ge({logicalNot_:function(n){var t=te(n,"x","logicalNot","bool");return Se.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),t_=ge({logicalOr_:function(n,t){var e=te(n,"a","logicalOr","bool"),r=te(t,"b","logicalOr","bool");return pn(e.shape,r.shape),Se.runKernelFunc((function(i){return i.logicalOr(e,r)}),{$a:e,$b:r})}}),eL=ge({logicalXor_:function(n,t){var e=te(n,"a","logicalXor","bool"),r=te(t,"b","logicalXor","bool");return pn(e.shape,r.shape),t_(n,t).logicalAnd(jv(n,t).logicalNot())}}),Rc=ge({where_:function(n,t,e){var r=te(t,"a","where"),i=te(e,"b","where"),o=te(n,"condition","where","bool");return Rn(r.shape,i.shape,"Error in where: "),o.rank===1?ce(o.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Rn(o.shape,i.shape,"Error in where: "),Se.runKernelFunc((function(s,a){var u=s.select(o,r,i);return a([o]),u}),{$condition:o,$a:r,$b:i},(function(s,a){var u=a[0];return{$condition:function(){return gn(u).toFloat()},$a:function(){return s.mul(u.cast(s.dtype))},$b:function(){return s.mul(u.logicalNot().cast(s.dtype))}}}))}}),n_=function(n){return xt(this,void 0,void 0,(function(){var t,e,r;return wt(this,(function(i){switch(i.label){case 0:return[4,(t=te(n,"condition","whereAsync","bool")).data()];case 1:return e=i.sent(),r=j1(t.shape,e),n!==t&&t.dispose(),[2,r]}}))}))},hn=ge({add_:function(n,t){var e,r=te(n,"a","add"),i=te(t,"b","add");e=yr(r,i),r=e[0],i=e[1];var o=pn(r.shape,i.shape);return Se.runKernelFunc((function(s){return s.add(r,i)}),{a:r,b:i},(function(s){return{a:function(){var a=s,u=ri(r.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},b:function(){var a=s,u=ri(i.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(i.shape)}}}),"Add")}}),tL=ge({addN_:function(n){ce(Array.isArray(n),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),ce(n.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+n.length}));var t=n.map((function(i,o){return te(i,"tensors"+o,"addN")})),e=t[0];t.forEach((function(i){if(i.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(i){if(!mi(i.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return Se.runKernelFunc((function(i){return i.addN(t)}),r,(function(i){var o={};return t.forEach((function(s,a){o[a]=function(){return i.clone()}})),o}),"AddN")}}),nL=ge({addStrict_:function(n,t){var e=te(n,"a","addStrict"),r=te(t,"b","addStrict");return Rn(e.shape,r.shape,"Error in addStrict: "),e.add(r)}}),rL=ge({atan2_:function(n,t){var e,r=te(n,"a","atan2"),i=te(t,"b","atan2");e=yr(r,i),r=e[0],i=e[1];var o=pn(r.shape,i.shape);return Se.runKernelFunc((function(s,a){var u=s.atan2(r,i);return a([r,i]),u}),{$a:r,$b:i},(function(s,a){var u=a[0],c=a[1];return{$a:function(){var h=hn(u.square(),c.square()),d=s.mul(c.div(h)),v=ri(u.shape,o);return v.length>0&&(d=d.sum(v)),d.reshape(u.shape)},$b:function(){var h=hn(u.square(),c.square()),d=yv(s.mul(u.div(h))),v=ri(c.shape,o);return v.length>0&&(d=d.sum(v)),d.reshape(c.shape)}}}))}}),Ya=ge({div_:function(n,t){var e,r=te(n,"a","div"),i=te(t,"b","div");if(e=yr(r,i),r=e[0],i=e[1],r.dtype==="int32"&&i.dtype==="int32")return r_(r,i);var o=pn(r.shape,i.shape);return Se.runKernelFunc((function(s,a){var u=s.realDivide(r,i);return a([r,i]),u}),{a:r,b:i},(function(s,a){var u=a[0],c=a[1];return{a:function(){var h=s.div(c.toFloat()),d=ri(u.shape,o);return d.length>0?h.sum(d).reshape(u.shape):h},b:function(){var h=s.mul(u.toFloat()),d=ri(c.shape,o);d.length>0&&(h=h.sum(d).reshape(c.shape));var v=c.square();return h.div(v.toFloat()).neg()}}}),"Div")}}),iL=ge({divNoNan_:function(n,t){var e,r=te(n,"a","div"),i=te(t,"b","div");r=(e=yr(r,i))[0],i=e[1];var o=Ya(r,i),s=gn(o),a=i.equal(s);return Rc(a,s,o)}}),oL=ge({divStrict_:function(n,t){var e=te(n,"a","div"),r=te(t,"b","div");return Rn(e.shape,r.shape,"Error in divideStrict: "),e.div(r)}}),r_=ge({floorDiv_:function(n,t){var e,r=te(n,"a","floorDiv"),i=te(t,"b","floorDiv");e=yr(r,i),r=e[0],i=e[1];var o=pn(r.shape,i.shape);return Se.runKernelFunc((function(s,a){var u=s.floorDiv(r,i);return a([r,i]),u}),{a:r,b:i},(function(s,a){var u=a[0],c=a[1];return{a:function(){var h=s.div(c.toFloat()),d=ri(u.shape,o);return d.length>0?h.sum(d).reshape(u.shape):h},b:function(){var h=s.mul(u.toFloat()),d=ri(c.shape,o);d.length>0&&(h=h.sum(d).reshape(c.shape));var v=c.square();return h.div(v.toFloat()).neg()}}}),"FloorDiv")}}),q1=ge({maximum_:function(n,t){var e,r=te(n,"a","maximum"),i=te(t,"b","maximum");return e=yr(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),pn(r.shape,i.shape),Se.runKernelFunc((function(o,s){var a=o.maximum(r,i);return s([r,i]),a}),{a:r,b:i},(function(o,s){var a=s[0],u=s[1];return{a:function(){return o.mul(a.greaterEqual(u).toFloat())},b:function(){return o.mul(a.less(u).toFloat())}}}),"Maximum")}}),aL=ge({maximumStrict_:function(n,t){var e=te(n,"a","maximumStrict"),r=te(t,"b","maximumStrict");return Rn(e.shape,r.shape,"Error in maximumStrict: "),e.maximum(r)}}),i_=ge({minimum_:function(n,t){var e,r=te(n,"a","minimum"),i=te(t,"b","minimum");return e=yr(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),pn(r.shape,i.shape),Se.runKernelFunc((function(o,s){var a=o.minimum(r,i);return s([r,i]),a}),{a:r,b:i},(function(o,s){var a=s[0],u=s[1];return{a:function(){return o.mul(a.lessEqual(u).toFloat())},b:function(){return o.mul(a.greater(u).toFloat())}}}),"Minimum")}}),sL=ge({minimumStrict_:function(n,t){var e=te(n,"a","minimumStrict"),r=te(t,"b","minimumStrict");return Rn(e.shape,r.shape,"Error in minimumStrict: "),e.minimum(r)}}),uL=ge({mod_:function(n,t){var e,r=te(n,"a","mod"),i=te(t,"b","mod");e=yr(r,i),r=e[0],i=e[1];var o=pn(r.shape,i.shape);return Se.runKernelFunc((function(s,a){var u=s.mod(r,i);return a([r,i]),u}),{$a:r,$b:i},(function(s,a){var u=a[0],c=a[1];return{$a:function(){var h=ri(u.shape,o);return h.length>0?s.sum(h).reshape(u.shape):s},$b:function(){var h=s.mul(u.div(c).floor().neg()),d=ri(c.shape,o);return d.length>0?h.sum(d).reshape(c.shape):h}}}))}}),lL=ge({modStrict_:function(n,t){var e=te(n,"a","modStrict"),r=te(t,"b","modStrict");return Rn(e.shape,r.shape,"Error in modStrict: "),e.mod(r)}}),Xi=ge({mul_:function(n,t){var e,r=te(n,"a","mul"),i=te(t,"b","mul");e=yr(r,i),r=e[0],i=e[1];var o=pn(r.shape,i.shape);return Se.runKernelFunc((function(s,a){var u=s.multiply(r,i);return a([r,i]),u}),{a:r,b:i},(function(s,a){var u=a[0],c=a[1];return{a:function(){var h=s.mul(c.toFloat()),d=ri(u.shape,o);return d.length>0?h.sum(d).reshape(u.shape):h},b:function(){var h=s.mul(u.toFloat()),d=ri(c.shape,o);return d.length>0?h.sum(d).reshape(c.shape):h}}}),"Mul")}}),cL=ge({mulStrict_:function(n,t){var e=te(n,"a","mul"),r=te(t,"b","mul");return Rn(e.shape,r.shape,"Error in multiplyStrict: "),e.mul(r)}}),xv=ge({pow_:function(n,t){var e,r=te(n,"base","pow"),i=te(t,"exp","pow");e=yr(r,i),r=e[0],i=e[1];var o=pn(r.shape,i.shape),s=[r,i];return Se.runKernelFunc((function(a,u){var c=a.pow(r,i);return u([r,i,c]),c}),{a:r,b:i},(function(a,u){var c=u[0],h=u[1],d=u[2];return{a:function(){var v=h.toFloat(),p=a.mul(v.mul(c.pow(v.sub(rt(1))))),y=ri(c.shape,o);return y.length>0&&(p=p.sum(y)),p.reshape(c.shape)},b:function(){var v=c.greater(0),p=c.log().where(v,gn(c)),y=a.mul(d.mul(p)),x=ri(h.shape,o);return x.length>0&&(y=y.sum(x)),y.reshape(h.shape)}}}),"Pow",{},s,[!0])}}),fL=ge({powStrict_:function(n,t){return Rn(n.shape,t.shape,"Error in powStrict: "),n.pow(t)}}),hL=ge({squaredDifferenceStrict_:function(n,t){var e=te(n,"a","squaredDifferenceStrict"),r=te(t,"b","squaredDifferenceStrict");return Rn(e.shape,r.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(r)}}),ii=ge({sub_:function(n,t){var e,r=te(n,"a","sub"),i=te(t,"b","sub");e=yr(r,i),r=e[0],i=e[1];var o=pn(r.shape,i.shape);return Se.runKernelFunc((function(s){return s.subtract(r,i)}),{a:r,b:i},(function(s){return{a:function(){var a=s,u=ri(r.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},b:function(){var a=s,u=ri(i.shape,o);return u.length>0&&(a=a.sum(u)),a.neg().reshape(i.shape)}}}),"Sub")}}),dL=ge({subStrict_:function(n,t){var e=te(n,"a","subStrict"),r=te(t,"b","subStrict");return Rn(e.shape,r.shape,"Error in subStrict: "),e.sub(r)}}),o_=ge({equal_:function(n,t){var e,r=te(n,"a","equal"),i=te(t,"b","equal");return e=yr(r,i),r=e[0],i=e[1],pn(r.shape,i.shape),Se.runKernelFunc((function(o){return o.equal(r,i)}),{$a:r,$b:i})}}),pL=ge({equalStrict_:function(n,t){var e=te(n,"a","equalStrict"),r=te(t,"b","equalStrict");return Rn(e.shape,r.shape,"Error in equalStrict: "),e.equal(r)}}),vL=ge({greater_:function(n,t){var e,r=te(n,"a","greater"),i=te(t,"b","greater");return e=yr(r,i),r=e[0],i=e[1],pn(r.shape,i.shape),Se.runKernelFunc((function(o){return o.greater(r,i)}),{a:r,b:i},null,"Greater")}}),a_=ge({greaterEqual_:function(n,t){var e,r=te(n,"a","greaterEqual"),i=te(t,"b","greaterEqual");return e=yr(r,i),r=e[0],i=e[1],pn(r.shape,i.shape),Se.runKernelFunc((function(o,s){var a=o.greaterEqual(r,i);return s([r,i]),a}),{a:r,b:i},(function(o,s){var a=s[0],u=s[1];return{a:function(){return gn(a)},b:function(){return gn(u)}}}),"GreaterEqual")}}),mL=ge({greaterEqualStrict_:function(n,t){var e=te(n,"a","greaterEqualStrict"),r=te(t,"b","greaterEqualStrict");return Rn(e.shape,r.shape,"Error in greaterEqualStrict: "),e.greaterEqual(r)}}),gL=ge({greaterStrict_:function(n,t){var e=te(n,"a","greaterStrict"),r=te(t,"b","greaterStrict");return Rn(e.shape,r.shape,"Error in greaterStrict: "),e.greater(r)}}),yL=ge({less_:function(n,t){var e,r=te(n,"a","less"),i=te(t,"b","less");return e=yr(r,i),r=e[0],i=e[1],pn(r.shape,i.shape),Se.runKernelFunc((function(o){return o.less(r,i)}),{a:r,b:i},null,"Less")}}),xL=ge({lessEqual_:function(n,t){var e,r=te(n,"a","lessEqual"),i=te(t,"b","lessEqual");return e=yr(r,i),r=e[0],i=e[1],pn(r.shape,i.shape),Se.runKernelFunc((function(o,s){var a=o.lessEqual(r,i);return s([r,i]),a}),{a:r,b:i},null,"LessEqual")}}),wL=ge({lessEqualStrict_:function(n,t){var e=te(n,"a","lessEqualStrict"),r=te(t,"b","lessEqualStrict");return Rn(e.shape,r.shape,"Error in lessEqualStrict: "),e.lessEqual(r)}}),bL=ge({lessStrict_:function(n,t){var e=te(n,"a","lessStrict"),r=te(t,"b","lessStrict");return Rn(e.shape,r.shape,"Error in lessStrict: "),e.less(r)}}),_L=ge({notEqual_:function(n,t){var e,r=te(n,"a","notEqual"),i=te(t,"b","notEqual");return e=yr(r,i),r=e[0],i=e[1],pn(r.shape,i.shape),Se.runKernelFunc((function(o){return o.notEqual(r,i)}),{a:r,b:i},null,"NotEqual")}}),SL=ge({notEqualStrict_:function(n,t){var e=te(n,"a","notEqualStrict"),r=te(t,"b","notEqualStrict");return Rn(e.shape,r.shape,"Error in notEqualStrict: "),e.notEqual(r)}});function jw(n,t){for(var e=[],r=n;r<t;++r)e.push(r);return e}function Uw(n){for(var t=[],e=0;e<n.length;++e)for(var r=0;r<n[e].length;++r)t.push(n[e][r]);return t}var H1=ge({gather_:function(n,t,e){e===void 0&&(e=0);var r=te(n,"x","gather"),i=te(t,"indices","gather","int32");e=oi(e,r.shape)[0];var o=(function(s,a,u){for(var c=s.shape[u],h=[],d=1,v=1,p=0;p<u;p++)h.push(s.shape[p]),d*=s.shape[p];for(p=0;p<a.rank;p++)h.push(a.shape[p]);for(p=u+1;p<s.rank;p++)h.push(s.shape[p]),v*=s.shape[p];return{batchSize:d,sliceSize:v,dimSize:c,outputShape:h}})(r,i,e);return Se.runKernelFunc((function(s,a){var u=s.gather(r,i.flatten(),e);return a([i]),u}),{x:r,indices:i},(function(s,a){var u=a[0];return{x:function(){var c=r.shape,h=u.size,d=c.slice(0,e),v=d.length,p=c.slice(e,c.length).slice(1),y=p.length,x=jw(0,v),w=jw(v+1,v+1+y),_=Uw([d,[h],p]),E=s.reshape(_),I=u.reshape([h]),C=Uw([[v],x,w]),N=E.transpose(C),O=s_(N,I,r.shape[e]),U=R1(C);return O=O.transpose(U)},indices:function(){return u}}}),"Gather",{axis:e}).reshape(o.outputShape)}}),s_=ge({unsortedSegmentSum_:function(n,t,e){var r=te(n,"x","unsortedSegmentSum"),i=te(t,"segmentIds","unsortedSegmentSum","int32");return ce(Ur(e),(function(){return"numSegments must be of dtype int"})),Se.runKernelFunc((function(o,s){var a=o.unsortedSegmentSum(r,i,e);return s([i]),a}),{$x:r},(function(o,s){var a=s[0];return{$x:function(){return(function(u,c){for(var h=q1(c,gn(c)),d=H1(u,h),v=a_(c,rt(0,"int32")),p=d.rank-v.rank,y=0;y<p;++y)v=Ca(v,y+1);v=jv(v,oh(d.shape,"bool"));var x=gn(d);return Rc(v,d,x)})(o,a)}}}))}}),CL=function(n,t,e){return xt(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,d,v,p,y,x;return wt(this,(function(w){switch(w.label){case 0:for(r=te(n,"tensor","boolMask"),i=te(t,"mask","boolMask","bool"),o=e??0,s=i.rank,a=r.shape,ce(s>0,(function(){return"mask cannot be scalar"})),Rn(a.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=o;c<o+s;c++)u*=a[c];return h=a.slice(0,o).concat([u],a.slice(o+s)),d=r.reshape(h),v=i.reshape([-1]),[4,n_(v)];case 1:return p=w.sent(),y=p.squeeze([1]),x=H1(d,y,o),n!==r&&r.dispose(),t!==i&&i.dispose(),y.dispose(),d.dispose(),v.dispose(),p.dispose(),[2,x]}}))}))};function u_(n,t,e,r,i,o,s){o===void 0&&(o="NHWC"),ce(n.length===t.rank,(function(){return"Length of inShape ("+n.length+") and rank of dy ("+t.rank+") must match"}));var a=n,u=t,c=!1;t.rank===3&&(c=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),a=[1,n[0],n[1],n[2]]),ce(a.length===4,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."})),ce(u.rank===4,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),ce(e.rank===4,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank}));var h=o==="NHWC"?a[3]:a[1],d=o==="NHWC"?u.shape[3]:u.shape[1];ce(h===e.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+h+") must match input depth for filter "+e.shape[2]+"."})),ce(d===e.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+e.shape[3]+"."})),s!=null&&ce(Ur(i),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."}));var v=M1(o),p=Bc(a,e.shape,r,1,i,s,!1,v),y=Se.runKernelFunc((function(x,w){var _=x.conv2dDerInput(u,e,p);return w([e,u]),_}),{dy4D:u,filter:e},(function(x,w){var _=w[0],E=w[1];return{dy4D:function(){return Na(x,_,r,i,o,1,s)},filter:function(){return G1(x,E,_.shape,r,i,o,s)}}}));return c?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}function x0(n){var t=(function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o})(n),e=t[0],r=t[1],i=t[2];return e===1&&r===1&&i===1}function l_(n,t,e,r,i){ce(n.length===t.rank,(function(){return"Length of inShape ("+n.length+") and rank of dy ("+t.rank+") must match"}));var o=n,s=t,a=!1;t.rank===4&&(a=!0,s=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),o=[1,n[0],n[1],n[2],n[3]]);var u=o[4],c=s.shape[4];ce(o.length===5,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."})),ce(s.rank===5,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+s.rank})),ce(e.rank===5,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank})),ce(u===e.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+e.shape[3]+"."})),ce(c===e.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+e.shape[4]+"."}));var h=mv(o,e.shape,r,1,i),d=Se.runKernelFunc((function(v){return v.conv3dDerInput(s,e,h)}),{dy5D:s});return a?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var AL=ge({conv1d_:function(n,t,e,r,i,o,s){i===void 0&&(i="NWC"),o===void 0&&(o=1);var a=te(n,"x","conv1d"),u=te(t,"filter","conv1d"),c=a,h=!1;a.rank===2&&(h=!0,c=a.as3D(1,a.shape[0],a.shape[1])),ce(c.rank===3,(function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."})),ce(u.rank===3,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),s!=null&&ce(Ur(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."})),ce(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),ce(Ro(e,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"})),ce(i==="NWC",(function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."}));var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),v=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),p=Na(v,d,[1,e],r,"NHWC",[1,o],s);return h?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),Na=ge({conv2d_:function(n,t,e,r,i,o,s){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var a=te(n,"x","conv2d"),u=te(t,"filter","conv2d"),c=a,h=!1;a.rank===3&&(h=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),ce(c.rank===4,(function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."})),ce(u.rank===4,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),s!=null&&ce(Ur(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."}));var d=i==="NHWC"?c.shape[3]:c.shape[1];ce(d===u.shape[2],(function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+u.shape[2]+"."})),ce(Ro(e,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}));var v=M1(i),p=Bc(c.shape,u.shape,e,o,r,s,!1,v),y=[u,c],x=Se.runKernelFunc((function(w,_){var E=w.conv2d(c,u,p);return _([u,c]),E}),{x:c,filter:u},(function(w,_){var E=_,I=E[0],C=E[1];return ce(th(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"})),{x:function(){return c_(C.shape,w,I,e,r,i)},filter:function(){return G1(C,w,I.shape,e,r,i)}}}),"Conv2D",p,y);return h?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),kL=ge({conv3d_:function(n,t,e,r,i,o){i===void 0&&(i="NDHWC"),o===void 0&&(o=[1,1,1]);var s=te(n,"x","conv3d"),a=te(t,"filter","conv3d"),u=s,c=!1;s.rank===4&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),ce(u.rank===5,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),ce(a.rank===5,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."})),ce(u.shape[4]===a.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+a.shape[3]+"."})),ce((function(v,p){return x0(v)||x0(p)})(e,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"})),ce(i==="NDHWC",(function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."}));var h=mv(u.shape,a.shape,e,o,r),d=Se.runKernelFunc((function(v,p){var y=v.conv3d(u,a,h);return p([u,a]),y}),{x:u,$filter:a},(function(v,p){ce(x0(o),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}));var y=p[0],x=p[1];return{x:function(){return l_(y.shape,v,x,e,r)},$filter:function(){return(function(w,_,E,I,C){var N=w;w.rank===4&&(N=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]));var O=_;O.rank===4&&(O=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),ce(N.rank===5,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+N.shape+"."})),ce(O.rank===5,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+O.shape+"."})),ce(E.length===5,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+E+"."})),ce(N.shape[4]===E[3],(function(){return"Error in conv3dDerFilter: depth of input "+N.shape[4]+") must match input depth in filter ("+E[3]+"."})),ce(O.shape[4]===E[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+O.shape[4]+") must match output depth for filter ("+E[4]+")."}));var U=mv(N.shape,E,I,1,C);return Se.runKernelFunc((function(M){return M.conv3dDerFilter(N,O,U)}),{x5D:N,dy5D:O})})(y,v,x.shape,e,r)}}}));return c?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),G1=ge({conv2dDerFilter_:function(n,t,e,r,i,o,s){o===void 0&&(o="NHWC");var a=n;n.rank===3&&(a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var u=t;u.rank===3&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ce(a.rank===4,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."})),ce(u.rank===4,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),ce(e.length===4,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."}));var c=o==="NHWC"?a.shape[3]:a.shape[1],h=o==="NHWC"?u.shape[3]:u.shape[1];ce(c===e[2],(function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+e[2]+"."})),ce(h===e[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+h+") must match output depth for filter ("+e[3]+")."})),s!=null&&ce(Ur(i),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."}));var d=M1(o),v=Bc(a.shape,e,r,1,i,s,!1,d);return Se.runKernelFunc((function(p){return p.conv2dDerFilter(a,u,v)}),{x4D:a,dy4D:u})}}),c_=ge({conv2dDerInput_:u_}),Uv=ge({depthwiseConv2d_:function(n,t,e,r,i,o,s){o===void 0&&(o=[1,1]);var a=te(n,"x","depthwiseConv2d"),u=te(t,"filter","depthwiseConv2d"),c=a,h=!1;a.rank===3&&(h=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),ce(c.rank===4,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."})),ce(u.rank===4,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),ce(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),o==null&&(o=[1,1]),ce(Ro(e,o),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"})),s!=null&&ce(Ur(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."}));var d=Bc(c.shape,u.shape,e,o,r,s,!0),v=[c,u],p=Se.runKernelFunc((function(y,x){var w=y.depthwiseConv2D(c,u,d);return x([c,u]),w}),{x:c,filter:u},(function(y,x){ce(th(o),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"}));var w=x[0],_=x[1];return{x:function(){return f_(w.shape,y,_,d)},filter:function(){return h_(w,y,_.shape,d)}}}),"DepthwiseConv2dNative",d,v);return h?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),f_=ge({depthwiseConv2dDerInput_:function(n,t,e,r){var i=t,o=!1;t.rank===3&&(o=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=Se.runKernelFunc((function(a){return a.depthwiseConv2DDerInput(i,e,r)}),{dy4D:i});return o?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),h_=ge({depthwiseConv2dDerFilter_:function(n,t,e,r){var i=n;n.rank===3&&(i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=t;return o.rank===3&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Se.runKernelFunc((function(s){return s.depthwiseConv2DDerFilter(i,o,r)}),{x4D:i,dy4D:o})}}),$1=ge({separableConv2d_:function(n,t,e,r,i,o,s){o===void 0&&(o=[1,1]),s===void 0&&(s="NHWC");var a=te(n,"x","separableConv2d"),u=te(t,"depthwiseFilter","separableConv2d"),c=te(e,"pointwiseFilter","separableConv2d"),h=a,d=!1;if(a.rank===3&&(d=!0,h=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ce(h.rank===4,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+h.rank+"."})),ce(u.rank===4,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),ce(c.rank===4,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),ce(c.shape[0]===1,(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."})),ce(c.shape[1]===1,(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."}));var v=u.shape[2],p=u.shape[3];ce(c.shape[2]===v*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+v*p+", but got "+c.shape[2]+"."}));var y=Uv(h,u,r,i,s,o),x=Na(y,c,1,"valid",s);return d?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),EL=ge({conv2dTranspose_:function(n,t,e,r,i,o){return u_(e,te(n,"x","conv2dTranspose"),te(t,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),NL=ge({conv3dTranspose_:function(n,t,e,r,i){return l_(e,te(n,"x","conv3dTranspose"),te(t,"filter","conv3dTranspose"),r,i)}}),zv=ge({matMul_:function(n,t,e,r){var i;e===void 0&&(e=!1),r===void 0&&(r=!1);var o=te(n,"a","matMul"),s=te(t,"b","matMul");i=yr(o,s),o=i[0],s=i[1];var a=e?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?s.shape[s.rank-1]:s.shape[s.rank-2],c=e?o.shape[o.rank-1]:o.shape[o.rank-2],h=r?s.shape[s.rank-2]:s.shape[s.rank-1],d=o.shape.slice(0,-2),v=s.shape.slice(0,-2),p=Ct(d),y=Ct(v);ce(o.rank>=2&&s.rank>=2&&o.rank===s.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+s.rank+"."})),ce(mi(d,v),(function(){return"Error in matMul: outer dimensions ("+d+") and ("+v+") of Tensors with shapes "+o.shape+" and "+s.shape+" must match."})),ce(a===u,(function(){return"Error in matMul: inner shapes ("+a+") and ("+u+") of Tensors with shapes "+o.shape+" and "+s.shape+" and transposeA="+e+" and transposeB="+r+" must match."}));var x=o.shape.slice(0,-2).concat([c,h]),w=e?o.as3D(p,a,c):o.as3D(p,c,a),_=r?s.as3D(y,h,u):s.as3D(y,u,h),E={transposeA:e,transposeB:r};return Se.runKernelFunc((function(I,C){var N=I.batchMatMul(w,_,e,r);return C([w,_]),N}),{a:w,b:_},(function(I,C){var N=C,O=N[0],U=N[1];return e||r?!e&&r?{a:function(){return I.matMul(U,!1,!1)},b:function(){return I.matMul(O,!0,!1)}}:e&&!r?{a:function(){return U.matMul(I,!1,!0)},b:function(){return O.matMul(I,!1,!1)}}:{a:function(){return U.matMul(I,!0,!0)},b:function(){return I.matMul(O,!0,!0)}}:{a:function(){return I.matMul(U,!1,!0)},b:function(){return O.matMul(I,!0,!1)}}}),"BatchMatMul",E).reshape(x)}}),IL=ge({dot_:function(n,t){var e=te(n,"t1","dot"),r=te(t,"t2","dot");ce(!(e.rank!==1&&e.rank!==2||r.rank!==1&&r.rank!==2),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+r.rank+"."}));var i=e.rank===1?e.size:e.shape[1],o=r.rank===1?r.size:r.shape[0];return ce(i===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."})),e.rank===1&&r.rank===1?e.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():e.rank===1&&r.rank===2?e.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():e.rank===2&&r.rank===1?e.matMul(r.as2D(-1,1)).as1D():e.matMul(r.as2D(r.shape[0],r.shape[1]))}}),PL=ge({outerProduct_:function(n,t){var e=te(n,"v1","outerProduct"),r=te(t,"v2","outerProduct");return ce(e.rank===1&&r.rank===1,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+r.rank+"."})),e.as2D(-1,1).matMul(r.as2D(1,-1))}}),Ad=ge({reverse_:function(n,t){var e=te(n,"x","reverse");if(e.rank===0)return e.clone();var r=oi(t,e.shape);return Se.runKernelFunc((function(i){return i.reverse(e,r)}),{$x:e},(function(i){return{$x:function(){return i.reverse(r)}}})).reshapeAs(e)}}),RL=ge({reverse1d_:function(n){var t=te(n,"x","reverse");return ce(t.rank===1,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),Ad(t,0)}}),TL=ge({reverse2d_:function(n,t){var e=te(n,"x","reverse");return ce(e.rank===2,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."})),Ad(e,t)}}),LL=ge({reverse3d_:function(n,t){var e=te(n,"x","reverse");return ce(e.rank===3,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."})),Ad(e,t)}}),DL=ge({reverse4d_:function(n,t){var e=te(n,"x","reverse");return ce(e.rank===4,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."})),Ad(e,t)}});function d_(n,t,e,r,i,o){var s=te(n,"x","maxPool"),a=s,u=!1;s.rank===3&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),ce(a.rank===4,(function(){return"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."})),ce(Ro(e,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"})),o!=null&&ce(Ur(i),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var c=ud(a.shape,t,e,r,i,o);if(c.filterWidth===1&&c.filterHeight===1&&mi(c.inShape,c.outShape))return s.clone();var h=[a],d=Se.runKernelFunc((function(v,p){var y=v.maxPool(a,c);return p([a,y]),y}),{x:a},(function(v,p){var y=p[0],x=p[1];return{x:function(){return(function(w,_,E,I,C,N,O,U){var M=te(w,"dy","maxPoolBackprop"),T=te(_,"input","maxPoolBackprop"),j=te(E,"output","maxPoolBackprop");ce(T.rank===M.rank,(function(){return"Rank of input ("+T.rank+") does not match rank of dy ("+M.rank+")"})),ce(Ro(C,N),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+C+" and dilations '"+N+"'"})),ce(M.rank===4,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+M.rank+"."})),ce(T.rank===4,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+T.rank+"."}));var D=ud(T.shape,I,C,N,O,U);return Se.runKernelFunc((function(B){return B.maxPoolBackprop(M,T,j,D)}),{$dy:M,$input:T})})(v,y,x,t,e,r,i)}}}),"MaxPool",c,h);return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function p_(n,t,e,r,i,o){var s=te(n,"x","avgPool","float32");ce(Ro(e,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"}));var a=s,u=!1;s.rank===3&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),ce(a.rank===4,(function(){return"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."})),o!=null&&ce(Ur(i),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var c=ud(a.shape,t,e,r,i,o);if(c.filterWidth===1&&c.filterHeight===1&&mi(c.inShape,c.outShape))return s.clone();var h=Se.runKernelFunc((function(d){return d.avgPool(a,c)}),{x:a},(function(d){return{x:function(){return(function(v,p,y,x,w,_){var E=te(v,"dy","avgPoolBackprop"),I=te(p,"input","avgPoolBackprop");ce(I.rank===E.rank,(function(){return"Rank of input ("+I.rank+") does not match rank of dy ("+E.rank+")"})),ce(Ro(x,w),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+w+"'"}));var C=I,N=E,O=!1;I.rank===3&&(O=!0,C=I.as4D(1,I.shape[0],I.shape[1],I.shape[2]),N=E.as4D(1,E.shape[0],E.shape[1],E.shape[2])),ce(N.rank===4,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+N.rank+"."})),ce(C.rank===4,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+C.rank+"."}));var U=ud(C.shape,y,x,w,_),M=Se.runKernelFunc((function(T){return T.avgPoolBackprop(N,C,U)}),{dy4D:N,input4D:C});return O?M.as3D(M.shape[1],M.shape[2],M.shape[3]):M})(d,a,t,e,r,i)}}}),"AvgPool",c);return h=h.cast(s.dtype),u?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}var pi=ge({maxPool_:function(n,t,e,r,i){return d_(n,t,e,1,r,i)}}),kd=ge({avgPool_:function(n,t,e,r,i){return p_(n,t,e,1,r,i)}}),FL=ge({pool_:function(n,t,e,r,i,o){i==null&&(i=[1,1]),o==null&&(o=1),r===0&&(r="valid");var s=te(n,"x","maxPool"),a=s,u=!1;s.rank===3&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),ce(Ro(o,i),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"}));var c,h=ud(a.shape,t,o,i,r),d=[h.dilationHeight,h.dilationWidth];c=r==="same"?(function(C,N){var O=C.map((function(T,j){return T+(T-1)*(N[j]-1)})).map((function(T){return T-1})),U=O.map((function(T){return Math.floor(T/2)})),M=O.map((function(T,j){return T-U[j]}));return O.map((function(T,j){return[U[j],M[j]]}))})([h.filterHeight,h.filterWidth],d):[[0,0],[0,0]];var v=d[0]===1&&d[1]===1,p=(function(C,N,O){var U=O.map((function(G){return G[0]})),M=O.map((function(G){return G[1]})),T=C.concat(U,M),j=N.map((function(G,oe){return(G-T[oe]%G)%G})),D=M.map((function(G,oe){return G+j[oe]})),B=N.map((function(G,oe){return[U[oe],D[oe]]})),X=N.map((function(G,oe){return[0,j[oe]]}));return[B,X]})([h.inHeight,h.inWidth],d,c),y=p[0],x=p[1],w=v?r:"valid",_=v?a:w4(a,d,y),E=(e==="avg"?function(){return p_(_,t,o,1,w)}:function(){return d_(_,t,o,1,w)})(),I=v?E:g4(E,d,x);return u?I.as3D(I.shape[1],I.shape[2],I.shape[3]):I}}),ML=ge({maxPool3d_:function(n,t,e,r,i,o,s){o===void 0&&(o="NDHWC");var a=te(n,"x","maxPool3d"),u=a,c=!1;a.rank===4&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),s==null&&(s=[1,1,1]),ce(u.rank===5,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),ce(o==="NDHWC",(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),ce(Ro(e,s),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"})),i!=null&&ce(Ur(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var h=vv(u.shape,t,e,s,r,i,o),d=Se.runKernelFunc((function(v,p){var y=v.maxPool3d(u,h);return p([u,y]),y}),{x:u},(function(v,p){var y=p[0],x=p[1];return{x:function(){return(function(w,_,E,I,C,N,O,U){var M=te(w,"dy","maxPool3dBackprop"),T=te(_,"input","maxPool3dBackprop"),j=te(E,"output","maxPool3dBackprop"),D=M,B=T,X=j,G=!1;T.rank===4&&(G=!0,D=M.as5D(1,M.shape[0],M.shape[1],M.shape[2],M.shape[3]),B=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3]),X=j.as5D(1,j.shape[0],j.shape[1],j.shape[2],j.shape[3])),ce(D.rank===5,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+D.rank+"."})),ce(B.rank===5,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+B.rank+"."})),ce(X.rank===5,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+X.rank+"."})),N==null&&(N=[1,1,1]),ce(Ro(C,N),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+C+" and dilations '"+N+"'"})),U!=null&&ce(Ur(O),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+U+" but got pad "+O+"."}));var oe=vv(B.shape,I,C,N,O,U),he=Se.runKernelFunc((function(ae){return ae.maxPool3dBackprop(D,B,X,oe)}),{dy5D:D,input5D:B});return G?he.as4D(he.shape[1],he.shape[2],he.shape[3],he.shape[4]):he})(v,y,x,t,e,s,r,i)}}}));return c?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),OL=ge({avgPool3d_:function(n,t,e,r,i,o,s){o===void 0&&(o="NDHWC");var a=te(n,"x","avgPool3d","float32"),u=a,c=!1;a.rank===4&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),s==null&&(s=[1,1,1]),ce(u.rank===5,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),ce(o==="NDHWC",(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),ce(Ro(e,s),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"})),i!=null&&ce(Ur(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var h=vv(u.shape,t,e,s,r,i,o),d=Se.runKernelFunc((function(v){return v.avgPool3d(u,h)}),{x:u},(function(v){return{x:function(){return(function(p,y,x,w,_,E,I){var C=te(p,"dy","avgPool3dBackprop"),N=te(y,"input","avgPool3dBackprop"),O=C,U=N,M=!1;N.rank===4&&(M=!0,O=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3]),U=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3])),ce(O.rank===5,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+O.rank+"."})),ce(U.rank===5,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+U.rank+"."})),_==null&&(_=[1,1,1]),ce(Ro(w,_),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+_+"'"})),I!=null&&ce(Ur(E),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+I+" but got pad "+E+"."}));var T=vv(U.shape,x,w,_,E,I),j=Se.runKernelFunc((function(D){return D.avgPool3dBackprop(O,U,T)}),{dy5D:O,input5D:U});return M?j.as4D(j.shape[1],j.shape[2],j.shape[3],j.shape[4]):j})(v,u,t,e,s,r,i)}}}));return d=d.cast(u.dtype),c?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),js=ge({slice_:function(n,t,e){var r,i,o=te(n,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof t=="number"?[t].concat(new Array(o.rank-1).fill(0)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(0)):t.slice()).forEach((function(u){ce(u!==-1,(function(){return"slice() does not support negative begin indexing."}))})),i=(i=e==null?new Array(o.rank).fill(-1):typeof e=="number"?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map((function(u,c){return u>=0?u:(ce(u===-1,(function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+c+"."})),o.shape[c]-r[c])})),fP(o,r,i);var s=o.shape,a={begin:r,size:i};return Se.runKernelFunc((function(u){return u.slice(o,r,i)}),{x:o},(function(u){for(var c=[],h=0;h<u.rank;h++)c.push([r[h],s[h]-r[h]-i[h]]);return{x:function(){return u.pad(c)}}}),"Slice",a)}}),BL=ge({slice1d_:function(n,t,e){var r=te(n,"x","slice1d");return ce(r.rank===1,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),js(r,[t],[e])}}),jL=ge({slice2d_:function(n,t,e){var r=te(n,"x","slice2d");return ce(r.rank===2,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),js(r,t,e)}}),v_=ge({slice3d_:function(n,t,e){var r=te(n,"x","slice3d");return ce(r.rank===3,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),js(r,t,e)}}),UL=ge({slice4d_:function(n,t,e){var r=te(n,"x","slice4d");return ce(r.rank===4,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),js(r,t,e)}});function m_(n,t,e,r,i){return t.rank<e.rank&&(t=t.reshape(Po(t.shape,r))),n.rank<e.rank&&(n=n.reshape(Po(n.shape,r))),{x:function(){var o=n.mul(e.equal(t).cast(n.dtype));return i==null?o:o.transpose(i)}}}var zL=ge({all_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=te(n,"x","all","bool"),i=oi(t,r.shape),o=i,s=Vs(o,r.rank);s!=null&&(r=r.transpose(s),o=Ws(o.length,r.rank));var a=Se.runKernelFunc((function(c){return c.all(r,o)}),{$x:r});if(e){var u=Po(a.shape,i);return a.reshape(u)}return a}}),VL=ge({any_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=te(n,"x","any","bool"),i=oi(t,r.shape),o=i,s=Vs(o,r.rank);s!=null&&(r=r.transpose(s),o=Ws(o.length,r.rank));var a=Se.runKernelFunc((function(c){return c.any(r,o)}),{$x:r});if(e){var u=Po(a.shape,i);return a.reshape(u)}return a}}),WL=ge({argMax_:function(n,t){t===void 0&&(t=0);var e=te(n,"x","argMax");t==null&&(t=0);var r=oi(t,e.shape),i=Vs(r,e.rank);i!=null&&(e=e.transpose(i),r=Ws(r.length,e.rank));var o={axis:r[0]},s=[e];return Se.runKernelFunc((function(a,u){var c=a.argMax(e,r[0]);return u([e]),c}),{x:e},(function(a,u){var c=u[0];return{x:function(){return gn(c)}}}),"ArgMax",o,s)}}),qL=ge({argMin_:function(n,t){t===void 0&&(t=0);var e=te(n,"x","argMin");t==null&&(t=0);var r=oi(t,e.shape),i=Vs(r,e.rank);return i!=null&&(e=e.transpose(i),r=Ws(r.length,e.rank)),Se.runKernelFunc((function(o,s){var a=o.argMin(e,r[0]);return s([e]),a}),{$x:e},(function(o,s){var a=s[0];return{$x:function(){return gn(a)}}}))}}),HL=ge({logSumExp_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=te(n,"x","logSumExp"),i=oi(t,r.shape),o=r.max(i,!0),s=r.sub(o).exp().sum(i).log(),a=o.reshape(s.shape).add(s);if(e){var u=Po(a.shape,i);return a.reshape(u)}return a}}),Vv=ge({max_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=te(n,"x","max"),i=r,o=oi(t,r.shape),s=o,a=Vs(s,r.rank);a!=null&&(r=r.transpose(a),s=Ws(s.length,r.rank));var u=[r],c=Se.runKernelFunc((function(d,v){var p=d.max(r,s);return v([i,p]),p}),{x:r},(function(d,v){return m_(d,v[1],v[0],o,a)}),"Max",{axes:s},u,[!0]);if(e){var h=Po(c.shape,o);c=c.reshape(h)}return c}}),GL=ge({mean_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=te(n,"x","mean"),i=oi(t,r.shape),o=Ct(qi(r.shape,i)[1]);return Ov((function(s){var a=rt(o);return{value:(a.dtype===s.dtype?s:s.cast(a.dtype)).div(a).sum(t,e),gradFunc:function(u){var c=s.shape.slice();return i.forEach((function(h){c[h]=1})),u.reshape(c).mul(oh(s.shape,"float32")).div(o)}}}))(r)}}),$L=ge({min_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=te(n,"x","min"),i=r,o=oi(t,r.shape),s=o,a=Vs(s,r.rank);a!=null&&(r=r.transpose(a),s=Ws(s.length,r.rank));var u=[r],c=Se.runKernelFunc((function(d,v){var p=d.min(r,s);return v([i,p]),p}),{x:r},(function(d,v){return m_(d,v[1],v[0],o,a)}),"Min",{axes:s},u,[!0]);if(e){var h=Po(c.shape,o);c=c.reshape(h)}return c}}),KL=ge({moments_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=oi(t,(n=te(n,"x","moments")).shape),i=n.mean(r,e),o=i.shape;e||(o=Po(i.shape,r));var s=n.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:s.mean(r,e)}}}),g_=ge({sum_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=te(n,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=oi(t,r.shape);return Ov((function(o){var s=Vs(i,o.rank),a=i,u=o;s!=null&&(u=o.transpose(s),a=Ws(a.length,o.rank));var c=function(p){var y=o.shape.slice();return i.forEach((function(x){y[x]=1})),p.reshape(y).mul(oh(o.shape,"float32"))},h={axes:a},d=Se.runKernelFunc((function(p){return p.sum(u,a)}),{x:u},(function(p){return{x:function(){return c(p)}}}),"Sum",h);if(e){var v=Po(d.shape,i);d=d.reshape(v)}return{value:d,gradFunc:c}}))(r)}}),XL=ge({prod_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=te(n,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=oi(t,r.shape),o=Vs(i,r.rank),s=i,a=r;o!=null&&(a=r.transpose(o),s=Ws(s.length,r.rank));var u=Se.runKernelFunc((function(h){return h.prod(a,s)}),{permutedX:a});if(e){var c=Po(u.shape,i);u=u.reshape(c)}return u}}),y_=ge({elu_:function(n){var t=te(n,"x","elu");return Se.runKernelFunc((function(e,r){var i=e.elu(t);return r([i]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){return Se.runKernelFunc((function(o){return o.eluDer(e,i)}),{dy:e,y:i})}}}))}}),YL=ge({leakyRelu_:function(n,t){t===void 0&&(t=.2);var e=te(n,"x","leakyRelu");return q1(rt(t).mul(e),e)}}),x_=ge({prelu_:function(n,t){var e=te(n,"x","prelu"),r=te(t,"alpha","prelu");return Se.runKernelFunc((function(i,o){var s=i.prelu(e,r);return o([e,r]),s}),{x:e,alpha:r},(function(i,o){var s=o[0],a=o[1],u=s.greater(0);return{x:function(){return Rc(u,i,i.mul(a))},alpha:function(){var c=Rc(u,gn(i),i.mul(s)),h=ri(a.shape,i.shape);return h.length>0&&(c=c.sum(h)),c.reshape(a.shape)}}}),"Prelu")}}),gr=ge({relu_:function(n){var t=te(n,"x","relu");return t.dtype==="bool"?t.toInt():Se.runKernelFunc((function(e,r){var i=e.relu(t);return r([t]),i}),{x:t},(function(e,r){var i=r[0];return{x:function(){return e.mulStrict(i.step().toFloat())}}}),"Relu")}}),w_=ge({relu6_:function(n){var t=te(n,"x","relu6");return t.dtype==="bool"?t.toInt():Se.runKernelFunc((function(e,r){var i=e.relu6(t);return r([t]),i}),{x:t},(function(e,r){var i=r[0],o=i.lessEqual(6).mul(i.step());return{x:function(){return e.mulStrict(o.toFloat())}}}),"Relu6")}}),JL=ge({selu_:function(n){var t=te(n,"x","selu");return Se.runKernelFunc((function(e,r){var i=e.selu(t);return r([t]),i}),{$x:t},(function(e,r){var i=r[0];return{$x:function(){var o=i.greater(rt(0)),s=rt(z1),a=rt(V1),u=e.mul(a),c=e.mul(s).mul(i.toFloat().exp());return Rc(o,u,c)}}}))}}),Dl=ge({transpose_:function(n,t){var e=te(n,"x","transpose");if(t==null&&(t=e.shape.map((function(i,o){return o})).reverse()),ce(e.rank===t.length,(function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+t+"."})),t.forEach((function(i){ce(i>=0&&i<e.rank,(function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+t}))})),e.rank<=1)return e.clone();var r={perm:t};return Se.runKernelFunc((function(i){return i.transpose(e,t)}),{x:e},(function(i){var o=R1(t);return{x:function(){return i.transpose(o)}}}),"Transpose",r)}}),QL=ge({localResponseNormalization_:function(n,t,e,r,i){t===void 0&&(t=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5);var o=te(n,"x","localResponseNormalization");ce(o.rank===4||o.rank===3,(function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."})),ce(Ur(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var s=o,a=!1;o.rank===3&&(a=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=Se.runKernelFunc((function(c,h){var d=c.localResponseNormalization4D(s,t,e,r,i);return h([s,d]),d}),{x4D:s},(function(c,h){var d=h[0],v=h[1];return{x4D:function(){return Se.runKernelFunc((function(p){return p.LRNGrad(c,d,v,t,e,r,i)}),{})}}}));return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),b_=ge({norm_:function(n,t,e,r){t===void 0&&(t="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1);var i=(function a(u,c,h){if(h===void 0&&(h=null),u.rank===0)return u.abs();if(u.rank!==1&&h===null)return a(u.reshape([-1]),c,h);if(u.rank===1||typeof h=="number"||Array.isArray(h)&&h.length===1){if(c===1)return u.abs().sum(h);if(c===1/0)return u.abs().max(h);if(c===-1/0)return u.abs().min(h);if(c==="euclidean"||c===2)return u.abs().pow(rt(2,"int32")).sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}if(Array.isArray(h)&&h.length===2){if(c===1)return u.abs().sum(h[0]).max(h[1]-1);if(c===1/0)return u.abs().sum(h[1]).max(h[0]);if(c===-1/0)return u.abs().sum(h[1]).min(h[0]);if(c==="fro"||c==="euclidean")return u.square().sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}throw new Error("Error in norm: invalid axis: "+h)})(n=te(n,"x","norm"),t,e),o=i.shape;if(r){var s=oi(e,n.shape);o=Po(i.shape,s)}return i.reshape(o)}}),ZL=ge({basicLSTMCell_:function(n,t,e,r,i,o){var s=te(n,"forgetBias","basicLSTMCell"),a=te(t,"lstmKernel","basicLSTMCell"),u=te(e,"lstmBias","basicLSTMCell"),c=te(r,"data","basicLSTMCell"),h=te(i,"c","basicLSTMCell"),d=te(o,"h","basicLSTMCell"),v=c.concat(d,1).matMul(a).add(u),p=v.shape[0],y=v.shape[1]/4,x=[p,y],w=v.slice([0,0],x),_=v.slice([0,y],x),E=v.slice([0,2*y],x),I=v.slice([0,3*y],x),C=w.sigmoid().mulStrict(_.tanh()).addStrict(h.mulStrict(s.add(E).sigmoid())),N=C.tanh().mulStrict(I.sigmoid());return[C,N]}}),eD=ge({multiRNNCell_:function(n,t,e,r){for(var i=te(t,"data","multiRNNCell"),o=lv(e,"c","multiRNNCell"),s=lv(r,"h","multiRNNCell"),a=i,u=[],c=0;c<n.length;c++){var h=n[c](a,o[c],s[c]);u.push(h[0]),u.push(h[1]),a=h[1]}var d=[],v=[];for(c=0;c<u.length;c+=2)d.push(u[c]),v.push(u[c+1]);return[d,v]}}),tD=ge({movingAverage_:function(n,t,e,r,i){i===void 0&&(i=!0);var o=te(n,"v","movingAverage"),s=te(t,"x","movingAverage"),a=te(e,"decay","movingAverage");QI(o,s),ce(mi(o.shape,s.shape),(function(){return"Shape mismatch in v and x"}));var u=rt(1),c=u.sub(a),h=s.sub(o).mul(c);if(i){ce(r!=null,(function(){return"When using zeroDebias: true, step is required."}));var d=te(r,"step","movingAverage");h=h.div(u.sub(xv(a,d)))}return o.add(h)}}),nD=ge({stridedSlice_:function(n,t,e,r,i,o,s,a,u){if(i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u=0),r==null&&(r=new Array(t.length)),s!==0)throw new Error("ellipsis mask is not yet supported");var c=te(n,"x","stridedSlice"),h=xw(a),d=c.shape.slice();h.forEach((function(w){t[w]=0,e[w]=1,d.splice(w,0,1)})),c=c.reshape(d);for(var v=0;v<c.rank;v++)t[v]=hP(i,t,r,c.shape,v),e[v]=dP(o,e,r,c.shape,v),r[v]=r[v]||1;var p=xw(u);p.forEach((function(w){e[w]=t[w]+1,r[w]=1}));var y=F1(t,e,r),x=y.filter((function(w,_){return p.indexOf(_)===-1}));return r.every((function(w){return w===1}))?js(c,t,y).reshape(x):Se.runKernelFunc((function(w){return w.stridedSlice(c,t,e,r)}),{$x:c}).reshape(x)}}),rD=ge({topk_:function(n,t,e){t===void 0&&(t=1),e===void 0&&(e=!0);var r=te(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+t);var o=Se.runKernelFunc((function(s){return s.topk(r,t,e)}),{$x:r});return{values:o[0],indices:o[1]}}}),iD=ge({scatterND_:function(n,t,e){var r=te(n,"indices","scatterND","int32"),i=te(t,"updates","scatterND");return cP(i,r,e),Se.runKernelFunc((function(o){return o.scatterND(r,i,e)}),{indices:r,updates:i},null,"ScatterNd",{shape:e})}}),K1=ge({fft_:function(n){ce(n.dtype==="complex64",(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+n.dtype+"."}));var t=n.shape[n.shape.length-1],e=n.size/t,r=n.as2D(e,t);return Se.runKernelFunc((function(i){return i.fft(r)}),{input:n}).reshape(n.shape)}}),wv=ge({ifft_:function(n){ce(n.dtype==="complex64",(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+n.dtype+"."}));var t=n.shape[n.shape.length-1],e=n.size/t,r=n.as2D(e,t);return Se.runKernelFunc((function(i){return i.ifft(r)}),{input:n}).reshape(n.shape)}}),X1=ge({rfft_:function(n,t){ce(n.dtype==="float32",(function(){return"The dtype for rfft() must be real value but got "+n.dtype}));var e,r=n.shape[n.shape.length-1],i=n.size/r;if(t!=null&&t<r){var o=n.shape.map((function(_){return 0})),s=n.shape.map((function(_){return _}));s[n.shape.length-1]=t,e=n.slice(o,s),r=t}else if(t!=null&&t>r){var a=n.shape.map((function(_){return _}));a[n.shape.length-1]=t-r,e=n.concat(Qn(a),n.shape.length-1),r=t}else e=n;var u=e.zerosLike(),c=Ci(e,u).as2D(i,r),h=K1(c),d=Math.floor(r/2)+1,v=Aa(h),p=Rs(h),y=v.split([d,r-d],v.shape.length-1),x=p.split([d,r-d],p.shape.length-1),w=e.shape.slice();return w[e.shape.length-1]=d,Ci(y[0],x[0]).reshape(w)}}),__=ge({irfft_:function(n){var t=n.shape[n.shape.length-1],e=n.size/t;if(t<=2){var r=n.as2D(e,t),i=wv(r);return Aa(i)}var o=[e,2*(t-1)],s=Aa(n).as2D(e,t),a=Rs(n).as2D(e,t),u=s.slice([0,1],[e,t-2]).reverse(1),c=a.slice([0,1],[e,t-2]).reverse(1).mul(rt(-1)),h=s.concat(u,1),d=a.concat(c,1);return r=Ci(h,d).as2D(o[0],o[1]),i=wv(r),Aa(i)}}),oD=Object.freeze({fft:K1,ifft:wv,rfft:X1,irfft:__}),aD=ge({sparseToDense_:function(n,t,e,r){r===void 0&&(r=0);var i=te(n,"sparseIndices","sparseToDense","int32"),o=te(t,"sparseValues","sparseToDense"),s=te(r,"defaultValue","sparseToDense",o.dtype);return(function(a,u,c,h){if(a.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+a.dtype+".");if(a.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+a.shape+".");var d=a.rank>0?a.shape[0]:1,v=a.rank>1?a.shape[1]:1;if(c.length!==v)throw new Error("outputShape has incorrect number of elements:, "+c.length+", should be: "+v+".");var p=u.size;if(u.rank!==0&&(u.rank!==1||p!==d))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+d+"]");if(u.dtype!==h.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")})(i,o,e,s),Se.runKernelFunc((function(a){return a.sparseToDense(i,o,e,s)}),{$sparseIndices:i,$sparseValues:o,$defaultValue:s})}}),sD=ge({gatherND_:function(n,t){var e=te(t,"indices","gatherND","int32"),r=te(n,"x","gatherND");return Se.runKernelFunc((function(i){return i.gatherND(r,e)}),{x:r,indices:e},null,"GatherNd")}}),uD=ge({diag_:function(n){var t=te(n,"x","diag").flatten(),e=n.shape.concat(n.shape);return Se.runKernelFunc((function(r){return r.diag(t)}),{$x:t}).reshape(e)}}),lD=ge({dropout_:function(n,t,e,r){var i=te(n,"x","dropout");if(ce(i.dtype==="float32",(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."})),ce(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),t===0)return n instanceof vr?i.clone():i;var o=(function(u,c){if(c==null)return u.shape.slice();if(mi(u.shape,c))return c;if(u.shape.length===c.length){for(var h=[],d=0;d<u.shape.length;d++)c[d]==null&&u.shape[d]!=null?h.push(u.shape[d]):h.push(c[d]);return h}return c})(i,e),s=1-t,a=x4(o,0,1,"float32",r).add(s).floor().div(s);return i.mul(a)}});function S_(n,t,e){for(var r=1-n%2,i=new Float32Array(n),o=0;o<n;++o){var s=2*Math.PI*o/(n+r-1);i[o]=t-e*Math.cos(s)}return Hr(i,"float32")}var Y1=ge({hannWindow_:function(n){return S_(n,.5,.5)}}),C_=ge({hammingWindow_:function(n){return S_(n,.54,.46)}}),J1=ge({frame_:function(n,t,e,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var o=0,s=[];o+t<=n.size;)s.push(js(n,o,t)),o+=e;if(r)for(;o<n.size;){var a=o+t-n.size,u=ti([js(n,o,t-a),Bs([a],i)]);s.push(u),o+=e}return s.length===0?Il([],[0,t]):ti(s).as2D(s.length,t)}}),A_=ge({stft_:function(n,t,e,r,i){var o;i===void 0&&(i=Y1),r==null&&(o=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var s=J1(n,t,e),a=Xi(s,i(t)),u=[],c=0;c<s.shape[0];c++)u.push(X1(a.slice([c,0],[1,t]),r));return ti(u)}}),cD=Object.freeze({hannWindow:Y1,hammingWindow:C_,frame:J1,stft:A_}),$i,fD=function(n,t,e){return e===void 0&&(e=1),xt(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,d,v,p,y,x,w;return wt(this,(function(_){switch(_.label){case 0:return r=te(n,"predictions","inTopK"),i=te(t,"targets","inTopK"),ce(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),ce(r.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank})),Rn(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],ce(e>0&&e<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e})),[4,r.data()];case 1:return s=_.sent(),[4,i.data()];case 2:for(a=_.sent(),u=[s.length/o,o],h=u[1],d=od("bool",c=u[0]),v=0;v<c;v++){for(p=v*h,y=s.subarray(p,p+h),x=[],w=0;w<y.length;w++)x.push({value:y[w],index:w});for(x.sort((function(E,I){return I.value-E.value})),d[v]=0,w=0;w<e;w++)if(x[w].index===a[v]){d[v]=1;break}}return n!==r&&r.dispose(),t!==i&&i.dispose(),[2,ki(d,i.shape,"bool")]}}))}))};(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})($i||($i={}));var hD=ge({absoluteDifference_:function(n,t,e,r){r===void 0&&(r=$i.SUM_BY_NONZERO_WEIGHTS);var i=te(n,"labels","absoluteDifference"),o=te(t,"predictions","absoluteDifference"),s=null;e!=null&&(s=te(e,"weights","absoluteDifference")),Rn(i.shape,o.shape,"Error in absoluteDifference: ");var a=i.sub(o).abs();return Mu(a,s,r)}}),Mu=ge({computeWeightedLoss_:function(n,t,e){e===void 0&&(e=$i.SUM_BY_NONZERO_WEIGHTS);var r=te(n,"losses","computeWeightedLoss"),i=null;t!=null&&(i=te(t,"weights","computeWeightedLoss"));var o=i==null?r:r.mul(i);if(e===$i.NONE)return o;if(e===$i.SUM)return o.sum();if(e===$i.MEAN){if(i==null)return o.mean();var s=r.size/i.size,a=o.sum().div(i.sum());return s>1?a.div(rt(s)):a}if(e===$i.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(rt(r.size));var u=i.mul(oh(r.shape)).notEqual(rt(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+e)}}),dD=ge({cosineDistance_:function(n,t,e,r,i){i===void 0&&(i=$i.SUM_BY_NONZERO_WEIGHTS);var o=te(n,"labels","cosineDistance"),s=te(t,"predictions","cosineDistance"),a=null;r!=null&&(a=te(r,"weights","cosineDistance")),Rn(o.shape,s.shape,"Error in cosineDistance: ");var u=rt(1).sub(o.mul(s).sum(e,!0));return Mu(u,a,i)}}),pD=ge({hingeLoss_:function(n,t,e,r){r===void 0&&(r=$i.SUM_BY_NONZERO_WEIGHTS);var i=te(n,"labels","hingeLoss"),o=te(t,"predictions","hingeLoss"),s=null;e!=null&&(s=te(e,"weights","hingeLoss")),Rn(i.shape,o.shape,"Error in hingeLoss: ");var a=rt(1);i=rt(2).mul(i).sub(a);var u=a.sub(i.mul(o)).relu();return Mu(u,s,r)}}),vD=ge({huberLoss_:function(n,t,e,r,i){r===void 0&&(r=1),i===void 0&&(i=$i.SUM_BY_NONZERO_WEIGHTS);var o=te(n,"labels","huberLoss"),s=te(t,"predictions","huberLoss"),a=null;e!=null&&(a=te(e,"weights","huberLoss")),Rn(o.shape,s.shape,"Error in huberLoss: ");var u=rt(r),c=s.sub(o).abs(),h=i_(c,u),d=c.sub(h),v=rt(.5).mul(h.square()).add(u.mul(d));return Mu(v,a,i)}}),mD=ge({logLoss_:function(n,t,e,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=$i.SUM_BY_NONZERO_WEIGHTS);var o=te(n,"labels","logLoss"),s=te(t,"predictions","logLoss"),a=null;e!=null&&(a=te(e,"weights","logLoss")),Rn(o.shape,s.shape,"Error in logLoss: ");var u=rt(1),c=rt(r),h=o.mul(s.add(c).log()).neg().sub(u.sub(o).mul(u.sub(s).add(c).log()));return Mu(h,a,i)}}),gD=ge({meanSquaredError_:function(n,t,e,r){r===void 0&&(r=$i.SUM_BY_NONZERO_WEIGHTS);var i=te(n,"labels","meanSquaredError"),o=te(t,"predictions","meanSquaredError"),s=null;e!=null&&(s=te(e,"weights","meanSquaredError")),Rn(i.shape,o.shape,"Error in meanSquaredError: ");var a=i.squaredDifference(o);return Mu(a,s,r)}}),yD=ge({sigmoidCrossEntropy_:function(n,t,e,r,i){r===void 0&&(r=0),i===void 0&&(i=$i.SUM_BY_NONZERO_WEIGHTS);var o=te(n,"multiClassLabels","sigmoidCrossEntropy"),s=te(t,"logits","sigmoidCrossEntropy"),a=null;if(e!=null&&(a=te(e,"weights","sigmoidCrossEntropy")),Rn(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=rt(r),c=rt(1),h=rt(.5);o=o.mul(c.sub(u)).add(h.mul(u))}var d=(function(v,p){var y=te(v,"labels","sigmoidCrossEntropyWithLogits"),x=te(p,"logits","sigmoidCrossEntropyWithLogits");Rn(y.shape,x.shape,"Error in sigmoidCrossEntropyWithLogits: ");var w=x.relu(),_=x.mul(y),E=x.abs().neg().exp().log1p();return w.sub(_).add(E)})(o,s);return Mu(d,a,i)}}),xD=ge({softmaxCrossEntropy_:function(n,t,e,r,i){r===void 0&&(r=0),i===void 0&&(i=$i.SUM_BY_NONZERO_WEIGHTS);var o=te(n,"onehotLabels","softmaxCrossEntropy"),s=te(t,"logits","softmaxCrossEntropy"),a=null;if(e!=null&&(a=te(e,"weights","softmaxCrossEntropy")),Rn(o.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var u=rt(r),c=rt(1),h=rt(o.shape[1]);o=o.mul(c.sub(u)).add(u.div(h))}var d=(function(v,p,y){if(y===void 0&&(y=-1),y===-1&&(y=p.rank-1),y!==p.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+p.rank+" and dim was "+y);return Ov((function(x,w,_){var E=w.logSumExp([y],!0),I=w.toFloat().sub(E);return _([x,I]),{value:I.mul(x).neg().sum([y]),gradFunc:function(C,N){var O=N[0],U=N[1],M=Po(C.shape,[y]);return[C.reshape(M).mul(O.toFloat().sub(U.exp())),C.reshape(M).mul(U.exp().sub(O.toFloat()))]}}}))(v,p)})(o,s);return Mu(d,a,i)}}),wD=Object.freeze({get Reduction(){return $i},absoluteDifference:hD,computeWeightedLoss:Mu,cosineDistance:dD,hingeLoss:pD,huberLoss:vD,logLoss:mD,meanSquaredError:gD,sigmoidCrossEntropy:yD,softmaxCrossEntropy:xD});function zw(n,t){return t===void 0&&(t=!1),Se.tidy((function(){if(n.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+n.shape.length+"D Tensor.");for(var e=n.shape[0],r=n.shape[1],i=y4(e),o=n.clone(),s=Il([[1]],[1,1]),a=s.clone(),u=e>=r?r:e,c=function(d){var v,p=o,y=a,x=i;v=Se.tidy((function(){var w=o.slice([d,d],[e-d,1]),_=w.norm(),E=o.slice([d,d],[1,1]),I=Il([[-1]]).where(E.greater(0),Il([[1]])),C=E.sub(I.mul(_)),N=w.div(C);a=N.shape[0]===1?s.clone():s.concat(N.slice([1,0],[N.shape[0]-1,N.shape[1]]),0);var O=I.matMul(C).div(_).neg(),U=o.slice([d,0],[e-d,r]),M=O.mul(a);if(d===0)o=U.sub(M.matMul(a.transpose().matMul(U)));else{var T=U.sub(M.matMul(a.transpose().matMul(U)));o=o.slice([0,0],[d,r]).concat(T,0)}var j=i.slice([0,d],[e,i.shape[1]-d]);if(d===0)i=j.sub(j.matMul(a).matMul(M.transpose()));else{var D=j.sub(j.matMul(a).matMul(M.transpose()));i=i.slice([0,0],[e,d]).concat(D,1)}return[a,o,i]})),a=v[0],o=v[1],i=v[2],Io([p,y,x])},h=0;h<u;++h)c(h);return!t&&e>r&&(i=i.slice([0,0],[e,r]),o=o.slice([0,0],[r,r])),[i,o]}))}var bD=ge({bandPart_:function(n,t,e){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(e%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+e+".");var r=te(n,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,o=r.shape.slice(-2),s=o[0],a=o[1];if(!(t<=s))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+s+").");if(!(e<=a))throw new Error("bandPart(): numUpper ("+e+") must not be greater than the number of columns ("+a+").");t<0&&(t=s),e<0&&(e=a);var u=cv(0,s,1,"int32").reshape([-1,1]),c=cv(0,a,1,"int32"),h=ii(u,c),d=jv(h.lessEqual(rt(+t,"int32")),h.greaterEqual(rt(-e,"int32"))),v=Qn([s,a],r.dtype);return na(ni(r.reshape([-1,s,a])).map((function(p){return Rc(d,p,v)}))).reshape(i)}}),_D=ge({gramSchmidt_:function(n){var t;if(Array.isArray(n)){t=!1,ce(n!=null&&n.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var e=n[0].shape[0],r=function(u){ce(n[u].shape[0]===e,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+n[u].shape[0]+" vs. "+e+")"}))},i=1;i<n.length;++i)r(i)}else t=!0,n=L1(n,n.shape[0],0).map((function(u){return b4(u,[0])}));ce(n.length<=n[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+n.length+") exceeds number of dimensions ("+n[0].shape[0]+")."}));var o=[],s=n,a=function(u){o.push(Se.tidy((function(){var c=s[u];if(u>0)for(var h=0;h<u;++h){var d=g_(o[h].mulStrict(c)).mul(o[h]);c=c.sub(d)}return c.div(b_(c,"euclidean"))})))};for(i=0;i<n.length;++i)a(i);return t?na(o,0):o}}),SD=ge({qr_:function(n,t){if(t===void 0&&(t=!1),n.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+n.rank);if(n.rank===2)return zw(n,t);var e=n.shape.slice(0,n.shape.length-2).reduce((function(s,a){return s*a})),r=ni(n.reshape([e,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),i=[],o=[];return r.forEach((function(s){var a=zw(s,t),u=a[0],c=a[1];i.push(u),o.push(c)})),[na(i,0).reshape(n.shape),na(o,0).reshape(n.shape)]}}),CD=Object.freeze({bandPart:bD,gramSchmidt:_D,qr:SD});function Wv(n,t,e,r,i,o){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),o==null&&(o=0);var s=n.shape[0];return e=Math.min(e,s),ce(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),ce(n.rank===2,(function(){return"boxes must be a 2D tensor, but was of rank '"+n.rank+"'"})),ce(n.shape[1]===4,(function(){return"boxes must have 4 columns, but 2nd dimension was "+n.shape[1]})),ce(t.rank===1,(function(){return"scores must be a 1D tensor"})),ce(t.shape[0]===s,(function(){return"scores has incompatible shape with boxes. Expected "+s+", but was "+t.shape[0]})),ce(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"})),{maxOutputSize:e,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}var AD=ge({resizeBilinear_:function(n,t,e){e===void 0&&(e=!1);var r=te(n,"images","resizeBilinear");ce(r.rank===3||r.rank===4,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),ce(t.length===2,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=t[0],a=t[1],u=Se.runKernelFunc((function(c,h){return h([i]),c.resizeBilinear(i,s,a,e)}),{x:i},(function(c,h){return{x:function(){return Se.runKernelFunc((function(d){return d.resizeBilinearBackprop(c,h[0],e)}),{})}}}),"ResizeBilinear",{alignCorners:e,newHeight:s,newWidth:a});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),kD=ge({resizeNearestNeighbor_:function(n,t,e){e===void 0&&(e=!1);var r=te(n,"images","resizeNearestNeighbor");ce(r.rank===3||r.rank===4,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),ce(t.length===2,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),ce(r.dtype==="float32"||r.dtype==="int32",(function(){return"`images` must have `int32` or `float32` as dtype"}));var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=t[0],a=t[1],u=Se.runKernelFunc((function(c,h){return h([i]),c.resizeNearestNeighbor(i,s,a,e)}),{batchImages:i},(function(c,h){return{batchImages:function(){return Se.runKernelFunc((function(d){return d.resizeNearestNeighborBackprop(c,h[0],e)}),{})}}}));return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),ED=ge({nonMaxSuppression_:function(n,t,e,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=te(n,"boxes","nonMaxSuppression"),s=te(t,"scores","nonMaxSuppression"),a=Wv(o,s,e,r,i);e=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;var u={maxOutputSize:e,iouThreshold:r,scoreThreshold:i};return Se.runKernelFunc((function(c){return c.nonMaxSuppression(o,s,e,r,i)}),{boxes:o,scores:s},null,"NonMaxSuppressionV3",u)}}),ND=function(n,t,e,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),xt(this,void 0,void 0,(function(){var o,s,a,u,c,h,d;return wt(this,(function(v){switch(v.label){case 0:return o=te(n,"boxes","nonMaxSuppressionAsync"),s=te(t,"scores","nonMaxSuppressionAsync"),a=Wv(o,s,e,r,i),e=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold,[4,Promise.all([o.data(),s.data()])];case 1:return u=v.sent(),c=u[0],h=u[1],d=O1(c,h,e,r,i),o!==n&&o.dispose(),s!==t&&s.dispose(),[2,d]}}))}))},ID=ge({nonMaxSuppressionWithScore_:function(n,t,e,r,i,o){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var s=te(n,"boxes","nonMaxSuppression"),a=te(t,"scores","nonMaxSuppression"),u=Wv(s,a,e,r,i,o),c={maxOutputSize:e=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},h=Se.runKernel("NonMaxSuppressionV5",{boxes:s,scores:a},c);return{selectedIndices:h[0],selectedScores:h[1]}}}),PD=function(n,t,e,r,i,o){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),xt(this,void 0,void 0,(function(){var s,a,u,c,h,d,v;return wt(this,(function(p){switch(p.label){case 0:return s=te(n,"boxes","nonMaxSuppressionAsync"),a=te(t,"scores","nonMaxSuppressionAsync"),u=Wv(s,a,e,r,i,o),e=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma,[4,Promise.all([s.data(),a.data()])];case 1:return c=p.sent(),h=c[0],d=c[1],v=B1(h,d,e,r,i,o),s!==n&&s.dispose(),a!==t&&a.dispose(),[2,v]}}))}))},RD=ge({cropAndResize_:function(n,t,e,r,i,o){var s=te(n,"image","cropAndResize"),a=te(t,"boxes","cropAndResize","float32"),u=te(e,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var c=a.shape[0];return ce(s.rank===4,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+s.rank+"."})),ce(a.rank===2&&a.shape[1]===4,(function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+a.shape+"."})),ce(u.rank===1&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+a.shape+"."})),ce(r.length===2,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),ce(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),ce(i==="bilinear"||i==="nearest",(function(){return"method must be bilinear or nearest, but was "+i})),Se.runKernelFunc((function(h,d){return h.cropAndResize(s,a,u,r,i,o)}),{images:s,boxes:a,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:o,cropSize:r})}}),Q1=Object.freeze({resizeBilinear:AD,resizeNearestNeighbor:kD,nonMaxSuppression:ED,nonMaxSuppressionAsync:ND,nonMaxSuppressionWithScore:ID,nonMaxSuppressionWithScoreAsync:PD,cropAndResize:RD}),Z1=function(n,t){return!(n>0)||t==="linear"},e2=function(n,t,e){if(e==null||e==="linear")return n;if(e==="relu")return n.mul(t.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},t2=function(n,t){var e=t,r=ri(n.shape,t.shape);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},n2=function(n,t,e){if(t==="linear")return n;if(t==="relu")return gr(n);if(t==="elu")return y_(n);if(t==="relu6")return w_(n);if(t==="prelu")return x_(n,e);throw new Error("Unknown fused activation "+t+".")},TD=ge({fusedMatMul_:function(n){var t,e=n.a,r=n.b,i=n.transposeA,o=i!==void 0&&i,s=n.transposeB,a=s!==void 0&&s,u=n.bias,c=n.activation,h=c===void 0?"linear":c,d=n.preluActivationWeights;if(Z1(Se.state.gradientDepth,h)===!1){var v=zv(e,r,o,a);return u!=null&&(v=hn(v,u)),n2(v,h,d)}var p=te(e,"a","fused matMul"),y=te(r,"b","fused matMul");t=yr(p,y),p=t[0],y=t[1];var x=o?p.shape[p.rank-2]:p.shape[p.rank-1],w=a?y.shape[y.rank-1]:y.shape[y.rank-2],_=o?p.shape[p.rank-1]:p.shape[p.rank-2],E=a?y.shape[y.rank-2]:y.shape[y.rank-1],I=p.shape.slice(0,-2),C=y.shape.slice(0,-2),N=Ct(I),O=Ct(C);ce(p.rank>=2&&y.rank>=2&&p.rank===y.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+y.rank+"."})),ce(mi(I,C),(function(){return"Error in fused matMul: outer dimensions ("+I+") and ("+C+") of Tensors with shapes "+p.shape+" and "+y.shape+" must match."})),ce(x===w,(function(){return"Error in fused matMul: inner shapes ("+x+") and ("+w+") of Tensors with shapes "+p.shape+" and "+y.shape+" and transposeA="+o+" and transposeB="+a+" must match."}));var U,M,T=p.shape.slice(0,-2).concat([_,E]),j=o?p.as3D(N,x,_):p.as3D(N,_,x),D=a?y.as3D(O,E,w):y.as3D(O,w,E);u!=null&&pn(T,(U=yr(U=te(u,"bias","fused matMul"),p)[0]).shape),d!=null&&(M=te(d,"prelu weights","fused matMul"));var B={a:j,b:D};u!=null&&(B.bias=U),d!=null&&(B.preluActivationWeights=M);var X=[j,D];return Se.runKernelFunc((function(G,oe){var he=G.fusedBatchMatMul({a:j,b:D,transposeA:o,transposeB:a,bias:U,activation:h,preluActivationWeights:M});return oe([j,D,he]),he}),B,(function(G,oe){var he=oe[0],ae=oe[1],W=oe[2],ne=e2(G,W,h),se={};return u!=null&&(se={bias:function(){return t2(U,ne)}}),Object.assign(o||a?!o&&a?{a:function(){return ne.matMul(ae,!1,!1)},b:function(){return ne.matMul(he,!0,!1)}}:o&&!a?{a:function(){return ae.matMul(ne,!1,!0)},b:function(){return he.matMul(ne,!1,!1)}}:{a:function(){return ae.matMul(ne,!0,!0)},b:function(){return ne.matMul(he,!0,!0)}}:{a:function(){return ne.matMul(ae,!1,!0)},b:function(){return he.matMul(ne,!0,!1)}},se)}),"_FusedMatMul",{transposeA:o,transposeB:a,activation:h},X,[!0]).reshape(T)}}),LD=ge({fusedConv2d_:function(n){var t=n.x,e=n.filter,r=n.strides,i=n.pad,o=n.dataFormat,s=o===void 0?"NHWC":o,a=n.dilations,u=a===void 0?[1,1]:a,c=n.dimRoundingMode,h=n.bias,d=n.activation,v=d===void 0?"linear":d,p=n.preluActivationWeights;if(v=v||"linear",Z1(Se.state.gradientDepth,v)===!1){var y=Na(t,e,r,i,s,u,c);return h!=null&&(y=hn(y,h)),n2(y,v,p)}var x=te(t,"x","conv2d"),w=te(e,"filter","conv2d"),_=x,E=!1;x.rank===3&&(E=!0,_=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),ce(_.rank===4,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+_.rank+"."})),ce(w.rank===4,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+w.rank+"."})),c!=null&&ce(Ur(i),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+i+"."})),ce(_.shape[3]===w.shape[2],(function(){return"Error in conv2d: depth of input ("+_.shape[3]+") must match input depth for filter "+w.shape[2]+"."})),ce(Ro(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),ce(s==="NHWC",(function(){return"Error in conv2d: got dataFormat of "+s+" but only NHWC is currently supported."}));var I,C,N=Bc(_.shape,w.shape,r,u,i,c);h!=null&&(I=yr(I=te(h,"bias","fused conv2d"),x)[0],pn(N.outShape,I.shape)),p!=null&&(C=te(p,"prelu weights","fused conv2d"));var O={x:_,filter:w};h!=null&&(O.bias=I),p!=null&&(O.preluActivationWeights=C);var U=[w,_],M=Se.runKernelFunc((function(T,j){var D=T.fusedConv2d({input:_,filter:w,convInfo:N,bias:I,activation:v,preluActivationWeights:C});return j([w,_,D]),D}),O,(function(T,j){var D=j,B=D[0],X=D[1],G=D[2],oe=e2(T,G,v);ce(th(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var he={};return h!=null&&(he={bias:function(){return t2(I,oe)}}),Object.assign({x:function(){return c_(X.shape,oe,B,r,i)},filter:function(){return G1(X,oe,B.shape,r,i)}},he)}),"FusedConv2D",{convInfo:N,activation:v},U,[!0]);return E?M.as3D(M.shape[1],M.shape[2],M.shape[3]):M}}),DD=ge({fusedDepthwiseConv2d_:function(n){var t=n.x,e=n.filter,r=n.strides,i=n.pad,o=n.dataFormat,s=o===void 0?"NHWC":o,a=n.dilations,u=a===void 0?[1,1]:a,c=n.dimRoundingMode,h=n.bias,d=n.activation,v=d===void 0?"linear":d,p=n.preluActivationWeights;if(Z1(Se.state.gradientDepth,v)===!1){var y=Uv(t,e,r,i,s,u,c);return h!=null&&(y=hn(y,h)),n2(y,v,p)}var x=te(t,"x","depthwiseConv2d"),w=te(e,"filter","depthwiseConv2d"),_=x,E=!1;x.rank===3&&(E=!0,_=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),ce(_.rank===4,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+_.rank+"."})),ce(w.rank===4,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+w.rank+"."})),ce(_.shape[3]===w.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+_.shape[3]+") must match the inChannels dimension in filter "+w.shape[2]+"."})),u==null&&(u=[1,1]),ce(Ro(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),c!=null&&ce(Ur(i),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+i+"."}));var I,C,N=Bc(_.shape,w.shape,r,u,i,c,!0);h!=null&&(I=yr(I=te(h,"bias","fused conv2d"),x)[0],pn(N.outShape,I.shape)),p!=null&&(C=te(p,"prelu weights","fused depthwiseConv2d"));var O={x:_,filter:w};h!=null&&(O.bias=I),p!=null&&(O.preluActivationWeights=C);var U=[w,_],M=Se.runKernelFunc((function(T,j){var D=T.fusedDepthwiseConv2D({input:_,filter:w,convInfo:N,bias:I,activation:v,preluActivationWeights:C});return j([w,_,D]),D}),O,(function(T,j){ce(th(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var D=j[0],B=j[1],X=j[2],G=e2(T,X,v),oe={};return h!=null&&(oe={bias:function(){return t2(I,G)}}),Object.assign({x:function(){return f_(B.shape,G,D,N)},filter:function(){return h_(B,G,D.shape,N)}},oe)}),"FusedDepthwiseConv2D",{convInfo:N,activation:v},U,[!0]);return E?M.as3D(M.shape[1],M.shape[2],M.shape[3]):M}}),FD=Object.freeze({matMul:TD,conv2d:LD,depthwiseConv2d:DD}),MD=Object.freeze({image:Q1,linalg:CD,losses:wD,spectral:oD,fused:FD,signal:cD,square:mT,squaredDifference:K4,conv1d:AL,conv2d:Na,conv3d:kL,depthwiseConv2d:Uv,separableConv2d:$1,conv2dTranspose:EL,conv3dTranspose:NL,op:ge,batchNormalization2d:GT,batchNormalization3d:$T,batchNormalization4d:KT,batchNormalization:XT,batchNorm:e_,batchNorm2d:YT,batchNorm3d:JT,batchNorm4d:QT,booleanMaskAsync:CL,complex:Ci,real:Aa,imag:Rs,concat:ti,concat1d:F6,concat2d:M6,concat3d:O6,concat4d:B6,split:L1,matMul:zv,dot:IL,outerProduct:PL,reverse:Ad,reverse1d:RL,reverse2d:TL,reverse3d:LL,reverse4d:DL,maxPool:pi,avgPool:kd,pool:FL,maxPool3d:ML,avgPool3d:OL,slice:js,slice1d:BL,slice2d:jL,slice3d:v_,slice4d:UL,abs:gT,acos:yT,acosh:xT,asin:wT,asinh:bT,atan:_T,atanh:ST,ceil:CT,clipByValue:W1,cos:AT,cosh:kT,erf:ET,exp:Ng,expm1:NT,floor:IT,log:PT,log1p:RT,logSigmoid:TT,neg:yv,reciprocal:LT,round:DT,rsqrt:X4,sigmoid:Y4,sign:FT,isNaN:MT,isInf:OT,isFinite:BT,sin:jT,sinh:UT,softplus:zT,sqrt:VT,step:WT,tan:qT,tanh:HT,all:zL,any:VL,argMax:WL,argMin:qL,logSumExp:HL,max:Vv,mean:GL,min:$L,moments:KL,sum:g_,prod:XL,equal:o_,equalStrict:pL,greater:vL,greaterEqual:a_,greaterEqualStrict:mL,greaterStrict:gL,less:yL,lessEqual:xL,lessEqualStrict:wL,lessStrict:bL,notEqual:_L,notEqualStrict:SL,add:hn,addN:tL,addStrict:nL,atan2:rL,div:Ya,divNoNan:iL,divStrict:oL,floorDiv:r_,maximum:q1,maximumStrict:aL,minimum:i_,minimumStrict:sL,mod:uL,modStrict:lL,mul:Xi,mulStrict:cL,pow:xv,powStrict:fL,squaredDifferenceStrict:hL,sub:ii,subStrict:dL,elu:y_,leakyRelu:YL,prelu:x_,relu:gr,relu6:w_,selu:JL,logicalAnd:jv,logicalNot:ZT,logicalOr:t_,logicalXor:eL,where:Rc,whereAsync:n_,buffer:rn,print:$6,batchToSpaceND:g4,broadcastTo:K6,cast:X6,clone:Y6,cumsum:J6,depthToSpace:Q6,expandDims:Ca,eye:y4,multinomial:Z6,oneHot:Cg,pad:Oc,pad1d:eP,pad2d:tP,pad3d:nP,pad4d:rP,rand:iP,randomNormal:oP,randomGamma:aP,randomUniform:x4,reshape:Ja,spaceToBatchND:w4,squeeze:b4,stack:na,tile:jf,truncatedNormal:sP,unstack:ni,setdiff1dAsync:uP,fill:Bs,linspace:D6,ones:oh,range:cv,scalar:rt,tensor:ki,tensor1d:Hr,tensor2d:Il,tensor3d:T1,tensor4d:Eo,tensor5d:R6,tensor6d:T6,variable:L6,zeros:Qn,onesLike:m4,zerosLike:gn,transpose:Dl,softmax:Fu,logSoftmax:vP,localResponseNormalization:QL,norm:b_,gather:H1,unsortedSegmentSum:s_,basicLSTMCell:ZL,multiRNNCell:eD,movingAverage:tD,stridedSlice:nD,topk:rD,scatterND:iD,fft:K1,ifft:wv,rfft:X1,irfft:__,sparseToDense:aD,gatherND:sD,diag:uD,dropout:lD,hannWindow:Y1,hammingWindow:C_,frame:J1,stft:A_,inTopKAsync:fD});function Ke(n,t){Array.isArray(n)||(n=[n]),n.forEach((function(e){e!=null&&ce(e.dtype!=="complex64",(function(){return t+" does not support complex64 tensors."}))}))}function w0(n,t,e,r){if(e==="linear")return n.linear(t);if(e==="relu")return n.relu(t);if(e==="elu")return n.elu(t);if(e==="relu6")return n.relu6(t);if(e==="prelu")return n.prelu(t,r);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var OD=(function(n){function t(){var e=n.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new N4(e,Se),e}return es(t,n),t.prototype.write=function(e,r,i){this.firstUse&&(this.firstUse=!1,Ve().get("IS_NODE")&&uv(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:e,dtype:i}),o},t.prototype.move=function(e,r,i,o){this.data.set(e,{values:r,dtype:o})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var r=this.data.get(e),i=r.dtype,o=r.complexTensors;return i==="complex64"?Eg(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var r=this.readSync(e.dataId),i=r;if(e.dtype==="string")try{i=r.map((function(o){return ov(o)}))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return rn(e.shape,e.dtype,i)},t.prototype.makeOutput=function(e,r,i){var o=this.write(e,r,i);return Se.makeTensorFromDataId(o,r,i,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var r=this.data.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return xt(this,void 0,void 0,(function(){var r;return wt(this,(function(i){return r=Is(),e(),[2,{kernelMs:Is()-r}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,r){var i=this.makeOutput(null,e.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:Se.keep(e.clone()),imag:Se.keep(r.clone())},i},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,r,i){if(Ke(e,"slice"),k4(e.shape,r,i)){var o=E4(r,e.strides),s=Ct(i);return ki(this.readSync(e.dataId).subarray(o,o+s),i,e.dtype)}for(var a=rn(i,e.dtype),u=this.bufferSync(e),c=0;c<a.size;++c){var h=a.indexToLoc(c).map((function(d,v){return d+r[v]}));a.values[c]=u.get.apply(u,h)}return a.toTensor()},t.prototype.stridedSlice=function(e,r,i,o){Ke(e,"stridedSlice");var s=F1(r,i,o);if(s.some((function(p){return p===0})))return ki([],s);for(var a=rn(s,e.dtype),u=this.bufferSync(e),c=0;c<a.size;c++){for(var h=a.indexToLoc(c),d=new Array(h.length),v=0;v<d.length;v++)d[v]=h[v]*o[v]+r[v];a.set.apply(a,[u.get.apply(u,d)].concat(h))}return a.toTensor()},t.prototype.diag=function(e){for(var r=this.readSync(e.dataId),i=rn([e.size,e.size],e.dtype),o=i.values,s=0;s<r.length;s++)o[s*e.size+s]=r[s];return i.toTensor()},t.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),s=0,a=0;a<e.rank;a++)a!==r&&(o[s++]=e.shape[a]);var u=new Array(e.rank).fill(0),c=e.shape.slice();c[r]=1;var h=new Array(i);for(a=0;a<h.length;a++)u[r]=a,h[a]=this.slice(e,u,c).reshape(o);return h},t.prototype.reverse=function(e,r){Ke(e,"reverse");for(var i=rn(e.shape,e.dtype),o=this.bufferSync(e),s=function(u){var c=i.indexToLoc(u),h=c.slice();r.forEach((function(d){return h[d]=e.shape[d]-1-h[d]})),i.set.apply(i,[o.get.apply(o,h)].concat(c))},a=0;a<i.size;a++)s(a);return i.toTensor()},t.prototype.concat=function(e,r){var i=this;if(e[0].dtype==="complex64"){var o=e.map((function(p){return Aa(p)})),s=e.map((function(p){return Rs(p)}));return Ci(this.concat(o,r),this.concat(s,r))}var a=e.map((function(p){var y=Ct(p.shape.slice(r));return p.as2D(-1,y)})),u=eh(a.map((function(p){return p.shape})),1),c=rn(u,e[0].dtype).values;if(a[0].shape[0]===1){var h=0;a.forEach((function(p){c.set(i.readSync(p.dataId),h),h+=p.size}))}else{var d=0;a.forEach((function(p){for(var y=i.readSync(p.dataId),x=0,w=0;w<p.shape[0];++w)for(var _=w*u[1]+d,E=0;E<p.shape[1];++E)c[_+E]=y[x++];d+=p.shape[1]}))}var v=eh(e.map((function(p){return p.shape})),r);return ki(c,v,e[0].dtype)},t.prototype.neg=function(e){return Ke(e,"neg"),this.multiply(rt(-1),e)},t.prototype.add=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),(function(i,o,s,a){return{real:i+s,imag:o+a}})):this.broadcastedBinaryOp(e,r,Ai(e.dtype,r.dtype),(function(i,o){return i+o}))},t.prototype.addN=function(e){var r=this;Ke(e,"addN");for(var i=e.map((function(h){return r.readSync(h.dataId)})),o=rn(e[0].shape,e[0].dtype),s=o.values,a=0;a<e.length;a++)for(var u=i[a],c=0;c<s.length;c++)s[c]+=u[c];return o.toTensor()},t.prototype.softmax=function(e,r){var i=oi([r],e.shape),o=this.max(e,i),s=Po(o.shape,i),a=this.subtract(e,o.reshape(s)),u=this.exp(a),c=this.sum(u,i).reshape(s);return this.realDivide(u,c)},t.prototype.subtract=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),(function(i,o,s,a){return{real:i-s,imag:o-a}})):this.broadcastedBinaryOp(e,r,Ai(e.dtype,r.dtype),(function(i,o){return i-o}))},t.prototype.pow=function(e,r){return Ke([e,r],"pow"),this.broadcastedBinaryOp(e,r,e.dtype,(function(i,o){return Math.pow(i,o)}))},t.prototype.batchMatMul=function(e,r,i,o){Ke([e,r],"matMul");for(var s=i?e.shape[1]:e.shape[2],a=i?e.shape[2]:e.shape[1],u=o?r.shape[1]:r.shape[2],c=e.shape[0],h=this.readSync(e.dataId),d=this.readSync(r.dataId),v=i?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],p=v[0],y=v[1],x=v[2],w=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],_=w[0],E=w[1],I=w[2],C=a*u,N=rn([c,a,u],e.dtype),O=N.values,U=this.blockSize,M=0;M<c;M++)for(var T=0;T<a;T+=U)for(var j=0;j<u;j+=U)for(var D=0;D<s;D+=U)for(var B=Math.min(T+U,a),X=Math.min(j+U,u),G=Math.min(D+U,s),oe=T;oe<B;oe++)for(var he=j;he<X;he++){for(var ae=0,W=D;W<G;W++)ae+=h[M*p+oe*y+W*x]*d[W*_+he*E+M*I];O[M*C+(oe*u+he)]+=ae}return N.toTensor()},t.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,s=e.transposeB,a=e.bias,u=e.activation,c=e.preluActivationWeights,h=this.batchMatMul(r,i,o,s);return a&&(h=this.add(h,a)),u&&(h=w0(this,h,u,c)),h},t.prototype.multiply=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),(function(i,o,s,a){return{real:i*s-o*a,imag:i*a+o*s}})):this.broadcastedBinaryOp(e,r,Ai(e.dtype,r.dtype),(function(i,o){return i*o}))},t.prototype.realDivide=function(e,r){return Ke([e,r],"realDivide"),this.broadcastedBinaryOp(e,r,"float32",(function(i,o){return i/o}))},t.prototype.floorDiv=function(e,r){return Ke([e,r],"floorDiv"),this.broadcastedBinaryOp(e,r,"int32",(function(i,o){return Math.floor(i/o)}))},t.prototype.sum=function(e,r){Ke(e,"sum"),Xo("sum",r,e.rank);for(var i=qi(e.shape,r),o=i[0],s=i[1],a=Qn(o,Ai(e.dtype,"int32")),u=Ct(s),c=this.readSync(a.dataId),h=this.readSync(e.dataId),d=0;d<c.length;++d){for(var v=d*u,p=0,y=0;y<u;++y)p+=h[v+y];c[d]=p}return a},t.prototype.prod=function(e,r){Ke(e,"sum");for(var i=qi(e.shape,r),o=i[0],s=i[1],a=Qn(o,Ai(e.dtype,"int32")),u=Ct(s),c=this.readSync(a.dataId),h=this.readSync(e.dataId),d=0;d<c.length;++d){for(var v=d*u,p=1,y=0;y<u;++y)p*=h[v+y];c[d]=p}return a},t.prototype.unsortedSegmentSum=function(e,r,i){Ke(e,"unsortedSegmentSum");for(var o=[],s=e.rank-r.rank,a=0;a<s;++a)r=r.expandDims(a+1);for(a=0;a<i;++a){var u=rt(a,"int32"),c=o_(u,r).asType("float32").mul(e).sum(0);o.push(c)}return na(o)},t.prototype.argMin=function(e,r){Ke(e,"argMin");var i=[r];Xo("argMin",i,e.rank);for(var o=qi(e.shape,i),s=o[0],a=o[1],u=Qn(s,"int32"),c=Ct(a),h=this.readSync(u.dataId),d=this.readSync(e.dataId),v=0;v<h.length;++v){for(var p=v*c,y=d[p],x=0,w=0;w<c;++w){var _=d[p+w];_<y&&(y=_,x=w)}h[v]=x}return u},t.prototype.argMax=function(e,r){Ke(e,"argMax");var i=[r];Xo("argMax",i,e.rank);for(var o=qi(e.shape,i),s=o[0],a=o[1],u=Qn(s,"int32"),c=Ct(a),h=this.readSync(u.dataId),d=this.readSync(e.dataId),v=0;v<h.length;++v){for(var p=v*c,y=d[p],x=0,w=0;w<c;++w){var _=d[p+w];_>y&&(y=_,x=w)}h[v]=x}return u},t.prototype.cumsum=function(e,r,i,o){if(Ke(e,"cumsum"),r!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+r);for(var s=Ai(e.dtype,"int32"),a=Qn(e.shape,s),u=this.readSync(a.dataId),c=this.readSync(e.dataId),h=e.shape[e.rank-1],d=o?function(w,_){return w+h-_-1}:function(w,_){return w+_},v=0;v<c.length;v+=h)for(var p=0;p<h;p++){var y=d(v,p);if(p===0)u[y]=i?0:c[y];else{var x=d(v,p-1);u[y]=i?c[x]+u[x]:c[y]+u[x]}}return a},t.prototype.equal=function(e,r){return Ke([e,r],"equal"),this.broadcastedBinaryOp(e,r,"bool",(function(i,o){return i===o?1:0}))},t.prototype.notEqual=function(e,r){return Ke([e,r],"notEqual"),this.broadcastedBinaryOp(e,r,"bool",(function(i,o){return i!==o?1:0}))},t.prototype.less=function(e,r){return Ke([e,r],"less"),this.broadcastedBinaryOp(e,r,"bool",(function(i,o){return i<o?1:0}))},t.prototype.lessEqual=function(e,r){return Ke([e,r],"lessEqual"),this.broadcastedBinaryOp(e,r,"bool",(function(i,o){return i<=o?1:0}))},t.prototype.greater=function(e,r){return Ke([e,r],"greater"),this.broadcastedBinaryOp(e,r,"bool",(function(i,o){return i>o?1:0}))},t.prototype.greaterEqual=function(e,r){return Ke([e,r],"greaterEqual"),this.broadcastedBinaryOp(e,r,"bool",(function(i,o){return i>=o?1:0}))},t.prototype.logicalNot=function(e){Ke(e,"logicalNot");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r[o]?0:1;return this.makeOutput(i,e.shape,"bool")},t.prototype.logicalAnd=function(e,r){return Ke([e,r],"logicalAnd"),this.broadcastedBinaryOp(e,r,"bool",(function(i,o){return i&&o}))},t.prototype.logicalOr=function(e,r){return Ke([e,r],"logicalOr"),this.broadcastedBinaryOp(e,r,"bool",(function(i,o){return i||o}))},t.prototype.select=function(e,r,i){Ke([e,r,i],"select");for(var o=this.readSync(e.dataId),s=this.readSync(r.dataId),a=this.readSync(i.dataId),u=Qn(r.shape,Ai(r.dtype,i.dtype)),c=this.readSync(u.dataId),h=0,d=e.rank===0||e.rank>1||r.rank===1?1:Ct(r.shape.slice(1)),v=0;v<o.length;v++)for(var p=0;p<d;p++)o[v]===1?c[h++]=s[v]:c[h++]=a[v];return u},t.prototype.where=function(e){Ke([e],"where");var r=this.readSync(e.dataId);return j1(e.shape,r)},t.prototype.topk=function(e,r,i){return Ke(e,"topk"),M4(this.readSync(e.dataId),e.shape,e.dtype,r)},t.prototype.min=function(e,r){Ke(e,"min"),Xo("min",r,e.rank);for(var i=qi(e.shape,r),o=i[0],s=i[1],a=Qn(o,e.dtype),u=Ct(s),c=this.readSync(a.dataId),h=this.readSync(e.dataId),d=0;d<c.length;++d){for(var v=d*u,p=h[v],y=0;y<u;++y){var x=h[v+y];x<p&&(p=x)}c[d]=p}return a},t.prototype.minimum=function(e,r){return Ke([e,r],"minimum"),this.broadcastedBinaryOp(e,r,e.dtype,(function(i,o){return Math.min(i,o)}))},t.prototype.mod=function(e,r){return Ke([e,r],"mod"),this.broadcastedBinaryOp(e,r,e.dtype,(function(i,o){var s=i%o;return i<0&&o<0||i>=0&&o>=0?s:(s+o)%o}))},t.prototype.max=function(e,r){Ke(e,"max"),Xo("max",r,e.rank);for(var i=qi(e.shape,r),o=i[0],s=i[1],a=Qn(o,e.dtype),u=Ct(s),c=this.readSync(a.dataId),h=this.readSync(e.dataId),d=0;d<c.length;++d){for(var v=d*u,p=h[v],y=0;y<u;++y){var x=h[v+y];x>p&&(p=x)}c[d]=p}return a},t.prototype.maximum=function(e,r){return Ke([e,r],"maximum"),this.broadcastedBinaryOp(e,r,e.dtype,(function(i,o){return Math.max(i,o)}))},t.prototype.all=function(e,r){Ke(e,"all"),Xo("all",r,e.rank);for(var i=qi(e.shape,r),o=i[0],s=i[1],a=Qn(o,e.dtype),u=Ct(s),c=this.readSync(a.dataId),h=this.readSync(e.dataId),d=0;d<c.length;++d){for(var v=d*u,p=h[v],y=0;y<u;++y){var x=h[v+y];p=p&&x}c[d]=p}return a},t.prototype.any=function(e,r){Ke(e,"any"),Xo("any",r,e.rank);for(var i=qi(e.shape,r),o=i[0],s=i[1],a=Qn(o,e.dtype),u=Ct(s),c=this.readSync(a.dataId),h=this.readSync(e.dataId),d=0;d<c.length;++d){for(var v=d*u,p=h[v],y=0;y<u;++y){var x=h[v+y];p=p||x}c[d]=p}return a},t.prototype.squaredDifference=function(e,r){return Ke([e,r],"squaredDifference"),this.broadcastedBinaryOp(e,r,e.dtype,(function(i,o){var s=i-o;return s*s}))},t.prototype.ceil=function(e){Ke(e,"ceil");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.ceil(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.floor=function(e){Ke(e,"floor");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.floor(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.sign=function(e){Ke(e,"x");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?i[o]=-1:r[o]>0?i[o]=1:i[o]=0;return this.makeOutput(i,e.shape,"float32")},t.prototype.isNaN=function(e){Ke(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},t.prototype.isInf=function(e){Ke(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},t.prototype.isFinite=function(e){Ke(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},t.prototype.round=function(e){Ke(e,"round");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=Math.floor(r[o]);r[o]-s<.5?i[o]=Math.floor(r[o]):r[o]-s>.5?i[o]=Math.ceil(r[o]):i[o]=s%2==0?s:s+1}return this.makeOutput(i,e.shape,"float32")},t.prototype.exp=function(e){Ke(e,"exp");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.exp(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.expm1=function(e){Ke(e,"expm1");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.expm1(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.log=function(e){Ke(e,"log");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=Math.log(s)}return this.makeOutput(i,e.shape,"float32")},t.prototype.log1p=function(e){Ke(e,"log1p");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=Math.log1p(s)}return this.makeOutput(i,e.shape,"float32")},t.prototype.sqrt=function(e){Ke(e,"sqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=Math.sqrt(s)}return this.makeOutput(i,e.shape,"float32")},t.prototype.rsqrt=function(e){Ke(e,"rsqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=1/Math.sqrt(s)}return this.makeOutput(i,e.shape,"float32")},t.prototype.reciprocal=function(e){Ke(e,"reciprocal");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/r[o];return this.makeOutput(i,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){Ke(e,"relu");for(var r=Qn(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),s=0;s<o.length;++s)i[s]=Math.max(0,o[s]);return r},t.prototype.relu6=function(e){Ke(e,"relu");for(var r=Qn(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),s=0;s<o.length;++s)i[s]=Math.min(Math.max(0,o[s]),6);return r},t.prototype.prelu=function(e,r){return Ke([e,r],"prelu"),this.broadcastedBinaryOp(e,r,e.dtype,(function(i,o){return i<0?o*i:i}))},t.prototype.elu=function(e){Ke(e,"elu");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var s=i[o];r[o]=s>=0?s:Math.exp(s)-1}return this.makeOutput(r,e.shape,"float32")},t.prototype.eluDer=function(e,r){Ke([e,r],"eluDer");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),s=this.readSync(e.dataId),a=0;a<o.length;++a){var u=o[a];i[a]=u>=1?s[a]:s[a]*(u+1)}return this.makeOutput(i,r.shape,"float32")},t.prototype.selu=function(e){Ke(e,"selu");for(var r=z1,i=V1,o=new Float32Array(e.size),s=this.readSync(e.dataId),a=0;a<s.length;++a){var u=s[a];o[a]=u>=0?i*u:r*(Math.exp(u)-1)}return this.makeOutput(o,e.shape,"float32")},t.prototype.clip=function(e,r,i){Ke(e,"clip");for(var o=new Float32Array(e.size),s=this.readSync(e.dataId),a=0;a<s.length;++a){var u=s[a];o[a]=u>i?i:u<r?r:u}return this.makeOutput(o,e.shape,"float32")},t.prototype.abs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.abs(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<e.size;++o){var s=i[2*o],a=i[2*o+1];r[o]=Math.hypot(s,a)}return this.makeOutput(r,e.shape,"float32")},t.prototype.int=function(e){Ke(e,"int");for(var r=new Int32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=i[o];return this.makeOutput(r,e.shape,"int32")},t.prototype.sigmoid=function(e){Ke(e,"sigmoid");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(r,e.shape,"float32")},t.prototype.softplus=function(e){Ke(e,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var a=o[s]>-r,u=o[s]<r,c=Math.exp(o[s]),h=void 0;h=u?c:a?o[s]:Math.log(1+c),i[s]=h}return this.makeOutput(i,e.shape,"float32")},t.prototype.sin=function(e){Ke(e,"sin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sin(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.cos=function(e){Ke(e,"cos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cos(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.tan=function(e){Ke(e,"tan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.tan(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.asin=function(e){Ke(e,"asin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asin(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.acos=function(e){Ke(e,"acos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acos(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.atan=function(e){Ke(e,"atan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atan(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.atan2=function(e,r){return Ke([e,r],"atan2"),this.broadcastedBinaryOp(e,r,e.dtype,(function(i,o){return Math.atan2(i,o)}))},t.prototype.sinh=function(e){Ke(e,"sinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sinh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.cosh=function(e){Ke(e,"cosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cosh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.tanh=function(e){Ke(e,"tanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=BI(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.asinh=function(e){Ke(e,"asinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asinh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.acosh=function(e){Ke(e,"acosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acosh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.atanh=function(e){Ke(e,"atanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atanh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.erf=function(e){Ke(e,"erf");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var s=Math.sign(i[o]),a=Math.abs(i[o]),u=1/(1+.3275911*a);r[o]=s*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-a*a))}return this.makeOutput(r,e.shape,"float32")},t.prototype.step=function(e,r){r===void 0&&(r=0),Ke(e,"step");for(var i=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var a=o[s];isNaN(a)?i[s]=NaN:i[s]=a>0?1:r}return this.makeOutput(i,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,s=e.bias,a=e.activation,u=e.preluActivationWeights,c=this.conv2d(r,i,o);return s&&(c=this.add(c,s)),a&&(c=w0(this,c,a,u)),c},t.prototype.conv2d=function(e,r,i){Ke([e,r],"conv2d");for(var o=i.filterHeight,s=i.filterWidth,a=i.dilationHeight,u=i.dilationWidth,c=i.padInfo.left,h=i.padInfo.top,d=i.dataFormat==="channelsLast",v=rn(i.outShape,e.dtype),p=e.strides[0],y=d?e.strides[1]:e.strides[2],x=d?e.strides[2]:1,w=d?1:e.strides[1],_=v.strides[0],E=d?v.strides[1]:v.strides[2],I=d?v.strides[2]:1,C=d?1:v.strides[1],N=this.readSync(e.dataId),O=this.readSync(r.dataId),U=v.values,M=0;M<i.batchSize;++M)for(var T=M*p,j=M*_,D=0;D<i.outHeight;++D)for(var B=j+D*E,X=D*i.strideHeight-h,G=0;G<o;G++){var oe=X+G*a;if(!(oe<0||oe>=i.inHeight))for(var he=G*r.strides[0],ae=T+oe*y,W=0;W<i.outWidth;++W)for(var ne=B+W*I,se=W*i.strideWidth-c,$=0;$<s;$++){var F=se+$*u;if(!(F<0||F>=i.inWidth))for(var K=ae+F*x,Q=he+$*r.strides[1],ue=0;ue<i.inChannels;++ue){for(var de=N[K+ue*w],ve=0;ve<i.outChannels;++ve)U[ne+ve*C]+=de*O[Q+ve];Q+=i.outChannels}}}return v.toTensor()},t.prototype.conv3d=function(e,r,i){for(var o=i.filterDepth,s=i.filterHeight,a=i.filterWidth,u=i.dilationDepth,c=i.dilationHeight,h=i.dilationWidth,d=i.padInfo.front,v=i.padInfo.left,p=i.padInfo.top,y=rn(i.outShape,e.dtype),x=this.readSync(e.dataId),w=this.readSync(r.dataId),_=y.values,E=0;E<i.batchSize;++E)for(var I=E*e.strides[0],C=E*y.strides[0],N=0;N<i.outDepth;++N)for(var O=C+N*y.strides[1],U=N*i.strideDepth-d,M=0;M<o;M++){var T=U+M*u;if(!(T<0||T>=i.inDepth))for(var j=M*r.strides[0],D=I+T*e.strides[1],B=0;B<i.outHeight;++B)for(var X=O+B*y.strides[2],G=B*i.strideHeight-p,oe=0;oe<s;oe++){var he=G+oe*c;if(!(he<0||he>=i.inHeight))for(var ae=j+oe*r.strides[1],W=D+he*e.strides[2],ne=0;ne<i.outWidth;++ne)for(var se=X+ne*i.outChannels,$=ne*i.strideWidth-v,F=0;F<a;F++){var K=$+F*h;if(!(K<0||K>=i.inWidth))for(var Q=ae+F*r.strides[2],ue=W+K*i.inChannels,de=Q,ve=0;ve<i.inChannels;++ve){for(var we=x[ue+ve],Ce=0;Ce<i.outChannels;++Ce)_[se+Ce]+=we*w[de+Ce];de+=i.outChannels}}}}return y.toTensor()},t.prototype.conv2dDerInput=function(e,r,i){Ke([e,r],"conv2dDerInput");for(var o=rn(i.inShape,"float32"),s=o.values,a=this.readSync(e.dataId),u=this.readSync(r.dataId),c=r.strides,h=c[0],d=c[1],v=c[2],p=i.batchSize,y=i.filterHeight,x=i.filterWidth,w=i.inChannels,_=i.inHeight,E=i.inWidth,I=i.outChannels,C=i.outHeight,N=i.outWidth,O=i.strideHeight,U=i.strideWidth,M=i.dataFormat,T=y-1-i.padInfo.top,j=x-1-i.padInfo.left,D=M==="channelsLast",B=o.strides[0],X=D?o.strides[1]:o.strides[2],G=D?o.strides[2]:1,oe=D?1:o.strides[1],he=e.strides[0],ae=D?e.strides[1]:e.strides[2],W=D?e.strides[2]:1,ne=D?1:e.strides[1],se=0;se<p;++se)for(var $=0;$<w;++$)for(var F=0;F<_;++F)for(var K=F-T,Q=Math.max(0,Math.ceil(K/O)),ue=Math.min(C,(y+K)/O),de=0;de<E;++de){for(var ve=de-j,we=Math.max(0,Math.ceil(ve/U)),Ce=Math.min(N,(x+ve)/U),Le=0,be=Q;be<ue;++be)for(var De=be*O-K,Re=we;Re<Ce;++Re)for(var Xe=he*se+ae*be+W*Re,ee=h*(y-1-De)+d*(x-1-(Re*U-ve))+v*$,Je=0;Je<I;++Je)Le+=a[Xe+ne*Je]*u[ee+Je];s[B*se+X*F+G*de+oe*$]=Le}return o.toTensor()},t.prototype.conv3dDerInput=function(e,r,i){for(var o=rn(i.inShape,"float32"),s=o.values,a=o.strides,u=a[0],c=a[1],h=a[2],d=a[3],v=this.readSync(e.dataId),p=e.strides,y=p[0],x=p[1],w=p[2],_=p[3],E=this.readSync(r.dataId),I=r.strides,C=I[0],N=I[1],O=I[2],U=I[3],M=i.batchSize,T=i.filterDepth,j=i.filterHeight,D=i.filterWidth,B=i.inChannels,X=i.inDepth,G=i.inHeight,oe=i.inWidth,he=i.outChannels,ae=i.outDepth,W=i.outHeight,ne=i.outWidth,se=i.strideDepth,$=i.strideHeight,F=i.strideWidth,K=T-1-i.padInfo.front,Q=j-1-i.padInfo.top,ue=D-1-i.padInfo.left,de=0;de<M;++de)for(var ve=0;ve<B;++ve)for(var we=0;we<X;++we)for(var Ce=we-K,Le=Math.max(0,Math.ceil(Ce/se)),be=Math.min(ae,(T+Ce)/se),De=0;De<G;++De)for(var Re=De-Q,Xe=Math.max(0,Math.ceil(Re/$)),ee=Math.min(W,(j+Re)/$),Je=0;Je<oe;++Je){for(var Rt=Je-ue,ft=Math.max(0,Math.ceil(Rt/F)),He=Math.min(ne,(D+Rt)/F),mt=0,nt=Le;nt<be;++nt)for(var ht=nt*se-Ce,ut=Xe;ut<ee;++ut)for(var sn=ut*$-Re,Vt=ft;Vt<He;++Vt)for(var jt=y*de+x*nt+w*ut+_*Vt,Xt=C*(T-1-ht)+N*(j-1-sn)+O*(D-1-(Vt*F-Rt))+U*ve,Ft=0;Ft<he;++Ft)mt+=v[jt+Ft]*E[Xt+Ft];s[u*de+c*we+h*De+d*Je+ve]=mt}return o.toTensor()},t.prototype.conv2dDerFilter=function(e,r,i){Ke([e,r],"conv2dDerFilter");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c=i.dataFormat==="channelsLast",h=rn(i.filterShape,"float32"),d=i.padInfo.left,v=i.padInfo.top,p=this.bufferSync(e),y=this.bufferSync(r),x=0;x<a;++x)for(var w=Math.max(0,Math.ceil((v-x)/o)),_=Math.min(i.outHeight,(i.inHeight+v-x)/o),E=0;E<u;++E)for(var I=Math.max(0,Math.ceil((d-E)/s)),C=Math.min(i.outWidth,(i.inWidth+d-E)/s),N=0;N<i.inChannels;++N)for(var O=0;O<i.outChannels;++O){for(var U=0,M=0;M<i.batchSize;++M)for(var T=w;T<_;++T)for(var j=x+T*o-v,D=I;D<C;++D){var B=E+D*s-d;U+=c?p.get(M,j,B,N)*y.get(M,T,D,O):p.get(M,N,j,B)*y.get(M,O,T,D)}h.set(U,x,E,N,O)}return h.toTensor()},t.prototype.conv3dDerFilter=function(e,r,i){for(var o=i.strideDepth,s=i.strideHeight,a=i.strideWidth,u=i.filterDepth,c=i.filterHeight,h=i.filterWidth,d=rn(i.filterShape,"float32"),v=d.values,p=d.strides,y=p[0],x=p[1],w=p[2],_=p[3],E=this.readSync(r.dataId),I=r.strides,C=I[0],N=I[1],O=I[2],U=I[3],M=this.readSync(e.dataId),T=e.strides,j=T[0],D=T[1],B=T[2],X=T[3],G=i.padInfo.front,oe=i.padInfo.left,he=i.padInfo.top,ae=0;ae<u;++ae)for(var W=Math.max(0,Math.ceil((G-ae)/o)),ne=Math.min(i.outDepth,(i.inDepth+G-ae)/o),se=ae*y,$=0;$<c;++$)for(var F=Math.max(0,Math.ceil((he-$)/s)),K=Math.min(i.outHeight,(i.inHeight+he-$)/s),Q=$*x+se,ue=0;ue<h;++ue)for(var de=Math.max(0,Math.ceil((oe-ue)/a)),ve=Math.min(i.outWidth,(i.inWidth+oe-ue)/a),we=ue*w+Q,Ce=0;Ce<i.inChannels;++Ce)for(var Le=Ce*_+we,be=0;be<i.outChannels;++be){for(var De=0,Re=0;Re<i.batchSize;++Re)for(var Xe=Re*j,ee=Re*C,Je=W;Je<ne;++Je)for(var Rt=(ae+Je*o-G)*D+Xe,ft=Je*N+ee,He=F;He<K;++He)for(var mt=($+He*s-he)*B+Rt,nt=He*O+ft,ht=de;ht<ve;++ht){var ut=ht*U+nt;De+=M[(ue+ht*a-oe)*X+mt+Ce]*E[ut+be]}v[Le+be]=De}return d.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var r=e.input,i=e.filter,o=e.convInfo,s=e.bias,a=e.activation,u=e.preluActivationWeights,c=this.depthwiseConv2D(r,i,o);return s&&(c=this.add(c,s)),a&&(c=w0(this,c,a,u)),c},t.prototype.depthwiseConv2D=function(e,r,i){Ke([e,r],"depthwiseConv2D");for(var o=i.filterHeight,s=i.filterWidth,a=i.dilationHeight,u=i.dilationWidth,c=i.padInfo.left,h=i.padInfo.top,d=i.outChannels/i.inChannels,v=rn(i.outShape,e.dtype),p=this.readSync(e.dataId),y=this.readSync(r.dataId),x=v.values,w=0;w<i.batchSize;++w)for(var _=w*e.strides[0],E=w*v.strides[0],I=0;I<i.outHeight;++I)for(var C=E+I*v.strides[1],N=I*i.strideHeight-c,O=0;O<o;++O){var U=N+O*a;if(!(U<0||U>=i.inHeight))for(var M=O*r.strides[0],T=_+U*e.strides[1],j=0;j<i.outWidth;++j)for(var D=C+j*v.strides[2],B=j*i.strideWidth-h,X=0;X<s;++X){var G=B+X*u;if(!(G<0||G>=i.inWidth))for(var oe=M+X*r.strides[1],he=T+G*i.inChannels,ae=D,W=oe,ne=0;ne<i.inChannels;++ne){for(var se=p[he+ne],$=0;$<d;++$)x[ae+$]+=se*y[W+$];ae+=d,W+=d}}}return v.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,r,i){Ke([e,r],"depthwiseConv2DDerInput");for(var o=rn(i.inShape,"float32"),s=o.values,a=o.strides,u=a[0],c=a[1],h=a[2],d=this.readSync(e.dataId),v=e.strides,p=v[0],y=v[1],x=v[2],w=this.readSync(r.dataId),_=r.strides,E=_[0],I=_[1],C=_[2],N=i.batchSize,O=i.filterHeight,U=i.filterWidth,M=i.inChannels,T=i.inHeight,j=i.inWidth,D=i.outChannels,B=i.outHeight,X=i.outWidth,G=i.strideHeight,oe=i.strideWidth,he=O-1-i.padInfo.top,ae=U-1-i.padInfo.left,W=D/M,ne=0;ne<N;++ne)for(var se=0;se<M;++se)for(var $=0;$<T;++$)for(var F=$-he,K=Math.max(0,Math.ceil(F/G)),Q=Math.min(B,(O+F)/G),ue=0;ue<j;++ue){for(var de=ue-ae,ve=Math.max(0,Math.ceil(de/oe)),we=Math.min(X,(U+de)/oe),Ce=0,Le=K;Le<Q;++Le)for(var be=Le*G-F,De=ve;De<we;++De)for(var Re=p*ne+y*Le+x*De,Xe=E*(O-1-be)+I*(U-1-(De*oe-de))+C*se,ee=0;ee<W;++ee)Ce+=d[Re+(se*W+ee)]*w[Xe+ee];s[u*ne+c*$+h*ue+se]=Ce}return o.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,r,i){Ke([e,r],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c=rn(i.filterShape,"float32"),h=i.padInfo.left,d=i.padInfo.top,v=i.outChannels/i.inChannels,p=this.bufferSync(e),y=this.bufferSync(r),x=0;x<a;++x)for(var w=Math.max(0,Math.ceil((d-x)/o)),_=Math.min(i.outHeight,(i.inHeight+d-x)/o),E=0;E<u;++E)for(var I=Math.max(0,Math.ceil((h-E)/s)),C=Math.min(i.outWidth,(i.inWidth+h-E)/s),N=0;N<i.outChannels;++N){for(var O=Math.trunc(N/v),U=N%v,M=0,T=0;T<i.batchSize;++T)for(var j=w;j<_;++j)for(var D=x+j*o-d,B=I;B<C;++B){var X=E+B*s-h;M+=p.get(T,D,X,O)*y.get(T,j,B,N)}c.set(M,x,E,O,U)}return c.toTensor()},t.prototype.tile=function(e,r){return Ke(e,"tile"),F4(this.bufferSync(e),r)},t.prototype.pad=function(e,r,i){Ke(e,"pad");var o=r.map((function(v,p){return v[0]+e.shape[p]+v[1]})),s=r.map((function(v){return v[0]})),a=this.bufferSync(e),u=rn(o,e.dtype);i!==0&&u.values.fill(i);for(var c=0;c<e.size;c++){var h=a.indexToLoc(c),d=h.map((function(v,p){return v+s[p]}));u.set.apply(u,[a.get.apply(a,h)].concat(d))}return u.toTensor()},t.prototype.transpose=function(e,r){Ke(e,"transpose");for(var i=new Array(e.rank),o=0;o<i.length;o++)i[o]=e.shape[r[o]];var s=this.readSync(e.dataId),a=rn(i,e.dtype),u=this.bufferSync(e);for(o=0;o<e.size;++o){for(var c=u.indexToLoc(o),h=new Array(c.length),d=0;d<h.length;d++)h[d]=c[r[d]];var v=a.locToIndex(h);a.values[v]=s[o]}return a.toTensor()},t.prototype.gather=function(e,r,i){Ke([e,r],"gather");var o=e.shape.slice(),s=this.readSync(r.dataId);o[i]=s.length;for(var a=rn(o,e.dtype),u=this.bufferSync(e),c=0;c<a.size;++c){var h=a.indexToLoc(c),d=h.slice();d[i]=s[h[i]];var v=u.locToIndex(d);a.values[c]=u.values[v]}return a.toTensor()},t.prototype.batchToSpaceND=function(e,r,i){Ke([e],"batchToSpaceND");var o=r.reduce((function(d,v){return d*v})),s=fv(e.shape,r,o),a=hv(s.length,r.length),u=dv(e.shape,r,o),c=_4(i,r.length),h=S4(u,i,r.length);return e.reshape(s).transpose(a).reshape(u).slice(c,h)},t.prototype.spaceToBatchND=function(e,r,i){Ke([e],"spaceToBatchND");var o=r.reduce((function(v,p){return v*p})),s=[[0,0]];s.push.apply(s,i);for(var a=1+r.length;a<e.shape.length;++a)s.push([0,0]);var u=e.pad(s),c=fv(u.shape,r,o,!1),h=hv(c.length,r.length,!1),d=dv(u.shape,r,o,!1);return u.reshape(c).transpose(h).reshape(d)},t.prototype.pool=function(e,r,i){Ke(e,"pool");for(var o=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,v=r.padInfo.left,p=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(e.dataId),x=rn(r.outShape,e.dtype),w=x.values,_=r.outShape[1]*r.outShape[2]*r.outShape[3],E=r.outShape[2]*r.outShape[3],I=r.outShape[3],C=0;C<r.batchSize;++C)for(var N=C*_,O=C*e.strides[0],U=0;U<r.inChannels;++U)for(var M=0;M<r.outHeight;++M)for(var T=M*o-d,j=Math.max(0,T),D=Math.min(r.inHeight,c+T),B=N+M*E,X=0;X<r.outWidth;++X){for(var G=X*s-v,oe=Math.max(0,G),he=Math.min(r.inWidth,h+G),ae=p,W=0,ne=0,se=j;se<D;se+=a){for(var $=O+se*e.strides[1],F=oe;F<he;F+=u){var K=y[$+F*e.strides[2]+U];i==="max"&&K>ae?ae=K:i==="avg"&&(W+=K,ne++)}if(isNaN(ae))break}w[B+X*I+U]=i==="avg"?W/ne:ae}return x.toTensor()},t.prototype.maxPool=function(e,r){return this.pool(e,r,"max")},t.prototype.maxPoolPositions=function(e,r){for(var i=rn(r.outShape,"int32"),o=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,v=r.padInfo.left,p=this.bufferSync(e),y=0;y<r.batchSize;++y)for(var x=0;x<r.inChannels;++x)for(var w=0;w<r.outHeight;++w){for(var _=w*o-d,E=_;E<0;)E+=a;for(var I=Math.min(r.inHeight,c+_),C=0;C<r.outWidth;++C){for(var N=C*s-v,O=N;O<0;)O+=u;for(var U=Math.min(r.inWidth,h+N),M=Number.NEGATIVE_INFINITY,T=-1,j=E;j<I;j+=a)for(var D=j-_,B=O;B<U;B+=u){var X=B-N,G=p.get(y,j,B,x);G>M&&(M=G,T=D*h+X)}i.set(T,y,w,C,x)}}return i.toTensor()},t.prototype.maxPoolBackprop=function(e,r,i,o){Ke([r,i],"maxPoolBackprop");for(var s=this.maxPoolPositions(r,o),a=o.strideHeight,u=o.strideWidth,c=o.dilationHeight,h=o.dilationWidth,d=o.effectiveFilterHeight,v=o.effectiveFilterWidth,p=v-1-o.padInfo.left,y=d-1-o.padInfo.top,x=rn(r.shape,"float32"),w=this.bufferSync(s),_=this.bufferSync(e),E=0;E<o.batchSize;++E)for(var I=0;I<o.inChannels;++I)for(var C=0;C<o.inHeight;++C)for(var N=0;N<o.inWidth;++N){for(var O=C-y,U=N-p,M=0,T=0;T<d;T+=c){var j=(O+T)/a;if(!(j<0||j>=o.outHeight||Math.floor(j)!==j))for(var D=0;D<v;D+=h){var B=(U+D)/u;if(!(B<0||B>=o.outWidth||Math.floor(B)!==B)){var X=d*v-1-w.get(E,j,B,I)===T*v+D?1:0;X!==0&&(M+=_.get(E,j,B,I)*X)}}}x.set(M,E,C,N,I)}return x.toTensor()},t.prototype.avgPoolBackprop=function(e,r,i){Ke([e,r],"avgPoolBackprop");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c=i.dilationHeight,h=i.dilationWidth,d=i.effectiveFilterHeight,v=i.effectiveFilterWidth,p=v-1-i.padInfo.left,y=d-1-i.padInfo.top,x=rn(r.shape,"float32"),w=1/(a*u),_=this.bufferSync(e),E=0;E<i.batchSize;++E)for(var I=0;I<i.inChannels;++I)for(var C=0;C<i.inHeight;++C)for(var N=0;N<i.inWidth;++N){for(var O=C-y,U=N-p,M=0,T=0;T<d;T+=c){var j=(O+T)/o;if(!(j<0||j>=i.outHeight||Math.floor(j)!==j))for(var D=0;D<v;D+=h){var B=(U+D)/s;B<0||B>=i.outWidth||Math.floor(B)!==B||(M+=_.get(E,j,B,I))}}x.set(M*w,E,C,N,I)}return x.toTensor()},t.prototype.pool3d=function(e,r,i){Ke(e,"pool3d");for(var o=r.strideDepth,s=r.strideHeight,a=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,h=r.dilationWidth,d=r.effectiveFilterDepth,v=r.effectiveFilterHeight,p=r.effectiveFilterWidth,y=r.padInfo.front,x=r.padInfo.top,w=r.padInfo.left,_=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,E=this.readSync(e.dataId),I=rn(r.outShape,e.dtype),C=I.values,N=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],O=r.outShape[2]*r.outShape[3]*r.outShape[4],U=r.outShape[3]*r.outShape[4],M=r.outShape[4],T=0;T<r.batchSize;++T)for(var j=T*N,D=T*e.strides[0],B=0;B<r.inChannels;++B)for(var X=0;X<r.outDepth;++X){for(var G=X*o-y,oe=G;oe<0;)oe+=u;for(var he=Math.min(r.inDepth,d+G),ae=j+X*O,W=0;W<r.outHeight;++W){for(var ne=W*s-x,se=ne;se<0;)se+=c;for(var $=Math.min(r.inHeight,v+ne),F=ae+W*U,K=0;K<r.outWidth;++K){for(var Q=K*a-w,ue=Q;ue<0;)ue+=h;for(var de=Math.min(r.inWidth,p+Q),ve=F+K*M,we=_,Ce=0,Le=0,be=oe;be<he;be+=u){for(var De=D+be*e.strides[1],Re=se;Re<$;Re+=c){for(var Xe=De+Re*e.strides[2],ee=ue;ee<de;ee+=h){var Je=E[Xe+ee*e.strides[3]+B];if(i==="max"&&Je>we?we=Je:i==="avg"&&(Ce+=Je,Le++),isNaN(we))break}if(isNaN(we))break}if(isNaN(we))break}C[ve+B]=i==="avg"?Ce/Le:we}}}return I.toTensor()},t.prototype.avgPool3d=function(e,r){return Ke(e,"avgPool3d"),this.pool3d(e,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,r,i){Ke([e,r],"avgPool3dBackprop");for(var o=i.strideDepth,s=i.strideHeight,a=i.strideWidth,u=i.filterDepth,c=i.filterHeight,h=i.filterWidth,d=i.dilationDepth,v=i.dilationHeight,p=i.dilationWidth,y=i.effectiveFilterDepth,x=i.effectiveFilterHeight,w=i.effectiveFilterWidth,_=y-1-i.padInfo.front,E=w-1-i.padInfo.left,I=x-1-i.padInfo.top,C=rn(r.shape,"float32"),N=1/(u*c*h),O=this.bufferSync(e),U=0;U<i.batchSize;++U)for(var M=0;M<i.inChannels;++M)for(var T=0;T<i.inDepth;++T)for(var j=0;j<i.inHeight;++j)for(var D=0;D<i.inWidth;++D){for(var B=T-_,X=j-I,G=D-E,oe=0,he=0;he<y;he+=d){var ae=(B+he)/o;if(!(ae<0||ae>=i.outDepth||Math.floor(ae)!==ae))for(var W=0;W<x;W+=v){var ne=(X+W)/s;if(!(ne<0||ne>=i.outHeight||Math.floor(ne)!==ne))for(var se=0;se<w;se+=p){var $=(G+se)/a;$<0||$>=i.outWidth||Math.floor($)!==$||(oe+=O.get(U,ae,ne,$,M))}}}C.set(oe*N,U,T,j,D,M)}return C.toTensor()},t.prototype.maxPool3d=function(e,r){return Ke(e,"maxPool3d"),this.pool3d(e,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,r){for(var i=rn(r.outShape,"int32"),o=r.strideDepth,s=r.strideHeight,a=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,h=r.dilationWidth,d=r.effectiveFilterDepth,v=r.effectiveFilterHeight,p=r.effectiveFilterWidth,y=r.padInfo.front,x=r.padInfo.top,w=r.padInfo.left,_=this.bufferSync(e),E=0;E<r.batchSize;++E)for(var I=0;I<r.inChannels;++I)for(var C=0;C<r.outDepth;++C){for(var N=C*o-y,O=N;O<0;)O+=u;for(var U=Math.min(r.inDepth,d+N),M=0;M<r.outHeight;++M){for(var T=M*s-x,j=T;j<0;)j+=c;for(var D=Math.min(r.inHeight,v+T),B=0;B<r.outWidth;++B){for(var X=B*a-w,G=X;G<0;)G+=h;for(var oe=Math.min(r.inWidth,p+X),he=Number.NEGATIVE_INFINITY,ae=-1,W=O;W<U;W+=u)for(var ne=W-N,se=j;se<D;se+=c)for(var $=se-T,F=G;F<oe;F+=h){var K=F-X,Q=_.get(E,W,se,F,I);Q>=he&&(he=Q,ae=ne*v*p+$*v+K)}i.set(ae,E,C,M,B,I)}}}return i.toTensor()},t.prototype.maxPool3dBackprop=function(e,r,i,o){Ke([r,i],"maxPool3dBackprop");for(var s=this.maxPool3dPositions(r,o),a=o.strideDepth,u=o.strideHeight,c=o.strideWidth,h=o.dilationDepth,d=o.dilationHeight,v=o.dilationWidth,p=o.effectiveFilterDepth,y=o.effectiveFilterHeight,x=o.effectiveFilterWidth,w=p-1-o.padInfo.front,_=x-1-o.padInfo.left,E=y-1-o.padInfo.top,I=rn(r.shape,"float32"),C=this.bufferSync(s),N=this.bufferSync(e),O=0;O<o.batchSize;++O)for(var U=0;U<o.inChannels;++U)for(var M=0;M<o.inDepth;++M)for(var T=0;T<o.inHeight;++T)for(var j=0;j<o.inWidth;++j){for(var D=M-w,B=T-E,X=j-_,G=0,oe=0;oe<p;oe+=h){var he=(D+oe)/a;if(!(he<0||he>=o.outDepth||Math.floor(he)!==he))for(var ae=0;ae<y;ae+=d){var W=(B+ae)/u;if(!(W<0||W>=o.outHeight||Math.floor(W)!==W))for(var ne=0;ne<x;ne+=v){var se=(X+ne)/c;if(!(se<0||se>=o.outWidth||Math.floor(se)!==se)){var $=p*y*x-1-C.get(O,he,W,se,U)===oe*y*x+ae*x+ne?1:0;$!==0&&(G+=N.get(O,he,W,se,U)*$)}}}}I.set(G,O,M,T,j,U)}return I.toTensor()},t.prototype.cast=function(e,r){return R4(e,r,this)},t.prototype.reshape=function(e,r){return kg(e,r)},t.prototype.avgPool=function(e,r){return Ke(e,"avgPool"),this.pool(e,r,"avg").toFloat()},t.prototype.resizeBilinear=function(e,r,i,o){Ke(e,"resizeBilinear");for(var s=e.shape,a=s[0],u=s[1],c=s[2],h=s[3],d=this.readSync(e.dataId),v=new Float32Array(Ct([a,r,i,h])),p=[o&&r>1?u-1:u,o&&i>1?c-1:c],y=[o&&r>1?r-1:r,o&&i>1?i-1:i],x=0,w=p[0]/y[0],_=p[1]/y[1],E=0;E<a;E++)for(var I=0;I<r;I++)for(var C=w*I,N=Math.floor(C),O=C-N,U=Math.min(u-1,Math.ceil(C)),M=E*e.strides[0]+N*e.strides[1],T=E*e.strides[0]+U*e.strides[1],j=0;j<i;j++)for(var D=_*j,B=Math.floor(D),X=D-B,G=Math.min(c-1,Math.ceil(D)),oe=M+B*e.strides[2],he=T+B*e.strides[2],ae=M+G*e.strides[2],W=T+G*e.strides[2],ne=0;ne<h;ne++){var se=d[oe+ne],$=d[he+ne],F=se+(d[ae+ne]-se)*X,K=F+($+(d[W+ne]-$)*X-F)*O;v[x++]=K}return ki(v,[a,r,i,h])},t.prototype.resizeBilinearBackprop=function(e,r,i){Ke([e,r],"resizeBilinearBackprop");for(var o=r.shape,s=o[0],a=o[1],u=o[2],c=o[3],h=e.shape,d=h[1],v=h[2],p=new Float32Array(s*a*u*c),y=[i&&d>1?a-1:a,i&&v>1?u-1:u],x=[i&&d>1?d-1:d,i&&v>1?v-1:v],w=y[0]/x[0],_=y[1]/x[1],E=this.readSync(e.dataId),I=0,C=0;C<s;C++)for(var N=C*r.strides[0],O=0;O<d;O++)for(var U=O*w,M=Math.floor(U),T=Math.min(Math.ceil(U),a-1),j=N+M*r.strides[1],D=N+T*r.strides[1],B=U-M,X=1-B,G=0;G<v;G++)for(var oe=G*_,he=Math.floor(oe),ae=Math.min(Math.ceil(oe),u-1),W=oe-he,ne=1-W,se=j+he*r.strides[2],$=j+ae*r.strides[2],F=D+he*r.strides[2],K=D+ae*r.strides[2],Q=X*ne,ue=X*W,de=B*ne,ve=B*W,we=0;we<c;we++){var Ce=E[I++];p[se+we]+=Ce*Q,p[$+we]+=Ce*ue,p[F+we]+=Ce*de,p[K+we]+=Ce*ve}return Eo(p,[s,u,a,c],r.dtype)},t.prototype.resizeNearestNeighbor=function(e,r,i,o){Ke(e,"resizeNearestNeighbor");for(var s=e.shape,a=s[0],u=s[1],c=s[2],h=s[3],d=this.readSync(e.dataId),v=new Float32Array(a*r*i*h),p=[o&&r>1?u-1:u,o&&i>1?c-1:c],y=[o&&r>1?r-1:r,o&&i>1?i-1:i],x=p[0]/y[0],w=p[1]/y[1],_=0,E=0;E<a;E++)for(var I=E*e.strides[0],C=0;C<r;C++)for(var N=x*C,O=I+Math.min(u-1,o?Math.round(N):Math.floor(N))*e.strides[1],U=0;U<i;U++)for(var M=w*U,T=O+Math.min(c-1,o?Math.round(M):Math.floor(M))*e.strides[2],j=0;j<h;j++){var D=d[T+j];v[_++]=D}return ki(v,[a,r,i,h],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,r,i){Ke([e,r],"resizeNearestNeighborBackprop");for(var o=r.shape,s=o[0],a=o[1],u=o[2],c=o[3],h=e.shape,d=h[1],v=h[2],p=new Float32Array(s*a*u*c),y=this.readSync(e.dataId),x=[i&&d>1?a-1:a,i&&v>1?u-1:u],w=[i&&d>1?d-1:d,i&&v>1?v-1:v],_=x[0]/w[0],E=x[1]/w[1],I=1/_,C=1/E,N=2*Math.ceil(I)+2,O=2*Math.ceil(C)+2,U=0;U<s;U++)for(var M=U*r.strides[0],T=0;T<a;T++)for(var j=M+T*r.strides[1],D=Math.floor(T*I),B=Math.floor(D-N/2),X=0;X<u;X++)for(var G=j+X*r.strides[2],oe=Math.floor(X*C),he=Math.floor(oe-O/2),ae=0;ae<c;ae++){for(var W=0,ne=0;ne<N;ne++){var se=ne+B;if(!(se<0||se>=d)){var $=M+se*e.strides[1],F=se*_;if(T===Math.min(a-1,i?Math.round(F):Math.floor(F)))for(var K=0;K<O;K++){var Q=K+he;if(!(Q<0||Q>=v)){var ue=$+Q*e.strides[2],de=Q*E;X===Math.min(u-1,i?Math.round(de):Math.floor(de))&&(W+=y[ue+ae])}}}}p[G+ae]=W}return Eo(p,r.shape,r.dtype)},t.prototype.batchNormalization=function(e,r,i,o,s,a){Ke([e,r,i,s,a],"batchNorm");for(var u=this.readSync(e.dataId),c=this.readSync(r.dataId),h=this.readSync(i.dataId),d=s?this.readSync(s.dataId):new Float32Array([1]),v=a?this.readSync(a.dataId):new Float32Array([0]),p=new Float32Array(u.length),y=v.length,x=d.length,w=h.length,_=c.length,E=0,I=0,C=0,N=0,O=0;O<u.length;++O)p[O]=v[E++]+(u[O]-c[I++])*d[C++]/Math.sqrt(h[N++]+o),E>=y&&(E=0),I>=_&&(I=0),C>=x&&(C=0),N>=w&&(N=0);return Eo(p,e.shape)},t.prototype.localResponseNormalization4D=function(e,r,i,o,s){Ke(e,"localResponseNormalization4D");var a=e.shape[3],u=a-1,c=this.readSync(e.dataId),h=e.size,d=new Float32Array(h);function v(w){for(var _=w%a,E=w-_+Math.max(0,_-r),I=w-_+Math.min(_+r,u),C=0;E<=I;E++){var N=c[E];C+=N*N}return C}for(var p=0;p<h;p++){var y=v(p),x=c[p]*Math.pow(i+o*y,-s);d[p]=x}return Eo(d,e.shape)},t.prototype.LRNGrad=function(e,r,i,o,s,a,u){Ke(e,"LRNGrad");for(var c=e.shape[3],h=this.readSync(e.dataId),d=this.readSync(r.dataId),v=this.readSync(i.dataId),p=new Float32Array(e.size),y=e.size,x=0;x<y;x++){for(var w=x%c,_=x-w+Math.max(0,w-o),E=x-w+Math.min(c,w+o+1),I=0,C=_;C<E;C++)I+=Math.pow(d[C],2);for(I=a*I+s,C=_;C<E;C++){var N=-2*a*u*d[C]*v[x]/I;x===C&&(N+=Math.pow(I,-u)),N*=h[x],p[C]+=N}}return Eo(p,e.shape)},t.prototype.multinomial=function(e,r,i,o){Ke(e,"multinomial");for(var s=r?e:Fu(e),a=s.shape[0],u=s.shape[1],c=Qn([a,i],"int32"),h=this.readSync(c.dataId),d=this.readSync(s.dataId),v=0;v<a;++v){var p=v*u,y=new Float32Array(u-1);y[0]=d[p];for(var x=1;x<y.length;++x)y[x]=y[x-1]+d[p+x];for(var w=Mv(o.toString()),_=v*i,E=0;E<i;++E){var I=w();h[_+E]=y.length;for(var C=0;C<y.length;C++)if(I<y[C]){h[_+E]=C;break}}}return c},t.prototype.oneHot=function(e,r,i,o){Ke(e,"oneHot");var s=new Float32Array(e.size*r);s.fill(o);for(var a=this.readSync(e.dataId),u=0;u<e.size;++u)a[u]>=0&&a[u]<r&&(s[u*r+a[u]]=i);return Il(s,[e.size,r],"int32")},t.prototype.nonMaxSuppression=function(e,r,i,o,s){return Ke(e,"nonMaxSuppression"),O1(this.readSync(e.dataId),this.readSync(r.dataId),i,o,s)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,r){for(var i=e.shape[0],o=e.shape[1],s=rn(e.shape,"float32"),a=rn(e.shape,"float32"),u=Aa(e).as2D(i,o),c=Rs(e).as2D(i,o),h=0;h<i;h++)for(var d=u.slice([h,0],[1,o]),v=c.slice([h,0],[1,o]),p=Ci(d,v),y=this.readSync(this.fftImpl(p,r).dataId),x=0;x<o;x++){var w=ww(y,x);s.values[h*o+x]=w.real,a.values[h*o+x]=w.imag}return Ci(s.toTensor(),a.toTensor()).as2D(i,o)},t.prototype.fftImpl=function(e,r){var i=e.as1D(),o=i.size;if(this.isExponentOf2(o)){var s=this.fftRadix2(i,o,r).as2D(e.shape[0],e.shape[1]);return r&&(s=Ci(Aa(s).div(rt(o)),Rs(s).div(rt(o)))),s}var a=this.readSync(e.dataId),u=(function(c){for(var h=new Float32Array(c.length/2),d=new Float32Array(c.length/2),v=0;v<c.length;v+=2)h[v/2]=c[v],d[v/2]=c[v+1];return{real:h,imag:d}})(this.fourierTransformByMatmul(a,o,r));return Ci(u.real,u.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return(e&e-1)==0},t.prototype.fftRadix2=function(e,r,i){if(r===1)return e;var o=this.readSync(e.dataId),s=r/2,a=(function(_){for(var E=Math.ceil(_.length/4),I=new Float32Array(E),C=new Float32Array(E),N=0;N<_.length;N+=4)I[Math.floor(N/4)]=_[N],C[Math.floor(N/4)]=_[N+1];return{real:I,imag:C}})(o),u=Ci(a.real,a.imag).as1D(),c=(function(_){for(var E=Math.floor(_.length/4),I=new Float32Array(E),C=new Float32Array(E),N=2;N<_.length;N+=4)I[Math.floor(N/4)]=_[N],C[Math.floor(N/4)]=_[N+1];return{real:I,imag:C}})(o),h=Ci(c.real,c.imag).as1D();u=this.fftRadix2(u,s,i),h=this.fftRadix2(h,s,i);var d=(function(_,E){for(var I=new Float32Array(_/2),C=new Float32Array(_/2),N=0;N<Math.ceil(_/2);N++){var O=(E?2:-2)*Math.PI*(N/_);I[N]=Math.cos(O),C[N]=Math.sin(O)}return{real:I,imag:C}})(r,i),v=Ci(d.real,d.imag).mul(h),p=u.add(v),y=u.sub(v),x=Aa(p).concat(Aa(y)),w=Rs(p).concat(Rs(y));return Ci(x,w).as1D()},t.prototype.fourierTransformByMatmul=function(e,r,i){for(var o=new Float32Array(2*r),s=0;s<r;s++){for(var a=0,u=0,c=0;c<r;c++){var h=gP(s*c,r,i),d=ww(e,c);a+=d.real*h.real-d.imag*h.imag,u+=d.real*h.imag+d.imag*h.real}i&&(a/=r,u/=r),mP(o,a,u,s)}return o},t.prototype.depthToSpace=function(e,r,i){ce(i==="NHWC",(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i})),ce(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));for(var o=e.shape[0],s=e.shape[1],a=e.shape[2],u=e.shape[3],c=s*r,h=a*r,d=u/(r*r),v=this.readSync(e.dataId),p=new Float32Array(o*c*h*d),y=0,x=0;x<o;++x)for(var w=0;w<c;++w)for(var _=Math.floor(w/r),E=w%r,I=0;I<h;++I)for(var C=Math.floor(I/r),N=(E*r+I%r)*d,O=0;O<d;++O){var U=O+N+u*(C+a*(_+s*x));p[y++]=v[U]}return Eo(p,[o,c,h,d])},t.prototype.broadcastedBinaryOp=function(e,r,i,o){var s=pn(e.shape,r.shape),a=rn(s,i),u=this.readSync(e.dataId),c=this.readSync(r.dataId),h=kl(e.shape,s),d=kl(r.shape,s),v=a.values;if(h.length+d.length===0)for(var p=0;p<v.length;++p)v[p]=o(u[p%u.length],c[p%c.length]);else{var y=this.bufferSync(e),x=this.bufferSync(r),w=function(_){var E=a.indexToLoc(_),I=E.slice(-e.rank);h.forEach((function(U){return I[U]=0}));var C=y.locToIndex(I),N=E.slice(-r.rank);d.forEach((function(U){return N[U]=0}));var O=x.locToIndex(N);v[_]=o(u[C],c[O])};for(p=0;p<v.length;++p)w(p)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,r,i){var o=pn(e.shape,r.shape),s=rn(o,"float32"),a=rn(o,"float32"),u=this.readSync(e.dataId),c=this.readSync(r.dataId),h=kl(e.shape,o),d=kl(r.shape,o),v=s.values,p=a.values;if(h.length+d.length===0)for(var y=0;y<v.length;y++){var x=y%u.length,w=y%c.length,_=i(u[2*x],u[2*x+1],c[2*w],c[2*w+1]);v[y]=_.real,p[y]=_.imag}else{var E=this.bufferSync(this.data.get(e.dataId).complexTensors.real),I=this.bufferSync(this.data.get(r.dataId).complexTensors.real),C=function(N){var O=s.indexToLoc(N),U=O.slice(-e.rank);h.forEach((function(B){return U[B]=0}));var M=E.locToIndex(U),T=O.slice(-r.rank);d.forEach((function(B){return T[B]=0}));var j=I.locToIndex(T),D=i(u[2*M],u[2*M+1],c[2*j],c[2*j+1]);v[N]=D.real,p[N]=D.imag};for(y=0;y<v.length;y++)C(y)}return this.complex(s.toTensor(),a.toTensor())},t.prototype.split=function(e,r,i){return D4(e,r,i)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,r,i,o,s,a){for(var u=e.shape,c=u[0],h=u[1],d=u[2],v=u[3],p=r.shape[0],y=o[0],x=o[1],w=rn([p,y,x,v],"float32"),_=this.readSync(r.dataId),E=this.readSync(i.dataId),I=this.readSync(e.dataId),C=e.strides,N=w.strides,O=0;O<p;O++){var U=4*O,M=_[U],T=_[U+1],j=_[U+2],D=_[U+3],B=E[O];if(!(B>=c))for(var X=y>1?(j-M)*(h-1)/(y-1):0,G=x>1?(D-T)*(d-1)/(x-1):0,oe=0;oe<y;oe++){var he=y>1?M*(h-1)+oe*X:.5*(M+j)*(h-1);if(he<0||he>h-1)for(var ae=0;ae<x;ae++)for(var W=0;W<v;W++){var ne=W+ae*N[2]+oe*N[1]+O*N[0];w.values[ne]=a}else if(s==="bilinear"){var se=Math.floor(he),$=Math.ceil(he),F=he-se;for(ae=0;ae<x;ae++)if((be=x>1?T*(d-1)+ae*G:.5*(T+D)*(d-1))<0||be>d-1)for(W=0;W<v;W++)ne=W+ae*N[2]+oe*N[1]+O*N[0],w.values[ne]=a;else{var K=Math.floor(be),Q=Math.ceil(be),ue=be-K;for(W=0;W<v;W++){var de=I[ne=W+K*C[2]+se*C[1]+B*C[0]],ve=I[ne=W+Q*C[2]+se*C[1]+B*C[0]],we=I[ne=W+K*C[2]+$*C[1]+B*C[0]],Ce=de+(ve-de)*ue,Le=we+(I[ne=W+Q*C[2]+$*C[1]+B*C[0]]-we)*ue;ne=W+ae*N[2]+oe*N[1]+O*N[0],w.values[ne]=Ce+(Le-Ce)*F}}}else for(ae=0;ae<x;++ae){var be;if((be=x>1?T*(d-1)+ae*G:.5*(T+D)*(d-1))<0||be>d-1)for(W=0;W<v;W++)ne=W+ae*N[2]+oe*N[1]+O*N[0],w.values[ne]=a;else{var De=Math.round(be),Re=Math.round(he);for(W=0;W<v;W++){var Xe=W+De*C[2]+Re*C[1]+B*C[0],ee=W+ae*N[2]+oe*N[1]+O*N[0];w.values[ee]=I[Xe]}}}}}return w.toTensor()},t.prototype.sparseToDense=function(e,r,i,o){var s=pv(0,e,i),a=s.sliceRank,u=s.numUpdates,c=s.sliceSize,h=s.strides,d=s.outputSize;return this.scatter(e,r,i,d,c,u,a,h,o,!1)},t.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],s=C4(e,r),a=s[0],u=s[1],c=s[2],h=s[3];if(u===0)return ki([],a,e.dtype);for(var d=new ad([u,c],e.dtype),v=this.readSync(r.dataId),p=this.readSync(e.dataId),y=0;y<u;y++){for(var x=[],w=0,_=0;_<o;_++){var E=v[y*o+_];w+=E*h[_],x.push(E)}if(w<0||w>=e.size/c)throw new Error("Invalid indices: "+x+" does not index into "+e.shape);for(var I=0;I<c;I++)d.values[y*c+I]=p[w*c+I]}return d.toTensor().reshape(a)},t.prototype.scatterND=function(e,r,i){var o=pv(0,e,i),s=o.sliceRank,a=o.numUpdates,u=o.sliceSize,c=o.strides,h=o.outputSize,d=rt(0);return this.scatter(e,r,i,h,u,a,s,c,d,!0)},t.prototype.fill=function(e,r,i){var o=iv(i=i||wd(r),Ct(e));return o.fill(r),Se.makeTensor(o,e,i,this)},t.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var r=iv(e.dtype,Ct(e.shape));return this.makeOutput(r,e.shape,e.dtype)},t.prototype.linspace=function(e,r,i){return T4(e,r,i)},t.prototype.scatter=function(e,r,i,o,s,a,u,c,h,d){var v=[o/s,s],p=this.readSync(e.dataId),y=this.readSync(r.dataId);if(o===0)return ki([],i,r.dtype);var x=new ad(v,r.dtype);x.values.fill(this.readSync(h.dataId)[0]);for(var w=0;w<a;w++){for(var _=[],E=0,I=0;I<u;I++){var C=p[w*u+I];_.push(C),E+=C*c[I]}if(E<0||E>=o/s)throw new Error("Invalid indices: "+_+" does not index into "+i);for(var N=0;N<s;N++)d?x.values[E*s+N]+=y[w*s+N]:x.values[E*s+N]=r.rank===0?y[0]:y[w*s+N]}return x.toTensor().reshape(i)},t})(I4);Se.registerBackend("cpu",(function(){return new OD}),1);for(var b0=0,Vw=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=n.attrs,i=t,o=i.boxes,s=i.scores,a=r,u=a.maxOutputSize,c=a.iouThreshold,h=a.scoreThreshold,d=a.softNmsSigma,v=e;Ke(o,"NonMaxSuppressionWithScore");var p=B1(v.data.get(o.dataId).values,v.data.get(s.dataId).values,u,c,h,d);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=t.x,i=e;Ke(r,"square");for(var o=i.data.get(r.dataId).values,s=new Float32Array(o.length),a=0;a<o.length;++a){var u=o[a];s[a]=u*u}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:ld,backendName:"cpu",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=t,i=r.a,o=r.b,s=e;Ke([i,o],ld);var a=s.data.get(i.dataId).values,u=s.data.get(o.dataId).values,c=(function(v,p,y,x,w,_){var E=pn(v,p),I=E.length,C=Os(E),N=od(w,Ct(E)),O=v.length,U=p.length,M=Os(v),T=Os(p),j=kl(v,E),D=kl(p,E);if(j.length+D.length===0)for(var B=0;B<N.length;++B)N[B]=_(y[B%y.length],x[B%x.length]);else{var X=function(G){var oe=$I(G,I,C),he=oe.slice(-O);j.forEach((function(se){return he[se]=0}));var ae=fw(he,O,M),W=oe.slice(-U);D.forEach((function(se){return W[se]=0}));var ne=fw(W,U,T);N[G]=_(y[ae],x[ne])};for(B=0;B<N.length;++B)X(B)}return[N,E]})(i.shape,o.shape,a,u,i.dtype,(function(v,p){var y=v-p;return y*y})),h=c[0],d=c[1];return{dataId:s.write(h,d,i.dtype),shape:d,dtype:i.dtype}}}];b0<Vw.length;b0++)r4(Vw[b0]);var wf,BD=function(n){this.variableNames=["A"];var t=Gi(),e=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+e+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},jD=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Gi(),e=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+e+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var _0=0,Ww=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=n.attrs,i=t.pixels,o=r.numChannels,s=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,u=s?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=u[0],h=u[1],d=[h,c],v=[h,c,o];(a||s)&&(wf==null&&(wf=document.createElement("canvas").getContext("2d")),wf.canvas.width=c,wf.canvas.height=h,wf.drawImage(i,0,0,c,h),i=wf.canvas);var p=e.makeTensorInfo(d,"int32");e.texData.get(p.dataId).usage=Jo.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(p.dataId),i);var y=Ve().getBool("WEBGL_PACK")?new jD(v):new BD(v),x=e.runWebGLProgram(y,[p],"int32");return e.disposeData(p.dataId),x}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=n.attrs;uv("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=t,o=i.boxes,s=i.scores,a=r,u=a.maxOutputSize,c=a.iouThreshold,h=a.scoreThreshold,d=a.softNmsSigma,v=e,p=B1(v.readSync(o.dataId),v.readSync(s.dataId),u,c,h,d);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=t.x,i=e,o=new an(r.shape,"return x * x;");return i.runWebGLProgram(o,[r],r.dtype)}},{kernelName:ld,backendName:"webgl",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=t,i=r.a,o=r.b,s=e,a=Ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nu("return (a - b) * (a - b);",i.shape,o.shape):new Nr("return (a - b) * (a - b);",i.shape,o.shape);return s.compileAndRun(a,[i,o])}}];_0<Ww.length;_0++)r4(Ww[_0]);for(var S0=0,qw=[{kernelName:"Square",gradFunc:function(n,t){var e=t[0];return{x:function(){return n.mul(e.toFloat().mul(2))}}}},{kernelName:ld,gradFunc:function(n,t){var e=t[0],r=t[1],i=rt(2);return{a:function(){return Xi(n,Xi(i,ii(e,r)))},b:function(){return Xi(n,Xi(i,ii(r,e)))}}}}];S0<qw.length;S0++)MI(qw[S0]);var UD=(function(){function n(){}return n.prototype.fetch=function(t,e){return fetch(t,e)},n.prototype.now=function(){return performance.now()},n.prototype.encode=function(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+e);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},n.prototype.decode=function(t,e){return new TextDecoder(e).decode(t)},n})();Ve().get("IS_BROWSER")&&Ve().setPlatform("browser",new UD);var C0,zD=function(){return require("node-fetch")},VD=(function(){function n(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return n.prototype.fetch=function(t,e){return Ve().global.fetch!=null?Ve().global.fetch(t,e):(C0==null&&(C0=zD()),C0(t,e))},n.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},n.prototype.encode=function(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)},n.prototype.decode=function(t,e){return t.length===0?"":new this.util.TextDecoder(e).decode(t)},n})();Ve().get("IS_NODE")&&Ve().setPlatform("node",new VD);var Ig={float32:4,int32:4,uint16:2,uint8:1,bool:1},bv=4;function k_(n,t){for(var e={},r=0,i=function(a){var u=a.name,c=a.dtype,h=a.shape,d=Ct(h),v=void 0;if("quantization"in a){var p=a.quantization;if(p.dtype!=="uint8"&&p.dtype!=="uint16")throw new Error("Weight "+a.name+" has unknown quantization dtype "+p.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var y=Ig[p.dtype],x=n.slice(r,r+d*y),w=p.dtype==="uint8"?new Uint8Array(x):new Uint16Array(x);if(c==="float32")v=Float32Array.from(w,(function(O){return O*p.scale+p.min}));else{if(c!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+c);v=Int32Array.from(w,(function(O){return Math.round(O*p.scale+p.min)}))}r+=d*y}else if(c==="string"){var _=Ct(a.shape);v=[];for(var E=0;E<_;E++){var I=new Uint32Array(n.slice(r,r+bv))[0];r+=bv;var C=new Uint8Array(n.slice(r,r+I));v.push(C),r+=I}}else{var N=Ig[c];if(x=n.slice(r,r+d*N),c==="float32")v=new Float32Array(x);else if(c==="int32")v=new Int32Array(x);else{if(c!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+c);v=new Uint8Array(x)}r+=d*N}e[u]=ki(v,h,c)},o=0,s=t;o<s.length;o++)i(s[o]);return e}function WD(n){if(n===null)throw new Error("Invalid input value: "+JSON.stringify(n));var t=0,e=[];n.forEach((function(o){if(t+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)}));var r=new Uint8Array(t),i=0;return e.forEach((function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength})),r.buffer}var Pg=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Hw(n){return Pg?Buffer.byteLength(n):new Blob([n]).size}function r2(n){var t=0;n.forEach((function(i){t+=i.byteLength}));var e=new Uint8Array(t),r=0;return n.forEach((function(i){e.set(new Uint8Array(i),r),r+=i.byteLength})),e.buffer}function Gw(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);var t=n.split("/");return t[t.length-1]}function Ed(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:Hw(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:Hw(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:n.weightData.byteLength}}var Qo=(function(){function n(){this.saveRouters=[],this.loadRouters=[]}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerSaveRouter=function(t){n.getInstance().saveRouters.push(t)},n.registerLoadRouter=function(t){n.getInstance().loadRouters.push(t)},n.getSaveHandlers=function(t){return n.getHandlers(t,"save")},n.getLoadHandlers=function(t,e){return n.getHandlers(t,"load",e)},n.getHandlers=function(t,e,r){var i=[];return(e==="load"?n.getInstance().loadRouters:n.getInstance().saveRouters).forEach((function(o){var s=o(t,r);s!==null&&i.push(s)})),i},n})(),zf="://",Pl=(function(){function n(){this.managers={}}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerManager=function(t,e){ce(t!=null,(function(){return"scheme must not be undefined or null."})),t.endsWith(zf)&&(t=t.slice(0,t.indexOf(zf))),ce(t.length>0,(function(){return"scheme must not be an empty string."}));var r=n.getInstance();ce(r.managers[t]==null,(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=e},n.getManager=function(t){var e=this.getInstance().managers[t];if(e==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},n.getSchemes=function(){return Object.keys(this.getInstance().managers)},n})();function Wp(n){if(n.indexOf(zf)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Pl.getSchemes().join(","));return{scheme:n.split(zf)[0],path:n.split(zf)[1]}}function $w(n,t,e){return e===void 0&&(e=!1),xt(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,d;return wt(this,(function(v){switch(v.label){case 0:return ce(n!==t,(function(){return"Old path and new path are the same: '"+n+"'"})),ce((r=Qo.getLoadHandlers(n)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+n+"."})),ce(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+n+"."})),i=r[0],ce((o=Qo.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),ce(o.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),s=o[0],a=Wp(n).scheme,u=Wp(n).path,c=a===Wp(n).scheme,[4,i.load()];case 1:return h=v.sent(),e&&c?[4,Pl.getManager(a).removeModel(u)]:[3,3];case 2:v.sent(),v.label=3;case 3:return[4,s.save(h)];case 4:return d=v.sent(),!e||c?[3,6]:[4,Pl.getManager(a).removeModel(u)];case 5:v.sent(),v.label=6;case 6:return[2,d.modelArtifactsInfo]}}))}))}var kc="models_store",El="model_info_store";function E_(){if(!Ve().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var n=window||self,t=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Rg(n){var t=n.result;t.createObjectStore(kc,{keyPath:"modelPath"}),t.createObjectStore(El,{keyPath:"modelPath"})}var Vf=(function(){function n(t){if(this.indexedDB=E_(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return n.prototype.save=function(t){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]}))}))},n.prototype.load=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){return[2,this.databaseAction(this.modelPath)]}))}))},n.prototype.databaseAction=function(t,e){var r=this;return new Promise((function(i,o){var s=r.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return Rg(s)},s.onsuccess=function(){var a=s.result;if(e==null){var u=a.transaction(kc,"readonly"),c=u.objectStore(kc).get(r.modelPath);c.onsuccess=function(){if(c.result==null)return a.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(c.result.modelArtifacts)},c.onerror=function(x){return a.close(),o(c.error)},u.oncomplete=function(){return a.close()}}else{var h,d=Ed(e),v=a.transaction(El,"readwrite"),p=v.objectStore(El),y=p.put({modelPath:r.modelPath,modelArtifactsInfo:d});y.onsuccess=function(){var x=(h=a.transaction(kc,"readwrite")).objectStore(kc).put({modelPath:r.modelPath,modelArtifacts:e,modelArtifactsInfo:d});x.onsuccess=function(){return i({modelArtifactsInfo:d})},x.onerror=function(w){var _=(p=v.objectStore(El)).delete(r.modelPath);_.onsuccess=function(){return a.close(),o(x.error)},_.onerror=function(E){return a.close(),o(x.error)}}},y.onerror=function(x){return a.close(),o(y.error)},v.oncomplete=function(){h==null?a.close():h.oncomplete=function(){return a.close()}}}},s.onerror=function(a){return o(s.error)}}))},n.URL_SCHEME="indexeddb://",n})(),Kw=function(n){return Ve().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Vf.URL_SCHEME)?(t=n.slice(Vf.URL_SCHEME.length),new Vf(t)):null;var t};Qo.registerSaveRouter(Kw),Qo.registerLoadRouter(Kw);var qD=(function(){function n(){this.indexedDB=E_()}return n.prototype.listModels=function(){return xt(this,void 0,void 0,(function(){var t=this;return wt(this,(function(e){return[2,new Promise((function(r,i){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Rg(o)},o.onsuccess=function(){var s=o.result,a=s.transaction(El,"readonly"),u=a.objectStore(El).getAll();u.onsuccess=function(){for(var c={},h=0,d=u.result;h<d.length;h++){var v=d[h];c[v.modelPath]=v.modelArtifactsInfo}r(c)},u.onerror=function(c){return s.close(),i(u.error)},a.oncomplete=function(){return s.close()}},o.onerror=function(s){return i(o.error)}}))]}))}))},n.prototype.removeModel=function(t){return xt(this,void 0,void 0,(function(){var e=this;return wt(this,(function(r){var i;return t=(i=t).startsWith(Vf.URL_SCHEME)?i.slice(Vf.URL_SCHEME.length):i,[2,new Promise((function(o,s){var a=e.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return Rg(a)},a.onsuccess=function(){var u,c=a.result,h=c.transaction(El,"readwrite"),d=h.objectStore(El),v=d.get(t);v.onsuccess=function(){if(v.result==null)return c.close(),s(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var p=d.delete(t),y=function(){var x=(u=c.transaction(kc,"readwrite")).objectStore(kc).delete(t);x.onsuccess=function(){return o(v.result.modelArtifactsInfo)},x.onerror=function(w){return s(v.error)}};p.onsuccess=y,p.onerror=function(x){return y(),c.close(),s(v.error)}},v.onerror=function(p){return c.close(),s(v.error)},h.oncomplete=function(){u==null?c.close():u.oncomplete=function(){return c.close()}}},a.onerror=function(u){return s(a.error)}}))]}))}))},n})();if(Ve().getBool("IS_BROWSER"))try{Pl.registerManager(Vf.URL_SCHEME,new qD)}catch{}var Pu="/",If="tensorflowjs_models",N_="info",HD="model_topology",GD="weight_specs",$D="weight_data",KD="model_metadata";function I_(n){return{info:[If,n,N_].join(Pu),topology:[If,n,HD].join(Pu),weightSpecs:[If,n,GD].join(Pu),weightData:[If,n,$D].join(Pu),modelMetadata:[If,n,KD].join(Pu)}}function XD(n){var t=n.split(Pu);if(t.length<3)throw new Error("Invalid key format: "+n);return t.slice(1,t.length-1).join(Pu)}var Wf=(function(){function n(t){if(!Ve().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=I_(this.modelPath)}return n.prototype.save=function(t){return xt(this,void 0,void 0,(function(){var e,r,i;return wt(this,(function(o){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),i=Ed(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(function(s){if(Pg)return Buffer.from(s).toString("base64");for(var a=new Uint8Array(s),u="",c=0,h=a.length;c<h;c++)u+=String.fromCharCode(a[c]);return btoa(u)})(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]}))}))},n.prototype.load=function(){return xt(this,void 0,void 0,(function(){var t,e,r,i,o,s,a;return wt(this,(function(u){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(s=JSON.parse(o),e.format=s.format,e.generatedBy=s.generatedBy,e.convertedBy=s.convertedBy,e.userDefinedMetadata=s.userDefinedMetadata),(a=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=(function(c){if(Pg){var h=Buffer.from(c,"base64");return h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength)}for(var d=atob(c),v=new Uint8Array(d.length),p=0;p<d.length;++p)v.set([d.charCodeAt(p)],p);return v.buffer})(a),[2,e]}))}))},n.URL_SCHEME="localstorage://",n})(),Xw=function(n){return Ve().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Wf.URL_SCHEME)?(t=n.slice(Wf.URL_SCHEME.length),new Wf(t)):null;var t};Qo.registerSaveRouter(Xw),Qo.registerLoadRouter(Xw);var YD=(function(){function n(){ce(Ve().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),ce(typeof window>"u"||window.localStorage!==void 0,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return n.prototype.listModels=function(){return xt(this,void 0,void 0,(function(){var t,e,r,i,o,s;return wt(this,(function(a){for(t={},e=If+Pu,r=Pu+N_,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(e)&&o.endsWith(r)&&(s=XD(o),t[s]=JSON.parse(this.LS.getItem(o)));return[2,t]}))}))},n.prototype.removeModel=function(t){return xt(this,void 0,void 0,(function(){var e,r;return wt(this,(function(i){var o;if(t=(o=t).startsWith(Wf.URL_SCHEME)?o.slice(Wf.URL_SCHEME.length):o,e=I_(t),this.LS.getItem(e.info)==null)throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,r]}))}))},n})();if(Ve().getBool("IS_BROWSER"))try{Pl.registerManager(Wf.URL_SCHEME,new YD)}catch{}var JD="model",QD=".json",ZD=".weights.bin";function Yw(n){return new Promise((function(t){return setTimeout(t)})).then(n)}var A0=(function(){function n(t){if(!Ve().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(n.URL_SCHEME)&&(t=t.slice(n.URL_SCHEME.length)),t!=null&&t.length!==0||(t=JD),this.modelTopologyFileName=t+QD,this.weightDataFileName=t+ZD}return n.prototype.save=function(t){return xt(this,void 0,void 0,(function(){var e,r,i,o,s,a;return wt(this,(function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],i={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(s=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,s.href=o,[4,Yw((function(){return s.dispatchEvent(new MouseEvent("click"))}))];case 2:return u.sent(),t.weightData==null?[3,4]:((a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=e,[4,Yw((function(){return a.dispatchEvent(new MouseEvent("click"))}))]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:Ed(t)}]}}))}))},n.URL_SCHEME="downloads://",n})(),eF=(function(){function n(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return n.prototype.load=function(){return xt(this,void 0,void 0,(function(){var t,e,r=this;return wt(this,(function(i){return t=this.files[0],e=this.files.slice(1),[2,new Promise((function(o,s){var a=new FileReader;a.onload=function(u){var c=JSON.parse(u.target.result),h=c.modelTopology;if(h!=null){e.length===0&&o({modelTopology:h});var d=c.weightsManifest;if(d!=null){var v;try{v=r.checkManifestAndWeightFiles(d,e)}catch(w){return void s(w)}var p=[],y=[],x=[];d.forEach((function(w){w.paths.forEach((function(_){y.push(_),x.push(null)})),p.push.apply(p,w.weights)})),d.forEach((function(w){w.paths.forEach((function(_){var E=new FileReader;E.onload=function(I){var C=I.target.result,N=y.indexOf(_);x[N]=C,x.indexOf(null)===-1&&o({modelTopology:h,weightSpecs:p,weightData:r2(x),format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy,userDefinedMetadata:c.userDefinedMetadata})},E.onerror=function(I){return s("Failed to weights data from file of path '"+_+"'.")},E.readAsArrayBuffer(v[_])}))}))}else s(new Error("weightManifest field is missing from file "+t.name))}else s(new Error("modelTopology field is missing from file "+t.name))},a.onerror=function(u){return s("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(t)}))]}))}))},n.prototype.checkManifestAndWeightFiles=function(t,e){for(var r=[],i=e.map((function(u){return Gw(u.name)})),o={},s=0,a=t;s<a.length;s++)a[s].paths.forEach((function(u){var c=Gw(u);if(r.indexOf(c)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+c+"'");if(r.push(c),i.indexOf(c)===-1)throw new Error("Weight file with basename '"+c+"' is not provided.");o[u]=e[i.indexOf(c)]}));if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+e.length+").");return o},n})();function Jw(n,t,e,r){(function(o){ce(o!=null&&Array.isArray(o)&&o.length>0,(function(){return"promises must be a none empty array"}))})(n),(function(o,s){ce(o>=0&&o<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o})),ce(s>=0&&s<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+s})),ce(s>=o,(function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+s}))})(e=e??0,r=r??1);var i=0;return Promise.all(n.map((function(o){return o.then((function(s){var a=e+ ++i/n.length*(r-e);return t(a),s})),o})))}function P_(n,t){return xt(this,void 0,void 0,(function(){var e,r,i,o,s,a,u,c,h;return wt(this,(function(d){switch(d.label){case 0:return t==null&&(t={}),e=t.fetchFunc==null?Ve().platform.fetch:t.fetchFunc,r=n.map((function(v){return e(v,t.requestInit,{isBinary:!0})})),i=0,o=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return s=d.sent(),[3,4];case 2:return[4,Jw(r,t.onProgress,i,o)];case 3:s=d.sent(),d.label=4;case 4:return a=s.map((function(v){return v.arrayBuffer()})),u=.5,c=1,t.onProgress!=null?[3,6]:[4,Promise.all(a)];case 5:return h=d.sent(),[3,8];case 6:return[4,Jw(a,t.onProgress,u,c)];case 7:h=d.sent(),d.label=8;case 8:return[2,h]}}))}))}function Qw(n){var t=this;return function(e,r,i){return r===void 0&&(r=""),xt(t,void 0,void 0,(function(){var o,s,a,u,c,h,d,v,p,y;return wt(this,(function(x){switch(x.label){case 0:if(o=e.map((function(){return!1})),s={},a=i!=null?i.map((function(){return!1})):[],u=[],e.forEach((function(w,_){var E=0;w.weights.forEach((function(I){var C="quantization"in I?I.quantization.dtype:I.dtype,N=Ig[C]*Ct(I.shape),O=function(){o[_]=!0,s[_]==null&&(s[_]=[]),s[_].push({manifestEntry:I,groupOffset:E,sizeBytes:N})};i!=null?i.forEach((function(U,M){U===I.name&&(O(),a[M]=!0)})):O(),u.push(I.name),E+=N}))})),!a.every((function(w){return w})))throw c=i.filter((function(w,_){return!a[_]})),new Error("Could not find weights in manifest with names: "+c.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return h=o.reduce((function(w,_,E){return _&&w.push(E),w}),[]),d=[],h.forEach((function(w){e[w].paths.forEach((function(_){var E=r+(r.endsWith("/")?"":"/")+_;d.push(E)}))})),[4,n(d)];case 1:return v=x.sent(),p={},y=0,h.forEach((function(w){for(var _=e[w].paths.length,E=0,I=0;I<_;I++)E+=v[y+I].byteLength;for(var C=new ArrayBuffer(E),N=new Uint8Array(C),O=0,U=0;U<_;U++){var M=new Uint8Array(v[y+U]);N.set(M,O),O+=M.byteLength}s[w].forEach((function(T){var j=k_(C.slice(T.groupOffset,T.groupOffset+T.sizeBytes),[T.manifestEntry]);for(var D in j)p[D]=j[D]})),y+=_})),[2,p]}}))}))}}Qo.registerSaveRouter((function(n){return Ve().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(A0.URL_SCHEME)?(function(t){return t===void 0&&(t="model"),new A0(t)})(n.slice(A0.URL_SCHEME.length)):null}));var R_=(function(){function n(t,e){if(this.DEFAULT_METHOD="POST",e==null&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,e.fetchFunc!=null?(ce(typeof e.fetchFunc=="function",(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=e.fetchFunc):this.fetch=Ve().platform.fetch,ce(t!=null&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&ce(t.length===2,(function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."})),this.path=t,e.requestInit!=null&&e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return n.prototype.save=function(t){return xt(this,void 0,void 0,(function(){var e,r,i,o;return wt(this,(function(s){switch(s.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],i={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:r},e.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),t.weightData!=null&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=s.sent()).ok)return[2,{modelArtifactsInfo:Ed(t),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}}))}))},n.prototype.load=function(){return xt(this,void 0,void 0,(function(){var t,e,r,i,o,s,a,u,c,h,d,v;return wt(this,(function(p){switch(p.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=p.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");p.label=2;case 2:return p.trys.push([2,4,,5]),[4,t.json()];case 3:return e=p.sent(),[3,5];case 4:throw p.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=e.modelTopology,o=e.weightsManifest,s=e.generatedBy,a=e.convertedBy,u=e.format,c=e.userDefinedMetadata,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:v=p.sent(),h=v[0],d=v[1],p.label=7;case 7:return[2,{modelTopology:i,weightSpecs:h,weightData:d,userDefinedMetadata:c,generatedBy:s,convertedBy:a,format:u}]}}))}))},n.prototype.loadWeights=function(t){return xt(this,void 0,void 0,(function(){var e,r,i,o,s,a,u,c,h,d,v;return wt(this,(function(p){switch(p.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,r=(function(y){var x=y.lastIndexOf("/"),w=y.lastIndexOf("?"),_=y.substring(0,x),E=w>x?y.substring(w):"";return[_+"/",E]})(e),i=r[0],o=r[1],s=this.weightPathPrefix||i,a=[],u=0,c=t;u<c.length;u++)h=c[u],a.push.apply(a,h.weights);return d=[],t.forEach((function(y){y.paths.forEach((function(x){d.push(s+x+o)}))})),[4,P_(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return v=p.sent(),[2,[a,r2(v)]]}}))}))},n.URL_SCHEME_REGEX=/^https?:\/\//,n})();function Tg(n){return n.match(R_.URL_SCHEME_REGEX)!=null}var Zw=function(n,t){return typeof fetch>"u"?null:(Array.isArray(n)?n.every((function(e){return Tg(e)})):Tg(n))?Lg(n,{onProgress:t}):null};function Lg(n,t){return new R_(n,t)}Qo.registerSaveRouter(Zw),Qo.registerLoadRouter(Zw);var k0=(function(){function n(t){this.modelArtifacts=t}return n.prototype.load=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){return[2,this.modelArtifacts]}))}))},n})(),tF=(function(){function n(t){this.saveHandler=t}return n.prototype.save=function(t){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){return[2,this.saveHandler(t)]}))}))},n})(),T_=Object.freeze({browserFiles:function(n){return new eF(n)},browserHTTPRequest:function(n,t){return Lg(n,t)},concatenateArrayBuffers:r2,decodeWeights:k_,encodeWeights:function(n,t){return xt(this,void 0,void 0,(function(){var e,r,i,o,s,a=this;return wt(this,(function(u){switch(u.label){case 0:for(e=[],r=[],i=Array.isArray(n)?n.map((function(c){return c.name})):Object.keys(n),o=function(c){var h=i[c],d=Array.isArray(n)?n[c].tensor:n[h];if(d.dtype!=="float32"&&d.dtype!=="int32"&&d.dtype!=="bool"&&d.dtype!=="string")throw new Error("Unsupported dtype in weight '"+h+"': "+d.dtype);var v={name:h,shape:d.shape,dtype:d.dtype};if(d.dtype==="string"){var p=new Promise((function(y){return xt(a,void 0,void 0,(function(){var x,w,_,E,I,C,N;return wt(this,(function(O){switch(O.label){case 0:return[4,d.bytes()];case 1:for(x=O.sent(),w=x.reduce((function(U,M){return U+M.length}),0)+bv*x.length,_=new Uint8Array(w),E=0,I=0;I<x.length;I++)C=x[I],N=new Uint8Array(new Uint32Array([C.length]).buffer),_.set(N,E),E+=bv,_.set(C,E),E+=C.length;return y(_),[2]}}))}))}));r.push(p)}else r.push(d.data());t!=null&&(v.group=t),e.push(v)},s=0;s<i.length;++s)o(s);return[4,Promise.all(r)];case 1:return[2,{data:WD(u.sent()),specs:e}]}}))}))},fromMemory:function(n,t,e,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new k0(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new k0({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new k0({modelTopology:n,weightSpecs:t,weightData:e,trainingConfig:r}))},getLoadHandlers:function(n,t){return Qo.getLoadHandlers(n,t)},getModelArtifactsInfoForJSON:Ed,getSaveHandlers:function(n){return Qo.getSaveHandlers(n)},http:Lg,isHTTPScheme:Tg,loadWeights:function(n,t,e,r){return t===void 0&&(t=""),xt(this,void 0,void 0,(function(){return wt(this,(function(i){return[2,Qw((function(o){return P_(o,{requestInit:r})}))(n,t,e)]}))}))},registerLoadRouter:function(n){return Qo.registerLoadRouter(n)},registerSaveRouter:function(n){return Qo.registerSaveRouter(n)},weightsLoaderFactory:Qw,withSaveHandler:function(n){return new tF(n)},copyModel:function(n,t){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){return[2,$w(n,t,!1)]}))}))},listModels:function(){return xt(this,void 0,void 0,(function(){var n,t,e,r,i,o,s;return wt(this,(function(a){switch(a.label){case 0:n=Pl.getSchemes(),t={},e=0,r=n,a.label=1;case 1:return e<r.length?(i=r[e],[4,Pl.getManager(i).listModels()]):[3,4];case 2:for(s in o=a.sent())t[i+zf+s]=o[s];a.label=3;case 3:return e++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(n,t){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){return[2,$w(n,t,!0)]}))}))},removeModel:function(n){return xt(this,void 0,void 0,(function(){var t;return wt(this,(function(e){return t=Wp(n),[2,Pl.getManager(t.scheme).removeModel(t.path)]}))}))}}),bf;ge({confusionMatrix_:function(n,t,e){var r=te(n,"labels","confusionMatrix"),i=te(t,"predictions","confusionMatrix");ce(e==null||e>0&&Number.isInteger(e),(function(){return"If provided, numClasses must be a positive integer, but got "+e})),ce(r.rank===1,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),ce(i.rank===1,(function(){return"Expected the rank of predictions to be 1, but got "+i.rank})),ce(r.shape[0]===i.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."})),ce(e>0&&Number.isInteger(e),(function(){return"numClasses is required to be a positive integer, but got "+e}));var o=Cg(r.asType("int32"),e),s=Cg(i.asType("int32"),e);return o.transpose().matMul(s).asType("int32")}});var nF=ge({fromPixels_:function(n,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var e=!1,r=!1,i=!1,o=!1,s=!1;if(n.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)o=!0;else{if(n.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+n.constructor.name);s=!0}if(i&&i&&n.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(n4("FromPixels",Se.backendName)!=null)return Se.runKernel("FromPixels",{pixels:n},{numChannels:t});var a,u,c=i?[n.videoWidth,n.videoHeight]:[n.width,n.height],h=c[0],d=c[1];if(s?a=n.getContext("2d").getImageData(0,0,h,d).data:r||e?a=n.data:(o||i)&&(bf==null&&(bf=document.createElement("canvas").getContext("2d")),bf.canvas.width=h,bf.canvas.height=d,bf.drawImage(n,0,0,h,d),a=bf.getImageData(0,0,h,d).data),t===4)u=new Int32Array(a);else{var v=h*d;u=new Int32Array(v*t);for(var p=0;p<v;p++)for(var y=0;y<t;++y)u[p*t+y]=a[4*p+y]}return T1(u,[d,h,t],"int32")}}),i2=Object.freeze({toPixels:function(n,t){return xt(this,void 0,void 0,(function(){var e,r,i,o,s,a,u,c,h,d,v,p,y,x,w,_,E,I,C,N,O,U,M;return wt(this,(function(T){switch(T.label){case 0:if(e=te(n,"img","toPixels"),n instanceof vr||(e=e.toInt()),e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),i=r[0],o=r[1],(s=e.rank===2?1:e.shape[2])>4||s===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,e.data()];case 1:return a=T.sent(),u=e.min(),c=e.max(),[4,Promise.all([u.data(),c.data()])];case 2:if(h=T.sent(),d=h[0],v=h[1],p=d[0],y=v[0],u.dispose(),c.dispose(),e.dtype==="float32"){if(p<0||y>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+y+"].")}else{if(e.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(p<0||y>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+y+"].")}for(x=e.dtype==="float32"?255:1,w=new Uint8ClampedArray(o*i*4),_=0;_<i*o;++_)E=void 0,I=void 0,C=void 0,N=void 0,s===1?(E=a[_]*x,I=a[_]*x,C=a[_]*x,N=255):s===3?(E=a[3*_]*x,I=a[3*_+1]*x,C=a[3*_+2]*x,N=255):s===4&&(E=a[4*_]*x,I=a[4*_+1]*x,C=a[4*_+2]*x,N=a[4*_+3]*x),w[(O=4*_)+0]=Math.round(E),w[O+1]=Math.round(I),w[O+2]=Math.round(C),w[O+3]=Math.round(N);return t!=null&&(t.width=o,t.height=i,U=t.getContext("2d"),M=new ImageData(w,o,i),U.putImageData(M,0,0)),e!==n&&e.dispose(),[2,w]}}))}))},fromPixels:nF}),rF=(function(){function n(){}return n.prototype.getClassName=function(){return this.constructor.className},n.fromConfig=function(t,e){return new t(e)},n})(),iF=(function(){function n(){this.classNameMap={}}return n.getMap=function(){return n.instance==null&&(n.instance=new n),n.instance},n.register=function(t){n.getMap().classNameMap[t.className]=[t,t.fromConfig]},n})();function jc(n){ce(n.className!=null,(function(){return"Class being registered does not have the static className property defined."})),ce(typeof n.className=="string",(function(){return"className is required to be a string, but got type "+typeof n.className})),ce(n.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),iF.register(n)}var Uc=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return es(t,n),t.prototype.minimize=function(e,r,i){r===void 0&&(r=!1);var o=this.computeGradients(e,i),s=o.value,a=o.grads;if(i!=null){var u=i.map((function(c){return{name:c.name,tensor:a[c.name]}}));this.applyGradients(u)}else this.applyGradients(a);return Io(a),r?s:(s.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,r){return pP(e,r)},t.prototype.dispose=function(){this.iterations_!=null&&Io(this.iterations_)},t.prototype.saveIterations=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:rt(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return xt(this,void 0,void 0,(function(){var r;return wt(this,(function(i){switch(i.label){case 0:return r=this,[4,e[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,e.slice(1)]}}))}))},t})(rF);Object.defineProperty(Uc,Symbol.hasInstance,{value:function(n){return n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null}});var oF=(function(n){function t(e,r,i){i===void 0&&(i=null);var o=n.call(this)||this;return o.learningRate=e,o.rho=r,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],i==null&&(o.epsilon=Se.backend.epsilon()),o}return es(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map((function(i){return i.name})):Object.keys(e)).forEach((function(i,o){var s=Se.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:st((function(){return gn(s).variable(!1)}))}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:st((function(){return gn(s).variable(!1)}))});var a=Array.isArray(e)?e[o].tensor:e[i];if(a!=null){var u=r.accumulatedGrads[o].variable,c=r.accumulatedUpdates[o].variable;st((function(){var h=u.mul(r.rho).add(a.square().mul(1-r.rho)),d=c.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(a),v=c.mul(r.rho).add(d.square().mul(1-r.rho));u.assign(h),c.assign(v);var p=d.mul(-r.learningRate).add(s);s.assign(p)}))}})),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Io(this.accumulatedGrads.map((function(e){return e.variable}))),Io(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){var e;return wt(this,(function(r){switch(r.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map((function(i){return{name:i.originalName,tensor:i.variable}})))]}}))}))},t.prototype.setWeights=function(e){return xt(this,void 0,void 0,(function(){var r;return wt(this,(function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),r=e.length/2,this.accumulatedGrads=e.slice(0,r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(r,2*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,r){return new e(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t})(Uc);jc(oF);var aF=(function(n){function t(e,r){r===void 0&&(r=.1);var i=n.call(this)||this;return i.learningRate=e,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return es(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map((function(i){return i.name})):Object.keys(e)).forEach((function(i,o){var s=Se.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accumulator",variable:st((function(){return Bs(s.shape,r.initialAccumulatorValue).variable(!1)}))});var a=Array.isArray(e)?e[o].tensor:e[i];if(a!=null){var u=r.accumulatedGrads[o].variable;st((function(){var c=u.add(a.square());u.assign(c);var h=a.div(c.add(Se.backend.epsilon()).sqrt()).mul(-r.learningRate).add(s);s.assign(h)}))}})),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&Io(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},t.prototype.setWeights=function(e){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulatedGrads=e.map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,r){return new e(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t})(Uc);jc(aF);var sF=(function(n){function t(e,r,i,o){o===void 0&&(o=null);var s=n.call(this)||this;return s.learningRate=e,s.beta1=r,s.beta2=i,s.epsilon=o,s.accumulatedFirstMoment=[],s.accumulatedSecondMoment=[],st((function(){s.accBeta1=rt(r).variable(),s.accBeta2=rt(i).variable()})),o==null&&(s.epsilon=Se.backend.epsilon()),s}return es(t,n),t.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map((function(o){return o.name})):Object.keys(e);st((function(){var o=ii(1,r.accBeta1),s=ii(1,r.accBeta2);i.forEach((function(a,u){var c=Se.registeredVariables[a];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:st((function(){return gn(c).variable(!1)}))}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:a+"/v",variable:st((function(){return gn(c).variable(!1)}))});var h=Array.isArray(e)?e[u].tensor:e[a];if(h!=null){var d=r.accumulatedFirstMoment[u].variable,v=r.accumulatedSecondMoment[u].variable,p=d.mul(r.beta1).add(h.mul(1-r.beta1)),y=v.mul(r.beta2).add(h.square().mul(1-r.beta2)),x=p.div(o),w=y.div(s);d.assign(p),v.assign(y);var _=x.div(w.sqrt().add(r.epsilon)).mul(-r.learningRate).add(c);c.assign(_)}})),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Io(this.accumulatedFirstMoment.map((function(e){return e.variable}))),this.accumulatedSecondMoment!=null&&Io(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){var e;return wt(this,(function(r){switch(r.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map((function(i){return{name:i.originalName,tensor:i.variable}})))]}}))}))},t.prototype.setWeights=function(e){return xt(this,void 0,void 0,(function(){var r,i=this;return wt(this,(function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),st((function(){i.accBeta1.assign(xv(i.beta1,i.iterations_+1)),i.accBeta2.assign(xv(i.beta2,i.iterations_+1))})),r=e.length/2,this.accumulatedFirstMoment=e.slice(0,r).map((function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(r,2*r).map((function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t})(Uc);jc(sF);var uF=(function(n){function t(e,r,i,o,s){o===void 0&&(o=null),s===void 0&&(s=0);var a=n.call(this)||this;return a.learningRate=e,a.beta1=r,a.beta2=i,a.epsilon=o,a.decay=s,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],st((function(){a.iteration=rt(0).variable(),a.accBeta1=rt(r).variable()})),o==null&&(a.epsilon=Se.backend.epsilon()),a}return es(t,n),t.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map((function(o){return o.name})):Object.keys(e);st((function(){var o=ii(1,r.accBeta1),s=Ya(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach((function(a,u){var c=Se.registeredVariables[a];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:gn(c).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:a+"/v",variable:gn(c).variable(!1)});var h=Array.isArray(e)?e[u].tensor:e[a];if(h!=null){var d=r.accumulatedFirstMoment[u].variable,v=r.accumulatedWeightedInfNorm[u].variable,p=d.mul(r.beta1).add(h.mul(1-r.beta1)),y=v.mul(r.beta2),x=h.abs(),w=y.maximum(x);d.assign(p),v.assign(w);var _=s.div(o).mul(p.div(w.add(r.epsilon))).add(c);c.assign(_)}})),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Io(this.accumulatedFirstMoment.map((function(e){return e.variable}))),this.accumulatedWeightedInfNorm!=null&&Io(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t})(Uc);jc(uF);var L_=(function(n){function t(e){var r=n.call(this)||this;return r.learningRate=e,r.setLearningRate(e),r}return es(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map((function(i){return i.name})):Object.keys(e)).forEach((function(i,o){var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var a=Se.registeredVariables[i];st((function(){var u=r.c.mul(s).add(a);a.assign(u)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=N6(rt(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:if((e=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,r){return new e(r.learningRate)},t.className="SGD",t})(Uc);jc(L_);var lF=(function(n){function t(e,r,i){i===void 0&&(i=!1);var o=n.call(this,e)||this;return o.learningRate=e,o.momentum=r,o.useNesterov=i,o.accumulations=[],o.m=rt(o.momentum),o}return es(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map((function(i){return i.name})):Object.keys(e)).forEach((function(i,o){var s=Se.registeredVariables[i];r.accumulations[o]==null&&(r.accumulations[o]={originalName:i+"/momentum",variable:st((function(){return gn(s).variable(!1)}))});var a=r.accumulations[o].variable,u=Array.isArray(e)?e[o].tensor:e[i];u!=null&&st((function(){var c,h=r.m.mul(a).add(u);c=r.useNesterov?r.c.mul(u.add(h.mul(r.m))).add(s):r.c.mul(h).add(s),a.assign(h),s.assign(c)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Io(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},t.prototype.setWeights=function(e){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulations=e.map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,r){return new e(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t})(L_);jc(lF);var cF=(function(n){function t(e,r,i,o,s){r===void 0&&(r=.9),i===void 0&&(i=0),o===void 0&&(o=null),s===void 0&&(s=!1);var a=n.call(this)||this;if(a.learningRate=e,a.decay=r,a.momentum=i,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=s,o==null&&(a.epsilon=Se.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return es(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map((function(i){return i.name})):Object.keys(e)).forEach((function(i,o){var s=Se.registeredVariables[i];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:st((function(){return gn(s).variable(!1)}))}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:i+"/momentum",variable:st((function(){return gn(s).variable(!1)}))}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:st((function(){return gn(s).variable(!1)}))});var a=Array.isArray(e)?e[o].tensor:e[i];if(a!=null){var u=r.accumulatedMeanSquares[o].variable,c=r.accumulatedMoments[o].variable;st((function(){var h=u.mul(r.decay).add(a.square().mul(1-r.decay));if(r.centered){var d=r.accumulatedMeanGrads[o].variable,v=d.mul(r.decay).add(a.mul(1-r.decay)),p=c.mul(r.momentum).add(a.mul(r.learningRate).div(h.sub(v.square().add(r.epsilon)).sqrt()));u.assign(h),d.assign(v),c.assign(p);var y=s.sub(p);s.assign(y)}else{var x=u.mul(r.decay).add(a.square().mul(1-r.decay));p=c.mul(r.momentum).add(a.mul(r.learningRate).div(x.add(r.epsilon).sqrt())),u.assign(x),c.assign(p),y=s.sub(p),s.assign(y)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Io(this.accumulatedMeanSquares.map((function(e){return e.variable}))),this.accumulatedMeanGrads!=null&&this.centered&&Io(this.accumulatedMeanGrads.map((function(e){return e.variable}))),this.accumulatedMoments!=null&&Io(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){var e;return wt(this,(function(r){switch(r.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map((function(i){return{name:i.originalName,tensor:i.variable}})))]}}))}))},t.prototype.setWeights=function(e){return xt(this,void 0,void 0,(function(){var r;return wt(this,(function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),r=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(r,2*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*r,3*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,r){return new e(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t})(Uc);jc(cF);vr.prototype.squaredDifference=function(n){return K4(this,n)},Oe=MD;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Dg=function(n,t){return Dg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},Dg(n,t)};function tn(n,t){Dg(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Hi=function(){return Hi=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Hi.apply(this,arguments)};function Et(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(d){s(d)}}function u(h){try{c(r.throw(h))}catch(d){s(d)}}function c(h){h.done?o(h.value):i(h.value).then(a,u)}c((r=r.apply(n,[])).next())})}function Nt(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(h){return u([c,h])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(n,e)}catch(h){c=[6,h],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Jh(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var r=Array(n),i=0,t=0;t<e;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Nc=(function(){function n(t,e){if(!Ic(t)||!Ic(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:e}));this._width=t,this._height=e}return Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),n.prototype.reverse=function(){return new n(1/this.width,1/this.height)},n})();function qv(n,t){return n instanceof vr&&n.shape.length===t}function fF(n){return qv(n,2)}function Hv(n){return qv(n,3)}function Rl(n){return qv(n,4)}function hF(n){return n%1!==0}function eb(n){return n%2===0}function dF(n,t){t===void 0&&(t=2);var e=Math.pow(10,t);return Math.floor(n*e)/e}function tb(n){return n&&n.width&&n.height}function pF(n,t){var e=n.width,r=n.height,i=t/Math.max(r,e);return new Nc(Math.round(e*i),Math.round(r*i))}function o2(n){return n.reduce(function(t,e){return t.add(e)},new kn(0,0)).div(new kn(n.length,n.length))}function cd(n,t,e){return Array(n).fill(0).map(function(r,i){return t+i*e})}function Ic(n){return!!n&&n!==1/0&&n!==-1/0&&!isNaN(n)||n===0}function nb(n){return Ic(n)&&0<=n&&n<=1}var kn=(function(){function n(t,e){this._x=t,this._y=e}return Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),n.prototype.add=function(t){return new n(this.x+t.x,this.y+t.y)},n.prototype.sub=function(t){return new n(this.x-t.x,this.y-t.y)},n.prototype.mul=function(t){return new n(this.x*t.x,this.y*t.y)},n.prototype.div=function(t){return new n(this.x/t.x,this.y/t.y)},n.prototype.abs=function(){return new n(Math.abs(this.x),Math.abs(this.y))},n.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},n.prototype.floor=function(){return new n(Math.floor(this.x),Math.floor(this.y))},n})(),Fl=(function(){function n(t,e){e===void 0&&(e=!0);var r=t||{},i=[r.left,r.top,r.right,r.bottom].every(Ic),o=[r.x,r.y,r.width,r.height].every(Ic);if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var s=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],a=s[0],u=s[1],c=s[2],h=s[3];n.assertIsValidBox({x:a,y:u,width:c,height:h},"Box.constructor",e),this._x=a,this._y=u,this._width=c,this._height=h}return n.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(Ic)},n.assertIsValidBox=function(t,e,r){if(r===void 0&&(r=!1),!n.isRect(t))throw new Error(e+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(e+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new kn(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topRight",{get:function(){return new kn(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomLeft",{get:function(){return new kn(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new kn(this.right,this.bottom)},enumerable:!0,configurable:!0}),n.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(s){return Math.round(s)}),e=t[0],r=t[1],i=t[2],o=t[3];return new n({x:e,y:r,width:i,height:o})},n.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(s){return Math.floor(s)}),e=t[0],r=t[1],i=t[2],o=t[3];return new n({x:e,y:r,width:i,height:o})},n.prototype.toSquare=function(){var t=this,e=t.x,r=t.y,i=t.width,o=t.height,s=Math.abs(i-o);return i<o&&(e-=s/2,i+=s),o<i&&(r-=s/2,o+=s),new n({x:e,y:r,width:i,height:o})},n.prototype.rescale=function(t){var e=tb(t)?t.width:t,r=tb(t)?t.height:t;return new n({x:this.x*e,y:this.y*r,width:this.width*e,height:this.height*r})},n.prototype.pad=function(t,e){var r=[this.x-t/2,this.y-e/2,this.width+t,this.height+e],i=r[0],o=r[1],s=r[2],a=r[3];return new n({x:i,y:o,width:s,height:a})},n.prototype.clipAtImageBorders=function(t,e){var r=this,i=r.x,o=r.y,s=r.right,a=r.bottom,u=Math.max(i,0),c=Math.max(o,0),h=s-u,d=a-c,v=Math.min(h,t-u),p=Math.min(d,e-c);return new n({x:u,y:c,width:v,height:p}).floor()},n.prototype.shift=function(t,e){var r=this,i=r.width,o=r.height,s=this.x+t,a=this.y+e;return new n({x:s,y:a,width:i,height:o})},n.prototype.padAtBorders=function(t,e){var r=this.width+1,i=this.height+1,o=1,s=1,a=r,u=i,c=this.left,h=this.top,d=this.right,v=this.bottom;return d>e&&(a=-d+e+r,d=e),v>t&&(u=-v+t+i,v=t),c<1&&(u=2-c,c=1),h<1&&(u=2-h,h=1),{dy:s,edy:u,dx:o,edx:a,y:h,ey:v,x:c,ex:d,w:r,h:i}},n.prototype.calibrate=function(t){return new n({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},n})(),Gv=(function(n){tn(t,n);function t(e,r,i,o,s){return s===void 0&&(s=!1),n.call(this,{left:e,top:r,right:i,bottom:o},s)||this}return t})(Fl),D_=(function(){function n(t,e,r,i,o){this._imageDims=new Nc(o.width,o.height),this._score=t,this._classScore=e,this._className=r,this._box=new Fl(i).rescale(this._imageDims)}return Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativeBox",{get:function(){return new Fl(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),n.prototype.forSize=function(t,e){return new n(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:e})},n})(),ns=(function(n){tn(t,n);function t(e,r,i){return n.call(this,e,e,"",r,i)||this}return t.prototype.forSize=function(e,r){var i=n.prototype.forSize.call(this,e,r),o=i.score,s=i.relativeBox,a=i.imageDims;return new t(o,s,a)},t})(D_);function vF(n,t,e){e===void 0&&(e=!0);var r=Math.max(0,Math.min(n.right,t.right)-Math.max(n.left,t.left)),i=Math.max(0,Math.min(n.bottom,t.bottom)-Math.max(n.top,t.top)),o=r*i;return e?o/(n.area+t.area-o):o/Math.min(n.area,t.area)}function mF(n){var t=n.map(function(a){return a.x}),e=n.map(function(a){return a.y}),r=t.reduce(function(a,u){return u<a?u:a},1/0),i=e.reduce(function(a,u){return u<a?u:a},1/0),o=t.reduce(function(a,u){return a<u?u:a},0),s=e.reduce(function(a,u){return a<u?u:a},0);return new Gv(r,i,o,s)}function fd(n,t,e,r){r===void 0&&(r=!0);for(var i=t.map(function(a,u){return{score:a,boxIndex:u}}).sort(function(a,u){return a.score-u.score}).map(function(a){return a.boxIndex}),o=[],s=function(){var a=i.pop();o.push(a);for(var u=i,c=[],h=0;h<u.length;h++){var d=u[h],v=n[a],p=n[d];c.push(vF(v,p,r))}i=i.filter(function(y,x){return c[x]<=e})};i.length>0;)s();return o}function Nd(n,t){return st(function(){var e=t[0],r=t[1],i=t[2],o=Bs(Jh(n.shape.slice(0,3),[1]),e),s=Bs(Jh(n.shape.slice(0,3),[1]),r),a=Bs(Jh(n.shape.slice(0,3),[1]),i),u=ti([o,s,a],3);return ii(n,u)})}function gF(n,t){return t===void 0&&(t=!1),st(function(){var e=n.shape.slice(1),r=e[0],i=e[1];if(r===i)return n;var o=Math.abs(r-i),s=Math.round(o*(t?.5:1)),a=r>i?2:1,u=function(p){var y=n.shape.slice();return y[a]=p,Bs(y,0)},c=u(s),h=o-c.shape[a],d=t&&h?u(h):null,v=[d,n,c].filter(function(p){return!!p}).map(function(p){return p.toFloat()});return ti(v,a)})}function E0(n){return 1/(1+Math.exp(-n))}var a2=(function(n){tn(t,n);function t(e,r,i,o,s){return s===void 0&&(s=!1),n.call(this,{x:e,y:r,width:i,height:o},s)||this}return t})(Fl),yF=.5,xF=.43,wF=.45,hd=(function(){function n(t,e,r){r===void 0&&(r=new kn(0,0));var i=e.width,o=e.height;this._imgDims=new Nc(i,o),this._shift=r,this._positions=t.map(function(s){return s.mul(new kn(i,o)).add(r)})}return Object.defineProperty(n.prototype,"shift",{get:function(){return new kn(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(e){return e.sub(t._shift).div(new kn(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),n.prototype.forSize=function(t,e){return new this.constructor(this.relativePositions,{width:t,height:e})},n.prototype.shiftBy=function(t,e){return new this.constructor(this.relativePositions,this._imgDims,new kn(t,e))},n.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},n.prototype.align=function(t,e){if(e===void 0&&(e={}),t){var r=t instanceof ns?t.box.floor():new Fl(t);return this.shiftBy(r.x,r.y).align(null,e)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),o=i.useDlibAlignment,s=i.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(s)},n.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),e=t[0],r=t[1],i=t[2],o=function(d){return i.sub(d).magnitude()},s=(o(e)+o(r))/2,a=Math.floor(s/wF),u=o2(t),c=Math.floor(Math.max(0,u.x-yF*a)),h=Math.floor(Math.max(0,u.y-xF*a));return new a2(c,h,Math.min(a,this.imageWidth+c),Math.min(a,this.imageHeight+h))},n.prototype.alignMinBbox=function(t){var e=mF(this.positions);return e.pad(e.width*t,e.height*t)},n.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},n})(),bF=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],o2([e[3],e[4]])]},t})(hd),_F=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(o2)},t})(hd),rb=(function(){function n(t,e){this._label=t,this._distance=e}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),n.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+dF(this.distance)+")":"")},n})(),ib=(function(n){tn(t,n);function t(e,r){var i=n.call(this,e)||this;return i._label=r,i}return t.assertIsValidLabeledBox=function(e,r){if(Fl.assertIsValidBox(e,r),!Ic(e.label))throw new Error(r+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t})(Fl),kp=(function(){function n(t,e){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=e}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),n.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},n.fromJSON=function(t){var e=t.descriptors.map(function(r){return new Float32Array(r)});return new n(t.label,e)},n})();(function(n){tn(t,n);function t(e,r,i,o){var s=n.call(this,e,r)||this;return s._score=i,s._classScore=o,s}return t.assertIsValidPredictedBox=function(e,r){if(ib.assertIsValidLabeledBox(e,r),!nb(e.score)||!nb(e.classScore))throw new Error(r+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(ib);function F_(n){return n.detection instanceof ns}function dd(n,t){var e={detection:t};return Object.assign({},n,e)}function M_(){var n=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:n,readFile:t}}function O_(n){var t="";if(!n)try{n=require("fs")}catch(r){t=r.toString()}var e=n?function(r){return new Promise(function(i,o){n.readFile(r,function(s,a){return s?o(s):i(a)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:e}}function B_(){var n=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,e=function(){if(n)return new n;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=O_();return Hi({Canvas:n||(function(){function s(){}return s})(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||(function(){function s(){}return s})(),Image:t||(function(){function s(){}return s})(),ImageData:global.ImageData||(function(){function s(){}return s})(),Video:global.HTMLVideoElement||(function(){function s(){}return s})(),createCanvasElement:e,createImageElement:r,fetch:i},o)}function j_(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function U_(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var ei;function SF(){if(!ei)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return ei}function Fg(n){ei=n}function s2(){j_()&&Fg(M_()),U_()&&Fg(B_())}function CF(n){if(ei||s2(),!ei)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=n.Canvas,e=t===void 0?ei.Canvas:t,r=n.Image,i=r===void 0?ei.Image:r;ei.Canvas=e,ei.Image=i,ei.createCanvasElement=n.createCanvasElement||(function(){return new e}),ei.createImageElement=n.createImageElement||(function(){return new i}),ei.ImageData=n.ImageData||ei.ImageData,ei.Video=n.Video||ei.Video,ei.fetch=n.fetch||ei.fetch,ei.readFile=n.readFile||ei.readFile}var Ei={getEnv:SF,setEnv:Fg,initialize:s2,createBrowserEnv:M_,createFileSystem:O_,createNodejsEnv:B_,monkeyPatch:CF,isBrowser:j_,isNodejs:U_};s2();function z_(n){return!Ei.isNodejs()&&typeof n=="string"?document.getElementById(n):n}function Tc(n){var t=Ei.getEnv(),e=t.Canvas,r=t.CanvasRenderingContext2D;if(n instanceof r)return n;var i=z_(n);if(!(i instanceof e))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=i.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var ob;(function(n){n.TOP_LEFT="TOP_LEFT",n.TOP_RIGHT="TOP_RIGHT",n.BOTTOM_LEFT="BOTTOM_LEFT",n.BOTTOM_RIGHT="BOTTOM_RIGHT"})(ob||(ob={}));function V_(n){var t=Ei.getEnv(),e=t.Image,r=t.Video;return n instanceof e&&n.complete||n instanceof r&&n.readyState>=3}function AF(n){return new Promise(function(t,e){if(n instanceof Ei.getEnv().Canvas||V_(n))return t();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),t(o))}function i(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),e(o))}n.addEventListener("load",r),n.addEventListener("error",i)})}function kF(n){return new Promise(function(t,e){if(!(n instanceof Blob))return e("bufferToImage - expected buf to be of type: Blob");var r=new FileReader;r.onload=function(){if(typeof r.result!="string")return e("bufferToImage - expected reader.result to be a string, in onload");var i=Ei.getEnv().createImageElement();i.onload=function(){return t(i)},i.onerror=e,i.src=r.result},r.onerror=e,r.readAsDataURL(n)})}function W_(n){var t=Ei.getEnv(),e=t.Image,r=t.Video;return n instanceof e?new Nc(n.naturalWidth,n.naturalHeight):n instanceof r?new Nc(n.videoWidth,n.videoHeight):new Nc(n.width,n.height)}function $v(n){var t=n.width,e=n.height,r=Ei.getEnv().createCanvasElement,i=r();return i.width=t,i.height=e,i}function u2(n,t){var e=Ei.getEnv().ImageData;if(!(n instanceof e)&&!V_(n))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=W_(n),i=r.width,o=r.height,s=$v({width:i,height:o});return n instanceof e?Tc(s).putImageData(n,0,0):Tc(s).drawImage(n,0,0,i,o),s}function EF(n,t){return Et(this,void 0,void 0,function(){var e,r,i,o,s,a;return Nt(this,function(u){switch(u.label){case 0:return e=Ei.getEnv().createCanvasElement(),r=n.shape.slice(Rl(n)?1:0),i=r[0],o=r[1],s=r[2],a=st(function(){return n.as3D(i,o,s).toInt()}),[4,i2.toPixels(a,e)];case 1:return u.sent(),a.dispose(),[2,e]}})})}function ab(n){var t=Ei.getEnv(),e=t.Image,r=t.Canvas,i=t.Video;return n instanceof e||n instanceof r||n instanceof i}function NF(n,t,e){e===void 0&&(e=!1);var r=Ei.getEnv(),i=r.Image,o=r.Canvas;if(!(n instanceof i||n instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var s=W_(n),a=t/Math.max(s.height,s.width),u=a*s.width,c=a*s.height,h=$v({width:t,height:t}),d=n instanceof o?n:u2(n),v=Math.abs(u-c)/2,p=e&&u<c?v:0,y=e&&c<u?v:0;return Tc(h).drawImage(d,p,y,u,c),h}var _v=(function(){function n(t,e){var r=this;if(e===void 0&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=e,this._batchSize=t.length,t.forEach(function(i,o){if(Hv(i)){r._imageTensors[o]=i,r._inputDimensions[o]=i.shape;return}if(Rl(i)){var s=i.shape[0];if(s!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+s+" passed, but not supported in input array");r._imageTensors[o]=i,r._inputDimensions[o]=i.shape.slice(1);return}var a=i instanceof Ei.getEnv().Canvas?i:u2(i);r._canvases[o]=a,r._inputDimensions[o]=[a.height,a.width,3]})}return Object.defineProperty(n.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reshapedInputDimensions",{get:function(){var t=this;return cd(this.batchSize,0,1).map(function(e,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),n.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},n.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},n.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},n.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},n.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var e=this.getInputWidth(t),r=this.getInputHeight(t);return pF({width:e,height:r},this.inputSize)},n.prototype.toBatchTensor=function(t,e){var r=this;return e===void 0&&(e=!0),this._inputSize=t,st(function(){var i=cd(r.batchSize,0,1).map(function(s){var a=r.getInput(s);if(a instanceof vr){var u=Rl(a)?a:a.expandDims();return u=gF(u,e),(u.shape[1]!==t||u.shape[2]!==t)&&(u=Q1.resizeBilinear(u,[t,t])),u.as3D(t,t,3)}if(a instanceof Ei.getEnv().Canvas)return i2.fromPixels(NF(a,t,e));throw new Error("toBatchTensor - at batchIdx "+s+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)}),o=na(i.map(function(s){return s.toFloat()})).as4D(r.batchSize,t,t,3);return o})},n})();function gi(n){return Et(this,void 0,void 0,function(){var t,e,r;return Nt(this,function(i){switch(i.label){case 0:if(n instanceof _v)return[2,n];if(t=Array.isArray(n)?n:[n],!t.length)throw new Error("toNetInput - empty array passed as input");return e=function(o){return Array.isArray(n)?" at input index "+o+":":""},r=t.map(z_),r.forEach(function(o,s){if(!ab(o)&&!Hv(o)&&!Rl(o))throw typeof t[s]=="string"?new Error("toNetInput -"+e(s)+" string passed, but could not resolve HTMLElement for element id "+t[s]):new Error("toNetInput -"+e(s)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Rl(o)){var a=o.shape[0];if(a!==1)throw new Error("toNetInput -"+e(s)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return ab(o)&&AF(o)}))];case 1:return i.sent(),[2,new _v(r,Array.isArray(n))]}})})}function l2(n,t){return Et(this,void 0,void 0,function(){var e,r,i,o,s,a,u;return Nt(this,function(c){switch(c.label){case 0:return e=Ei.getEnv().Canvas,r=n,n instanceof e?[3,5]:[4,gi(n)];case 1:if(i=c.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=i.getInput(0),o instanceof e?(s=o,[3,4]):[3,2];case 2:return[4,EF(o)];case 3:s=c.sent(),c.label=4;case 4:r=s,c.label=5;case 5:return a=Tc(r),u=t.map(function(h){return h instanceof ns?h.forSize(r.width,r.height).box.floor():h}).map(function(h){return h.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(h){var d=h.x,v=h.y,p=h.width,y=h.height,x=$v({width:p,height:y});return Tc(x).putImageData(a.getImageData(d,v,p,y),0,0),x})]}})})}function c2(n,t){return Et(this,void 0,void 0,function(){return Nt(this,function(e){if(!Hv(n)&&!Rl(n))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Rl(n)&&n.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,st(function(){var r=n.shape.slice(Rl(n)?1:0),i=r[0],o=r[1],s=r[2],a=t.map(function(c){return c instanceof ns?c.forSize(o,i).box:c}).map(function(c){return c.clipAtImageBorders(o,i)}),u=a.map(function(c){var h=c.x,d=c.y,v=c.width,p=c.height;return v_(n.as3D(i,o,s),[d,h,0],[p,v,s])});return u})]})})}function IF(n,t){return Et(this,void 0,void 0,function(){var e,r;return Nt(this,function(i){switch(i.label){case 0:return e=Ei.getEnv().fetch,[4,e(n,t)];case 1:if(r=i.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function PF(n){return Et(this,void 0,void 0,function(){return Nt(this,function(t){switch(t.label){case 0:return[4,IF(n)];case 1:return[2,t.sent().json()]}})})}function q_(n,t){var e=t+"-weights_manifest.json";if(!n)return{modelBaseUri:"",manifestUri:e};if(n==="/")return{modelBaseUri:"/",manifestUri:"/"+e};var r=n.startsWith("http://")?"http://":n.startsWith("https://")?"https://":"";n=n.replace(r,"");var i=n.split("/").filter(function(a){return a}),o=n.endsWith(".json")?i[i.length-1]:e,s=r+(n.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return s=n.startsWith("/")?"/"+s:s,{modelBaseUri:s,manifestUri:s==="/"?"/"+o:s+"/"+o}}function RF(n,t){return Et(this,void 0,void 0,function(){var e,r,i,o;return Nt(this,function(s){switch(s.label){case 0:return e=q_(n,t),r=e.manifestUri,i=e.modelBaseUri,[4,PF(r)];case 1:return o=s.sent(),[2,T_.loadWeights(o,i)]}})})}var Ou=(function(){function n(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(n.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),n.prototype.getParamFromPath=function(t){var e=this.traversePropertyPath(t),r=e.obj,i=e.objProp;return r[i]},n.prototype.reassignParamFromPath=function(t,e){var r=this.traversePropertyPath(t),i=r.obj,o=r.objProp;i[o].dispose(),i[o]=e},n.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(e){var r=e.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},n.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof Zf})},n.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof Zf)})},n.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(e){var r=e.path,i=e.tensor;t.reassignParamFromPath(r,i.variable())})},n.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(e){var r=e.path,i=e.tensor,o=ki(i.dataSync());i.dispose(),t.reassignParamFromPath(r,o)})},n.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(e){if(t&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},n.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var e=t.tensor;return Array.from(e.dataSync())}).reduce(function(t,e){return t.concat(e)}))},n.prototype.load=function(t){return Et(this,void 0,void 0,function(){return Nt(this,function(e){switch(e.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return e.sent(),[2]}})})},n.prototype.loadFromUri=function(t){return Et(this,void 0,void 0,function(){var e;return Nt(this,function(r){switch(r.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,RF(t,this.getDefaultModelName())];case 1:return e=r.sent(),this.loadFromWeightMap(e),[2]}})})},n.prototype.loadFromDisk=function(t){return Et(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,h,d;return Nt(this,function(v){switch(v.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return e=Ei.getEnv().readFile,r=q_(t,this.getDefaultModelName()),i=r.manifestUri,o=r.modelBaseUri,s=function(p){return Promise.all(p.map(function(y){return e(y).then(function(x){return x.buffer})}))},a=T_.weightsLoaderFactory(s),h=(c=JSON).parse,[4,e(i)];case 1:return u=h.apply(c,[v.sent().toString()]),[4,a(u,o)];case 2:return d=v.sent(),this.loadFromWeightMap(d),[2]}})})},n.prototype.loadFromWeightMap=function(t){var e=this.extractParamsFromWeigthMap(t),r=e.paramMappings,i=e.params;this._paramMappings=r,this._params=i},n.prototype.extractWeights=function(t){var e=this.extractParams(t),r=e.paramMappings,i=e.params;this._paramMappings=r,this._params=i},n.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=t.split("/").reduce(function(o,s){if(!o.nextObj.hasOwnProperty(s))throw new Error("traversePropertyPath - object does not have property "+s+", for path "+t);return{obj:o.nextObj,objProp:s,nextObj:o.nextObj[s]}},{nextObj:this.params}),r=e.obj,i=e.objProp;if(!r||!i||!(r[i]instanceof vr))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:i}},n})();function Zo(n,t,e){return st(function(){var r=$1(n,t.depthwise_filter,t.pointwise_filter,e,"same");return r=hn(r,t.bias),r})}function N0(n,t,e){return e===void 0&&(e=!1),st(function(){var r=gr(e?hn(Na(n,t.conv0.filters,[2,2],"same"),t.conv0.bias):Zo(n,t.conv0,[2,2])),i=Zo(r,t.conv1,[1,1]),o=gr(hn(r,i)),s=Zo(o,t.conv2,[1,1]);return gr(hn(r,hn(i,s)))})}function Ep(n,t,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),st(function(){var i=gr(e?hn(Na(n,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):Zo(n,t.conv0,r?[2,2]:[1,1])),o=Zo(i,t.conv1,[1,1]),s=gr(hn(i,o)),a=Zo(s,t.conv2,[1,1]),u=gr(hn(i,hn(o,a))),c=Zo(u,t.conv3,[1,1]);return gr(hn(i,hn(o,hn(a,c))))})}function Qa(n,t,e,r){return e===void 0&&(e="same"),r===void 0&&(r=!1),st(function(){var i=hn(Na(n,t.filters,[1,1],e),t.bias);return r?gr(i):i})}function Bu(n,t){Object.keys(n).forEach(function(e){t.some(function(r){return r.originalPath===e})||n[e].dispose()})}function Kv(n,t){return function(e,r,i,o){var s=Eo(n(e*r*i*i),[i,i,e,r]),a=Hr(n(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:s,bias:a}}}function f2(n,t){return function(e,r,i){var o=Il(n(e*r),[e,r]),s=Hr(n(r));return t.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:s}}}var H_=(function(){function n(t,e,r){this.depthwise_filter=t,this.pointwise_filter=e,this.bias=r}return n})();function h2(n,t){return function(e,r,i){var o=Eo(n(9*e),[3,3,e,1]),s=Eo(n(e*r),[1,1,e,r]),a=Hr(n(r));return t.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new H_(o,s,a)}}function d2(n){return function(t){var e=n(t+"/depthwise_filter",4),r=n(t+"/pointwise_filter",4),i=n(t+"/bias",1);return new H_(e,r,i)}}function Ul(n,t){return function(e,r,i){var o=n[e];if(!qv(o,r))throw new Error("expected weightMap["+e+"] to be a Tensor"+r+"D, instead have "+o);return t.push({originalPath:e,paramPath:i||e}),o}}function ju(n){var t=n;function e(i){var o=t.slice(0,i);return t=t.slice(i),o}function r(){return t}return{extractWeights:e,getRemainingWeights:r}}function G_(n,t){var e=Kv(n,t),r=h2(n,t);function i(s,a,u,c){c===void 0&&(c=!1);var h=c?e(s,a,3,u+"/conv0"):r(s,a,u+"/conv0"),d=r(a,a,u+"/conv1"),v=r(a,a,u+"/conv2");return{conv0:h,conv1:d,conv2:v}}function o(s,a,u,c){c===void 0&&(c=!1);var h=i(s,a,u,c),d=h.conv0,v=h.conv1,p=h.conv2,y=r(a,a,u+"/conv3");return{conv0:d,conv1:v,conv2:p,conv3:y}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function TF(n){var t=[],e=ju(n),r=e.extractWeights,i=e.getRemainingWeights,o=G_(r,t).extractDenseBlock4Params,s=o(3,32,"dense0",!0),a=o(32,64,"dense1"),u=o(64,128,"dense2"),c=o(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:s,dense1:a,dense2:u,dense3:c}}}function $_(n){return function(t){var e=n(t+"/filters",4),r=n(t+"/bias",1);return{filters:e,bias:r}}}function K_(n,t){var e=Ul(n,t),r=$_(e),i=d2(e);function o(a,u){u===void 0&&(u=!1);var c=u?r(a+"/conv0"):i(a+"/conv0"),h=i(a+"/conv1"),d=i(a+"/conv2");return{conv0:c,conv1:h,conv2:d}}function s(a,u){u===void 0&&(u=!1);var c=u?r(a+"/conv0"):i(a+"/conv0"),h=i(a+"/conv1"),d=i(a+"/conv2"),v=i(a+"/conv3");return{conv0:c,conv1:h,conv2:d,conv3:v}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:s}}function LF(n){var t=[],e=K_(n,t).extractDenseBlock4Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2"),dense3:e("dense3")};return Bu(n,t),{params:r,paramMappings:t}}var X_=(function(n){tn(t,n);function t(){return n.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return st(function(){var i=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=Nd(i,o).div(rt(255)),a=Ep(s,r.dense0,!0);return a=Ep(a,r.dense1),a=Ep(a,r.dense2),a=Ep(a,r.dense3),a=kd(a,[7,7],[2,2],"valid"),a})},t.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Nt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,gi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return LF(e)},t.prototype.extractParams=function(e){return TF(e)},t})(Ou);function Ts(n,t){return st(function(){return hn(zv(n,t.weights),t.bias)})}function DF(n,t,e){var r=[],i=ju(n),o=i.extractWeights,s=i.getRemainingWeights,a=f2(o,r),u=a(t,e,"fc");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:r,params:{fc:u}}}function FF(n){var t=[],e=Ul(n,t);function r(o){var s=e(o+"/weights",2),a=e(o+"/bias",1);return{weights:s,bias:a}}var i={fc:r("fc")};return Bu(n,t),{params:i,paramMappings:t}}function Y_(n){var t={},e={};return Object.keys(n).forEach(function(r){var i=r.startsWith("fc")?e:t;i[r]=n[r]}),{featureExtractorMap:t,classifierMap:e}}var J_=(function(n){tn(t,n);function t(e,r){var i=n.call(this,e)||this;return i._faceFeatureExtractor=r,i}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return st(function(){var o=e instanceof _v?r.faceFeatureExtractor.forwardInput(e):e;return Ts(o.as2D(o.shape[0],-1),i.fc)})},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),n.prototype.dispose.call(this,e)},t.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},t.prototype.extractClassifierParams=function(e){return DF(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var r=Y_(e),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),FF(o)},t.prototype.extractParams=function(e){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),o=i*r+i,s=e.slice(0,e.length-o),a=e.slice(e.length-o);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(a)},t})(Ou),sb=["neutral","happy","sad","angry","fearful","disgusted","surprised"],MF=(function(){function n(t){var e=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);sb.forEach(function(r,i){e[r]=t[i]})}return n.prototype.asSortedArray=function(){var t=this;return sb.map(function(e){return{expression:e,probability:t[e]}}).sort(function(e,r){return r.probability-e.probability})},n})(),OF=(function(n){tn(t,n);function t(e){return e===void 0&&(e=new X_),n.call(this,"FaceExpressionNet",e)||this}return t.prototype.forwardInput=function(e){var r=this;return st(function(){return Fu(r.runNet(e))})},t.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Nt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,gi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.predictExpressions=function(e){return Et(this,void 0,void 0,function(){var r,i,o,s,a=this;return Nt(this,function(u){switch(u.label){case 0:return[4,gi(e)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return i=u.sent(),[4,Promise.all(ni(i).map(function(c){return Et(a,void 0,void 0,function(){var h;return Nt(this,function(d){switch(d.label){case 0:return[4,c.data()];case 1:return h=d.sent(),c.dispose(),[2,h]}})})}))];case 3:return o=u.sent(),i.dispose(),s=o.map(function(c){return new MF(c)}),[2,r.isBatchInput?s:s[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t})(J_);function Q_(n,t){var e={expressions:t};return Object.assign({},n,e)}function Z_(n){return F_(n)&&n.landmarks instanceof hd&&n.unshiftedLandmarks instanceof hd&&n.alignedRect instanceof ns}function Xv(n,t){var e=n.detection.box,r=t.shiftBy(e.x,e.y),i=r.align(),o=n.detection.imageDims,s=new ns(n.detection.score,i.rescale(o.reverse()),o),a={landmarks:r,unshiftedLandmarks:t,alignedRect:s};return Object.assign({},n,a)}function BF(n,t){var e=Kv(n,t),r=h2(n,t);function i(s,a,u){var c=r(s,a,u+"/separable_conv0"),h=r(a,a,u+"/separable_conv1"),d=e(s,a,1,u+"/expansion_conv");return{separable_conv0:c,separable_conv1:h,expansion_conv:d}}function o(s,a){var u=r(s,s,a+"/separable_conv0"),c=r(s,s,a+"/separable_conv1"),h=r(s,s,a+"/separable_conv2");return{separable_conv0:u,separable_conv1:c,separable_conv2:h}}return{extractConvParams:e,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:o}}function jF(n,t){var e=[],r=ju(n),i=r.extractWeights,o=r.getRemainingWeights,s=BF(i,e),a=s.extractConvParams,u=s.extractSeparableConvParams,c=s.extractReductionBlockParams,h=s.extractMainBlockParams,d=a(3,32,3,"entry_flow/conv_in"),v=c(32,64,"entry_flow/reduction_block_0"),p=c(64,128,"entry_flow/reduction_block_1"),y={conv_in:d,reduction_block_0:v,reduction_block_1:p},x={};cd(t,0,1).forEach(function(I){x["main_block_"+I]=h(128,"middle_flow/main_block_"+I)});var w=c(128,256,"exit_flow/reduction_block"),_=u(256,512,"exit_flow/separable_conv"),E={reduction_block:w,separable_conv:_};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{entry_flow:y,middle_flow:x,exit_flow:E}}}function UF(n,t){var e=Ul(n,t),r=$_(e),i=d2(e);function o(a){var u=i(a+"/separable_conv0"),c=i(a+"/separable_conv1"),h=r(a+"/expansion_conv");return{separable_conv0:u,separable_conv1:c,expansion_conv:h}}function s(a){var u=i(a+"/separable_conv0"),c=i(a+"/separable_conv1"),h=i(a+"/separable_conv2");return{separable_conv0:u,separable_conv1:c,separable_conv2:h}}return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:o,extractMainBlockParams:s}}function zF(n,t){var e=[],r=UF(n,e),i=r.extractConvParams,o=r.extractSeparableConvParams,s=r.extractReductionBlockParams,a=r.extractMainBlockParams,u=i("entry_flow/conv_in"),c=s("entry_flow/reduction_block_0"),h=s("entry_flow/reduction_block_1"),d={conv_in:u,reduction_block_0:c,reduction_block_1:h},v={};cd(t,0,1).forEach(function(w){v["main_block_"+w]=a("middle_flow/main_block_"+w)});var p=s("exit_flow/reduction_block"),y=o("exit_flow/separable_conv"),x={reduction_block:p,separable_conv:y};return Bu(n,e),{params:{entry_flow:d,middle_flow:v,exit_flow:x},paramMappings:e}}function eS(n,t,e){return hn(Na(n,t.filters,e,"same"),t.bias)}function I0(n,t,e){e===void 0&&(e=!0);var r=e?gr(n):n;return r=Zo(r,t.separable_conv0,[1,1]),r=Zo(gr(r),t.separable_conv1,[1,1]),r=pi(r,[3,3],[2,2],"same"),r=hn(r,eS(n,t.expansion_conv,[2,2])),r}function VF(n,t){var e=Zo(gr(n),t.separable_conv0,[1,1]);return e=Zo(gr(e),t.separable_conv1,[1,1]),e=Zo(gr(e),t.separable_conv2,[1,1]),e=hn(e,n),e}var WF=(function(n){tn(t,n);function t(e){var r=n.call(this,"TinyXception")||this;return r._numMainBlocks=e,r}return t.prototype.forwardInput=function(e){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return st(function(){var o=e.toBatchTensor(112,!0),s=[122.782,117.001,104.298],a=Nd(o,s).div(rt(256)),u=gr(eS(a,i.entry_flow.conv_in,[2,2]));return u=I0(u,i.entry_flow.reduction_block_0,!1),u=I0(u,i.entry_flow.reduction_block_1),cd(r._numMainBlocks,0,1).forEach(function(c){u=VF(u,i.middle_flow["main_block_"+c])}),u=I0(u,i.exit_flow.reduction_block),u=gr(Zo(u,i.exit_flow.separable_conv,[1,1])),u})},t.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Nt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,gi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return zF(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return jF(e,this._numMainBlocks)},t})(Ou);function qF(n){var t=[],e=ju(n),r=e.extractWeights,i=e.getRemainingWeights,o=f2(r,t),s=o(512,1,"fc/age"),a=o(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{fc:{age:s,gender:a}}}}function HF(n){var t=[],e=Ul(n,t);function r(o){var s=e(o+"/weights",2),a=e(o+"/bias",1);return{weights:s,bias:a}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Bu(n,t),{params:i,paramMappings:t}}var Sv;(function(n){n.FEMALE="female",n.MALE="male"})(Sv||(Sv={}));var GF=(function(n){tn(t,n);function t(e){e===void 0&&(e=new WF(2));var r=n.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=e,r}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return st(function(){var o=e instanceof _v?r.faceFeatureExtractor.forwardInput(e):e,s=kd(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),a=Ts(s,i.fc.age).as1D(),u=Ts(s,i.fc.gender);return{age:a,gender:u}})},t.prototype.forwardInput=function(e){var r=this;return st(function(){var i=r.runNet(e),o=i.age,s=i.gender;return{age:o,gender:Fu(s)}})},t.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Nt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,gi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.predictAgeAndGender=function(e){return Et(this,void 0,void 0,function(){var r,i,o,s,a,u,c=this;return Nt(this,function(h){switch(h.label){case 0:return[4,gi(e)];case 1:return r=h.sent(),[4,this.forwardInput(r)];case 2:return i=h.sent(),o=ni(i.age),s=ni(i.gender),a=o.map(function(d,v){return{ageTensor:d,genderTensor:s[v]}}),[4,Promise.all(a.map(function(d){var v=d.ageTensor,p=d.genderTensor;return Et(c,void 0,void 0,function(){var y,x,w,_,E;return Nt(this,function(I){switch(I.label){case 0:return[4,v.data()];case 1:return y=I.sent()[0],[4,p.data()];case 2:return x=I.sent()[0],w=x>.5,_=w?Sv.MALE:Sv.FEMALE,E=w?x:1-x,v.dispose(),p.dispose(),[2,{age:y,gender:_,genderProbability:E}]}})})}))];case 3:return u=h.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),n.prototype.dispose.call(this,e)},t.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},t.prototype.extractClassifierParams=function(e){return qF(e)},t.prototype.extractParamsFromWeigthMap=function(e){var r=Y_(e),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),HF(o)},t.prototype.extractParams=function(e){var r=1539,i=e.slice(0,e.length-r),o=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},t})(Ou),tS=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.postProcess=function(e,r,i){var o=i.map(function(a){var u=a.width,c=a.height,h=r/Math.max(c,u);return{width:u*h,height:c*h}}),s=o.length;return st(function(){var a=function(v,p){return na([Bs([68],v),Bs([68],p)],1).as2D(1,136).as1D()},u=function(v,p){var y=o[v],x=y.width,w=y.height;return p(x,w)?Math.abs(x-w)/2:0},c=function(v){return u(v,function(p,y){return p<y})},h=function(v){return u(v,function(p,y){return y<p})},d=e.mul(Bs([s,136],r)).sub(na(Array.from(Array(s),function(v,p){return a(c(p),h(p))}))).div(na(Array.from(Array(s),function(v,p){return a(o[p].width,o[p].height)})));return d})},t.prototype.forwardInput=function(e){var r=this;return st(function(){var i=r.runNet(e);return r.postProcess(i,e.inputSize,e.inputDimensions.map(function(o){var s=o[0],a=o[1];return{height:s,width:a}}))})},t.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Nt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,gi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.detectLandmarks=function(e){return Et(this,void 0,void 0,function(){var r,i,o,s=this;return Nt(this,function(a){switch(a.label){case 0:return[4,gi(e)];case 1:return r=a.sent(),i=st(function(){return ni(s.forwardInput(r))}),[4,Promise.all(i.map(function(u,c){return Et(s,void 0,void 0,function(){var h,d,v,p,y;return Nt(this,function(x){switch(x.label){case 0:return v=(d=Array).from,[4,u.data()];case 1:return h=v.apply(d,[x.sent()]),p=h.filter(function(w,_){return eb(_)}),y=h.filter(function(w,_){return!eb(_)}),[2,new _F(Array(68).fill(0).map(function(w,_){return new kn(p[_],y[_])}),{height:r.getInputHeight(c),width:r.getInputWidth(c)})]}})})}))];case 2:return o=a.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t})(J_),nS=(function(n){tn(t,n);function t(e){return e===void 0&&(e=new X_),n.call(this,"FaceLandmark68Net",e)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t})(tS);function $F(n){var t=[],e=K_(n,t).extractDenseBlock3Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2")};return Bu(n,t),{params:r,paramMappings:t}}function KF(n){var t=[],e=ju(n),r=e.extractWeights,i=e.getRemainingWeights,o=G_(r,t).extractDenseBlock3Params,s=o(3,32,"dense0",!0),a=o(32,64,"dense1"),u=o(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:s,dense1:a,dense2:u}}}var XF=(function(n){tn(t,n);function t(){return n.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return st(function(){var i=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=Nd(i,o).div(rt(255)),a=N0(s,r.dense0,!0);return a=N0(a,r.dense1),a=N0(a,r.dense2),a=kd(a,[14,14],[2,2],"valid"),a})},t.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Nt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,gi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return $F(e)},t.prototype.extractParams=function(e){return KF(e)},t})(Ou),YF=(function(n){tn(t,n);function t(e){return e===void 0&&(e=new XF),n.call(this,"FaceLandmark68TinyNet",e)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t})(tS);(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t})(nS);function JF(n,t){return hn(Xi(n,t.weights),t.biases)}function p2(n,t,e,r,i){i===void 0&&(i="same");var o=t.conv,s=o.filters,a=o.bias,u=Na(n,s,e,i);return u=hn(u,a),u=JF(u,t.scale),r?gr(u):u}function QF(n,t){return p2(n,t,[1,1],!0)}function rS(n,t){return p2(n,t,[1,1],!1)}function iS(n,t){return p2(n,t,[2,2],!0,"valid")}function ZF(n,t){function e(a,u,c){var h=n(a),d=h.length/(u*c*c);if(hF(d))throw new Error("depth has to be an integer: "+d+", weights.length: "+h.length+", numFilters: "+u+", filterSize: "+c);return st(function(){return Dl(Eo(h,[u,d,c,c]),[2,3,1,0])})}function r(a,u,c,h){var d=e(a,u,c),v=Hr(n(u));return t.push({paramPath:h+"/filters"},{paramPath:h+"/bias"}),{filters:d,bias:v}}function i(a,u){var c=Hr(n(a)),h=Hr(n(a));return t.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:c,biases:h}}function o(a,u,c,h){var d=r(a,u,c,h+"/conv"),v=i(u,h+"/scale");return{conv:d,scale:v}}function s(a,u,c,h,d){d===void 0&&(d=!1);var v=o((d?.5:1)*a,u,c,h+"/conv1"),p=o(a,u,c,h+"/conv2");return{conv1:v,conv2:p}}return{extractConvLayerParams:o,extractResidualLayerParams:s}}function e8(n){var t=ju(n),e=t.extractWeights,r=t.getRemainingWeights,i=[],o=ZF(e,i),s=o.extractConvLayerParams,a=o.extractResidualLayerParams,u=s(4704,32,7,"conv32_down"),c=a(9216,32,3,"conv32_1"),h=a(9216,32,3,"conv32_2"),d=a(9216,32,3,"conv32_3"),v=a(36864,64,3,"conv64_down",!0),p=a(36864,64,3,"conv64_1"),y=a(36864,64,3,"conv64_2"),x=a(36864,64,3,"conv64_3"),w=a(147456,128,3,"conv128_down",!0),_=a(147456,128,3,"conv128_1"),E=a(147456,128,3,"conv128_2"),I=a(589824,256,3,"conv256_down",!0),C=a(589824,256,3,"conv256_1"),N=a(589824,256,3,"conv256_2"),O=a(589824,256,3,"conv256_down_out"),U=st(function(){return Dl(Il(e(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var M={conv32_down:u,conv32_1:c,conv32_2:h,conv32_3:d,conv64_down:v,conv64_1:p,conv64_2:y,conv64_3:x,conv128_down:w,conv128_1:_,conv128_2:E,conv256_down:I,conv256_1:C,conv256_2:N,conv256_down_out:O,fc:U};return{params:M,paramMappings:i}}function t8(n,t){var e=Ul(n,t);function r(s){var a=e(s+"/scale/weights",1),u=e(s+"/scale/biases",1);return{weights:a,biases:u}}function i(s){var a=e(s+"/conv/filters",4),u=e(s+"/conv/bias",1),c=r(s);return{conv:{filters:a,bias:u},scale:c}}function o(s){return{conv1:i(s+"/conv1"),conv2:i(s+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function n8(n){var t=[],e=t8(n,t),r=e.extractConvLayerParams,i=e.extractResidualLayerParams,o=r("conv32_down"),s=i("conv32_1"),a=i("conv32_2"),u=i("conv32_3"),c=i("conv64_down"),h=i("conv64_1"),d=i("conv64_2"),v=i("conv64_3"),p=i("conv128_down"),y=i("conv128_1"),x=i("conv128_2"),w=i("conv256_down"),_=i("conv256_1"),E=i("conv256_2"),I=i("conv256_down_out"),C=n.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!fF(C))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+C);var N={conv32_down:o,conv32_1:s,conv32_2:a,conv32_3:u,conv64_down:c,conv64_1:h,conv64_2:d,conv64_3:v,conv128_down:p,conv128_1:y,conv128_2:x,conv256_down:w,conv256_1:_,conv256_2:E,conv256_down_out:I,fc:C};return Bu(n,t),{params:N,paramMappings:t}}function As(n,t){var e=QF(n,t.conv1);return e=rS(e,t.conv2),e=hn(e,n),e=gr(e),e}function Np(n,t){var e=iS(n,t.conv1);e=rS(e,t.conv2);var r=kd(n,2,2,"valid"),i=Qn(r.shape),o=r.shape[3]!==e.shape[3],s=r.shape[1]!==e.shape[1]||r.shape[2]!==e.shape[2];if(s){var a=Jh(e.shape);a[1]=1;var u=Qn(a);e=ti([e,u],1);var c=Jh(e.shape);c[2]=1;var h=Qn(c);e=ti([e,h],2)}return r=o?ti([r,i],3):r,e=hn(r,e),e=gr(e),e}var r8=(function(n){tn(t,n);function t(){return n.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return st(function(){var i=e.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],s=Nd(i,o).div(rt(256)),a=iS(s,r.conv32_down);a=pi(a,3,2,"valid"),a=As(a,r.conv32_1),a=As(a,r.conv32_2),a=As(a,r.conv32_3),a=Np(a,r.conv64_down),a=As(a,r.conv64_1),a=As(a,r.conv64_2),a=As(a,r.conv64_3),a=Np(a,r.conv128_down),a=As(a,r.conv128_1),a=As(a,r.conv128_2),a=Np(a,r.conv256_down),a=As(a,r.conv256_1),a=As(a,r.conv256_2),a=Np(a,r.conv256_down_out);var u=a.mean([1,2]),c=zv(u,r.fc);return c})},t.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Nt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,gi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.computeFaceDescriptor=function(e){return Et(this,void 0,void 0,function(){var r,i,o,s=this;return Nt(this,function(a){switch(a.label){case 0:return[4,gi(e)];case 1:return r=a.sent(),i=st(function(){return ni(s.forwardInput(r))}),[4,Promise.all(i.map(function(u){return u.data()}))];case 2:return o=a.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return n8(e)},t.prototype.extractParams=function(e){return e8(e)},t})(Ou);function oS(n,t){var e={descriptor:t};return Object.assign({},n,e)}function aS(n,t){var e={age:t};return Object.assign({},n,e)}function sS(n,t,e){var r={gender:t,genderProbability:e};return Object.assign({},n,r)}var uS=(function(){function n(t){var e=t===void 0?{}:t,r=e.minFaceSize,i=e.scaleFactor,o=e.maxNumScales,s=e.scoreThresholds,a=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=o||10,this._scoreThresholds=s||[.6,.7,.7],this._scaleSteps=a,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(n.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),n})();function i8(n,t){function e(u,c){var h=Eo(n(9*u),[3,3,u,1]),d=Hr(n(u)),v=Hr(n(u)),p=Hr(n(u)),y=Hr(n(u));return t.push({paramPath:c+"/filters"},{paramPath:c+"/batch_norm_scale"},{paramPath:c+"/batch_norm_offset"},{paramPath:c+"/batch_norm_mean"},{paramPath:c+"/batch_norm_variance"}),{filters:h,batch_norm_scale:d,batch_norm_offset:v,batch_norm_mean:p,batch_norm_variance:y}}function r(u,c,h,d,v){var p=Eo(n(u*c*h*h),[h,h,u,c]),y=Hr(n(c));return t.push({paramPath:d+"/filters"},{paramPath:d+"/"+(v?"batch_norm_offset":"bias")}),{filters:p,bias:y}}function i(u,c,h,d){var v=r(u,c,h,d,!0),p=v.filters,y=v.bias;return{filters:p,batch_norm_offset:y}}function o(u,c,h){var d=e(u,h+"/depthwise_conv"),v=i(u,c,1,h+"/pointwise_conv");return{depthwise_conv:d,pointwise_conv:v}}function s(){var u=i(3,32,3,"mobilenetv1/conv_0"),c=o(32,64,"mobilenetv1/conv_1"),h=o(64,128,"mobilenetv1/conv_2"),d=o(128,128,"mobilenetv1/conv_3"),v=o(128,256,"mobilenetv1/conv_4"),p=o(256,256,"mobilenetv1/conv_5"),y=o(256,512,"mobilenetv1/conv_6"),x=o(512,512,"mobilenetv1/conv_7"),w=o(512,512,"mobilenetv1/conv_8"),_=o(512,512,"mobilenetv1/conv_9"),E=o(512,512,"mobilenetv1/conv_10"),I=o(512,512,"mobilenetv1/conv_11"),C=o(512,1024,"mobilenetv1/conv_12"),N=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:c,conv_2:h,conv_3:d,conv_4:v,conv_5:p,conv_6:y,conv_7:x,conv_8:w,conv_9:_,conv_10:E,conv_11:I,conv_12:C,conv_13:N}}function a(){var u=i(1024,256,1,"prediction_layer/conv_0"),c=i(256,512,3,"prediction_layer/conv_1"),h=i(512,128,1,"prediction_layer/conv_2"),d=i(128,256,3,"prediction_layer/conv_3"),v=i(256,128,1,"prediction_layer/conv_4"),p=i(128,256,3,"prediction_layer/conv_5"),y=i(256,64,1,"prediction_layer/conv_6"),x=i(64,128,3,"prediction_layer/conv_7"),w=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),_=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),E=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),I=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),C=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),N=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),O=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),U=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),M=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),T=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),j=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),D=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),B={box_encoding_predictor:w,class_predictor:_},X={box_encoding_predictor:E,class_predictor:I},G={box_encoding_predictor:C,class_predictor:N},oe={box_encoding_predictor:O,class_predictor:U},he={box_encoding_predictor:M,class_predictor:T},ae={box_encoding_predictor:j,class_predictor:D};return{conv_0:u,conv_1:c,conv_2:h,conv_3:d,conv_4:v,conv_5:p,conv_6:y,conv_7:x,box_predictor_0:B,box_predictor_1:X,box_predictor_2:G,box_predictor_3:oe,box_predictor_4:he,box_predictor_5:ae}}return{extractMobilenetV1Params:s,extractPredictionLayerParams:a}}function o8(n){var t=[],e=ju(n),r=e.extractWeights,i=e.getRemainingWeights,o=i8(r,t),s=o.extractMobilenetV1Params,a=o.extractPredictionLayerParams,u=s(),c=a(),h=T1(r(5118*4),[1,5118,4]),d={extra_dim:h};if(t.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:u,prediction_layer:c,output_layer:d},paramMappings:t}}function a8(n,t){var e=Ul(n,t);function r(c,h,d){var v=e(c+"/Conv2d_"+h+"_pointwise/weights",4,d+"/filters"),p=e(c+"/Conv2d_"+h+"_pointwise/convolution_bn_offset",1,d+"/batch_norm_offset");return{filters:v,batch_norm_offset:p}}function i(c){var h="mobilenetv1/conv_"+c,d="MobilenetV1/Conv2d_"+c+"_depthwise",v=h+"/depthwise_conv",p=h+"/pointwise_conv",y=e(d+"/depthwise_weights",4,v+"/filters"),x=e(d+"/BatchNorm/gamma",1,v+"/batch_norm_scale"),w=e(d+"/BatchNorm/beta",1,v+"/batch_norm_offset"),_=e(d+"/BatchNorm/moving_mean",1,v+"/batch_norm_mean"),E=e(d+"/BatchNorm/moving_variance",1,v+"/batch_norm_variance");return{depthwise_conv:{filters:y,batch_norm_scale:x,batch_norm_offset:w,batch_norm_mean:_,batch_norm_variance:E},pointwise_conv:r("MobilenetV1",c,p)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function s(c,h){var d=e(c+"/weights",4,h+"/filters"),v=e(c+"/biases",1,h+"/bias");return{filters:d,bias:v}}function a(c){var h=s("Prediction/BoxPredictor_"+c+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+c+"/box_encoding_predictor"),d=s("Prediction/BoxPredictor_"+c+"/ClassPredictor","prediction_layer/box_predictor_"+c+"/class_predictor");return{box_encoding_predictor:h,class_predictor:d}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:u}}function s8(n){var t=[],e=a8(n,t),r=e.extractMobilenetV1Params,i=e.extractPredictionLayerParams,o=n["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Hv(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var s={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:o}};return Bu(n,t),{params:s,paramMappings:t}}function Ns(n,t,e){return st(function(){var r=Na(n,t.filters,e,"same");return r=hn(r,t.batch_norm_offset),W1(r,0,6)})}var u8=.0010000000474974513;function l8(n,t,e){return st(function(){var r=Uv(n,t.filters,e,"same");return r=e_(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,u8),W1(r,0,6)})}function c8(n){return[2,4,6,12].some(function(t){return t===n})?[2,2]:[1,1]}function f8(n,t){return st(function(){var e=null,r=Ns(n,t.conv_0,[2,2]),i=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(i.forEach(function(o,s){var a=s+1,u=c8(a);r=l8(r,o.depthwise_conv,u),r=Ns(r,o.pointwise_conv,[1,1]),a===11&&(e=r)}),e===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:e}})}function h8(n,t,e,r,i){var o=n.shape[0],s=Math.min(e,o),a=t.map(function(h,d){return{score:h,boxIndex:d}}).filter(function(h){return h.score>i}).sort(function(h,d){return d.score-h.score}),u=function(h){return h<=r?1:0},c=[];return a.forEach(function(h){if(!(c.length>=s)){for(var d=h.score,v=c.length-1;v>=0;--v){var p=d8(n,h.boxIndex,c[v]);if(p!==0&&(h.score*=u(p),h.score<=i))break}d===h.score&&c.push(h.boxIndex)}}),c}function d8(n,t,e){var r=n.arraySync(),i=Math.min(r[t][0],r[t][2]),o=Math.min(r[t][1],r[t][3]),s=Math.max(r[t][0],r[t][2]),a=Math.max(r[t][1],r[t][3]),u=Math.min(r[e][0],r[e][2]),c=Math.min(r[e][1],r[e][3]),h=Math.max(r[e][0],r[e][2]),d=Math.max(r[e][1],r[e][3]),v=(s-i)*(a-o),p=(h-u)*(d-c);if(v<=0||p<=0)return 0;var y=Math.max(i,u),x=Math.max(o,c),w=Math.min(s,h),_=Math.min(a,d),E=Math.max(w-y,0)*Math.max(_-x,0);return E/(v+p-E)}function p8(n){var t=ni(Dl(n,[1,0])),e=[ii(t[2],t[0]),ii(t[3],t[1])],r=[hn(t[0],Ya(e[0],rt(2))),hn(t[1],Ya(e[1],rt(2)))];return{sizes:e,centers:r}}function v8(n,t){var e=p8(n),r=e.sizes,i=e.centers,o=ni(Dl(t,[1,0])),s=Ya(Xi(Ng(Ya(o[2],rt(5))),r[0]),rt(2)),a=hn(Xi(Ya(o[0],rt(10)),r[0]),i[0]),u=Ya(Xi(Ng(Ya(o[3],rt(5))),r[1]),rt(2)),c=hn(Xi(Ya(o[1],rt(10)),r[1]),i[1]);return Dl(na([ii(a,s),ii(c,u),hn(a,s),hn(c,u)]),[1,0])}function m8(n,t,e){return st(function(){var r=n.shape[0],i=v8(Ja(jf(e.extra_dim,[r,1,1]),[-1,4]),Ja(n,[-1,4]));i=Ja(i,[r,i.shape[0]/r,4]);var o=Y4(js(t,[0,0,1],[-1,-1,-1])),s=js(o,[0,0,0],[-1,-1,1]);s=Ja(s,[r,s.shape[1]]);var a=ni(i),u=ni(s);return{boxes:a,scores:u}})}function _f(n,t){return st(function(){var e=n.shape[0],r=Ja(Qa(n,t.box_encoding_predictor),[e,-1,1,4]),i=Ja(Qa(n,t.class_predictor),[e,-1,3]);return{boxPredictionEncoding:r,classPrediction:i}})}function g8(n,t,e){return st(function(){var r=Ns(n,e.conv_0,[1,1]),i=Ns(r,e.conv_1,[2,2]),o=Ns(i,e.conv_2,[1,1]),s=Ns(o,e.conv_3,[2,2]),a=Ns(s,e.conv_4,[1,1]),u=Ns(a,e.conv_5,[2,2]),c=Ns(u,e.conv_6,[1,1]),h=Ns(c,e.conv_7,[2,2]),d=_f(t,e.box_predictor_0),v=_f(n,e.box_predictor_1),p=_f(i,e.box_predictor_2),y=_f(s,e.box_predictor_3),x=_f(u,e.box_predictor_4),w=_f(h,e.box_predictor_5),_=ti([d.boxPredictionEncoding,v.boxPredictionEncoding,p.boxPredictionEncoding,y.boxPredictionEncoding,x.boxPredictionEncoding,w.boxPredictionEncoding],1),E=ti([d.classPrediction,v.classPrediction,p.classPrediction,y.classPrediction,x.classPrediction,w.classPrediction],1);return{boxPredictions:_,classPredictions:E}})}var Id=(function(){function n(t){var e=t===void 0?{}:t,r=e.minConfidence,i=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(n.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),n})(),lS=(function(n){tn(t,n);function t(){return n.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return st(function(){var i=e.toBatchTensor(512,!1).toFloat(),o=ii(Xi(i,rt(.007843137718737125)),rt(1)),s=f8(o,r.mobilenetv1),a=g8(s.out,s.conv11,r.prediction_layer),u=a.boxPredictions,c=a.classPredictions;return m8(u,c,r.output_layer)})},t.prototype.forward=function(e){return Et(this,void 0,void 0,function(){var r;return Nt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,gi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.locateFaces=function(e,r){return r===void 0&&(r={}),Et(this,void 0,void 0,function(){var i,o,s,a,u,c,h,d,v,p,y,x,w,_,E,I,C,N,O,U,M;return Nt(this,function(T){switch(T.label){case 0:return i=new Id(r),o=i.maxResults,s=i.minConfidence,[4,gi(e)];case 1:for(a=T.sent(),u=this.forwardInput(a),c=u.boxes,h=u.scores,d=c[0],v=h[0],p=1;p<c.length;p++)c[p].dispose(),h[p].dispose();return w=(x=Array).from,[4,v.data()];case 2:return y=w.apply(x,[T.sent()]),_=.5,E=h8(d,y,o,_,s),I=a.getReshapedInputDimensions(0),C=a.inputSize,N=C/I.width,O=C/I.height,U=d.arraySync(),M=E.map(function(j){var D=[Math.max(0,U[j][0]),Math.min(1,U[j][2])].map(function(ae){return ae*O}),B=D[0],X=D[1],G=[Math.max(0,U[j][1]),Math.min(1,U[j][3])].map(function(ae){return ae*N}),oe=G[0],he=G[1];return new ns(y[j],new a2(oe,B,he-oe,X-B),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),d.dispose(),v.dispose(),[2,M]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return s8(e)},t.prototype.extractParams=function(e){return o8(e)},t})(Ou);(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t})(lS);var y8=.4,x8=[new kn(.738768,.874946),new kn(2.42204,2.65704),new kn(4.30971,7.04493),new kn(10.246,4.59428),new kn(12.6868,11.8741)],w8=[new kn(1.603231,2.094468),new kn(6.041143,7.080126),new kn(2.882459,3.518061),new kn(4.266906,5.178857),new kn(9.041765,10.66308)],b8=[117.001,114.697,97.404],_8="tiny_yolov2_model",S8="tiny_yolov2_separable_conv_model",Ip=function(n){return typeof n=="number"};function C8(n){if(!n)throw new Error("invalid config: "+n);if(typeof n.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+n.withSeparableConvs);if(!Ip(n.iouThreshold)||n.iouThreshold<0||n.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+n.iouThreshold);if(!Array.isArray(n.classes)||!n.classes.length||!n.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(n.classes));if(!Array.isArray(n.anchors)||!n.anchors.length||!n.anchors.map(function(t){return t||{}}).every(function(t){return Ip(t.x)&&Ip(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(n.anchors));if(n.meanRgb&&(!Array.isArray(n.meanRgb)||n.meanRgb.length!==3||!n.meanRgb.every(Ip)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(n.meanRgb))}function v2(n){return st(function(){var t=Xi(n,rt(.10000000149011612));return hn(gr(ii(n,t)),t)})}function bl(n,t){return st(function(){var e=Oc(n,[[0,0],[1,1],[1,1],[0,0]]);return e=Na(e,t.conv.filters,[1,1],"valid"),e=ii(e,t.bn.sub),e=Xi(e,t.bn.truediv),e=hn(e,t.conv.bias),v2(e)})}function _l(n,t){return st(function(){var e=Oc(n,[[0,0],[1,1],[1,1],[0,0]]);return e=$1(e,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),e=hn(e,t.bias),v2(e)})}function A8(n,t){var e=Kv(n,t);function r(s,a){var u=Hr(n(s)),c=Hr(n(s));return t.push({paramPath:a+"/sub"},{paramPath:a+"/truediv"}),{sub:u,truediv:c}}function i(s,a,u){var c=e(s,a,3,u+"/conv"),h=r(a,u+"/bn");return{conv:c,bn:h}}var o=h2(n,t);return{extractConvParams:e,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function k8(n,t,e,r){var i=ju(n),o=i.extractWeights,s=i.getRemainingWeights,a=[],u=A8(o,a),c=u.extractConvParams,h=u.extractConvWithBatchNormParams,d=u.extractSeparableConvParams,v;if(t.withSeparableConvs){var p=r[0],y=r[1],x=r[2],w=r[3],_=r[4],E=r[5],I=r[6],C=r[7],N=r[8],O=t.isFirstLayerConv2d?c(p,y,3,"conv0"):d(p,y,"conv0"),U=d(y,x,"conv1"),M=d(x,w,"conv2"),T=d(w,_,"conv3"),j=d(_,E,"conv4"),D=d(E,I,"conv5"),B=C?d(I,C,"conv6"):void 0,X=N?d(C,N,"conv7"):void 0,G=c(N||C||I,5*e,1,"conv8");v={conv0:O,conv1:U,conv2:M,conv3:T,conv4:j,conv5:D,conv6:B,conv7:X,conv8:G}}else{var p=r[0],y=r[1],x=r[2],w=r[3],_=r[4],E=r[5],I=r[6],C=r[7],N=r[8],O=h(p,y,"conv0"),U=h(y,x,"conv1"),M=h(x,w,"conv2"),T=h(w,_,"conv3"),j=h(_,E,"conv4"),D=h(E,I,"conv5"),B=h(I,C,"conv6"),X=h(C,N,"conv7"),G=c(N,5*e,1,"conv8");v={conv0:O,conv1:U,conv2:M,conv3:T,conv4:j,conv5:D,conv6:B,conv7:X,conv8:G}}if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{params:v,paramMappings:a}}function E8(n,t){var e=Ul(n,t);function r(a){var u=e(a+"/sub",1),c=e(a+"/truediv",1);return{sub:u,truediv:c}}function i(a){var u=e(a+"/filters",4),c=e(a+"/bias",1);return{filters:u,bias:c}}function o(a){var u=i(a+"/conv"),c=r(a+"/bn");return{conv:u,bn:c}}var s=d2(e);return{extractConvParams:i,extractConvWithBatchNormParams:o,extractSeparableConvParams:s}}function N8(n,t){var e=[],r=E8(n,e),i=r.extractConvParams,o=r.extractConvWithBatchNormParams,s=r.extractSeparableConvParams,a;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;a={conv0:t.isFirstLayerConv2d?i("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:i("conv8")}}else a={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return Bu(n,e),{params:a,paramMappings:e}}var ub;(function(n){n[n.XS=224]="XS",n[n.SM=320]="SM",n[n.MD=416]="MD",n[n.LG=608]="LG"})(ub||(ub={}));var m2=(function(){function n(t){var e=t===void 0?{}:t,r=e.inputSize,i=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),n})(),cS=(function(n){tn(t,n);function t(e){var r=n.call(this,"TinyYolov2")||this;return C8(e),r._config=e,r}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,r){var i=bl(e,r.conv0);return i=pi(i,[2,2],[2,2],"same"),i=bl(i,r.conv1),i=pi(i,[2,2],[2,2],"same"),i=bl(i,r.conv2),i=pi(i,[2,2],[2,2],"same"),i=bl(i,r.conv3),i=pi(i,[2,2],[2,2],"same"),i=bl(i,r.conv4),i=pi(i,[2,2],[2,2],"same"),i=bl(i,r.conv5),i=pi(i,[2,2],[1,1],"same"),i=bl(i,r.conv6),i=bl(i,r.conv7),Qa(i,r.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,r){var i=this.config.isFirstLayerConv2d?v2(Qa(e,r.conv0,"valid",!1)):_l(e,r.conv0);return i=pi(i,[2,2],[2,2],"same"),i=_l(i,r.conv1),i=pi(i,[2,2],[2,2],"same"),i=_l(i,r.conv2),i=pi(i,[2,2],[2,2],"same"),i=_l(i,r.conv3),i=pi(i,[2,2],[2,2],"same"),i=_l(i,r.conv4),i=pi(i,[2,2],[2,2],"same"),i=_l(i,r.conv5),i=pi(i,[2,2],[1,1],"same"),i=r.conv6?_l(i,r.conv6):i,i=r.conv7?_l(i,r.conv7):i,Qa(i,r.conv8,"valid",!1)},t.prototype.forwardInput=function(e,r){var i=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return st(function(){var s=e.toBatchTensor(r,!1).toFloat();return s=i.config.meanRgb?Nd(s,i.config.meanRgb):s,s=s.div(rt(256)),i.config.withSeparableConvs?i.runMobilenet(s,o):i.runTinyYolov2(s,o)})},t.prototype.forward=function(e,r){return Et(this,void 0,void 0,function(){var i;return Nt(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,gi(e)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},t.prototype.detect=function(e,r){return r===void 0&&(r={}),Et(this,void 0,void 0,function(){var i,o,s,a,u,c,h,d,v,p,y,x,w,_,E=this;return Nt(this,function(I){switch(I.label){case 0:return i=new m2(r),o=i.inputSize,s=i.scoreThreshold,[4,gi(e)];case 1:return a=I.sent(),[4,this.forwardInput(a,o)];case 2:return u=I.sent(),c=st(function(){return ni(u)[0].expandDims()}),h={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(c,a.getReshapedInputDimensions(0),s)];case 3:return d=I.sent(),u.dispose(),c.dispose(),v=d.map(function(C){return C.box}),p=d.map(function(C){return C.score}),y=d.map(function(C){return C.classScore}),x=d.map(function(C){return E.config.classes[C.label]}),w=fd(v.map(function(C){return C.rescale(o)}),p,this.config.iouThreshold,!0),_=w.map(function(C){return new D_(p[C],y[C],x[C],v[C],h)}),[2,_]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return N8(e,this.config)},t.prototype.extractParams=function(e){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return k8(e,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(e,r,i){return Et(this,void 0,void 0,function(){var o,s,a,u,c,h,d,v,p,y,x,w,_,E,I,C,N,O,U,M,T,j,D,B,X,G,oe,he,ae,W=this;return Nt(this,function(ne){switch(ne.label){case 0:return o=r.width,s=r.height,a=Math.max(o,s),u=a/o,c=a/s,h=e.shape[1],d=this.config.anchors.length,v=st(function(){var se=e.reshape([h,h,d,W.boxEncodingSize]),$=se.slice([0,0,0,0],[h,h,d,4]),F=se.slice([0,0,0,4],[h,h,d,1]),K=W.withClassScores?Fu(se.slice([0,0,0,5],[h,h,d,W.config.classes.length]),3):rt(0);return[$,F,K]}),p=v[0],y=v[1],x=v[2],w=[],[4,y.array()];case 1:return _=ne.sent(),[4,p.array()];case 2:E=ne.sent(),I=0,ne.label=3;case 3:if(!(I<h))return[3,12];C=0,ne.label=4;case 4:if(!(C<h))return[3,11];N=0,ne.label=5;case 5:return N<d?(O=E0(_[I][C][N][0]),!i||O>i?(U=(C+E0(E[I][C][N][0]))/h*u,M=(I+E0(E[I][C][N][1]))/h*c,T=Math.exp(E[I][C][N][2])*this.config.anchors[N].x/h*u,j=Math.exp(E[I][C][N][3])*this.config.anchors[N].y/h*c,D=U-T/2,B=M-j/2,X={row:I,col:C,anchor:N},this.withClassScores?[4,this.extractPredictedClass(x,X)]:[3,7]):[3,9]):[3,10];case 6:return ae=ne.sent(),[3,8];case 7:ae={classScore:1,label:0},ne.label=8;case 8:G=ae,oe=G.classScore,he=G.label,w.push(Hi({box:new Gv(D,B,D+T,B+j),score:O,classScore:O*oe,label:he},X)),ne.label=9;case 9:return N++,[3,5];case 10:return C++,[3,4];case 11:return I++,[3,3];case 12:return p.dispose(),y.dispose(),x.dispose(),[2,w]}})})},t.prototype.extractPredictedClass=function(e,r){return Et(this,void 0,void 0,function(){var i,o,s,a;return Nt(this,function(u){switch(u.label){case 0:return i=r.row,o=r.col,s=r.anchor,[4,e.array()];case 1:return a=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(c,h){return a[i][o][s][h]}).map(function(c,h){return{classScore:c,label:h}}).reduce(function(c,h){return c.classScore>h.classScore?c:h})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t})(Ou),I8=(function(n){tn(t,n);function t(e){e===void 0&&(e=!0);var r=this,i=Object.assign({},{withSeparableConvs:e,iouThreshold:y8,classes:["face"]},e?{anchors:w8,meanRgb:b8}:{anchors:x8,withClassScores:!0});return r=n.call(this,i)||this,r}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,r){return Et(this,void 0,void 0,function(){var i;return Nt(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return i=o.sent(),[2,i.map(function(s){return new ns(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?S8:_8},t.prototype.extractParamsFromWeigthMap=function(e){return n.prototype.extractParamsFromWeigthMap.call(this,e)},t})(cS),fS=(function(n){tn(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return t})(m2),Pd=(function(){function n(){}return n.prototype.then=function(t){return Et(this,void 0,void 0,function(){var e;return Nt(this,function(r){switch(r.label){case 0:return e=t,[4,this.run()];case 1:return[2,e.apply(void 0,[r.sent()])]}})})},n.prototype.run=function(){return Et(this,void 0,void 0,function(){return Nt(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},n})();function Yv(n,t,e,r,i){return i===void 0&&(i=function(o){var s=o.alignedRect;return s}),Et(this,void 0,void 0,function(){var o,s,a,u,c;return Nt(this,function(h){switch(h.label){case 0:return o=n.map(function(d){return Z_(d)?i(d):d.detection}),a=r,a?[3,5]:t instanceof vr?[4,c2(t,o)]:[3,2];case 1:return u=h.sent(),[3,4];case 2:return[4,l2(t,o)];case 3:u=h.sent(),h.label=4;case 4:a=u,h.label=5;case 5:return s=a,[4,e(s)];case 6:return c=h.sent(),s.forEach(function(d){return d instanceof vr&&d.dispose()}),[2,c]}})})}function g2(n,t,e,r,i){return Et(this,void 0,void 0,function(){var o=this;return Nt(this,function(s){return[2,Yv([n],t,function(a){return Et(o,void 0,void 0,function(){return Nt(this,function(u){return[2,e(a[0])]})})},r,i)]})})}function P8(n){return st(function(){return na(ni(n,3).reverse(),3)})}var Pp=2,Cv=12;function R8(n,t){var e=Kv(n,t),r=f2(n,t);function i(c,h){var d=Hr(n(c));return t.push({paramPath:h}),d}function o(c,h,d){d===void 0&&(d=!1);var v=e(c[0],c[1],3,h+"/conv1"),p=i(c[1],h+"/prelu1_alpha"),y=e(c[1],c[2],3,h+"/conv2"),x=i(c[2],h+"/prelu2_alpha"),w=e(c[2],c[3],d?2:3,h+"/conv3"),_=i(c[3],h+"/prelu3_alpha");return{conv1:v,prelu1_alpha:p,conv2:y,prelu2_alpha:x,conv3:w,prelu3_alpha:_}}function s(){var c=o([3,10,16,32],"pnet"),h=e(32,2,1,"pnet/conv4_1"),d=e(32,4,1,"pnet/conv4_2");return Hi(Hi({},c),{conv4_1:h,conv4_2:d})}function a(){var c=o([3,28,48,64],"rnet",!0),h=r(576,128,"rnet/fc1"),d=i(128,"rnet/prelu4_alpha"),v=r(128,2,"rnet/fc2_1"),p=r(128,4,"rnet/fc2_2");return Hi(Hi({},c),{fc1:h,prelu4_alpha:d,fc2_1:v,fc2_2:p})}function u(){var c=o([3,32,64,64],"onet"),h=e(64,128,2,"onet/conv4"),d=i(128,"onet/prelu4_alpha"),v=r(1152,256,"onet/fc1"),p=i(256,"onet/prelu5_alpha"),y=r(256,2,"onet/fc2_1"),x=r(256,4,"onet/fc2_2"),w=r(256,10,"onet/fc2_3");return Hi(Hi({},c),{conv4:h,prelu4_alpha:d,fc1:v,prelu5_alpha:p,fc2_1:y,fc2_2:x,fc2_3:w})}return{extractPNetParams:s,extractRNetParams:a,extractONetParams:u}}function T8(n){var t=ju(n),e=t.extractWeights,r=t.getRemainingWeights,i=[],o=R8(e,i),s=o.extractPNetParams,a=o.extractRNetParams,u=o.extractONetParams,c=s(),h=a(),d=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:h,onet:d},paramMappings:i}}function L8(n,t){var e=Ul(n,t);function r(h){var d=e(h+"/weights",4,h+"/filters"),v=e(h+"/bias",1);return{filters:d,bias:v}}function i(h){var d=e(h+"/weights",2),v=e(h+"/bias",1);return{weights:d,bias:v}}function o(h){return e(h,1)}function s(h){var d=r(h+"/conv1"),v=o(h+"/prelu1_alpha"),p=r(h+"/conv2"),y=o(h+"/prelu2_alpha"),x=r(h+"/conv3"),w=o(h+"/prelu3_alpha");return{conv1:d,prelu1_alpha:v,conv2:p,prelu2_alpha:y,conv3:x,prelu3_alpha:w}}function a(){var h=s("pnet"),d=r("pnet/conv4_1"),v=r("pnet/conv4_2");return Hi(Hi({},h),{conv4_1:d,conv4_2:v})}function u(){var h=s("rnet"),d=i("rnet/fc1"),v=o("rnet/prelu4_alpha"),p=i("rnet/fc2_1"),y=i("rnet/fc2_2");return Hi(Hi({},h),{fc1:d,prelu4_alpha:v,fc2_1:p,fc2_2:y})}function c(){var h=s("onet"),d=r("onet/conv4"),v=o("onet/prelu4_alpha"),p=i("onet/fc1"),y=o("onet/prelu5_alpha"),x=i("onet/fc2_1"),w=i("onet/fc2_2"),_=i("onet/fc2_3");return Hi(Hi({},h),{conv4:d,prelu4_alpha:v,fc1:p,prelu5_alpha:y,fc2_1:x,fc2_2:w,fc2_3:_})}return{extractPNetParams:a,extractRNetParams:u,extractONetParams:c}}function D8(n){var t=[],e=L8(n,t),r=e.extractPNetParams,i=e.extractRNetParams,o=e.extractONetParams,s=r(),a=i(),u=o();return Bu(n,t),{params:{pnet:s,rnet:a,onet:u},paramMappings:t}}function Mg(n,t){var e=t[0],r=t[1];return{height:Math.floor(e*n),width:Math.floor(r*n)}}function F8(n,t,e){for(var r=e[0],i=e[1],o=Cv/n,s=[],a=Math.min(r,i)*o,u=0;a>=12;)s.push(o*Math.pow(t,u)),a=a*t,u+=1;return s}var y2=(function(n){tn(t,n);function t(e,r,i,o){return n.call(this,{left:e,top:r,right:i,bottom:o},!0)||this}return t})(Fl);function hS(n){return st(function(){return Xi(ii(n,rt(127.5)),rt(.0078125))})}function qf(n,t){return st(function(){return hn(gr(n),Xi(t,yv(gr(yv(n)))))})}function x2(n,t,e){return e===void 0&&(e=!1),st(function(){var r=Qa(n,t.conv1,"valid");return r=qf(r,t.prelu1_alpha),r=pi(r,e?[2,2]:[3,3],[2,2],"same"),r=Qa(r,t.conv2,"valid"),r=qf(r,t.prelu2_alpha),r=e?r:pi(r,[3,3],[2,2],"valid"),r=Qa(r,t.conv3,"valid"),r=qf(r,t.prelu3_alpha),r})}function M8(n,t){return st(function(){var e=x2(n,t,!0),r=Qa(e,t.conv4_1,"valid"),i=Ca(Vv(r,3),3),o=Fu(ii(r,i),3),s=Qa(e,t.conv4_2,"valid");return{prob:o,regions:s}})}function O8(n,t){return st(function(){var e=Mg(t,n.shape.slice(1)),r=e.height,i=e.width,o=Q1.resizeBilinear(n,[r,i]),s=hS(o);return Dl(s,[0,2,1,3])})}function B8(n,t,e,r){for(var i=[],o=n.arraySync(),s=0;s<n.shape[0];s++)for(var a=0;a<n.shape[1];a++)o[s][a]>=r&&i.push(new kn(a,s));var u=i.map(function(c){var h=new Gv(Math.round((c.y*Pp+1)/e),Math.round((c.x*Pp+1)/e),Math.round((c.y*Pp+Cv)/e),Math.round((c.x*Pp+Cv)/e)),d=o[c.y][c.x],v=t.arraySync(),p=new y2(v[c.y][c.x][0],v[c.y][c.x][1],v[c.y][c.x][2],v[c.y][c.x][3]);return{cell:h,score:d,region:p}});return u}function j8(n,t,e,r,i){i.stage1=[];var o=t.map(function(v){return st(function(){var p={scale:v},y=O8(n,v),x=Date.now(),w=M8(y,r),_=w.prob,E=w.regions;p.pnet=Date.now()-x;var I=ni(ni(_,3)[1])[0],C=ni(E)[0];return{scoresTensor:I,regionsTensor:C,scale:v,statsForScale:p}})}),s=o.map(function(v){var p=v.scoresTensor,y=v.regionsTensor,x=v.scale,w=v.statsForScale,_=B8(p,y,x,e);if(p.dispose(),y.dispose(),!_.length)return i.stage1.push(w),[];var E=Date.now(),I=fd(_.map(function(C){return C.cell}),_.map(function(C){return C.score}),.5);return w.nms=Date.now()-E,w.numBoxes=I.length,i.stage1.push(w),I.map(function(C){return _[C]})}),a=s.reduce(function(v,p){return v.concat(p)},[]),u=[],c=[];if(a.length>0){var h=Date.now(),d=fd(a.map(function(v){return v.cell}),a.map(function(v){return v.score}),.7);i.stage1_nms=Date.now()-h,c=d.map(function(v){return a[v].score}),u=d.map(function(v){return a[v]}).map(function(v){var p=v.cell,y=v.region;return new Gv(p.left+y.left*p.width,p.top+y.top*p.height,p.right+y.right*p.width,p.bottom+y.bottom*p.height).toSquare().round()})}return{boxes:u,scores:c}}function dS(n,t,e){var r=e.width,i=e.height;return Et(this,void 0,void 0,function(){var o,s,a,u=this;return Nt(this,function(c){switch(c.label){case 0:return o=Tc(n),[4,Promise.all(t.map(function(h){return Et(u,void 0,void 0,function(){var d,v,p,y,x,w,_,E;return Nt(this,function(I){return d=h.padAtBorders(n.height,n.width),v=d.y,p=d.ey,y=d.x,x=d.ex,w=y-1,_=v-1,E=o.getImageData(w,_,x-w,p-_),[2,Ei.isNodejs()?u2(E):createImageBitmap(E)]})})}))];case 1:return s=c.sent(),a=[],s.forEach(function(h){var d=$v({width:r,height:i}),v=Tc(d);v.drawImage(h,0,0,r,i);for(var p=v.getImageData(0,0,r,i).data,y=[],x=0;x<p.length;x+=4)y.push(p[x+2]),y.push(p[x+1]),y.push(p[x]);a.push(y)}),[2,a.map(function(h){var d=st(function(){var v=Dl(Eo(h,[1,r,i,3]),[0,2,1,3]).toFloat();return hS(v)});return d})]}})})}function U8(n,t){return st(function(){var e=x2(n,t),r=Ja(e,[e.shape[0],t.fc1.weights.shape[0]]),i=Ts(r,t.fc1),o=qf(i,t.prelu4_alpha),s=Ts(o,t.fc2_1),a=Ca(Vv(s,1),1),u=Fu(ii(s,a),1),c=Ts(o,t.fc2_2),h=ni(u,1)[1];return{scores:h,regions:c}})}function z8(n,t,e,r,i){return Et(this,void 0,void 0,function(){var o,s,a,u,c,h,d,v,p,y,x,w,_,E;return Nt(this,function(I){switch(I.label){case 0:return o=Date.now(),[4,dS(n,t,{width:24,height:24})];case 1:return s=I.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),a=s.map(function(C){var N=U8(C,r);return C.dispose(),N}),i.stage2_rnet=Date.now()-o,u=a.length>1?ti(a.map(function(C){return C.scores})):a[0].scores,d=(h=Array).from,[4,u.data()];case 2:return c=d.apply(h,[I.sent()]),u.dispose(),v=c.map(function(C,N){return{score:C,idx:N}}).filter(function(C){return C.score>e}).map(function(C){var N=C.idx;return N}),p=v.map(function(C){return t[C]}),y=v.map(function(C){return c[C]}),x=[],w=[],p.length>0&&(o=Date.now(),_=fd(p,y,.7),i.stage2_nms=Date.now()-o,E=_.map(function(C){var N=a[v[C]].regions.arraySync();return new y2(N[0][0],N[0][1],N[0][2],N[0][3])}),w=_.map(function(C){return y[C]}),x=_.map(function(C,N){return p[C].calibrate(E[N])})),a.forEach(function(C){C.regions.dispose(),C.scores.dispose()}),[2,{boxes:x,scores:w}]}})})}function V8(n,t){return st(function(){var e=x2(n,t);e=pi(e,[2,2],[2,2],"same"),e=Qa(e,t.conv4,"valid"),e=qf(e,t.prelu4_alpha);var r=Ja(e,[e.shape[0],t.fc1.weights.shape[0]]),i=Ts(r,t.fc1),o=qf(i,t.prelu5_alpha),s=Ts(o,t.fc2_1),a=Ca(Vv(s,1),1),u=Fu(ii(s,a),1),c=Ts(o,t.fc2_2),h=Ts(o,t.fc2_3),d=ni(u,1)[1];return{scores:d,regions:c,points:h}})}function W8(n,t,e,r,i){return Et(this,void 0,void 0,function(){var o,s,a,u,c,h,d,v,p,y,x,w,_,E,I;return Nt(this,function(C){switch(C.label){case 0:return o=Date.now(),[4,dS(n,t,{width:48,height:48})];case 1:return s=C.sent(),i.stage3_extractImagePatches=Date.now()-o,o=Date.now(),a=s.map(function(N){var O=V8(N,r);return N.dispose(),O}),i.stage3_onet=Date.now()-o,u=a.length>1?ti(a.map(function(N){return N.scores})):a[0].scores,d=(h=Array).from,[4,u.data()];case 2:return c=d.apply(h,[C.sent()]),u.dispose(),v=c.map(function(N,O){return{score:N,idx:O}}).filter(function(N){return N.score>e}).map(function(N){var O=N.idx;return O}),p=v.map(function(N){var O=a[N].regions.arraySync();return new y2(O[0][0],O[0][1],O[0][2],O[0][3])}),y=v.map(function(N,O){return t[N].calibrate(p[O])}),x=v.map(function(N){return c[N]}),w=[],_=[],E=[],y.length>0&&(o=Date.now(),I=fd(y,x,.7,!1),i.stage3_nms=Date.now()-o,w=I.map(function(N){return y[N]}),_=I.map(function(N){return x[N]}),E=I.map(function(N,O){return Array(5).fill(0).map(function(U,M){var T=a[N].points.arraySync();return new kn(T[0][M]*(w[O].width+1)+w[O].left,T[0][M+5]*(w[O].height+1)+w[O].top)})})),a.forEach(function(N){N.regions.dispose(),N.scores.dispose(),N.points.dispose()}),[2,{boxes:w,scores:_,points:E}]}})})}var q8=(function(n){tn(t,n);function t(){return n.call(this,"Mtcnn")||this}return t.prototype.load=function(e){return Et(this,void 0,void 0,function(){return Nt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.load.call(this,e)]})})},t.prototype.loadFromDisk=function(e){return Et(this,void 0,void 0,function(){return Nt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.loadFromDisk.call(this,e)]})})},t.prototype.forwardInput=function(e,r){return r===void 0&&(r={}),Et(this,void 0,void 0,function(){var i,o,s,a,u,c,h,d,v,p,y,x,w,_,E,I,C,N,O,U,M;return Nt(this,function(T){switch(T.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(o=e.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return s={},a=Date.now(),u=st(function(){return P8(Ca(i2.fromPixels(o)).toFloat())}),c=function(j){return u.dispose(),s.total=Date.now()-a,j},h=u.shape.slice(1),d=h[0],v=h[1],p=new uS(r),y=p.minFaceSize,x=p.scaleFactor,w=p.maxNumScales,_=p.scoreThresholds,E=p.scaleSteps,I=(E||F8(y,x,[d,v])).filter(function(j){var D=Mg(j,[d,v]);return Math.min(D.width,D.height)>Cv}).slice(0,w),s.scales=I,s.pyramid=I.map(function(j){return Mg(j,[d,v])}),C=Date.now(),[4,j8(u,I,_[0],i.pnet,s)];case 1:return N=T.sent(),s.total_stage1=Date.now()-C,N.boxes.length?(s.stage2_numInputBoxes=N.boxes.length,C=Date.now(),[4,z8(o,N.boxes,_[1],i.rnet,s)]):[2,c({results:[],stats:s})];case 2:return O=T.sent(),s.total_stage2=Date.now()-C,O.boxes.length?(s.stage3_numInputBoxes=O.boxes.length,C=Date.now(),[4,W8(o,O.boxes,_[2],i.onet,s)]):[2,c({results:[],stats:s})];case 3:return U=T.sent(),s.total_stage3=Date.now()-C,M=U.boxes.map(function(j,D){return Xv(dd({},new ns(U.scores[D],new a2(j.left/v,j.top/d,j.width/v,j.height/d),{height:d,width:v})),new bF(U.points[D].map(function(B){return B.sub(new kn(j.left,j.top)).div(new kn(j.width,j.height))}),{width:j.width,height:j.height}))}),[2,c({results:M,stats:s})]}})})},t.prototype.forward=function(e,r){return r===void 0&&(r={}),Et(this,void 0,void 0,function(){var i;return Nt(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,gi(e)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},t.prototype.forwardWithStats=function(e,r){return r===void 0&&(r={}),Et(this,void 0,void 0,function(){var i;return Nt(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,gi(e)];case 1:return[2,i.apply(this,[o.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return D8(e)},t.prototype.extractParams=function(e){return T8(e)},t})(Ou),H8=.4,G8=[new kn(1.603231,2.094468),new kn(6.041143,7.080126),new kn(2.882459,3.518061),new kn(4.266906,5.178857),new kn(9.041765,10.66308)],$8=[117.001,114.697,97.404],K8=(function(n){tn(t,n);function t(){var e=this,r={withSeparableConvs:!0,iouThreshold:H8,classes:["face"],anchors:G8,meanRgb:$8,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e=n.call(this,r)||this,e}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,r){return Et(this,void 0,void 0,function(){var i;return Nt(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return i=o.sent(),[2,i.map(function(s){return new ns(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(e){return n.prototype.extractParamsFromWeigthMap.call(this,e)},t})(cS),Gr={ssdMobilenetv1:new lS,tinyFaceDetector:new K8,tinyYolov2:new I8,mtcnn:new q8,faceLandmark68Net:new nS,faceLandmark68TinyNet:new YF,faceRecognitionNet:new r8,faceExpressionNet:new OF,ageGenderNet:new GF},pS=(function(n){tn(t,n);function t(e,r,i){var o=n.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=i,o}return t})(Pd),w2=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i=this;return Nt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,Yv(e,this.input,function(s){return Et(i,void 0,void 0,function(){return Nt(this,function(a){switch(a.label){case 0:return[4,Promise.all(s.map(function(u){return Gr.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(s,a){return Q_(s,r[a])})]}})})},t.prototype.withAgeAndGender=function(){return new C2(this,this.input)},t})(pS),b2=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r;return Nt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),e?[4,g2(e,this.input,function(o){return Gr.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,Q_(e,r)]}})})},t.prototype.withAgeAndGender=function(){return new A2(this,this.input)},t})(pS),_2=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new k2(this,this.input)},t.prototype.withFaceDescriptors=function(){return new N2(this,this.input)},t})(w2),S2=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new E2(this,this.input)},t.prototype.withFaceDescriptor=function(){return new I2(this,this.input)},t})(b2),vS=(function(n){tn(t,n);function t(e,r,i){var o=n.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=i,o}return t})(Pd),C2=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i=this;return Nt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,Yv(e,this.input,function(s){return Et(i,void 0,void 0,function(){return Nt(this,function(a){switch(a.label){case 0:return[4,Promise.all(s.map(function(u){return Gr.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(s,a){var u=r[a],c=u.age,h=u.gender,d=u.genderProbability;return aS(sS(s,h,d),c)})]}})})},t.prototype.withFaceExpressions=function(){return new w2(this,this.input)},t})(vS),A2=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i,o,s;return Nt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?[4,g2(e,this.input,function(u){return Gr.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=a.sent(),i=r.age,o=r.gender,s=r.genderProbability,[2,aS(sS(e,o,s),i)]}})})},t.prototype.withFaceExpressions=function(){return new b2(this,this.input)},t})(vS),k2=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new _2(this,this.input)},t.prototype.withFaceDescriptors=function(){return new N2(this,this.input)},t})(C2),E2=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new S2(this,this.input)},t.prototype.withFaceDescriptor=function(){return new I2(this,this.input)},t})(A2),mS=(function(n){tn(t,n);function t(e,r){var i=n.call(this)||this;return i.parentTask=e,i.input=r,i}return t})(Pd),N2=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r;return Nt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),[4,Yv(e,this.input,function(o){return Promise.all(o.map(function(s){return Gr.faceRecognitionNet.computeFaceDescriptor(s)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=i.sent(),[2,r.map(function(o,s){return oS(e[s],o)})]}})})},t.prototype.withFaceExpressions=function(){return new _2(this,this.input)},t.prototype.withAgeAndGender=function(){return new k2(this,this.input)},t})(mS),I2=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r;return Nt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),e?[4,g2(e,this.input,function(o){return Gr.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,oS(e,r)]}})})},t.prototype.withFaceExpressions=function(){return new S2(this,this.input)},t.prototype.withAgeAndGender=function(){return new E2(this,this.input)},t})(mS),gS=(function(n){tn(t,n);function t(e,r,i){var o=n.call(this)||this;return o.parentTask=e,o.input=r,o.useTinyLandmarkNet=i,o}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Gr.faceLandmark68TinyNet:Gr.faceLandmark68Net},enumerable:!0,configurable:!0}),t})(Pd),X8=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i,o,s,a=this;return Nt(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return e=u.sent(),r=e.map(function(c){return c.detection}),this.input instanceof vr?[4,c2(this.input,r)]:[3,3];case 2:return o=u.sent(),[3,5];case 3:return[4,l2(this.input,r)];case 4:o=u.sent(),u.label=5;case 5:return i=o,[4,Promise.all(i.map(function(c){return a.landmarkNet.detectLandmarks(c)}))];case 6:return s=u.sent(),i.forEach(function(c){return c instanceof vr&&c.dispose()}),[2,e.map(function(c,h){return Xv(c,s[h])})]}})})},t.prototype.withFaceExpressions=function(){return new _2(this,this.input)},t.prototype.withAgeAndGender=function(){return new k2(this,this.input)},t.prototype.withFaceDescriptors=function(){return new N2(this,this.input)},t})(gS),Y8=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i,o,s;return Nt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?(r=e.detection,this.input instanceof vr?[4,c2(this.input,[r])]:[3,3]):[2];case 2:return o=a.sent(),[3,5];case 3:return[4,l2(this.input,[r])];case 4:o=a.sent(),a.label=5;case 5:return i=o,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return s=a.sent(),i.forEach(function(u){return u instanceof vr&&u.dispose()}),[2,Xv(e,s)]}})})},t.prototype.withFaceExpressions=function(){return new S2(this,this.input)},t.prototype.withAgeAndGender=function(){return new E2(this,this.input)},t.prototype.withFaceDescriptor=function(){return new I2(this,this.input)},t})(gS),yS=(function(n){tn(t,n);function t(e,r){r===void 0&&(r=new Id);var i=n.call(this)||this;return i.input=e,i.options=r,i}return t})(Pd),xS=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r,i,o;return Nt(this,function(s){switch(s.label){case 0:return e=this,r=e.input,i=e.options,i instanceof uS?[4,Gr.mtcnn.forward(r,i)]:[3,2];case 1:return[2,s.sent().map(function(a){return a.detection})];case 2:if(o=i instanceof fS?function(a){return Gr.tinyFaceDetector.locateFaces(a,i)}:i instanceof Id?function(a){return Gr.ssdMobilenetv1.locateFaces(a,i)}:i instanceof m2?function(a){return Gr.tinyYolov2.locateFaces(a,i)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(r){return Et(e,void 0,void 0,function(){var i;return Nt(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i.map(function(s){return dd({},s)}))]}})})})},t.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new X8(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new w2(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new C2(this.runAndExtendWithFaceDetections(),this.input)},t})(yS),J8=(function(n){tn(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Et(this,void 0,void 0,function(){var e,r;return Nt(this,function(i){switch(i.label){case 0:return[4,new xS(this.input,this.options)];case 1:return e=i.sent(),r=e[0],e.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(r){return Et(e,void 0,void 0,function(){var i;return Nt(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i?dd({},i):void 0)]}})})})},t.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new Y8(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new b2(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new A2(this.runAndExtendWithFaceDetection(),this.input)},t})(yS);function Q8(n,t){return t===void 0&&(t=new Id),new J8(n,t)}function Z8(n,t){return t===void 0&&(t=new Id),new xS(n,t)}function wS(n,t){if(n.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var e=Array.from(n),r=Array.from(t);return Math.sqrt(e.map(function(i,o){return i-r[o]}).reduce(function(i,o){return i+Math.pow(o,2)},0))}(function(){function n(t,e){e===void 0&&(e=.6),this._distanceThreshold=e;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,o=function(){return"person "+i++};this._labeledDescriptors=r.map(function(s){if(s instanceof kp)return s;if(s instanceof Float32Array)return new kp(o(),[s]);if(s.descriptor&&s.descriptor instanceof Float32Array)return new kp(o(),[s.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(n.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),n.prototype.computeMeanDistance=function(t,e){return e.map(function(r){return wS(r,t)}).reduce(function(r,i){return r+i},0)/(e.length||1)},n.prototype.matchDescriptor=function(t){var e=this;return this.labeledDescriptors.map(function(r){var i=r.descriptors,o=r.label;return new rb(o,e.computeMeanDistance(t,i))}).reduce(function(r,i){return r.distance<i.distance?r:i})},n.prototype.findBestMatch=function(t){var e=this.matchDescriptor(t);return e.distance<this.distanceThreshold?e:new rb("unknown",e.distance)},n.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},n.fromJSON=function(t){var e=t.labeledDescriptors.map(function(r){return kp.fromJSON(r)});return new n(e,t.distanceThreshold)},n})();function bS(n,t){var e=new Nc(t.width,t.height),r=e.width,i=e.height;if(r<=0||i<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:i}));if(Array.isArray(n))return n.map(function(a){return bS(a,{width:r,height:i})});if(Z_(n)){var o=n.detection.forSize(r,i),s=n.unshiftedLandmarks.forSize(o.box.width,o.box.height);return Xv(dd(n,o),s)}return F_(n)?dd(n,n.detection.forSize(r,i)):n instanceof hd||n instanceof ns?n.forSize(r,i):n}const eM=()=>{const n=qe.useRef(null),t=qe.useRef(null),e=qe.useRef(!0),{setActiveMode:r,speak:i,playSound:o,conversationState:s,triggerInterview:a,faceDatabase:u,isListening:c,toggleListening:h}=Us(),[d,v]=qe.useState(!1),[p,y]=qe.useState(0),[x,w]=qe.useState("environment"),_=qe.useRef(0);qe.useEffect(()=>(e.current=!0,(async()=>{const O="https://justadudewhohacks.github.io/face-api.js/models";try{await Promise.all([Gr.tinyFaceDetector.loadFromUri(O),Gr.faceLandmark68TinyNet.loadFromUri(O),Gr.faceRecognitionNet.loadFromUri(O),Gr.ssdMobilenetv1.loadFromUri(O)]),e.current&&v(!0)}catch{e.current&&i("Neural network connection failed.")}})(),()=>{e.current=!1}),[]),qe.useEffect(()=>{let N=null;return(async()=>{n.current&&n.current.srcObject&&n.current.srcObject.getTracks().forEach(U=>U.stop());try{N=await navigator.mediaDevices.getUserMedia({video:{facingMode:x,width:{ideal:640},height:{ideal:480},frameRate:{ideal:30}},audio:!1}),n.current&&e.current&&(n.current.srcObject=N)}catch{e.current&&i("Camera malfunction.")}})(),()=>{N&&N.getTracks().forEach(U=>U.stop())}},[x]);const E=()=>{o("click"),w(N=>N==="environment"?"user":"environment")},I=(N,O,U,M,T,j,D)=>{const B=O+M/2,X=U+T/2,G=Math.max(M,T)*.6;N.save(),N.translate(B,X),x==="user"&&N.scale(-1,1),N.beginPath(),N.rotate(D*.05),N.arc(0,0,G*.8,0,Math.PI*2),N.strokeStyle=j,N.lineWidth=3,N.setLineDash([10,5]),N.shadowBlur=10,N.shadowColor=j,N.stroke(),N.rotate(-D*.1);const oe=G*1.2;N.lineWidth=5,N.setLineDash([]);for(let he=0;he<3;he++)N.rotate(Math.PI*2/3),N.beginPath(),N.arc(0,0,oe,0,1),N.stroke();N.resetTransform(),N.strokeStyle=j,N.lineWidth=1,N.globalAlpha=.5,N.beginPath(),N.moveTo(B-20,X),N.lineTo(B+20,X),N.moveTo(B,X-20),N.lineTo(B,X+20),N.stroke(),N.restore()},C=(N,O,U,M,T,j,D=!1)=>{const B=M*.2;if(N.save(),D){const X=Math.sin(Date.now()/100);N.lineWidth=4,N.shadowBlur=20*Math.abs(X),N.shadowColor=j,N.strokeStyle=`rgba(0, 68, 255, ${Math.abs(X)+.5})`}else N.lineWidth=2,N.strokeStyle=j,N.shadowBlur=0;N.beginPath(),N.moveTo(O,U+B),N.lineTo(O,U),N.lineTo(O+B,U),N.moveTo(O+M-B,U),N.lineTo(O+M,U),N.lineTo(O+M,U+B),N.moveTo(O+M,U+T-B),N.lineTo(O+M,U+T),N.lineTo(O+M-B,U+T),N.moveTo(O+B,U+T),N.lineTo(O,U+T),N.lineTo(O,U+T-B),N.stroke(),N.restore()};return qe.useEffect(()=>{if(!d||!n.current)return;let N=!1,O;const U=new fS({inputSize:320,scoreThreshold:.5}),M=async()=>{if(e.current){if(N){O=requestAnimationFrame(M);return}if(N=!0,n.current&&n.current.readyState===4&&t.current)try{const T=await Z8(n.current,U).withFaceLandmarks(!0).withFaceDescriptors();if(!e.current)return;const j=t.current.getContext("2d"),D={width:n.current.videoWidth,height:n.current.videoHeight};t.current.width=D.width,t.current.height=D.height,x==="user"&&(j.translate(D.width,0),j.scale(-1,1));const B=bS(T,D);j.clearRect(0,0,D.width,D.height);let X=-1,G=0,oe=!1;if(B.forEach((he,ae)=>{const W=he.detection.box.width*he.detection.box.height;W>G&&(G=W,X=ae)}),B.forEach((he,ae)=>{const W=he.detection.box,ne=ae===X;let se={name:"Unknown",accessLevel:"No Access",distance:1};u.length>0&&u.forEach(F=>{if(F.descriptor){const K=new Float32Array(Object.values(F.descriptor)),Q=wS(he.descriptor,K);Q<.6&&Q<se.distance&&(se={...F,distance:Q})}});let $="#888888";if(s==="SCANNING"&&ne?$="#FFFFFF":se.accessLevel==="Admin"?$="#00FF00":se.accessLevel==="Medium"?$="#FFA500":se.accessLevel==="Missing"&&($="#0044FF"),se.accessLevel==="Missing"&&(oe=!0),ne){const F=Date.now()/20;I(j,W.x,W.y,W.width,W.height,$,F),j.save(),x==="user"&&(j.scale(-1,1),j.translate(-(W.x*2+W.width+180),0));const K=W.x+W.width+20,Q=W.y;(se.name!=="Unknown"||s==="SCANNING")&&(j.fillStyle="rgba(0, 0, 0, 0.8)",j.fillRect(K,Q,160,90),j.strokeStyle=$,j.strokeRect(K,Q,160,90),j.font="bold 12px Orbitron",j.fillStyle=$,j.fillText(se.name.toUpperCase(),K+10,Q+25),j.font="10px Share Tech Mono",j.fillStyle="#FFFFFF",j.fillText(`ACCESS: ${se.accessLevel?se.accessLevel.toUpperCase():"SCANNING..."}`,K+10,Q+45),se.age&&j.fillText(`AGE: ${se.age}`,K+10,Q+60)),j.restore(),s==="SCANNING"?(y(ue=>ue+1),j.fillStyle="#00E5FF",j.fillRect(W.x,W.y-15,W.width*(p/20),8),p>20&&(y(0),a(he.descriptor))):y(0)}else{C(j,W.x,W.y,W.width,W.height,$,se.accessLevel==="Missing"),j.save(),x==="user"&&(j.scale(-1,1),j.translate(-(W.x*2+W.width),0)),j.font="bold 10px Orbitron",j.fillStyle=$;const F=se.name!=="Unknown"?se.name.toUpperCase():"UNKNOWN";j.fillText(F,W.x,W.y-5),se.accessLevel==="Missing"&&(j.fillStyle="#0044FF",j.font="bold 12px Orbitron",j.fillText(" MATCH FOUND",W.x,W.y-20)),j.restore()}}),oe){const he=Date.now();he-_.current>15e3&&(i("Alert, Sir. Missing person detected in sector.",!1),o("startup"),_.current=he)}B.length===0&&y(0)}catch(T){console.log("Detection skip",T)}N=!1,O=requestAnimationFrame(M)}};return M(),()=>cancelAnimationFrame(O)},[d,u,s,p,a,x]),fe.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col items-center justify-center",children:[fe.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:`absolute inset-0 w-full h-full object-cover ${x==="user"?"scale-x-[-1]":""}`}),fe.jsx("canvas",{ref:t,className:"absolute inset-0 w-full h-full object-cover pointer-events-none"}),fe.jsx("div",{className:"absolute top-8 left-1/2 transform -translate-x-1/2 bg-black/60 border border-cyan px-4 py-2 rounded text-cyan font-orbitron text-xs backdrop-blur-md",children:d?s==="IDLE"?"MULTI-TARGET TRACKING ACTIVE":"PRIORITY SCAN IN PROGRESS":"LOADING AI CORE..."}),fe.jsxs("div",{className:"absolute bottom-10 z-50 flex gap-4",children:[fe.jsx("button",{onClick:E,className:"w-14 h-14 rounded-full bg-black/60 border border-cyan text-cyan flex items-center justify-center backdrop-blur-md hover:bg-cyan/20 active:scale-90 transition-all",children:fe.jsx("i",{className:"fas fa-sync-alt text-xl"})}),fe.jsx("button",{onClick:h,className:`w-14 h-14 rounded-full border flex items-center justify-center backdrop-blur-md transition-all ${c?"bg-red-500/50 border-red-500 animate-pulse":"bg-black/60 border-cyan text-cyan"}`,children:fe.jsx("i",{className:"fas fa-microphone text-xl"})}),fe.jsx("button",{onClick:()=>{o("click"),r("HOME")},className:"w-14 h-14 rounded-full bg-black/60 border border-red-500 text-red-500 flex items-center justify-center backdrop-blur-md",children:fe.jsx("i",{className:"fas fa-times text-xl"})})]})]})},tM=()=>{const{setActiveMode:n,speak:t,playSound:e}=Us(),r=qe.useRef(null),[i,o]=qe.useState([]),[s,a]=qe.useState(-1),[u,c]=qe.useState(!1),[h,d]=qe.useState(0),[v,p]=qe.useState(0),y=C=>{const N=Array.from(C.target.files);if(N.length>0){const O=N.map(U=>({name:U.name.replace(/\.[^/.]+$/,""),url:URL.createObjectURL(U),file:U}));o(U=>[...U,...O]),t(`${N.length} tracks added to database.`),s===-1&&a(i.length)}};qe.useEffect(()=>{s>=0&&s<i.length&&r.current&&(r.current.src=i[s].url,r.current.play(),c(!0))},[s]);const x=()=>{!r.current||s===-1||(u?r.current.pause():r.current.play(),c(!u))},w=()=>{s<i.length-1?a(C=>C+1):a(0)},_=()=>{s>0&&a(C=>C-1)},E=()=>{r.current&&(d(r.current.currentTime),p(r.current.duration||0))},I=C=>{const N=Math.floor(C/60),O=Math.floor(C%60);return`${N}:${O<10?"0"+O:O}`};return fe.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-xl flex flex-col animate-slide-up",children:[fe.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-cyan/30",children:[fe.jsxs("div",{className:"flex items-center gap-3",children:[fe.jsx("i",{className:"fas fa-music text-cyan text-xl animate-pulse"}),fe.jsx("h2",{className:"text-cyan font-orbitron text-xl tracking-widest",children:"MEDIA DECK"})]}),fe.jsx("button",{onClick:()=>{e("click"),n("HOME")},className:"text-cyan hover:text-white",children:fe.jsx("i",{className:"fas fa-times text-2xl"})})]}),fe.jsxs("div",{className:"p-6 flex flex-col items-center justify-center border-b border-cyan/10 bg-cyan/5",children:[fe.jsxs("div",{className:"w-32 h-32 rounded-full border-4 border-cyan/30 flex items-center justify-center mb-4 relative",children:[fe.jsx("div",{className:`absolute inset-0 border-t-4 border-cyan rounded-full ${u?"animate-spin":""}`}),fe.jsx("i",{className:"fas fa-compact-disc text-5xl text-cyan/50"})]}),fe.jsx("h3",{className:"text-cyan font-bold text-lg text-center truncate w-full max-w-xs",children:s!==-1?i[s].name:"NO MEDIA LOADED"}),fe.jsxs("p",{className:"text-cyan-dim font-mono text-xs mt-1",children:[I(h)," / ",I(v)]}),fe.jsx("div",{className:"w-full max-w-xs h-1 bg-cyan/20 mt-4 rounded-full overflow-hidden",children:fe.jsx("div",{className:"h-full bg-cyan transition-all duration-300",style:{width:`${h/v*100}%`}})})]}),fe.jsx("div",{className:"flex-1 overflow-y-auto p-4 no-scrollbar",children:i.length===0?fe.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-cyan-dim opacity-50",children:[fe.jsx("i",{className:"fas fa-folder-open text-4xl mb-2"}),fe.jsx("span",{className:"font-mono text-xs",children:"DATABASE EMPTY"})]}):fe.jsx("div",{className:"flex flex-col gap-2",children:i.map((C,N)=>fe.jsxs("button",{onClick:()=>a(N),className:`p-3 text-left font-mono text-sm border rounded flex items-center gap-3 transition-all ${s===N?"border-cyan bg-cyan/20 text-cyan":"border-white/5 text-gray-500 hover:border-cyan/50"}`,children:[fe.jsx("span",{className:"text-xs opacity-50",children:N+1}),fe.jsx("span",{className:"truncate flex-1",children:C.name}),s===N&&fe.jsx("i",{className:"fas fa-volume-up animate-pulse"})]},N))})}),fe.jsxs("div",{className:"p-6 pb-10 border-t border-cyan/30 bg-black flex flex-col gap-4",children:[fe.jsx("input",{type:"file",id:"audio-upload",multiple:!0,accept:"audio/*",className:"hidden",onChange:y}),fe.jsx("button",{onClick:()=>document.getElementById("audio-upload").click(),className:"w-full py-3 border border-dashed border-cyan/50 text-cyan/50 font-mono text-xs hover:bg-cyan/10 hover:text-cyan hover:border-cyan transition-all",children:"+ IMPORT AUDIO FILES"}),fe.jsxs("div",{className:"flex justify-between items-center px-4",children:[fe.jsx("button",{onClick:_,className:"text-cyan hover:text-white active:scale-90",children:fe.jsx("i",{className:"fas fa-step-backward text-2xl"})}),fe.jsx("button",{onClick:x,className:"w-16 h-16 rounded-full bg-cyan text-black flex items-center justify-center shadow-[0_0_20px_#00E5FF] hover:scale-105 active:scale-95 transition-all",children:fe.jsx("i",{className:`fas ${u?"fa-pause":"fa-play"} text-2xl`})}),fe.jsx("button",{onClick:w,className:"text-cyan hover:text-white active:scale-90",children:fe.jsx("i",{className:"fas fa-step-forward text-2xl"})})]})]}),fe.jsx("audio",{ref:r,onTimeUpdate:E,onEnded:w})]})},nM=()=>{const{faceDatabase:n,deletePerson:t,updatePerson:e,addPerson:r,clearDatabase:i,setActiveMode:o,playSound:s,speak:a}=Us(),[u,c]=qe.useState("LIST"),[h,d]=qe.useState(null),[v,p]=qe.useState({name:"",gender:"Male",age:"",accessLevel:"No Access"}),[y,x]=qe.useState(!1),[w,_]=qe.useState(!1),E=U=>{const M=n[U];p({name:M.name,gender:M.gender||"Male",age:M.age||"",accessLevel:M.accessLevel||"No Access",descriptor:M.descriptor}),x(!!M.descriptor),d(U),c("EDIT")},I=()=>{p({name:"",gender:"Male",age:"",accessLevel:"No Access"}),x(!1),c("ADD")},C=()=>{if(!v.name)return a("Name is required.");u==="ADD"?r(v):e(h,v),c("LIST")},N=async U=>{const M=U.target.files[0];if(M){_(!0),a("Analyzing photo for biometric data...");try{const T="https://justadudewhohacks.github.io/face-api.js/models";await Promise.all([Gr.tinyFaceDetector.loadFromUri(T),Gr.faceLandmark68Net.loadFromUri(T),Gr.faceRecognitionNet.loadFromUri(T),Gr.ssdMobilenetv1.loadFromUri(T)]);const j=await kF(M),D=await Q8(j).withFaceLandmarks().withFaceDescriptor();D?(p(B=>({...B,descriptor:D.descriptor})),x(!0),a("Face detected and encoded.")):a("No valid face found in this image.")}catch(T){console.error(T),a("Analysis failed.")}_(!1)}},O=U=>U==="Admin"?"text-green-500 border-green-500/50 bg-green-500/10":U==="Medium"?"text-orange-500 border-orange-500/50 bg-orange-500/10":U==="Missing"?"text-blue-500 border-blue-500/50 bg-blue-500/10":"text-gray-400 border-gray-500/50 bg-gray-500/10";return fe.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-xl flex flex-col animate-slide-up",children:[fe.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-cyan/30",children:[fe.jsxs("div",{className:"flex items-center gap-3",children:[fe.jsx("i",{className:"fas fa-database text-cyan text-xl animate-pulse"}),fe.jsx("h2",{className:"text-cyan font-orbitron text-xl tracking-widest",children:u==="LIST"?"IDENTITY RECORDS":u==="ADD"?"NEW ENTRY":"EDIT RECORD"})]}),fe.jsx("button",{onClick:()=>{s("click"),u==="LIST"?o("HOME"):c("LIST")},className:"text-cyan hover:text-white",children:fe.jsx("i",{className:`fas ${u==="LIST"?"fa-times":"fa-arrow-left"} text-2xl`})})]}),u==="LIST"&&fe.jsxs(fe.Fragment,{children:[fe.jsxs("div",{className:"p-4 border-b border-cyan/10 flex justify-between",children:[fe.jsxs("span",{className:"text-cyan-dim font-mono text-xs pt-2",children:["RECORDS: ",n.length]}),fe.jsx("button",{onClick:()=>{s("click"),I()},className:"px-4 py-2 bg-cyan/10 border border-cyan text-cyan font-orbitron text-xs hover:bg-cyan/30",children:"+ ADD MANUAL ENTRY"})]}),fe.jsx("div",{className:"flex-1 overflow-y-auto p-4 no-scrollbar flex flex-col gap-3",children:n.length===0?fe.jsx("div",{className:"text-center text-cyan-dim mt-20 opacity-50",children:"DATABASE EMPTY"}):n.map((U,M)=>fe.jsxs("div",{className:`p-4 border rounded-lg flex justify-between items-center ${O(U.accessLevel)}`,children:[fe.jsxs("div",{className:"flex items-center gap-4",children:[fe.jsx("div",{className:"w-10 h-10 rounded-full border flex items-center justify-center",children:fe.jsx("i",{className:`fas ${U.descriptor?"fa-fingerprint":"fa-user"} text-lg`})}),fe.jsxs("div",{children:[fe.jsx("div",{className:"font-bold",children:U.name.toUpperCase()}),fe.jsxs("div",{className:"text-xs opacity-70",children:[U.gender," | ",U.age," | ",U.accessLevel]})]})]}),fe.jsxs("div",{className:"flex gap-2",children:[fe.jsx("button",{onClick:()=>E(M),className:"w-8 h-8 border rounded hover:bg-white/10",children:fe.jsx("i",{className:"fas fa-pen text-xs"})}),fe.jsx("button",{onClick:()=>t(M),className:"w-8 h-8 border border-red-500/50 text-red-500 hover:bg-red-500/20",children:fe.jsx("i",{className:"fas fa-trash text-xs"})})]})]},M))})]}),u!=="LIST"&&fe.jsxs("div",{className:"flex-1 overflow-y-auto p-6 flex flex-col gap-6",children:[fe.jsxs("div",{className:"p-4 border border-cyan/30 rounded bg-cyan/5 text-center",children:[fe.jsx("div",{className:`w-20 h-20 mx-auto rounded-full border-2 flex items-center justify-center mb-2 ${y?"border-green-500 text-green-500":"border-cyan/30 text-cyan/30"}`,children:w?fe.jsx("i",{className:"fas fa-circle-notch fa-spin text-2xl"}):fe.jsx("i",{className:"fas fa-fingerprint text-3xl"})}),fe.jsx("div",{className:"font-mono text-xs mb-3",children:y?"BIOMETRIC DATA LINKED":"NO BIOMETRIC DATA"}),fe.jsx("input",{type:"file",id:"face-upload",accept:"image/*",className:"hidden",onChange:N}),fe.jsx("button",{onClick:()=>document.getElementById("face-upload").click(),disabled:w,className:"px-4 py-2 border border-cyan text-cyan font-mono text-xs hover:bg-cyan/10",children:y?"UPDATE PHOTO":"UPLOAD PHOTO FOR SCAN"}),fe.jsx("div",{className:"text-[10px] text-cyan-dim mt-2",children:"* Uploading a clear face photo allows JARVIS to recognize this person in the field."})]}),fe.jsxs("div",{className:"flex flex-col gap-4",children:[fe.jsxs("div",{children:[fe.jsx("label",{className:"block text-cyan-dim font-mono text-xs mb-1",children:"FULL NAME"}),fe.jsx("input",{type:"text",value:v.name,onChange:U=>p({...v,name:U.target.value}),className:"w-full bg-black border border-cyan/30 p-3 text-cyan font-orbitron focus:border-cyan outline-none",placeholder:"ENTER NAME"})]}),fe.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[fe.jsxs("div",{children:[fe.jsx("label",{className:"block text-cyan-dim font-mono text-xs mb-1",children:"GENDER"}),fe.jsxs("select",{value:v.gender,onChange:U=>p({...v,gender:U.target.value}),className:"w-full bg-black border border-cyan/30 p-3 text-cyan font-mono outline-none",children:[fe.jsx("option",{value:"Male",children:"MALE"}),fe.jsx("option",{value:"Female",children:"FEMALE"})]})]}),fe.jsxs("div",{children:[fe.jsx("label",{className:"block text-cyan-dim font-mono text-xs mb-1",children:"AGE"}),fe.jsx("input",{type:"number",value:v.age,onChange:U=>p({...v,age:U.target.value}),className:"w-full bg-black border border-cyan/30 p-3 text-cyan font-mono outline-none",placeholder:"00"})]})]}),fe.jsxs("div",{children:[fe.jsx("label",{className:"block text-cyan-dim font-mono text-xs mb-1",children:"ACCESS LEVEL"}),fe.jsxs("select",{value:v.accessLevel,onChange:U=>p({...v,accessLevel:U.target.value}),className:"w-full bg-black border border-cyan/30 p-3 text-cyan font-mono outline-none",children:[fe.jsx("option",{value:"No Access",children:"NO ACCESS (GREY)"}),fe.jsx("option",{value:"Medium",children:"MEDIUM (ORANGE)"}),fe.jsx("option",{value:"Admin",children:"ADMIN (GREEN)"}),fe.jsx("option",{value:"Missing",children:"MISSING PERSON (BLUE)"})]})]})]}),fe.jsx("button",{onClick:C,className:"mt-4 w-full py-4 bg-cyan/20 border border-cyan text-cyan font-bold font-orbitron tracking-widest hover:bg-cyan/40",children:"SAVE RECORD"})]})]})},rM=()=>{const{hudData:n,setActiveMode:t,playSound:e,speak:r,battery:i}=Us(),[o,s]=qe.useState(!1),[a,u]=qe.useState(new Date);qe.useEffect(()=>{const d=setInterval(()=>u(new Date),1e3);return()=>clearInterval(d)},[]);const c=()=>{s(!o),r(o?"Standard view.":"Heads up display mode active.")},h=d=>d<50?"text-cyan":d<100?"text-cyan-200":d<130?"text-orange-500":"text-red-600 animate-pulse";return fe.jsxs("div",{className:"fixed inset-0 z-30 flex flex-col items-center justify-between p-6 bg-black/10 backdrop-blur-[1px]",children:[fe.jsxs("div",{className:`w-full h-full flex flex-col justify-between relative z-10 transition-transform duration-500 ${o?"scale-x-[-1]":""}`,children:[fe.jsxs("div",{className:"flex justify-between items-start pointer-events-none",children:[fe.jsxs("div",{className:"text-cyan font-mono text-sm bg-black/40 p-2 rounded border border-cyan/20",children:[fe.jsx("div",{className:"border-b border-cyan/50 mb-1 pb-1 text-[10px]",children:"HEADING"}),fe.jsxs("div",{className:"text-3xl font-bold",children:[Math.round(n.heading),""]}),fe.jsx("div",{className:"text-xs opacity-70",children:n.heading>=337||n.heading<23?"N":n.heading<67?"NE":n.heading<112?"E":n.heading<157?"SE":n.heading<202?"S":n.heading<247?"SW":n.heading<292?"W":"NW"})]}),fe.jsxs("div",{className:"text-right text-cyan font-mono bg-black/40 p-2 rounded border border-cyan/20",children:[fe.jsx("div",{className:"text-4xl font-bold",children:a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),fe.jsxs("div",{className:"text-xs",children:["ALT: ",n.altitude,"m"]})]})]}),fe.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center w-full pointer-events-none",children:[fe.jsx("div",{className:`font-orbitron font-black text-[100px] leading-none tracking-tighter drop-shadow-[0_0_10px_rgba(0,0,0,0.8)] ${h(n.speed)}`,children:n.speed}),fe.jsx("div",{className:"text-cyan/70 font-mono text-xl tracking-[8px] mt-2 bg-black/30 inline-block px-4 rounded",children:"KM/H"})]}),fe.jsxs("div",{className:"flex justify-between items-end w-full",children:[fe.jsxs("div",{className:"w-24 h-24 rounded-full border border-cyan/30 flex items-center justify-center relative bg-black/20 backdrop-blur-sm pointer-events-none",children:[fe.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30 text-4xl text-cyan",children:"+"}),fe.jsx("div",{className:"w-3 h-3 bg-cyan rounded-full shadow-[0_0_10px_#00E5FF]",style:{transform:`translate(${Math.sin(a.getTime()/1e3)*10}px, ${Math.cos(a.getTime()/1e3)*10}px)`}}),fe.jsx("div",{className:"absolute -bottom-6 w-full text-center text-cyan/50 text-[10px]",children:"G-FORCE"})]}),fe.jsxs("button",{onClick:()=>{e("click"),window.open("https://maps.google.com","_blank")},className:"mb-2 bg-cyan/10 border border-cyan text-cyan px-6 py-3 rounded-full font-orbitron text-sm hover:bg-cyan/30 active:scale-95 transition-all shadow-[0_0_15px_rgba(0,229,255,0.2)]",children:[fe.jsx("i",{className:"fas fa-location-arrow mr-2"})," MAPS"]})]})]}),fe.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 flex gap-6 z-50",children:[fe.jsx("button",{onClick:c,className:`w-14 h-14 rounded-full border flex items-center justify-center backdrop-blur-md transition-all shadow-[0_0_15px_rgba(0,229,255,0.2)] ${o?"bg-cyan text-black border-cyan":"bg-black/60 border-cyan text-cyan"}`,children:fe.jsx("i",{className:"fas fa-clone text-xl transform rotate-90"})}),fe.jsx("button",{onClick:()=>{e("click"),t("HOME")},className:"w-14 h-14 rounded-full bg-black/60 border border-red-500 text-red-500 flex items-center justify-center backdrop-blur-md shadow-[0_0_15px_rgba(255,0,0,0.3)]",children:fe.jsx("i",{className:"fas fa-times text-xl"})})]})]})},iM="modulepreload",oM=function(n){return"/jarvis-mobile/"+n},lb={},P0=function(t,e,r){let i=Promise.resolve();if(e&&e.length>0){let s=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=s(e.map(c=>{if(c=oM(c),c in lb)return;lb[c]=!0;const h=c.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":iM,h||(v.as="script"),v.crossOrigin="",v.href=c,u&&v.setAttribute("nonce",u),document.head.appendChild(v),h)return new Promise((p,y)=>{v.addEventListener("load",p),v.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};function On(n){"@babel/helpers - typeof";return On=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},On(n)}var Za=Uint8Array,ea=Uint16Array,P2=Int32Array,R2=new Za([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),T2=new Za([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cb=new Za([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_S=function(n,t){for(var e=new ea(31),r=0;r<31;++r)e[r]=t+=1<<n[r-1];for(var i=new P2(e[30]),r=1;r<30;++r)for(var o=e[r];o<e[r+1];++o)i[o]=o-e[r]<<5|r;return{b:e,r:i}},SS=_S(R2,2),aM=SS.b,Og=SS.r;aM[28]=258,Og[258]=28;var sM=_S(T2,0),fb=sM.r,Bg=new ea(32768);for(var Zn=0;Zn<32768;++Zn){var Sl=(Zn&43690)>>1|(Zn&21845)<<1;Sl=(Sl&52428)>>2|(Sl&13107)<<2,Sl=(Sl&61680)>>4|(Sl&3855)<<4,Bg[Zn]=((Sl&65280)>>8|(Sl&255)<<8)>>1}var Qh=(function(n,t,e){for(var r=n.length,i=0,o=new ea(t);i<r;++i)n[i]&&++o[n[i]-1];var s=new ea(t);for(i=1;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(e){a=new ea(1<<t);var u=15-t;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],h=t-n[i],d=s[n[i]-1]++<<h,v=d|(1<<h)-1;d<=v;++d)a[Bg[d]>>u]=c}else for(a=new ea(r),i=0;i<r;++i)n[i]&&(a[i]=Bg[s[n[i]-1]++]>>15-n[i]);return a}),Lc=new Za(288);for(var Zn=0;Zn<144;++Zn)Lc[Zn]=8;for(var Zn=144;Zn<256;++Zn)Lc[Zn]=9;for(var Zn=256;Zn<280;++Zn)Lc[Zn]=7;for(var Zn=280;Zn<288;++Zn)Lc[Zn]=8;var Av=new Za(32);for(var Zn=0;Zn<32;++Zn)Av[Zn]=5;var uM=Qh(Lc,9,0),lM=Qh(Av,5,0),CS=function(n){return(n+7)/8|0},cM=function(n,t,e){return(e==null||e>n.length)&&(e=n.length),new Za(n.subarray(t,e))},ku=function(n,t,e){e<<=t&7;var r=t/8|0;n[r]|=e,n[r+1]|=e>>8},Uh=function(n,t,e){e<<=t&7;var r=t/8|0;n[r]|=e,n[r+1]|=e>>8,n[r+2]|=e>>16},R0=function(n,t){for(var e=[],r=0;r<n.length;++r)n[r]&&e.push({s:r,f:n[r]});var i=e.length,o=e.slice();if(!i)return{t:kS,l:0};if(i==1){var s=new Za(e[0].s+1);return s[e[0].s]=1,{t:s,l:1}}e.sort(function(N,O){return N.f-O.f}),e.push({s:-1,f:25001});var a=e[0],u=e[1],c=0,h=1,d=2;for(e[0]={s:-1,f:a.f+u.f,l:a,r:u};h!=i-1;)a=e[e[c].f<e[d].f?c++:d++],u=e[c!=h&&e[c].f<e[d].f?c++:d++],e[h++]={s:-1,f:a.f+u.f,l:a,r:u};for(var v=o[0].s,r=1;r<i;++r)o[r].s>v&&(v=o[r].s);var p=new ea(v+1),y=jg(e[h-1],p,0);if(y>t){var r=0,x=0,w=y-t,_=1<<w;for(o.sort(function(O,U){return p[U.s]-p[O.s]||O.f-U.f});r<i;++r){var E=o[r].s;if(p[E]>t)x+=_-(1<<y-p[E]),p[E]=t;else break}for(x>>=w;x>0;){var I=o[r].s;p[I]<t?x-=1<<t-p[I]++-1:++r}for(;r>=0&&x;--r){var C=o[r].s;p[C]==t&&(--p[C],++x)}y=t}return{t:new Za(p),l:y}},jg=function(n,t,e){return n.s==-1?Math.max(jg(n.l,t,e+1),jg(n.r,t,e+1)):t[n.s]=e},hb=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new ea(++t),r=0,i=n[0],o=1,s=function(u){e[r++]=u},a=1;a<=t;++a)if(n[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:e.subarray(0,r),n:t}},zh=function(n,t){for(var e=0,r=0;r<t.length;++r)e+=n[r]*t[r];return e},AS=function(n,t,e){var r=e.length,i=CS(t+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=e[o];return(i+4+r)*8},db=function(n,t,e,r,i,o,s,a,u,c,h){ku(t,h++,e),++i[256];for(var d=R0(i,15),v=d.t,p=d.l,y=R0(o,15),x=y.t,w=y.l,_=hb(v),E=_.c,I=_.n,C=hb(x),N=C.c,O=C.n,U=new ea(19),M=0;M<E.length;++M)++U[E[M]&31];for(var M=0;M<N.length;++M)++U[N[M]&31];for(var T=R0(U,7),j=T.t,D=T.l,B=19;B>4&&!j[cb[B-1]];--B);var X=c+5<<3,G=zh(i,Lc)+zh(o,Av)+s,oe=zh(i,v)+zh(o,x)+s+14+3*B+zh(U,j)+2*U[16]+3*U[17]+7*U[18];if(u>=0&&X<=G&&X<=oe)return AS(t,h,n.subarray(u,u+c));var he,ae,W,ne;if(ku(t,h,1+(oe<G)),h+=2,oe<G){he=Qh(v,p,0),ae=v,W=Qh(x,w,0),ne=x;var se=Qh(j,D,0);ku(t,h,I-257),ku(t,h+5,O-1),ku(t,h+10,B-4),h+=14;for(var M=0;M<B;++M)ku(t,h+3*M,j[cb[M]]);h+=3*B;for(var $=[E,N],F=0;F<2;++F)for(var K=$[F],M=0;M<K.length;++M){var Q=K[M]&31;ku(t,h,se[Q]),h+=j[Q],Q>15&&(ku(t,h,K[M]>>5&127),h+=K[M]>>12)}}else he=uM,ae=Lc,W=lM,ne=Av;for(var M=0;M<a;++M){var ue=r[M];if(ue>255){var Q=ue>>18&31;Uh(t,h,he[Q+257]),h+=ae[Q+257],Q>7&&(ku(t,h,ue>>23&31),h+=R2[Q]);var de=ue&31;Uh(t,h,W[de]),h+=ne[de],de>3&&(Uh(t,h,ue>>5&8191),h+=T2[de])}else Uh(t,h,he[ue]),h+=ae[ue]}return Uh(t,h,he[256]),h+ae[256]},fM=new P2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),kS=new Za(0),hM=function(n,t,e,r,i,o){var s=o.z||n.length,a=new Za(r+s+5*(1+Math.ceil(s/7e3))+i),u=a.subarray(r,a.length-i),c=o.l,h=(o.r||0)&7;if(t){h&&(u[0]=o.r>>3);for(var d=fM[t-1],v=d>>13,p=d&8191,y=(1<<e)-1,x=o.p||new ea(32768),w=o.h||new ea(y+1),_=Math.ceil(e/3),E=2*_,I=function(Xe){return(n[Xe]^n[Xe+1]<<_^n[Xe+2]<<E)&y},C=new P2(25e3),N=new ea(288),O=new ea(32),U=0,M=0,T=o.i||0,j=0,D=o.w||0,B=0;T+2<s;++T){var X=I(T),G=T&32767,oe=w[X];if(x[G]=oe,w[X]=G,D<=T){var he=s-T;if((U>7e3||j>24576)&&(he>423||!c)){h=db(n,u,0,C,N,O,M,j,B,T-B,h),j=U=M=0,B=T;for(var ae=0;ae<286;++ae)N[ae]=0;for(var ae=0;ae<30;++ae)O[ae]=0}var W=2,ne=0,se=p,$=G-oe&32767;if(he>2&&X==I(T-$))for(var F=Math.min(v,he)-1,K=Math.min(32767,T),Q=Math.min(258,he);$<=K&&--se&&G!=oe;){if(n[T+W]==n[T+W-$]){for(var ue=0;ue<Q&&n[T+ue]==n[T+ue-$];++ue);if(ue>W){if(W=ue,ne=$,ue>F)break;for(var de=Math.min($,ue-2),ve=0,ae=0;ae<de;++ae){var we=T-$+ae&32767,Ce=x[we],Le=we-Ce&32767;Le>ve&&(ve=Le,oe=we)}}}G=oe,oe=x[G],$+=G-oe&32767}if(ne){C[j++]=268435456|Og[W]<<18|fb[ne];var be=Og[W]&31,De=fb[ne]&31;M+=R2[be]+T2[De],++N[257+be],++O[De],D=T+W,++U}else C[j++]=n[T],++N[n[T]]}}for(T=Math.max(T,D);T<s;++T)C[j++]=n[T],++N[n[T]];h=db(n,u,c,C,N,O,M,j,B,T-B,h),c||(o.r=h&7|u[h/8|0]<<3,h-=7,o.h=w,o.p=x,o.i=T,o.w=D)}else{for(var T=o.w||0;T<s+c;T+=65535){var Re=T+65535;Re>=s&&(u[h/8|0]=c,Re=s),h=AS(u,h+1,n.subarray(T,Re))}o.i=s}return cM(a,0,r+CS(h)+i)},ES=function(){var n=1,t=0;return{p:function(e){for(var r=n,i=t,o=e.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=e[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,t=i},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},dM=function(n,t,e,r,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),s=new Za(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return hM(n,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,e,r,i)},NS=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8},pM=function(n,t){var e=t.level,r=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=r<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var i=ES();i.p(t.dictionary),NS(n,2,i.d())}};function Ug(n,t){t||(t={});var e=ES();e.p(n);var r=dM(n,t,t.dictionary?6:2,4);return pM(r,t),NS(r,r.length-4,e.d()),r}var vM=typeof TextDecoder<"u"&&new TextDecoder,mM=0;try{vM.decode(kS,{stream:!0}),mM=1}catch{}function gM(n){if(Array.isArray(n))return n}function yM(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(e=e.call(n)).next,t!==0)for(;!(u=(r=o.call(e)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(h){c=!0,i=h}finally{try{if(!u&&e.return!=null&&(s=e.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function pb(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function xM(n,t){if(n){if(typeof n=="string")return pb(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?pb(n,t):void 0}}function wM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vb(n,t){return gM(n)||yM(n,t)||xM(n,t)||wM()}function mb(n,t="utf8"){return new TextDecoder(t).decode(n)}const bM=new TextEncoder;function _M(n){return bM.encode(n)}const SM=1024*8,CM=(()=>{const n=new Uint8Array(4),t=new Uint32Array(n.buffer);return!((t[0]=1)&n[0])})(),T0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class L2{constructor(t=SM,e={}){Mn(this,"buffer");Mn(this,"byteLength");Mn(this,"byteOffset");Mn(this,"length");Mn(this,"offset");Mn(this,"lastWrittenByte");Mn(this,"littleEndian");Mn(this,"_data");Mn(this,"_mark");Mn(this,"_marks");let r=!1;typeof t=="number"?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const i=e.offset?e.offset>>>0:0,o=t.byteLength-i;let s=i;(ArrayBuffer.isView(t)||t instanceof L2)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+i),t=t.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=(this.offset+t)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){const r=T0[e].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===CM&&e!=="uint8"&&e!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();const u=new T0[e](a.buffer);return this.offset+=r,u.reverse(),u}const s=new T0[e](o);return this.offset+=r,s}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let r=0;r<t;r++)e+=this.readChar();return e}readUtf8(t=1){return mb(this.readBytes(t))}decodeText(t=1,e="utf8"){return mb(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(_M(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ah(n){let t=n.length;for(;--t>=0;)n[t]=0}const AM=3,kM=258,IS=29,EM=256,NM=EM+1+IS,PS=30,IM=512,PM=new Array((NM+2)*2);ah(PM);const RM=new Array(PS*2);ah(RM);const TM=new Array(IM);ah(TM);const LM=new Array(kM-AM+1);ah(LM);const DM=new Array(IS);ah(DM);const FM=new Array(PS);ah(FM);const MM=(n,t,e,r)=>{let i=n&65535|0,o=n>>>16&65535|0,s=0;for(;e!==0;){s=e>2e3?2e3:e,e-=s;do i=i+t[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0};var zg=MM;const OM=()=>{let n,t=[];for(var e=0;e<256;e++){n=e;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;t[e]=n}return t},BM=new Uint32Array(OM()),jM=(n,t,e,r)=>{const i=BM,o=r+e;n^=-1;for(let s=r;s<o;s++)n=n>>>8^i[(n^t[s])&255];return n^-1};var ks=jM,Vg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},RS={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const UM=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var zM=function(n){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const r in e)UM(e,r)&&(n[r]=e[r])}}return n},VM=n=>{let t=0;for(let r=0,i=n.length;r<i;r++)t+=n[r].length;const e=new Uint8Array(t);for(let r=0,i=0,o=n.length;r<o;r++){let s=n[r];e.set(s,i),i+=s.length}return e},TS={assign:zM,flattenChunks:VM};let LS=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{LS=!1}const pd=new Uint8Array(256);for(let n=0;n<256;n++)pd[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;pd[254]=pd[254]=1;var WM=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let t,e,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)e=n.charCodeAt(i),(e&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),a+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)e=n.charCodeAt(i),(e&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),e<128?t[o++]=e:e<2048?(t[o++]=192|e>>>6,t[o++]=128|e&63):e<65536?(t[o++]=224|e>>>12,t[o++]=128|e>>>6&63,t[o++]=128|e&63):(t[o++]=240|e>>>18,t[o++]=128|e>>>12&63,t[o++]=128|e>>>6&63,t[o++]=128|e&63);return t};const qM=(n,t)=>{if(t<65534&&n.subarray&&LS)return String.fromCharCode.apply(null,n.length===t?n:n.subarray(0,t));let e="";for(let r=0;r<t;r++)e+=String.fromCharCode(n[r]);return e};var HM=(n,t)=>{const e=t||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,t));let r,i;const o=new Array(e*2);for(i=0,r=0;r<e;){let s=n[r++];if(s<128){o[i++]=s;continue}let a=pd[s];if(a>4){o[i++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<e;)s=s<<6|n[r++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return qM(o,i)},GM=(n,t)=>{t=t||n.length,t>n.length&&(t=n.length);let e=t-1;for(;e>=0&&(n[e]&192)===128;)e--;return e<0||e===0?t:e+pd[n[e]]>t?e:t},Wg={string2buf:WM,buf2string:HM,utf8border:GM};function $M(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var KM=$M;const Rp=16209,XM=16191;var YM=function(t,e){let r,i,o,s,a,u,c,h,d,v,p,y,x,w,_,E,I,C,N,O,U,M,T,j;const D=t.state;r=t.next_in,T=t.input,i=r+(t.avail_in-5),o=t.next_out,j=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),u=D.dmax,c=D.wsize,h=D.whave,d=D.wnext,v=D.window,p=D.hold,y=D.bits,x=D.lencode,w=D.distcode,_=(1<<D.lenbits)-1,E=(1<<D.distbits)-1;e:do{y<15&&(p+=T[r++]<<y,y+=8,p+=T[r++]<<y,y+=8),I=x[p&_];t:for(;;){if(C=I>>>24,p>>>=C,y-=C,C=I>>>16&255,C===0)j[o++]=I&65535;else if(C&16){N=I&65535,C&=15,C&&(y<C&&(p+=T[r++]<<y,y+=8),N+=p&(1<<C)-1,p>>>=C,y-=C),y<15&&(p+=T[r++]<<y,y+=8,p+=T[r++]<<y,y+=8),I=w[p&E];n:for(;;){if(C=I>>>24,p>>>=C,y-=C,C=I>>>16&255,C&16){if(O=I&65535,C&=15,y<C&&(p+=T[r++]<<y,y+=8,y<C&&(p+=T[r++]<<y,y+=8)),O+=p&(1<<C)-1,O>u){t.msg="invalid distance too far back",D.mode=Rp;break e}if(p>>>=C,y-=C,C=o-s,O>C){if(C=O-C,C>h&&D.sane){t.msg="invalid distance too far back",D.mode=Rp;break e}if(U=0,M=v,d===0){if(U+=c-C,C<N){N-=C;do j[o++]=v[U++];while(--C);U=o-O,M=j}}else if(d<C){if(U+=c+d-C,C-=d,C<N){N-=C;do j[o++]=v[U++];while(--C);if(U=0,d<N){C=d,N-=C;do j[o++]=v[U++];while(--C);U=o-O,M=j}}}else if(U+=d-C,C<N){N-=C;do j[o++]=v[U++];while(--C);U=o-O,M=j}for(;N>2;)j[o++]=M[U++],j[o++]=M[U++],j[o++]=M[U++],N-=3;N&&(j[o++]=M[U++],N>1&&(j[o++]=M[U++]))}else{U=o-O;do j[o++]=j[U++],j[o++]=j[U++],j[o++]=j[U++],N-=3;while(N>2);N&&(j[o++]=j[U++],N>1&&(j[o++]=j[U++]))}}else if((C&64)===0){I=w[(I&65535)+(p&(1<<C)-1)];continue n}else{t.msg="invalid distance code",D.mode=Rp;break e}break}}else if((C&64)===0){I=x[(I&65535)+(p&(1<<C)-1)];continue t}else if(C&32){D.mode=XM;break e}else{t.msg="invalid literal/length code",D.mode=Rp;break e}break}}while(r<i&&o<a);N=y>>3,r-=N,y-=N<<3,p&=(1<<y)-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=o<a?257+(a-o):257-(o-a),D.hold=p,D.bits=y};const Sf=15,gb=852,yb=592,xb=0,L0=1,wb=2,JM=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),QM=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ZM=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),eO=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),tO=(n,t,e,r,i,o,s,a)=>{const u=a.bits;let c=0,h=0,d=0,v=0,p=0,y=0,x=0,w=0,_=0,E=0,I,C,N,O,U,M=null,T;const j=new Uint16Array(Sf+1),D=new Uint16Array(Sf+1);let B=null,X,G,oe;for(c=0;c<=Sf;c++)j[c]=0;for(h=0;h<r;h++)j[t[e+h]]++;for(p=u,v=Sf;v>=1&&j[v]===0;v--);if(p>v&&(p=v),v===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<v&&j[d]===0;d++);for(p<d&&(p=d),w=1,c=1;c<=Sf;c++)if(w<<=1,w-=j[c],w<0)return-1;if(w>0&&(n===xb||v!==1))return-1;for(D[1]=0,c=1;c<Sf;c++)D[c+1]=D[c]+j[c];for(h=0;h<r;h++)t[e+h]!==0&&(s[D[t[e+h]]++]=h);if(n===xb?(M=B=s,T=20):n===L0?(M=JM,B=QM,T=257):(M=ZM,B=eO,T=0),E=0,h=0,c=d,U=o,y=p,x=0,N=-1,_=1<<p,O=_-1,n===L0&&_>gb||n===wb&&_>yb)return 1;for(;;){X=c-x,s[h]+1<T?(G=0,oe=s[h]):s[h]>=T?(G=B[s[h]-T],oe=M[s[h]-T]):(G=96,oe=0),I=1<<c-x,C=1<<y,d=C;do C-=I,i[U+(E>>x)+C]=X<<24|G<<16|oe|0;while(C!==0);for(I=1<<c-1;E&I;)I>>=1;if(I!==0?(E&=I-1,E+=I):E=0,h++,--j[c]===0){if(c===v)break;c=t[e+s[h]]}if(c>p&&(E&O)!==N){for(x===0&&(x=p),U+=d,y=c-x,w=1<<y;y+x<v&&(w-=j[y+x],!(w<=0));)y++,w<<=1;if(_+=1<<y,n===L0&&_>gb||n===wb&&_>yb)return 1;N=E&O,i[N]=p<<24|y<<16|U-o|0}}return E!==0&&(i[U+E]=c-x<<24|64<<16|0),a.bits=p,0};var Zh=tO;const nO=0,DS=1,FS=2,{Z_FINISH:bb,Z_BLOCK:rO,Z_TREES:Tp,Z_OK:Dc,Z_STREAM_END:iO,Z_NEED_DICT:oO,Z_STREAM_ERROR:Ea,Z_DATA_ERROR:MS,Z_MEM_ERROR:OS,Z_BUF_ERROR:aO,Z_DEFLATED:_b}=RS,Jv=16180,Sb=16181,Cb=16182,Ab=16183,kb=16184,Eb=16185,Nb=16186,Ib=16187,Pb=16188,Rb=16189,kv=16190,Eu=16191,D0=16192,Tb=16193,F0=16194,Lb=16195,Db=16196,Fb=16197,Mb=16198,Lp=16199,Dp=16200,Ob=16201,Bb=16202,jb=16203,Ub=16204,zb=16205,M0=16206,Vb=16207,Wb=16208,ar=16209,BS=16210,jS=16211,sO=852,uO=592,lO=15,cO=lO,qb=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function fO(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const zc=n=>{if(!n)return 1;const t=n.state;return!t||t.strm!==n||t.mode<Jv||t.mode>jS?1:0},US=n=>{if(zc(n))return Ea;const t=n.state;return n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=t.wrap&1),t.mode=Jv,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(sO),t.distcode=t.distdyn=new Int32Array(uO),t.sane=1,t.back=-1,Dc},zS=n=>{if(zc(n))return Ea;const t=n.state;return t.wsize=0,t.whave=0,t.wnext=0,US(n)},VS=(n,t)=>{let e;if(zc(n))return Ea;const r=n.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ea:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=e,r.wbits=t,zS(n))},WS=(n,t)=>{if(!n)return Ea;const e=new fO;n.state=e,e.strm=n,e.window=null,e.mode=Jv;const r=VS(n,t);return r!==Dc&&(n.state=null),r},hO=n=>WS(n,cO);let Hb=!0,O0,B0;const dO=n=>{if(Hb){O0=new Int32Array(512),B0=new Int32Array(32);let t=0;for(;t<144;)n.lens[t++]=8;for(;t<256;)n.lens[t++]=9;for(;t<280;)n.lens[t++]=7;for(;t<288;)n.lens[t++]=8;for(Zh(DS,n.lens,0,288,O0,0,n.work,{bits:9}),t=0;t<32;)n.lens[t++]=5;Zh(FS,n.lens,0,32,B0,0,n.work,{bits:5}),Hb=!1}n.lencode=O0,n.lenbits=9,n.distcode=B0,n.distbits=5},qS=(n,t,e,r)=>{let i;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(e-o.wsize,e),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(e-r,e-r+i),o.wnext),r-=i,r?(o.window.set(t.subarray(e-r,e),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},pO=(n,t)=>{let e,r,i,o,s,a,u,c,h,d,v,p,y,x,w=0,_,E,I,C,N,O,U,M;const T=new Uint8Array(4);let j,D;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(zc(n)||!n.output||!n.input&&n.avail_in!==0)return Ea;e=n.state,e.mode===Eu&&(e.mode=D0),s=n.next_out,i=n.output,u=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,c=e.hold,h=e.bits,d=a,v=u,M=Dc;e:for(;;)switch(e.mode){case Jv:if(e.wrap===0){e.mode=D0;break}for(;h<16;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}if(e.wrap&2&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,T[0]=c&255,T[1]=c>>>8&255,e.check=ks(e.check,T,2,0),c=0,h=0,e.mode=Sb;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",e.mode=ar;break}if((c&15)!==_b){n.msg="unknown compression method",e.mode=ar;break}if(c>>>=4,h-=4,U=(c&15)+8,e.wbits===0&&(e.wbits=U),U>15||U>e.wbits){n.msg="invalid window size",e.mode=ar;break}e.dmax=1<<e.wbits,e.flags=0,n.adler=e.check=1,e.mode=c&512?Rb:Eu,c=0,h=0;break;case Sb:for(;h<16;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}if(e.flags=c,(e.flags&255)!==_b){n.msg="unknown compression method",e.mode=ar;break}if(e.flags&57344){n.msg="unknown header flags set",e.mode=ar;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&e.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,e.check=ks(e.check,T,2,0)),c=0,h=0,e.mode=Cb;case Cb:for(;h<32;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}e.head&&(e.head.time=c),e.flags&512&&e.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,e.check=ks(e.check,T,4,0)),c=0,h=0,e.mode=Ab;case Ab:for(;h<16;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&e.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,e.check=ks(e.check,T,2,0)),c=0,h=0,e.mode=kb;case kb:if(e.flags&1024){for(;h<16;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&e.wrap&4&&(T[0]=c&255,T[1]=c>>>8&255,e.check=ks(e.check,T,2,0)),c=0,h=0}else e.head&&(e.head.extra=null);e.mode=Eb;case Eb:if(e.flags&1024&&(p=e.length,p>a&&(p=a),p&&(e.head&&(U=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(r.subarray(o,o+p),U)),e.flags&512&&e.wrap&4&&(e.check=ks(e.check,r,p,o)),a-=p,o+=p,e.length-=p),e.length))break e;e.length=0,e.mode=Nb;case Nb:if(e.flags&2048){if(a===0)break e;p=0;do U=r[o+p++],e.head&&U&&e.length<65536&&(e.head.name+=String.fromCharCode(U));while(U&&p<a);if(e.flags&512&&e.wrap&4&&(e.check=ks(e.check,r,p,o)),a-=p,o+=p,U)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=Ib;case Ib:if(e.flags&4096){if(a===0)break e;p=0;do U=r[o+p++],e.head&&U&&e.length<65536&&(e.head.comment+=String.fromCharCode(U));while(U&&p<a);if(e.flags&512&&e.wrap&4&&(e.check=ks(e.check,r,p,o)),a-=p,o+=p,U)break e}else e.head&&(e.head.comment=null);e.mode=Pb;case Pb:if(e.flags&512){for(;h<16;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}if(e.wrap&4&&c!==(e.check&65535)){n.msg="header crc mismatch",e.mode=ar;break}c=0,h=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),n.adler=e.check=0,e.mode=Eu;break;case Rb:for(;h<32;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}n.adler=e.check=qb(c),c=0,h=0,e.mode=kv;case kv:if(e.havedict===0)return n.next_out=s,n.avail_out=u,n.next_in=o,n.avail_in=a,e.hold=c,e.bits=h,oO;n.adler=e.check=1,e.mode=Eu;case Eu:if(t===rO||t===Tp)break e;case D0:if(e.last){c>>>=h&7,h-=h&7,e.mode=M0;break}for(;h<3;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}switch(e.last=c&1,c>>>=1,h-=1,c&3){case 0:e.mode=Tb;break;case 1:if(dO(e),e.mode=Lp,t===Tp){c>>>=2,h-=2;break e}break;case 2:e.mode=Db;break;case 3:n.msg="invalid block type",e.mode=ar}c>>>=2,h-=2;break;case Tb:for(c>>>=h&7,h-=h&7;h<32;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",e.mode=ar;break}if(e.length=c&65535,c=0,h=0,e.mode=F0,t===Tp)break e;case F0:e.mode=Lb;case Lb:if(p=e.length,p){if(p>a&&(p=a),p>u&&(p=u),p===0)break e;i.set(r.subarray(o,o+p),s),a-=p,o+=p,u-=p,s+=p,e.length-=p;break}e.mode=Eu;break;case Db:for(;h<14;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}if(e.nlen=(c&31)+257,c>>>=5,h-=5,e.ndist=(c&31)+1,c>>>=5,h-=5,e.ncode=(c&15)+4,c>>>=4,h-=4,e.nlen>286||e.ndist>30){n.msg="too many length or distance symbols",e.mode=ar;break}e.have=0,e.mode=Fb;case Fb:for(;e.have<e.ncode;){for(;h<3;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}e.lens[B[e.have++]]=c&7,c>>>=3,h-=3}for(;e.have<19;)e.lens[B[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,j={bits:e.lenbits},M=Zh(nO,e.lens,0,19,e.lencode,0,e.work,j),e.lenbits=j.bits,M){n.msg="invalid code lengths set",e.mode=ar;break}e.have=0,e.mode=Mb;case Mb:for(;e.have<e.nlen+e.ndist;){for(;w=e.lencode[c&(1<<e.lenbits)-1],_=w>>>24,E=w>>>16&255,I=w&65535,!(_<=h);){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}if(I<16)c>>>=_,h-=_,e.lens[e.have++]=I;else{if(I===16){for(D=_+2;h<D;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}if(c>>>=_,h-=_,e.have===0){n.msg="invalid bit length repeat",e.mode=ar;break}U=e.lens[e.have-1],p=3+(c&3),c>>>=2,h-=2}else if(I===17){for(D=_+3;h<D;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}c>>>=_,h-=_,U=0,p=3+(c&7),c>>>=3,h-=3}else{for(D=_+7;h<D;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}c>>>=_,h-=_,U=0,p=11+(c&127),c>>>=7,h-=7}if(e.have+p>e.nlen+e.ndist){n.msg="invalid bit length repeat",e.mode=ar;break}for(;p--;)e.lens[e.have++]=U}}if(e.mode===ar)break;if(e.lens[256]===0){n.msg="invalid code -- missing end-of-block",e.mode=ar;break}if(e.lenbits=9,j={bits:e.lenbits},M=Zh(DS,e.lens,0,e.nlen,e.lencode,0,e.work,j),e.lenbits=j.bits,M){n.msg="invalid literal/lengths set",e.mode=ar;break}if(e.distbits=6,e.distcode=e.distdyn,j={bits:e.distbits},M=Zh(FS,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,j),e.distbits=j.bits,M){n.msg="invalid distances set",e.mode=ar;break}if(e.mode=Lp,t===Tp)break e;case Lp:e.mode=Dp;case Dp:if(a>=6&&u>=258){n.next_out=s,n.avail_out=u,n.next_in=o,n.avail_in=a,e.hold=c,e.bits=h,YM(n,v),s=n.next_out,i=n.output,u=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,c=e.hold,h=e.bits,e.mode===Eu&&(e.back=-1);break}for(e.back=0;w=e.lencode[c&(1<<e.lenbits)-1],_=w>>>24,E=w>>>16&255,I=w&65535,!(_<=h);){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}if(E&&(E&240)===0){for(C=_,N=E,O=I;w=e.lencode[O+((c&(1<<C+N)-1)>>C)],_=w>>>24,E=w>>>16&255,I=w&65535,!(C+_<=h);){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}c>>>=C,h-=C,e.back+=C}if(c>>>=_,h-=_,e.back+=_,e.length=I,E===0){e.mode=zb;break}if(E&32){e.back=-1,e.mode=Eu;break}if(E&64){n.msg="invalid literal/length code",e.mode=ar;break}e.extra=E&15,e.mode=Ob;case Ob:if(e.extra){for(D=e.extra;h<D;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,h-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Bb;case Bb:for(;w=e.distcode[c&(1<<e.distbits)-1],_=w>>>24,E=w>>>16&255,I=w&65535,!(_<=h);){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}if((E&240)===0){for(C=_,N=E,O=I;w=e.distcode[O+((c&(1<<C+N)-1)>>C)],_=w>>>24,E=w>>>16&255,I=w&65535,!(C+_<=h);){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}c>>>=C,h-=C,e.back+=C}if(c>>>=_,h-=_,e.back+=_,E&64){n.msg="invalid distance code",e.mode=ar;break}e.offset=I,e.extra=E&15,e.mode=jb;case jb:if(e.extra){for(D=e.extra;h<D;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,h-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){n.msg="invalid distance too far back",e.mode=ar;break}e.mode=Ub;case Ub:if(u===0)break e;if(p=v-u,e.offset>p){if(p=e.offset-p,p>e.whave&&e.sane){n.msg="invalid distance too far back",e.mode=ar;break}p>e.wnext?(p-=e.wnext,y=e.wsize-p):y=e.wnext-p,p>e.length&&(p=e.length),x=e.window}else x=i,y=s-e.offset,p=e.length;p>u&&(p=u),u-=p,e.length-=p;do i[s++]=x[y++];while(--p);e.length===0&&(e.mode=Dp);break;case zb:if(u===0)break e;i[s++]=e.length,u--,e.mode=Dp;break;case M0:if(e.wrap){for(;h<32;){if(a===0)break e;a--,c|=r[o++]<<h,h+=8}if(v-=u,n.total_out+=v,e.total+=v,e.wrap&4&&v&&(n.adler=e.check=e.flags?ks(e.check,i,v,s-v):zg(e.check,i,v,s-v)),v=u,e.wrap&4&&(e.flags?c:qb(c))!==e.check){n.msg="incorrect data check",e.mode=ar;break}c=0,h=0}e.mode=Vb;case Vb:if(e.wrap&&e.flags){for(;h<32;){if(a===0)break e;a--,c+=r[o++]<<h,h+=8}if(e.wrap&4&&c!==(e.total&4294967295)){n.msg="incorrect length check",e.mode=ar;break}c=0,h=0}e.mode=Wb;case Wb:M=iO;break e;case ar:M=MS;break e;case BS:return OS;case jS:default:return Ea}return n.next_out=s,n.avail_out=u,n.next_in=o,n.avail_in=a,e.hold=c,e.bits=h,(e.wsize||v!==n.avail_out&&e.mode<ar&&(e.mode<M0||t!==bb))&&qS(n,n.output,n.next_out,v-n.avail_out),d-=n.avail_in,v-=n.avail_out,n.total_in+=d,n.total_out+=v,e.total+=v,e.wrap&4&&v&&(n.adler=e.check=e.flags?ks(e.check,i,v,n.next_out-v):zg(e.check,i,v,n.next_out-v)),n.data_type=e.bits+(e.last?64:0)+(e.mode===Eu?128:0)+(e.mode===Lp||e.mode===F0?256:0),(d===0&&v===0||t===bb)&&M===Dc&&(M=aO),M},vO=n=>{if(zc(n))return Ea;let t=n.state;return t.window&&(t.window=null),n.state=null,Dc},mO=(n,t)=>{if(zc(n))return Ea;const e=n.state;return(e.wrap&2)===0?Ea:(e.head=t,t.done=!1,Dc)},gO=(n,t)=>{const e=t.length;let r,i,o;return zc(n)||(r=n.state,r.wrap!==0&&r.mode!==kv)?Ea:r.mode===kv&&(i=1,i=zg(i,t,e,0),i!==r.check)?MS:(o=qS(n,t,e,e),o?(r.mode=BS,OS):(r.havedict=1,Dc))};var yO=zS,xO=VS,wO=US,bO=hO,_O=WS,SO=pO,CO=vO,AO=mO,kO=gO,EO="pako inflate (from Nodeca project)",Iu={inflateReset:yO,inflateReset2:xO,inflateResetKeep:wO,inflateInit:bO,inflateInit2:_O,inflate:SO,inflateEnd:CO,inflateGetHeader:AO,inflateSetDictionary:kO,inflateInfo:EO};function NO(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var IO=NO;const HS=Object.prototype.toString,{Z_NO_FLUSH:PO,Z_FINISH:RO,Z_OK:vd,Z_STREAM_END:j0,Z_NEED_DICT:U0,Z_STREAM_ERROR:TO,Z_DATA_ERROR:Gb,Z_MEM_ERROR:LO}=RS;function Rd(n){this.options=TS.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(n&&n.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new KM,this.strm.avail_out=0;let e=Iu.inflateInit2(this.strm,t.windowBits);if(e!==vd)throw new Error(Vg[e]);if(this.header=new IO,Iu.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Wg.string2buf(t.dictionary):HS.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Iu.inflateSetDictionary(this.strm,t.dictionary),e!==vd)))throw new Error(Vg[e])}Rd.prototype.push=function(n,t){const e=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?RO:PO,HS.call(n)==="[object ArrayBuffer]"?e.input=new Uint8Array(n):e.input=n,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),o=Iu.inflate(e,s),o===U0&&i&&(o=Iu.inflateSetDictionary(e,i),o===vd?o=Iu.inflate(e,s):o===Gb&&(o=U0));e.avail_in>0&&o===j0&&e.state.wrap>0&&n[e.next_in]!==0;)Iu.inflateReset(e),o=Iu.inflate(e,s);switch(o){case TO:case Gb:case U0:case LO:return this.onEnd(o),this.ended=!0,!1}if(a=e.avail_out,e.next_out&&(e.avail_out===0||o===j0))if(this.options.to==="string"){let u=Wg.utf8border(e.output,e.next_out),c=e.next_out-u,h=Wg.buf2string(e.output,u);e.next_out=c,e.avail_out=r-c,c&&e.output.set(e.output.subarray(u,u+c),0),this.onData(h)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(o===vd&&a===0)){if(o===j0)return o=Iu.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Rd.prototype.onData=function(n){this.chunks.push(n)};Rd.prototype.onEnd=function(n){n===vd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=TS.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function DO(n,t){const e=new Rd(t);if(e.push(n),e.err)throw e.msg||Vg[e.err];return e.result}var FO=Rd,MO=DO,OO={Inflate:FO,inflate:MO};const{Inflate:BO,inflate:jO}=OO;var $b=BO,UO=jO;const GS=[];for(let n=0;n<256;n++){let t=n;for(let e=0;e<8;e++)t&1?t=3988292384^t>>>1:t=t>>>1;GS[n]=t}const Kb=4294967295;function zO(n,t,e){let r=n;for(let i=0;i<e;i++)r=GS[(r^t[i])&255]^r>>>8;return r}function VO(n,t){return(zO(Kb,n,t)^Kb)>>>0}function Xb(n,t,e){const r=n.readUint32(),i=VO(new Uint8Array(n.buffer,n.byteOffset+n.offset-t-4,t),t);if(i!==r)throw new Error(`CRC mismatch for chunk ${e}. Expected ${r}, found ${i}`)}function $S(n,t,e){for(let r=0;r<e;r++)t[r]=n[r]}function KS(n,t,e,r){let i=0;for(;i<r;i++)t[i]=n[i];for(;i<e;i++)t[i]=n[i]+t[i-r]&255}function XS(n,t,e,r){let i=0;if(e.length===0)for(;i<r;i++)t[i]=n[i];else for(;i<r;i++)t[i]=n[i]+e[i]&255}function YS(n,t,e,r,i){let o=0;if(e.length===0){for(;o<i;o++)t[o]=n[o];for(;o<r;o++)t[o]=n[o]+(t[o-i]>>1)&255}else{for(;o<i;o++)t[o]=n[o]+(e[o]>>1)&255;for(;o<r;o++)t[o]=n[o]+(t[o-i]+e[o]>>1)&255}}function JS(n,t,e,r,i){let o=0;if(e.length===0){for(;o<i;o++)t[o]=n[o];for(;o<r;o++)t[o]=n[o]+t[o-i]&255}else{for(;o<i;o++)t[o]=n[o]+e[o]&255;for(;o<r;o++)t[o]=n[o]+WO(t[o-i],e[o],e[o-i])&255}}function WO(n,t,e){const r=n+t-e,i=Math.abs(r-n),o=Math.abs(r-t),s=Math.abs(r-e);return i<=o&&i<=s?n:o<=s?t:e}function qO(n,t,e,r,i,o){switch(n){case 0:$S(t,e,i);break;case 1:KS(t,e,i,o);break;case 2:XS(t,e,r,i);break;case 3:YS(t,e,r,i,o);break;case 4:JS(t,e,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const HO=new Uint16Array([255]),GO=new Uint8Array(HO.buffer),$O=GO[0]===255;function KO(n){const{data:t,width:e,height:r,channels:i,depth:o}=n,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,u=new Uint8Array(r*e*a);let c=0;for(let h=0;h<7;h++){const d=s[h],v=Math.ceil((e-d.x)/d.xStep),p=Math.ceil((r-d.y)/d.yStep);if(v<=0||p<=0)continue;const y=v*a,x=new Uint8Array(y);for(let w=0;w<p;w++){const _=t[c++],E=t.subarray(c,c+y);c+=y;const I=new Uint8Array(y);qO(_,E,I,x,y,a),x.set(I);for(let C=0;C<v;C++){const N=d.x+C*d.xStep,O=d.y+w*d.yStep;if(!(N>=e||O>=r))for(let U=0;U<a;U++)u[(O*e+N)*a+U]=I[C*a+U]}}}if(o===16){const h=new Uint16Array(u.buffer);if($O)for(let d=0;d<h.length;d++)h[d]=XO(h[d]);return h}else return u}function XO(n){return(n&255)<<8|n>>8&255}const YO=new Uint16Array([255]),JO=new Uint8Array(YO.buffer),QO=JO[0]===255,ZO=new Uint8Array(0);function Yb(n){const{data:t,width:e,height:r,channels:i,depth:o}=n,s=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*e),u=new Uint8Array(r*a);let c=ZO,h=0,d,v;for(let p=0;p<r;p++){switch(d=t.subarray(h+1,h+1+a),v=u.subarray(p*a,(p+1)*a),t[h]){case 0:$S(d,v,a);break;case 1:KS(d,v,a,s);break;case 2:XS(d,v,c,a);break;case 3:YS(d,v,c,a,s);break;case 4:JS(d,v,c,a,s);break;default:throw new Error(`Unsupported filter: ${t[h]}`)}c=v,h+=a+1}if(o===16){const p=new Uint16Array(u.buffer);if(QO)for(let y=0;y<p.length;y++)p[y]=e7(p[y]);return p}else return u}function e7(n){return(n&255)<<8|n>>8&255}const qp=Uint8Array.of(137,80,78,71,13,10,26,10);function Jb(n){if(!t7(n.readBytes(qp.length)))throw new Error("wrong PNG signature")}function t7(n){if(n.length<qp.length)return!1;for(let t=0;t<qp.length;t++)if(n[t]!==qp[t])return!1;return!0}const n7="tEXt",r7=0,QS=new TextDecoder("latin1");function i7(n){if(a7(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const o7=/^[\u0000-\u00FF]*$/;function a7(n){if(!o7.test(n))throw new Error("invalid latin1 text")}function s7(n,t,e){const r=ZS(t);n[r]=u7(t,e-r.length-1)}function ZS(n){for(n.mark();n.readByte()!==r7;);const t=n.offset;n.reset();const e=QS.decode(n.readBytes(t-n.offset-1));return n.skip(1),i7(e),e}function u7(n,t){return QS.decode(n.readBytes(t))}const Ko={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},z0={UNKNOWN:-1,DEFLATE:0},Qb={UNKNOWN:-1,ADAPTIVE:0},V0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Fp={NONE:0,BACKGROUND:1,PREVIOUS:2},W0={SOURCE:0,OVER:1};class l7 extends L2{constructor(e,r={}){super(e);Mn(this,"_checkCrc");Mn(this,"_inflator");Mn(this,"_png");Mn(this,"_apng");Mn(this,"_end");Mn(this,"_hasPalette");Mn(this,"_palette");Mn(this,"_hasTransparency");Mn(this,"_transparency");Mn(this,"_compressionMethod");Mn(this,"_filterMethod");Mn(this,"_interlaceMethod");Mn(this,"_colorType");Mn(this,"_isAnimated");Mn(this,"_numberOfFrames");Mn(this,"_numberOfPlays");Mn(this,"_frames");Mn(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new $b,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=z0.UNKNOWN,this._filterMethod=Qb.UNKNOWN,this._interlaceMethod=V0.UNKNOWN,this._colorType=Ko.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Jb(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeChunk(e,r)}return this.decodeImage(),this._png}decodeApng(){for(Jb(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(e,r)}return this.decodeApngImage(),this._apng}decodeChunk(e,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case n7:s7(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Xb(this,e+4,r):this.skip(4)}decodeApngChunk(e,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,r),this.offset=i+e;break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Xb(this,e+4,r):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=c7(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Ko.GREYSCALE:i=1;break;case Ko.TRUECOLOUR:i=3;break;case Ko.INDEXED_COLOUR:i=1;break;case Ko.GREYSCALE_ALPHA:i=2;break;case Ko.TRUECOLOUR_ALPHA:i=4;break;case Ko.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==z0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const r=e/3;this._hasPalette=!0;const i=[];this._palette=i;for(let o=0;o<r;o++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const r=e,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let r=e,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Ko.GREYSCALE:case Ko.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let r=0;r<e/2;r++)this._transparency[r]=this.readUint16();break}case Ko.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let r=0;for(;r<e;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Ko.UNKNOWN:case Ko.GREYSCALE_ALPHA:case Ko.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const r=ZS(this),i=this.readUint8();if(i!==z0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const o=this.readBytes(e-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:UO(o)}}decodepHYs(){const e=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:e,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const r={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(e);if(i){if(i.data=Yb({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const o=this._apng.frames.at(e-1);this.disposeFrame(i,o,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(e,r,i){switch(e.disposeOp){case Fp.NONE:break;case Fp.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let s=0;s<this._png.width;s++){const a=(o*e.width+s)*this._png.channels;for(let u=0;u<this._png.channels;u++)i.data[a+u]=0}break;case Fp.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,r){const i=1<<this._png.depth,o=(s,a)=>{const u=((s+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,c=(s*r.width+a)*this._png.channels;return{index:u,frameIndex:c}};switch(r.blendOp){case W0.SOURCE:for(let s=0;s<r.height;s++)for(let a=0;a<r.width;a++){const{index:u,frameIndex:c}=o(s,a);for(let h=0;h<this._png.channels;h++)e.data[u+h]=r.data[c+h]}break;case W0.OVER:for(let s=0;s<r.height;s++)for(let a=0;a<r.width;a++){const{index:u,frameIndex:c}=o(s,a);for(let h=0;h<this._png.channels;h++){const d=r.data[c+this._png.channels-1]/i,v=h%(this._png.channels-1)===0?1:r.data[c+h],p=Math.floor(d*v+(1-d)*e.data[u+h]);e.data[u+h]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==Qb.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===V0.NO_INTERLACE)this._png.data=Yb({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===V0.ADAM7)this._png.data=KO({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,r=this._frames.at(-1);r?r.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Fp.NONE,blendOp:W0.SOURCE,data:e}),this._inflator=new $b,this._writingDataChunks=!1}}function c7(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var Zb;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(Zb||(Zb={}));function f7(n,t){return new l7(n,t).decode()}var Kt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function q0(){Kt.console&&typeof Kt.console.log=="function"&&Kt.console.log.apply(Kt.console,arguments)}var qn={log:q0,warn:function(n){Kt.console&&(typeof Kt.console.warn=="function"?Kt.console.warn.apply(Kt.console,arguments):q0.call(null,arguments))},error:function(n){Kt.console&&(typeof Kt.console.error=="function"?Kt.console.error.apply(Kt.console,arguments):q0(n))}};function H0(n,t,e){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){bc(r.response,t,e)},r.onerror=function(){qn.error("could not download file")},r.send()}function e5(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Mp(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var bc=Kt.saveAs||((typeof window>"u"?"undefined":On(window))!=="object"||window!==Kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var r=Kt.URL||Kt.webkitURL,i=document.createElement("a");t=t||n.name||"download",i.download=t,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?e5(i.href)?H0(n,t,e):Mp(i,i.target="_blank"):Mp(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Mp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(e5(n))H0(n,t,e);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Mp(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:On(o)!=="object"&&(qn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,e),t)}:function(n,t,e,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return H0(n,t,e);var i=n.type==="application/octet-stream",o=/constructor/i.test(Kt.HTMLElement)||Kt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":On(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=s?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(n)}else{var u=Kt.URL||Kt.webkitURL,c=u.createObjectURL(n);r?r.location=c:location.href=c,r=null,setTimeout(function(){u.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function eC(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<e.length;r++){var i=e[r].re,o=e[r].process,s=i.exec(n);s&&(t=o(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),u=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),u.length==1&&(u="0"+u),c.length==1&&(c="0"+c),"#"+a+u+c}}var Hp=Kt.atob.bind(Kt),t5=Kt.btoa.bind(Kt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function G0(n,t){var e=n[0],r=n[1],i=n[2],o=n[3];e=ji(e,r,i,o,t[0],7,-680876936),o=ji(o,e,r,i,t[1],12,-389564586),i=ji(i,o,e,r,t[2],17,606105819),r=ji(r,i,o,e,t[3],22,-1044525330),e=ji(e,r,i,o,t[4],7,-176418897),o=ji(o,e,r,i,t[5],12,1200080426),i=ji(i,o,e,r,t[6],17,-1473231341),r=ji(r,i,o,e,t[7],22,-45705983),e=ji(e,r,i,o,t[8],7,1770035416),o=ji(o,e,r,i,t[9],12,-1958414417),i=ji(i,o,e,r,t[10],17,-42063),r=ji(r,i,o,e,t[11],22,-1990404162),e=ji(e,r,i,o,t[12],7,1804603682),o=ji(o,e,r,i,t[13],12,-40341101),i=ji(i,o,e,r,t[14],17,-1502002290),e=Ui(e,r=ji(r,i,o,e,t[15],22,1236535329),i,o,t[1],5,-165796510),o=Ui(o,e,r,i,t[6],9,-1069501632),i=Ui(i,o,e,r,t[11],14,643717713),r=Ui(r,i,o,e,t[0],20,-373897302),e=Ui(e,r,i,o,t[5],5,-701558691),o=Ui(o,e,r,i,t[10],9,38016083),i=Ui(i,o,e,r,t[15],14,-660478335),r=Ui(r,i,o,e,t[4],20,-405537848),e=Ui(e,r,i,o,t[9],5,568446438),o=Ui(o,e,r,i,t[14],9,-1019803690),i=Ui(i,o,e,r,t[3],14,-187363961),r=Ui(r,i,o,e,t[8],20,1163531501),e=Ui(e,r,i,o,t[13],5,-1444681467),o=Ui(o,e,r,i,t[2],9,-51403784),i=Ui(i,o,e,r,t[7],14,1735328473),e=zi(e,r=Ui(r,i,o,e,t[12],20,-1926607734),i,o,t[5],4,-378558),o=zi(o,e,r,i,t[8],11,-2022574463),i=zi(i,o,e,r,t[11],16,1839030562),r=zi(r,i,o,e,t[14],23,-35309556),e=zi(e,r,i,o,t[1],4,-1530992060),o=zi(o,e,r,i,t[4],11,1272893353),i=zi(i,o,e,r,t[7],16,-155497632),r=zi(r,i,o,e,t[10],23,-1094730640),e=zi(e,r,i,o,t[13],4,681279174),o=zi(o,e,r,i,t[0],11,-358537222),i=zi(i,o,e,r,t[3],16,-722521979),r=zi(r,i,o,e,t[6],23,76029189),e=zi(e,r,i,o,t[9],4,-640364487),o=zi(o,e,r,i,t[12],11,-421815835),i=zi(i,o,e,r,t[15],16,530742520),e=Vi(e,r=zi(r,i,o,e,t[2],23,-995338651),i,o,t[0],6,-198630844),o=Vi(o,e,r,i,t[7],10,1126891415),i=Vi(i,o,e,r,t[14],15,-1416354905),r=Vi(r,i,o,e,t[5],21,-57434055),e=Vi(e,r,i,o,t[12],6,1700485571),o=Vi(o,e,r,i,t[3],10,-1894986606),i=Vi(i,o,e,r,t[10],15,-1051523),r=Vi(r,i,o,e,t[1],21,-2054922799),e=Vi(e,r,i,o,t[8],6,1873313359),o=Vi(o,e,r,i,t[15],10,-30611744),i=Vi(i,o,e,r,t[6],15,-1560198380),r=Vi(r,i,o,e,t[13],21,1309151649),e=Vi(e,r,i,o,t[4],6,-145523070),o=Vi(o,e,r,i,t[11],10,-1120210379),i=Vi(i,o,e,r,t[2],15,718787259),r=Vi(r,i,o,e,t[9],21,-343485551),n[0]=Nl(e,n[0]),n[1]=Nl(r,n[1]),n[2]=Nl(i,n[2]),n[3]=Nl(o,n[3])}function Qv(n,t,e,r,i,o){return t=Nl(Nl(t,n),Nl(r,o)),Nl(t<<i|t>>>32-i,e)}function ji(n,t,e,r,i,o,s){return Qv(t&e|~t&r,n,t,i,o,s)}function Ui(n,t,e,r,i,o,s){return Qv(t&r|e&~r,n,t,i,o,s)}function zi(n,t,e,r,i,o,s){return Qv(t^e^r,n,t,i,o,s)}function Vi(n,t,e,r,i,o,s){return Qv(e^(t|~r),n,t,i,o,s)}function tC(n){var t,e=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)G0(r,h7(n.substring(t-64,t)));n=n.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)i[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(G0(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*e,G0(r,i),r}function h7(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}var n5="0123456789abcdef".split("");function d7(n){for(var t="",e=0;e<4;e++)t+=n5[n>>8*e+4&15]+n5[n>>8*e&15];return t}function p7(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function qg(n){return tC(n).map(p7).join("")}var v7=(function(n){for(var t=0;t<n.length;t++)n[t]=d7(n[t]);return n.join("")})(tC("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nl(n,t){if(v7){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Hg(n,t){var e,r,i,o;if(n!==e){for(var s=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),a=[],u=0;u<256;u++)a[u]=u;var c=0;for(u=0;u<256;u++){var h=a[u];c=(c+h+s.charCodeAt(u))%256,a[u]=a[c],a[c]=h}e=n,r=a}else a=r;var d=t.length,v=0,p=0,y="";for(u=0;u<d;u++)p=(p+(h=a[v=(v+1)%256]))%256,a[v]=a[p],a[p]=h,s=a[(a[v]+a[p])%256],y+=String.fromCharCode(t.charCodeAt(u)^s);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var r5={print:4,modify:8,copy:16,"annot-forms":32};function Pf(n,t,e,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(r5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=r5[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),s=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=qg(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Hg(this.encryptionKey,this.padding)}function Rf(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,r=0;r<e;r++){var i=n.charCodeAt(r);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return t}function i5(n){if(On(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,r,i){if(i=i||!1,typeof e!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var o=Math.random().toString(35);return t[e][o]=[r,!!i],o},this.unsubscribe=function(e){for(var r in t)if(t[r][e])return delete t[r][e],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[e]){var s=t[e][o];try{s[0].apply(n,r)}catch(a){Kt.console&&qn.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Ev(n){if(!(this instanceof Ev))return new Ev(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function nC(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function Sc(n,t,e,r,i){if(!(this instanceof Sc))return new Sc(n,t,e,r,i);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,nC.call(this,r,i)}function Of(n,t,e,r,i){if(!(this instanceof Of))return new Of(n,t,e,r,i);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,nC.call(this,r,i)}function It(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,u=16,c="S",h=null;On(n=n||{})==="object"&&(e=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(u=n.floatPrecision),c=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",e=(""+(e||"P")).toLowerCase();var d=n.putOnlyUsedFonts||!1,v={},p={internal:{},__private__:{}};p.__private__.PubSub=i5;var y="1.3",x=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(A){y=A};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return w};var _=p.__private__.getPageFormat=function(A){return w[A]};i=i||"a4";var E="compat",I="advanced",C=E;function N(){this.saveGraphicsState(),ee(new Dt(Ut,0,0,-Ut,0,yo()*Ut).toString()+" cm"),this.setFontSize(this.getFontSize()/Ut),c="n",C=I}function O(){this.restoreGraphicsState(),c="S",C=E}var U=p.__private__.combineFontStyleAndFontWeight=function(A,V){if(A=="bold"&&V=="normal"||A=="bold"&&V==400||A=="normal"&&V=="italic"||A=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(A=V==400||V==="normal"?A==="italic"?"italic":"normal":V!=700&&V!=="bold"||A!=="normal"?(V==700?"bold":V)+""+A:"bold"),A};p.advancedAPI=function(A){var V=C===E;return V&&N.call(this),typeof A!="function"||(A(this),V&&O.call(this)),this},p.compatAPI=function(A){var V=C===I;return V&&O.call(this),typeof A!="function"||(A(this),V&&N.call(this)),this},p.isAdvancedAPI=function(){return C===I};var M,T=function(A){if(C!==I)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=p.roundToPrecision=p.__private__.roundToPrecision=function(A,V){var le=t||V;if(isNaN(A)||isNaN(le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(le).replace(/0+$/,"")};M=p.hpf=p.__private__.hpf=typeof u=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return j(A,u)}:u==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return j(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return j(A,16)};var D=p.f2=p.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return j(A,2)},B=p.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return j(A,3)},X=p.scale=p.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return C===E?A*Ut:C===I?A:void 0},G=function(A){return X((function(V){return C===E?yo()-V:C===I?V:void 0})(A))};p.__private__.setPrecision=p.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(t=parseInt(A,10))};var oe,he="00000000000000000000000000000000",ae=p.__private__.getFileId=function(){return he},W=p.__private__.setFileId=function(A){return he=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():he.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Rr=new Pf(h.userPermissions,h.userPassword,h.ownerPassword,he)),he};p.setFileId=function(A){return W(A),this},p.getFileId=function(){return ae()};var ne=p.__private__.convertDateToPDFDate=function(A){var V=A.getTimezoneOffset(),le=V<0?"+":"-",me=Math.floor(Math.abs(V/60)),ke=Math.abs(V%60),ze=[le,Q(me),"'",Q(ke),"'"].join("");return["D:",A.getFullYear(),Q(A.getMonth()+1),Q(A.getDate()),Q(A.getHours()),Q(A.getMinutes()),Q(A.getSeconds()),ze].join("")},se=p.__private__.convertPDFDateToDate=function(A){var V=parseInt(A.substr(2,4),10),le=parseInt(A.substr(6,2),10)-1,me=parseInt(A.substr(8,2),10),ke=parseInt(A.substr(10,2),10),ze=parseInt(A.substr(12,2),10),$e=parseInt(A.substr(14,2),10);return new Date(V,le,me,ke,ze,$e,0)},$=p.__private__.setCreationDate=function(A){var V;if(A===void 0&&(A=new Date),A instanceof Date)V=ne(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=A}return oe=V},F=p.__private__.getCreationDate=function(A){var V=oe;return A==="jsDate"&&(V=se(oe)),V};p.setCreationDate=function(A){return $(A),this},p.getCreationDate=function(A){return F(A)};var K,Q=p.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},ue=p.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},de=0,ve=[],we=[],Ce=0,Le=[],be=[],De=!1,Re=we;p.__private__.setCustomOutputDestination=function(A){De=!0,Re=A};var Xe=function(A){De||(Re=A)};p.__private__.resetCustomOutputDestination=function(){De=!1,Re=we};var ee=p.__private__.out=function(A){return A=A.toString(),Ce+=A.length+1,Re.push(A),Re},Je=p.__private__.write=function(A){return ee(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},Rt=p.__private__.getArrayBuffer=function(A){for(var V=A.length,le=new ArrayBuffer(V),me=new Uint8Array(le);V--;)me[V]=A.charCodeAt(V);return le},ft=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return ft};var He=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(A){return He=C===I?A/Ut:A,this};var mt,nt=p.__private__.getFontSize=p.getFontSize=function(){return C===E?He:He*Ut},ht=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(A){return ht=A,this},p.__private__.getR2L=p.getR2L=function(){return ht};var ut,sn=p.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))mt=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');mt=A}else mt=parseInt(A,10)};p.__private__.getZoomMode=function(){return mt};var Vt,jt=p.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');ut=A};p.__private__.getPageMode=function(){return ut};var Xt=p.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');Vt=A};p.__private__.getLayoutMode=function(){return Vt},p.__private__.setDisplayMode=p.setDisplayMode=function(A,V,le){return sn(A),Xt(V),jt(le),this};var Ft={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(A){if(Object.keys(Ft).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ft[A]},p.__private__.getDocumentProperties=function(){return Ft},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(A){for(var V in Ft)Ft.hasOwnProperty(V)&&A[V]&&(Ft[V]=A[V]);return this},p.__private__.setDocumentProperty=function(A,V){if(Object.keys(Ft).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ft[A]=V};var lt,Ut,dt,Xn,un,Yt={},Qt={},Bn=[],Pt={},En={},Tt={},Ht={},Cn=null,Zt=0,Lt=[],yn=new i5(p),os=n.hotfixes||[],$r={},ia={},lo=[],Dt=function A(V,le,me,ke,ze,$e){if(!(this instanceof A))return new A(V,le,me,ke,ze,$e);isNaN(V)&&(V=1),isNaN(le)&&(le=0),isNaN(me)&&(me=0),isNaN(ke)&&(ke=1),isNaN(ze)&&(ze=0),isNaN($e)&&($e=0),this._matrix=[V,le,me,ke,ze,$e]};Object.defineProperty(Dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Dt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Dt.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(A)},Dt.prototype.multiply=function(A){var V=A.sx*this.sx+A.shy*this.shx,le=A.sx*this.shy+A.shy*this.sy,me=A.shx*this.sx+A.sy*this.shx,ke=A.shx*this.shy+A.sy*this.sy,ze=A.tx*this.sx+A.ty*this.shx+this.tx,$e=A.tx*this.shy+A.ty*this.sy+this.ty;return new Dt(V,le,me,ke,ze,$e)},Dt.prototype.decompose=function(){var A=this.sx,V=this.shy,le=this.shx,me=this.sy,ke=this.tx,ze=this.ty,$e=Math.sqrt(A*A+V*V),pt=(A/=$e)*le+(V/=$e)*me;le-=A*pt,me-=V*pt;var _t=Math.sqrt(le*le+me*me);return pt/=_t,A*(me/=_t)<V*(le/=_t)&&(A=-A,V=-V,pt=-pt,$e=-$e),{scale:new Dt($e,0,0,_t,0,0),translate:new Dt(1,0,0,1,ke,ze),rotate:new Dt(A,V,-V,A,0,0),skew:new Dt(1,0,pt,1,0,0)}},Dt.prototype.toString=function(A){return this.join(" ")},Dt.prototype.inversed=function(){var A=this.sx,V=this.shy,le=this.shx,me=this.sy,ke=this.tx,ze=this.ty,$e=1/(A*me-V*le),pt=me*$e,_t=-V*$e,qt=-le*$e,Jt=A*$e;return new Dt(pt,_t,qt,Jt,-pt*ke-qt*ze,-_t*ke-Jt*ze)},Dt.prototype.applyToPoint=function(A){var V=A.x*this.sx+A.y*this.shx+this.tx,le=A.x*this.shy+A.y*this.sy+this.ty;return new vo(V,le)},Dt.prototype.applyToRectangle=function(A){var V=this.applyToPoint(A),le=this.applyToPoint(new vo(A.x+A.w,A.y+A.h));return new nu(V.x,V.y,le.x-V.x,le.y-V.y)},Dt.prototype.clone=function(){var A=this.sx,V=this.shy,le=this.shx,me=this.sy,ke=this.tx,ze=this.ty;return new Dt(A,V,le,me,ke,ze)},p.Matrix=Dt;var Yi=p.matrixMult=function(A,V){return V.multiply(A)},Lo=new Dt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Lo;var ai=function(A,V){if(!En[A]){var le=(V instanceof Sc?"Sh":"P")+(Object.keys(Pt).length+1).toString(10);V.id=le,En[A]=le,Pt[le]=V,yn.publish("addPattern",V)}};p.ShadingPattern=Sc,p.TilingPattern=Of,p.addShadingPattern=function(A,V){return T("addShadingPattern()"),ai(A,V),this},p.beginTilingPattern=function(A){T("beginTilingPattern()"),mo(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},p.endTilingPattern=function(A,V){T("endTilingPattern()"),V.stream=be[K].join(`
`),ai(A,V),yn.publish("endTilingPattern",V),lo.pop().restore()};var co,jn=p.__private__.newObject=function(){var A=sr();return xr(A,!0),A},sr=p.__private__.newObjectDeferred=function(){return de++,ve[de]=function(){return Ce},de},xr=function(A,V){return V=typeof V=="boolean"&&V,ve[A]=Ce,V&&ee(A+" 0 obj"),A},Ia=p.__private__.newAdditionalObject=function(){var A={objId:sr(),content:""};return Le.push(A),A},as=sr(),Do=sr(),oa=p.__private__.decodeColorString=function(A){var V=A.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length!==5||V[4]!=="k"&&V[4]!=="K"||(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var le=parseFloat(V[0]);V=[le,le,le,"r"]}for(var me="#",ke=0;ke<3;ke++)me+=("0"+Math.floor(255*parseFloat(V[ke])).toString(16)).slice(-2);return me},Kr=p.__private__.encodeColorString=function(A){var V;typeof A=="string"&&(A={ch1:A});var le=A.ch1,me=A.ch2,ke=A.ch3,ze=A.ch4,$e=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof le=="string"&&le.charAt(0)!=="#"){var pt=new eC(le);if(pt.ok)le=pt.toHex();else if(!/^\d*\.?\d*$/.test(le))throw new Error('Invalid color "'+le+'" passed to jsPDF.encodeColorString.')}if(typeof le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(le)&&(le="#"+le[1]+le[1]+le[2]+le[2]+le[3]+le[3]),typeof le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(le)){var _t=parseInt(le.substr(1),16);le=_t>>16&255,me=_t>>8&255,ke=255&_t}if(me===void 0||ze===void 0&&le===me&&me===ke)V=typeof le=="string"?le+" "+$e[0]:A.precision===2?D(le/255)+" "+$e[0]:B(le/255)+" "+$e[0];else if(ze===void 0||On(ze)==="object"){if(ze&&!isNaN(ze.a)&&ze.a===0)return["1.","1.","1.",$e[1]].join(" ");V=typeof le=="string"?[le,me,ke,$e[1]].join(" "):A.precision===2?[D(le/255),D(me/255),D(ke/255),$e[1]].join(" "):[B(le/255),B(me/255),B(ke/255),$e[1]].join(" ")}else V=typeof le=="string"?[le,me,ke,ze,$e[2]].join(" "):A.precision===2?[D(le),D(me),D(ke),D(ze),$e[2]].join(" "):[B(le),B(me),B(ke),B(ze),$e[2]].join(" ");return V},fo=p.__private__.getFilters=function(){return s},Ji=p.__private__.putStream=function(A){var V=(A=A||{}).data||"",le=A.filters||fo(),me=A.alreadyAppliedFilters||[],ke=A.addLength1||!1,ze=V.length,$e=A.objectId,pt=function(Tr){return Tr};if(h!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(pt=Rr.encryptor($e,0));var _t={};le===!0&&(le=["FlateEncode"]);var qt=A.additionalKeyValues||[],Jt=(_t=It.API.processDataByFilters!==void 0?It.API.processDataByFilters(V,le):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(me)?me.join(" "):me.toString());if(_t.data.length!==0&&(qt.push({key:"Length",value:_t.data.length}),ke===!0&&qt.push({key:"Length1",value:ze})),Jt.length!=0)if(Jt.split("/").length-1==1)qt.push({key:"Filter",value:Jt});else{qt.push({key:"Filter",value:"["+Jt+"]"});for(var vn=0;vn<qt.length;vn+=1)if(qt[vn].key==="DecodeParms"){for(var Yn=[],_r=0;_r<_t.reverseChain.split("/").length-1;_r+=1)Yn.push("null");Yn.push(qt[vn].value),qt[vn].value="["+Yn.join(" ")+"]"}}ee("<<");for(var Un=0;Un<qt.length;Un++)ee("/"+qt[Un].key+" "+qt[Un].value);ee(">>"),_t.data.length!==0&&(ee("stream"),ee(pt(_t.data)),ee("endstream"))},Hs=p.__private__.putPage=function(A){var V=A.number,le=A.data,me=A.objId,ke=A.contentsObjId;xr(me,!0),ee("<</Type /Page"),ee("/Parent "+A.rootDictionaryObjId+" 0 R"),ee("/Resources "+A.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(M(A.mediaBox.bottomLeftX))+" "+parseFloat(M(A.mediaBox.bottomLeftY))+" "+M(A.mediaBox.topRightX)+" "+M(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&ee("/CropBox ["+M(A.cropBox.bottomLeftX)+" "+M(A.cropBox.bottomLeftY)+" "+M(A.cropBox.topRightX)+" "+M(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&ee("/BleedBox ["+M(A.bleedBox.bottomLeftX)+" "+M(A.bleedBox.bottomLeftY)+" "+M(A.bleedBox.topRightX)+" "+M(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&ee("/TrimBox ["+M(A.trimBox.bottomLeftX)+" "+M(A.trimBox.bottomLeftY)+" "+M(A.trimBox.topRightX)+" "+M(A.trimBox.topRightY)+"]"),A.artBox!==null&&ee("/ArtBox ["+M(A.artBox.bottomLeftX)+" "+M(A.artBox.bottomLeftY)+" "+M(A.artBox.topRightX)+" "+M(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&ee("/UserUnit "+A.userUnit),yn.publish("putPage",{objId:me,pageContext:Lt[V],pageNumber:V,page:le}),ee("/Contents "+ke+" 0 R"),ee(">>"),ee("endobj");var ze=le.join(`
`);return C===I&&(ze+=`
Q`),xr(ke,!0),Ji({data:ze,filters:fo(),objectId:ke}),ee("endobj"),me},Fo=p.__private__.putPages=function(){var A,V,le=[];for(A=1;A<=Zt;A++)Lt[A].objId=sr(),Lt[A].contentsObjId=sr();for(A=1;A<=Zt;A++)le.push(Hs({number:A,data:be[A],objId:Lt[A].objId,contentsObjId:Lt[A].contentsObjId,mediaBox:Lt[A].mediaBox,cropBox:Lt[A].cropBox,bleedBox:Lt[A].bleedBox,trimBox:Lt[A].trimBox,artBox:Lt[A].artBox,userUnit:Lt[A].userUnit,rootDictionaryObjId:as,resourceDictionaryObjId:Do}));xr(as,!0),ee("<</Type /Pages");var me="/Kids [";for(V=0;V<Zt;V++)me+=le[V]+" 0 R ";ee(me+"]"),ee("/Count "+Zt),ee(">>"),ee("endobj"),yn.publish("postPutPages")},ss=function(A){yn.publish("putFont",{font:A,out:ee,newObject:jn,putStream:Ji}),A.isAlreadyPutted!==!0&&(A.objectNumber=jn(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+Rf(A.postScriptName)),ee("/Subtype /Type1"),typeof A.encoding=="string"&&ee("/Encoding /"+A.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},Gs=function(A){A.objectNumber=jn();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[M(A.x),M(A.y),M(A.x+A.width),M(A.y+A.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var le=A.pages[1].join(`
`);Ji({data:le,additionalKeyValues:V,objectId:A.objectNumber}),ee("endobj")},$s=function(A,V){V||(V=21);var le=jn(),me=(function($e,pt){var _t,qt=[],Jt=1/(pt-1);for(_t=0;_t<1;_t+=Jt)qt.push(_t);if(qt.push(1),$e[0].offset!=0){var vn={offset:0,color:$e[0].color};$e.unshift(vn)}if($e[$e.length-1].offset!=1){var Yn={offset:1,color:$e[$e.length-1].color};$e.push(Yn)}for(var _r="",Un=0,Tr=0;Tr<qt.length;Tr++){for(_t=qt[Tr];_t>$e[Un+1].offset;)Un++;var ur=$e[Un].offset,Xr=(_t-ur)/($e[Un+1].offset-ur),Ta=$e[Un].color,Bo=$e[Un+1].color;_r+=ue(Math.round((1-Xr)*Ta[0]+Xr*Bo[0]).toString(16))+ue(Math.round((1-Xr)*Ta[1]+Xr*Bo[1]).toString(16))+ue(Math.round((1-Xr)*Ta[2]+Xr*Bo[2]).toString(16))}return _r.trim()})(A.colors,V),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+V+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ji({data:me,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:le}),ee("endobj"),A.objectNumber=jn(),ee("<< /ShadingType "+A.type),ee("/ColorSpace /DeviceRGB");var ze="/Coords ["+M(parseFloat(A.coords[0]))+" "+M(parseFloat(A.coords[1]))+" ";A.type===2?ze+=M(parseFloat(A.coords[2]))+" "+M(parseFloat(A.coords[3])):ze+=M(parseFloat(A.coords[2]))+" "+M(parseFloat(A.coords[3]))+" "+M(parseFloat(A.coords[4]))+" "+M(parseFloat(A.coords[5])),ee(ze+="]"),A.matrix&&ee("/Matrix ["+A.matrix.toString()+"]"),ee("/Function "+le+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},Uu=function(A,V){var le=sr(),me=jn();V.push({resourcesOid:le,objectOid:me}),A.objectNumber=me;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+A.boundingBox.map(M).join(" ")+"]"}),ke.push({key:"XStep",value:M(A.xStep)}),ke.push({key:"YStep",value:M(A.yStep)}),ke.push({key:"Resources",value:le+" 0 R"}),A.matrix&&ke.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),Ji({data:A.stream,additionalKeyValues:ke,objectId:A.objectNumber}),ee("endobj")},sh=function(A){for(var V in A.objectNumber=jn(),ee("<<"),A)switch(V){case"opacity":ee("/ca "+D(A[V]));break;case"stroke-opacity":ee("/CA "+D(A[V]))}ee(">>"),ee("endobj")},Vn=function(A){xr(A.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var V in ee("/Font <<"),Yt)Yt.hasOwnProperty(V)&&(d===!1||d===!0&&v.hasOwnProperty(V))&&ee("/"+V+" "+Yt[V].objectNumber+" 0 R");ee(">>")})(),(function(){if(Object.keys(Pt).length>0){for(var V in ee("/Shading <<"),Pt)Pt.hasOwnProperty(V)&&Pt[V]instanceof Sc&&Pt[V].objectNumber>=0&&ee("/"+V+" "+Pt[V].objectNumber+" 0 R");yn.publish("putShadingPatternDict"),ee(">>")}})(),(function(V){if(Object.keys(Pt).length>0){for(var le in ee("/Pattern <<"),Pt)Pt.hasOwnProperty(le)&&Pt[le]instanceof p.TilingPattern&&Pt[le].objectNumber>=0&&Pt[le].objectNumber<V&&ee("/"+le+" "+Pt[le].objectNumber+" 0 R");yn.publish("putTilingPatternDict"),ee(">>")}})(A.objectOid),(function(){if(Object.keys(Tt).length>0){var V;for(V in ee("/ExtGState <<"),Tt)Tt.hasOwnProperty(V)&&Tt[V].objectNumber>=0&&ee("/"+V+" "+Tt[V].objectNumber+" 0 R");yn.publish("putGStateDict"),ee(">>")}})(),(function(){for(var V in ee("/XObject <<"),$r)$r.hasOwnProperty(V)&&$r[V].objectNumber>=0&&ee("/"+V+" "+$r[V].objectNumber+" 0 R");yn.publish("putXobjectDict"),ee(">>")})(),ee(">>"),ee("endobj")},Wc=function(A){Qt[A.fontName]=Qt[A.fontName]||{},Qt[A.fontName][A.fontStyle]=A.id},zu=function(A,V,le,me,ke){var ze={id:"F"+(Object.keys(Yt).length+1).toString(10),postScriptName:A,fontName:V,fontStyle:le,encoding:me,isStandardFont:ke||!1,metadata:{}};return yn.publish("addFont",{font:ze,instance:this}),Yt[ze.id]=ze,Wc(ze),ze.id},Qi=p.__private__.pdfEscape=p.pdfEscape=function(A,V){return(function(le,me){var ke,ze,$e,pt,_t,qt,Jt,vn,Yn;if($e=(me=me||{}).sourceEncoding||"Unicode",_t=me.outputEncoding,(me.autoencode||_t)&&Yt[lt].metadata&&Yt[lt].metadata[$e]&&Yt[lt].metadata[$e].encoding&&(pt=Yt[lt].metadata[$e].encoding,!_t&&Yt[lt].encoding&&(_t=Yt[lt].encoding),!_t&&pt.codePages&&(_t=pt.codePages[0]),typeof _t=="string"&&(_t=pt[_t]),_t)){for(Jt=!1,qt=[],ke=0,ze=le.length;ke<ze;ke++)(vn=_t[le.charCodeAt(ke)])?qt.push(String.fromCharCode(vn)):qt.push(le[ke]),qt[ke].charCodeAt(0)>>8&&(Jt=!0);le=qt.join("")}for(ke=le.length;Jt===void 0&&ke!==0;)le.charCodeAt(ke-1)>>8&&(Jt=!0),ke--;if(!Jt)return le;for(qt=me.noBOM?[]:[254,255],ke=0,ze=le.length;ke<ze;ke++){if((Yn=(vn=le.charCodeAt(ke))>>8)>>8)throw new Error("Character at position "+ke+" of string '"+le+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(Yn),qt.push(vn-(Yn<<8))}return String.fromCharCode.apply(void 0,qt)})(A,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},us=p.__private__.beginPage=function(A){be[++Zt]=[],Lt[Zt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},Ks(Zt),Xe(be[K])},qc=function(A,V){var le,me,ke;switch(e=V||e,typeof A=="string"&&(le=_(A.toLowerCase()),Array.isArray(le)&&(me=le[0],ke=le[1])),Array.isArray(A)&&(me=A[0]*Ut,ke=A[1]*Ut),isNaN(me)&&(me=i[0],ke=i[1]),(me>14400||ke>14400)&&(qn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),me=Math.min(14400,me),ke=Math.min(14400,ke)),i=[me,ke],e.substr(0,1)){case"l":ke>me&&(i=[ke,me]);break;case"p":me>ke&&(i=[ke,me])}us(i),Bt(po),ee(eu),Hl!==0&&ee(Hl+" J"),Gl!==0&&ee(Gl+" j"),yn.publish("addPage",{pageNumber:Zt})},Vu=function(A){A>0&&A<=Zt&&(be.splice(A,1),Lt.splice(A,1),Zt--,K>Zt&&(K=Zt),this.setPage(K))},Ks=function(A){A>0&&A<=Zt&&(K=A)},Zi=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return be.length-1},Hc=function(A,V,le){var me,ke=void 0;return le=le||{},A=A!==void 0?A:Yt[lt].fontName,V=V!==void 0?V:Yt[lt].fontStyle,me=A.toLowerCase(),Qt[me]!==void 0&&Qt[me][V]!==void 0?ke=Qt[me][V]:Qt[A]!==void 0&&Qt[A][V]!==void 0?ke=Qt[A][V]:le.disableWarning===!1&&qn.warn("Unable to look up font label for font '"+A+"', '"+V+"'. Refer to getFontList() for available fonts."),ke||le.noFallback||(ke=Qt.times[V])==null&&(ke=Qt.times.normal),ke},wr=p.__private__.putInfo=function(){var A=jn(),V=function(me){return me};for(var le in h!==null&&(V=Rr.encryptor(A,0)),ee("<<"),ee("/Producer ("+Qi(V("jsPDF "+It.version))+")"),Ft)Ft.hasOwnProperty(le)&&Ft[le]&&ee("/"+le.substr(0,1).toUpperCase()+le.substr(1)+" ("+Qi(V(Ft[le]))+")");ee("/CreationDate ("+Qi(V(oe))+")"),ee(">>"),ee("endobj")},Wu=p.__private__.putCatalog=function(A){var V=(A=A||{}).rootDictionaryObjId||as;switch(jn(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+V+" 0 R"),mt||(mt="fullwidth"),mt){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var le=""+mt;le.substr(le.length-1)==="%"&&(mt=parseInt(mt)/100),typeof mt=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+D(mt)+"]")}switch(Vt||(Vt="continuous"),Vt){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}ut&&ee("/PageMode /"+ut),yn.publish("putCatalog"),ee(">>"),ee("endobj")},uh=p.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(de+1)),ee("/Root "+de+" 0 R"),ee("/Info "+(de-1)+" 0 R"),h!==null&&ee("/Encrypt "+Rr.oid+" 0 R"),ee("/ID [ <"+he+"> <"+he+"> ]"),ee(">>")},br=p.__private__.putHeader=function(){ee("%PDF-"+y),ee("%")},Xs=p.__private__.putXRef=function(){var A="0000000000";ee("xref"),ee("0 "+(de+1)),ee("0000000000 65535 f ");for(var V=1;V<=de;V++)typeof ve[V]=="function"?ee((A+ve[V]()).slice(-10)+" 00000 n "):ve[V]!==void 0?ee((A+ve[V]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},eo=p.__private__.buildDocument=function(){var A;de=0,Ce=0,we=[],ve=[],Le=[],as=sr(),Do=sr(),Xe(we),yn.publish("buildDocument"),br(),Fo(),(function(){yn.publish("putAdditionalObjects");for(var le=0;le<Le.length;le++){var me=Le[le];xr(me.objId,!0),ee(me.content),ee("endobj")}yn.publish("postPutAdditionalObjects")})(),A=[],(function(){for(var le in Yt)Yt.hasOwnProperty(le)&&(d===!1||d===!0&&v.hasOwnProperty(le))&&ss(Yt[le])})(),(function(){var le;for(le in Tt)Tt.hasOwnProperty(le)&&sh(Tt[le])})(),(function(){for(var le in $r)$r.hasOwnProperty(le)&&Gs($r[le])})(),(function(le){var me;for(me in Pt)Pt.hasOwnProperty(me)&&(Pt[me]instanceof Sc?$s(Pt[me]):Pt[me]instanceof Of&&Uu(Pt[me],le))})(A),yn.publish("putResources"),A.forEach(Vn),Vn({resourcesOid:Do,objectOid:Number.MAX_SAFE_INTEGER}),yn.publish("postPutResources"),h!==null&&(Rr.oid=jn(),ee("<<"),ee("/Filter /Standard"),ee("/V "+Rr.v),ee("/R "+Rr.r),ee("/U <"+Rr.toHexString(Rr.U)+">"),ee("/O <"+Rr.toHexString(Rr.O)+">"),ee("/P "+Rr.P),ee(">>"),ee("endobj")),wr(),Wu();var V=Ce;return Xs(),uh(),ee("startxref"),ee(""+V),ee("%%EOF"),Xe(be[K]),we.join(`
`)},aa=p.__private__.getBlob=function(A){return new Blob([Rt(A)],{type:"application/pdf"})},Ys=p.output=p.__private__.output=(co=function(A,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",A){case void 0:return eo();case"save":p.save(V.filename);break;case"arraybuffer":return Rt(eo());case"blob":return aa(eo());case"bloburi":case"bloburl":if(Kt.URL!==void 0&&typeof Kt.URL.createObjectURL=="function")return Kt.URL&&Kt.URL.createObjectURL(aa(eo()))||void 0;qn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var le="",me=eo();try{le=t5(me)}catch{le=t5(unescape(encodeURIComponent(me)))}return"data:application/pdf;filename="+V.filename+";base64,"+le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(ke=V.pdfObjectUrl,ze="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",pt=Kt.open();return pt!==null&&pt.document.write($e),pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',qt=Kt.open();if(qt!==null){qt.document.write(_t);var Jt=this;qt.document.documentElement.querySelector("#pdfViewer").onload=function(){qt.document.title=V.filename,qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Jt.output("bloburl"))}}return qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var vn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',Yn=Kt.open();if(Yn!==null&&(Yn.document.write(vn),Yn.document.title=V.filename),Yn||typeof safari>"u")return Yn;break;case"datauri":case"dataurl":return Kt.document.location.href=this.output("datauristring",V);default:return null}},co.foo=function(){try{return co.apply(this,arguments)}catch(le){var A=le.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var V="Error in function "+A.split(`
`)[0].split("<")[0]+": "+le.message;if(!Kt.console)throw new Error(V);Kt.console.error(V,le),Kt.alert&&alert(V)}},co.foo.bar=co,co.foo),ho=function(A){return Array.isArray(os)===!0&&os.indexOf(A)>-1};switch(r){case"pt":Ut=1;break;case"mm":Ut=72/25.4;break;case"cm":Ut=72/2.54;break;case"in":Ut=72;break;case"px":Ut=ho("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ut=12;break;case"ex":Ut=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ut=r}var Rr=null;$(),W();var Mo=p.__private__.getPageInfo=p.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Lt[A].objId,pageNumber:A,pageContext:Lt[A]}},zl=p.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in Lt)if(Lt[V].objId===A)break;return Mo(V)},Vl=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Lt[K].objId,pageNumber:K,pageContext:Lt[K]}};p.addPage=function(){return qc.apply(this,arguments),this},p.setPage=function(){return Ks.apply(this,arguments),Xe.call(this,be[K]),this},p.insertPage=function(A){return this.addPage(),this.movePage(K,A),this},p.movePage=function(A,V){var le,me;if(A>V){le=be[A],me=Lt[A];for(var ke=A;ke>V;ke--)be[ke]=be[ke-1],Lt[ke]=Lt[ke-1];be[V]=le,Lt[V]=me,this.setPage(V)}else if(A<V){le=be[A],me=Lt[A];for(var ze=A;ze<V;ze++)be[ze]=be[ze+1],Lt[ze]=Lt[ze+1];be[V]=le,Lt[V]=me,this.setPage(V)}return this},p.deletePage=function(){return Vu.apply(this,arguments),this},p.__private__.text=p.text=function(A,V,le,me,ke){var ze,$e,pt,_t,qt,Jt,vn,Yn,_r,Un=(me=me||{}).scope||this;if(typeof A=="number"&&typeof V=="number"&&(typeof le=="string"||Array.isArray(le))){var Tr=le;le=V,V=A,A=Tr}if(arguments[3]instanceof Dt==0?(pt=arguments[4],_t=arguments[5],On(vn=arguments[3])==="object"&&vn!==null||(typeof pt=="string"&&(_t=pt,pt=null),typeof vn=="string"&&(_t=vn,vn=null),typeof vn=="number"&&(pt=vn,vn=null),me={flags:vn,angle:pt,align:_t})):(T("The transform parameter of text() with a Matrix value"),_r=ke),isNaN(V)||isNaN(le)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return Un;var ur,Xr="",Ta=typeof me.lineHeightFactor=="number"?me.lineHeightFactor:Ii,Bo=Un.internal.scaleFactor;function La(xn){return xn=xn.split("	").join(Array(me.TabLen||9).join(" ")),Qi(xn,vn)}function ou(xn){for(var Nn,nr=xn.concat(),Sr=[],zo=nr.length;zo--;)typeof(Nn=nr.shift())=="string"?Sr.push(Nn):Array.isArray(xn)&&(Nn.length===1||Nn[1]===void 0&&Nn[2]===void 0)?Sr.push(Nn[0]):Sr.push([Nn[0],Nn[1],Nn[2]]);return Sr}function Ju(xn,Nn){var nr;if(typeof xn=="string")nr=Nn(xn)[0];else if(Array.isArray(xn)){for(var Sr,zo,Yl=xn.concat(),nl=[],Ba=Yl.length;Ba--;)typeof(Sr=Yl.shift())=="string"?nl.push(Nn(Sr)[0]):Array.isArray(Sr)&&typeof Sr[0]=="string"&&(zo=Nn(Sr[0],Sr[1],Sr[2]),nl.push([zo[0],zo[1],zo[2]]));nr=nl}return nr}var fs=!1,au=!0;if(typeof A=="string")fs=!0;else if(Array.isArray(A)){var hs=A.concat();$e=[];for(var ds,Yr=hs.length;Yr--;)(typeof(ds=hs.shift())!="string"||Array.isArray(ds)&&typeof ds[0]!="string")&&(au=!1);fs=au}if(fs===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var su=He/Un.internal.scaleFactor,uu=su*(Ta-1);switch(me.baseline){case"bottom":le-=uu;break;case"top":le+=su-uu;break;case"hanging":le+=su-2*uu;break;case"middle":le+=su/2-uu}if((Jt=me.maxWidth||0)>0&&(typeof A=="string"?A=Un.splitTextToSize(A,Jt):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(xn,Nn){return xn.concat(Un.splitTextToSize(Nn,Jt))},[]))),ze={text:A,x:V,y:le,options:me,mutex:{pdfEscape:Qi,activeFontKey:lt,fonts:Yt,activeFontSize:He}},yn.publish("preProcessText",ze),A=ze.text,pt=(me=ze.options).angle,_r instanceof Dt==0&&pt&&typeof pt=="number"){pt*=Math.PI/180,me.rotationDirection===0&&(pt=-pt),C===I&&(pt=-pt);var Kl=Math.cos(pt),Xl=Math.sin(pt);_r=new Dt(Kl,Xl,-Xl,Kl,0,0)}else pt&&pt instanceof Dt&&(_r=pt);C!==I||_r||(_r=Lo),(qt=me.charSpace||Pi)!==void 0&&(Xr+=M(X(qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yn=me.horizontalScale)!==void 0&&(Xr+=M(100*Yn)+` Tz
`),me.lang;var yi=-1,jo=me.renderingMode!==void 0?me.renderingMode:me.stroke,fa=Un.internal.getCurrentPageInfo().pageContext;switch(jo){case 0:case!1:case"fill":yi=0;break;case 1:case!0:case"stroke":yi=1;break;case 2:case"fillThenStroke":yi=2;break;case 3:case"invisible":yi=3;break;case 4:case"fillAndAddForClipping":yi=4;break;case 5:case"strokeAndAddPathForClipping":yi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":yi=6;break;case 7:case"addToPathForClipping":yi=7}var Yc=fa.usedRenderingMode!==void 0?fa.usedRenderingMode:-1;yi!==-1?Xr+=yi+` Tr
`:Yc!==-1&&(Xr+=`0 Tr
`),yi!==-1&&(fa.usedRenderingMode=yi),_t=me.align||"left";var no,ps=He*Ta,Qu=Un.internal.pageSize.getWidth(),Zu=Yt[lt];qt=me.charSpace||Pi,Jt=me.maxWidth||0,vn=Object.assign({autoencode:!0,noBOM:!0},me.flags);var Da=[],xo=function(xn){return Un.getStringUnitWidth(xn,{font:Zu,charSpace:qt,fontSize:He,doKerning:!1})*He/Bo};if(Object.prototype.toString.call(A)==="[object Array]"){var ro;$e=ou(A),_t!=="left"&&(no=$e.map(xo));var io,vs=0;if(_t==="right"){V-=no[0],A=[],Yr=$e.length;for(var ha=0;ha<Yr;ha++)ha===0?(io=to(V),ro=Pa(le)):(io=X(vs-no[ha]),ro=-ps),A.push([$e[ha],io,ro]),vs=no[ha]}else if(_t==="center"){V-=no[0]/2,A=[],Yr=$e.length;for(var Fa=0;Fa<Yr;Fa++)Fa===0?(io=to(V),ro=Pa(le)):(io=X((vs-no[Fa])/2),ro=-ps),A.push([$e[Fa],io,ro]),vs=no[Fa]}else if(_t==="left"){A=[],Yr=$e.length;for(var Ma=0;Ma<Yr;Ma++)A.push($e[Ma])}else if(_t==="justify"&&Zu.encoding==="Identity-H"){A=[],Yr=$e.length,Jt=Jt!==0?Jt:Qu;for(var da=0,lr=0;lr<Yr;lr++)if(ro=lr===0?Pa(le):-ps,io=lr===0?to(V):da,lr<Yr-1){var lu=X((Jt-no[lr])/($e[lr].split(" ").length-1)),pa=$e[lr].split(" ");A.push([pa[0]+" ",io,ro]),da=0;for(var Uo=1;Uo<pa.length;Uo++){var cu=(xo(pa[Uo-1]+" "+pa[Uo])-xo(pa[Uo]))*Bo+lu;Uo==pa.length-1?A.push([pa[Uo],cu,0]):A.push([pa[Uo]+" ",cu,0]),da-=cu}}else A.push([$e[lr],io,ro]);A.push(["",da,0])}else{if(_t!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],Yr=$e.length,Jt=Jt!==0?Jt:Qu,lr=0;lr<Yr;lr++){ro=lr===0?Pa(le):-ps,io=lr===0?to(V):0;var fu=$e[lr].split(" ").length-1,el=fu>0?(Jt-no[lr])/fu:0;lr<Yr-1?Da.push(M(X(el))):Da.push(0),A.push([$e[lr],io,ro])}}}(typeof me.R2L=="boolean"?me.R2L:ht)===!0&&(A=Ju(A,function(xn,Nn,nr){return[xn.split("").reverse().join(""),Nn,nr]})),ze={text:A,x:V,y:le,options:me,mutex:{pdfEscape:Qi,activeFontKey:lt,fonts:Yt,activeFontSize:He}},yn.publish("postProcessText",ze),A=ze.text,ur=ze.mutex.isHex||!1;var tl=Yt[lt].encoding;tl!=="WinAnsiEncoding"&&tl!=="StandardEncoding"||(A=Ju(A,function(xn,Nn,nr){return[La(xn),Nn,nr]})),$e=ou(A),A=[];for(var Oa,ms,gs,hu=Array.isArray($e[0])?1:0,ys="",du=function(xn,Nn,nr){var Sr="";return nr instanceof Dt?(nr=typeof me.angle=="number"?Yi(nr,new Dt(1,0,0,1,xn,Nn)):Yi(new Dt(1,0,0,1,xn,Nn),nr),C===I&&(nr=Yi(new Dt(1,0,0,-1,0,0),nr)),Sr=nr.join(" ")+` Tm
`):Sr=M(xn)+" "+M(Nn)+` Td
`,Sr},tr=0;tr<$e.length;tr++){switch(ys="",hu){case 1:gs=(ur?"<":"(")+$e[tr][0]+(ur?">":")"),Oa=parseFloat($e[tr][1]),ms=parseFloat($e[tr][2]);break;case 0:gs=(ur?"<":"(")+$e[tr]+(ur?">":")"),Oa=to(V),ms=Pa(le)}Da!==void 0&&Da[tr]!==void 0&&(ys=Da[tr]+` Tw
`),tr===0?A.push(ys+du(Oa,ms,_r)+gs):hu===0?A.push(ys+gs):hu===1&&A.push(ys+du(Oa,ms,_r)+gs)}A=hu===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var Ri=`BT
/`;return Ri+=lt+" "+He+` Tf
`,Ri+=M(He*Ta)+` TL
`,Ri+=Oo+`
`,Ri+=Xr,Ri+=A,ee(Ri+="ET"),v[lt]=!0,Un};var Js=p.__private__.clip=p.clip=function(A){return ee(A==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Js("evenodd")},p.__private__.discardPath=p.discardPath=function(){return ee("n"),this};var sa=p.__private__.isValidStyle=function(A){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(V=!0),V};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(A){return sa(A)&&(c=A),this};var qu=p.__private__.getStyle=p.getStyle=function(A){var V=c;switch(A){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=A}return V},mn=p.close=function(){return ee("h"),this};p.stroke=function(){return ee("S"),this},p.fill=function(A){return Qs("f",A),this},p.fillEvenOdd=function(A){return Qs("f*",A),this},p.fillStroke=function(A){return Qs("B",A),this},p.fillStrokeEvenOdd=function(A){return Qs("B*",A),this};var Qs=function(A,V){On(V)==="object"?Gc(V,A):ee(A)},ls=function(A){A===null||C===I&&A===void 0||(A=qu(A),ee(A))};function Wl(A,V,le,me,ke){var ze=new Of(V||this.boundingBox,le||this.xStep,me||this.yStep,this.gState,ke||this.matrix);ze.stream=this.stream;var $e=A+"$$"+this.cloneIndex+++"$$";return ai($e,ze),ze}var Gc=function(A,V){var le=En[A.key],me=Pt[le];if(me instanceof Sc)ee("q"),ee($c(V)),me.gState&&p.setGState(me.gState),ee(A.matrix.toString()+" cm"),ee("/"+le+" sh"),ee("Q");else if(me instanceof Of){var ke=new Dt(1,0,0,-1,0,yo());A.matrix&&(ke=ke.multiply(A.matrix||Lo),le=Wl.call(me,A.key,A.boundingBox,A.xStep,A.yStep,ke).id),ee("q"),ee("/Pattern cs"),ee("/"+le+" scn"),me.gState&&p.setGState(me.gState),ee(V),ee("Q")}},$c=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Hu=p.moveTo=function(A,V){return ee(M(X(A))+" "+M(G(V))+" m"),this},Gu=p.lineTo=function(A,V){return ee(M(X(A))+" "+M(G(V))+" l"),this},Ni=p.curveTo=function(A,V,le,me,ke,ze){return ee([M(X(A)),M(G(V)),M(X(le)),M(G(me)),M(X(ke)),M(G(ze)),"c"].join(" ")),this};p.__private__.line=p.line=function(A,V,le,me,ke){if(isNaN(A)||isNaN(V)||isNaN(le)||isNaN(me)||!sa(ke))throw new Error("Invalid arguments passed to jsPDF.line");return C===E?this.lines([[le-A,me-V]],A,V,[1,1],ke||"S"):this.lines([[le-A,me-V]],A,V,[1,1]).stroke()},p.__private__.lines=p.lines=function(A,V,le,me,ke,ze){var $e,pt,_t,qt,Jt,vn,Yn,_r,Un,Tr,ur,Xr;if(typeof A=="number"&&(Xr=le,le=V,V=A,A=Xr),me=me||[1,1],ze=ze||!1,isNaN(V)||isNaN(le)||!Array.isArray(A)||!Array.isArray(me)||!sa(ke)||typeof ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Hu(V,le),$e=me[0],pt=me[1],qt=A.length,Tr=V,ur=le,_t=0;_t<qt;_t++)(Jt=A[_t]).length===2?(Tr=Jt[0]*$e+Tr,ur=Jt[1]*pt+ur,Gu(Tr,ur)):(vn=Jt[0]*$e+Tr,Yn=Jt[1]*pt+ur,_r=Jt[2]*$e+Tr,Un=Jt[3]*pt+ur,Tr=Jt[4]*$e+Tr,ur=Jt[5]*pt+ur,Ni(vn,Yn,_r,Un,Tr,ur));return ze&&mn(),ls(ke),this},p.path=function(A){for(var V=0;V<A.length;V++){var le=A[V],me=le.c;switch(le.op){case"m":Hu(me[0],me[1]);break;case"l":Gu(me[0],me[1]);break;case"c":Ni.apply(this,me);break;case"h":mn()}}return this},p.__private__.rect=p.rect=function(A,V,le,me,ke){if(isNaN(A)||isNaN(V)||isNaN(le)||isNaN(me)||!sa(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return C===E&&(me=-me),ee([M(X(A)),M(G(V)),M(X(le)),M(X(me)),"re"].join(" ")),ls(ke),this},p.__private__.triangle=p.triangle=function(A,V,le,me,ke,ze,$e){if(isNaN(A)||isNaN(V)||isNaN(le)||isNaN(me)||isNaN(ke)||isNaN(ze)||!sa($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[le-A,me-V],[ke-le,ze-me],[A-ke,V-ze]],A,V,[1,1],$e,!0),this},p.__private__.roundedRect=p.roundedRect=function(A,V,le,me,ke,ze,$e){if(isNaN(A)||isNaN(V)||isNaN(le)||isNaN(me)||isNaN(ke)||isNaN(ze)||!sa($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pt=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*le),ze=Math.min(ze,.5*me),this.lines([[le-2*ke,0],[ke*pt,0,ke,ze-ze*pt,ke,ze],[0,me-2*ze],[0,ze*pt,-ke*pt,ze,-ke,ze],[2*ke-le,0],[-ke*pt,0,-ke,-ze*pt,-ke,-ze],[0,2*ze-me],[0,-ze*pt,ke*pt,-ze,ke,-ze]],A+ke,V,[1,1],$e,!0),this},p.__private__.ellipse=p.ellipse=function(A,V,le,me,ke){if(isNaN(A)||isNaN(V)||isNaN(le)||isNaN(me)||!sa(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ze=4/3*(Math.SQRT2-1)*le,$e=4/3*(Math.SQRT2-1)*me;return Hu(A+le,V),Ni(A+le,V-$e,A+ze,V-me,A,V-me),Ni(A-ze,V-me,A-le,V-$e,A-le,V),Ni(A-le,V+$e,A-ze,V+me,A,V+me),Ni(A+ze,V+me,A+le,V+$e,A+le,V),ls(ke),this},p.__private__.circle=p.circle=function(A,V,le,me){if(isNaN(A)||isNaN(V)||isNaN(le)||!sa(me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,V,le,le,me)},p.setFont=function(A,V,le){return le&&(V=U(V,le)),lt=Hc(A,V,{disableWarning:!1}),this};var ua=p.__private__.getFont=p.getFont=function(){return Yt[Hc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var A,V,le={};for(A in Qt)if(Qt.hasOwnProperty(A))for(V in le[A]=[],Qt[A])Qt[A].hasOwnProperty(V)&&le[A].push(V);return le},p.addFont=function(A,V,le,me,ke){var ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ze.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&ze.indexOf(arguments[3])==-1&&(le=U(le,me)),zu.call(this,A,V,le,ke=ke||"Identity-H")};var Ii,po=n.lineWidth||.200025,Zs=p.__private__.getLineWidth=p.getLineWidth=function(){return po},Bt=p.__private__.setLineWidth=p.setLineWidth=function(A){return po=A,ee(M(X(A))+" w"),this};p.__private__.setLineDash=It.API.setLineDash=It.API.setLineDashPattern=function(A,V){if(A=A||[],V=V||0,isNaN(V)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(le){return M(X(le))}).join(" "),V=M(X(V)),ee("["+A+"] "+V+" d"),this};var la=p.__private__.getLineHeight=p.getLineHeight=function(){return He*Ii};p.__private__.getLineHeight=p.getLineHeight=function(){return He*Ii};var lh=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(Ii=A),this},Kc=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Ii};lh(n.lineHeight);var to=p.__private__.getHorizontalCoordinate=function(A){return X(A)},Pa=p.__private__.getVerticalCoordinate=function(A){return C===I?A:Lt[K].mediaBox.topRightY-Lt[K].mediaBox.bottomLeftY-X(A)},Xc=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(A){return M(to(A))},$u=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(A){return M(Pa(A))},eu=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return oa(eu)},p.__private__.setStrokeColor=p.setDrawColor=function(A,V,le,me){return eu=Kr({ch1:A,ch2:V,ch3:le,ch4:me,pdfColorType:"draw",precision:2}),ee(eu),this};var ql=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return oa(ql)},p.__private__.setFillColor=p.setFillColor=function(A,V,le,me){return ql=Kr({ch1:A,ch2:V,ch3:le,ch4:me,pdfColorType:"fill",precision:2}),ee(ql),this};var Oo=n.textColor||"0 g",tu=p.__private__.getTextColor=p.getTextColor=function(){return oa(Oo)};p.__private__.setTextColor=p.setTextColor=function(A,V,le,me){return Oo=Kr({ch1:A,ch2:V,ch3:le,ch4:me,pdfColorType:"text",precision:3}),this};var Pi=n.charSpace,Ku=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Pi||0)};p.__private__.setCharSpace=p.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Pi=A,this};var Hl=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(A){var V=p.CapJoinStyles[A];if(V===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hl=V,ee(V+" J"),this};var Gl=0;p.__private__.setLineJoin=p.setLineJoin=function(A){var V=p.CapJoinStyles[A];if(V===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gl=V,ee(V+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(M(X(A))+" M"),this},p.GState=Ev,p.setGState=function(A){(A=typeof A=="string"?Tt[Ht[A]]:Xu(null,A)).equals(Cn)||(ee("/"+A.id+" gs"),Cn=A)};var Xu=function(A,V){if(!A||!Ht[A]){var le=!1;for(var me in Tt)if(Tt.hasOwnProperty(me)&&Tt[me].equals(V)){le=!0;break}if(le)V=Tt[me];else{var ke="GS"+(Object.keys(Tt).length+1).toString(10);Tt[ke]=V,V.id=ke}return A&&(Ht[A]=V.id),yn.publish("addGState",V),V}};p.addGState=function(A,V){return Xu(A,V),this},p.saveGraphicsState=function(){return ee("q"),Bn.push({key:lt,size:He,color:Oo}),this},p.restoreGraphicsState=function(){ee("Q");var A=Bn.pop();return lt=A.key,He=A.size,Oo=A.color,Cn=null,this},p.setCurrentTransformationMatrix=function(A){return ee(A.toString()+" cm"),this},p.comment=function(A){return ee("#"+A),this};var vo=function(A,V){var le=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return le},set:function(ze){isNaN(ze)||(le=parseFloat(ze))}});var me=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return me},set:function(ze){isNaN(ze)||(me=parseFloat(ze))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(ze){ke=ze.toString()}}),this},nu=function(A,V,le,me){vo.call(this,A,V),this.type="rect";var ke=le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function($e){isNaN($e)||(ke=parseFloat($e))}});var ze=me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ze},set:function($e){isNaN($e)||(ze=parseFloat($e))}}),this},ru=function(){this.page=Zt,this.currentPage=K,this.pages=be.slice(0),this.pagesContext=Lt.slice(0),this.x=dt,this.y=Xn,this.matrix=un,this.width=cs(K),this.height=iu(K),this.outputDestination=Re,this.id="",this.objectNumber=-1};ru.prototype.restore=function(){Zt=this.page,K=this.currentPage,Lt=this.pagesContext,be=this.pages,dt=this.x,Xn=this.y,un=this.matrix,$l(K,this.width),go(K,this.height),Re=this.outputDestination};var mo=function(A,V,le,me,ke){lo.push(new ru),Zt=K=0,be=[],dt=A,Xn=V,un=ke,us([le,me])};for(var Ra in p.beginFormObject=function(A,V,le,me,ke){return mo(A,V,le,me,ke),this},p.endFormObject=function(A){return(function(V){if(ia[V])lo.pop().restore();else{var le=new ru,me="Xo"+(Object.keys($r).length+1).toString(10);le.id=me,ia[V]=me,$r[me]=le,yn.publish("addFormObject",le),lo.pop().restore()}})(A),this},p.doFormObject=function(A,V){var le=$r[ia[A]];return ee("q"),ee(V.toString()+" cm"),ee("/"+le.id+" Do"),ee("Q"),this},p.getFormObject=function(A){var V=$r[ia[A]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},p.save=function(A,V){return A=A||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(bc(aa(eo()),A),typeof bc.unload=="function"&&Kt.setTimeout&&setTimeout(bc.unload,911),this):new Promise(function(le,me){try{var ke=bc(aa(eo()),A);typeof bc.unload=="function"&&Kt.setTimeout&&setTimeout(bc.unload,911),le(ke)}catch(ze){me(ze.message)}})},It.API)It.API.hasOwnProperty(Ra)&&(Ra==="events"&&It.API.events.length?(function(A,V){var le,me,ke;for(ke=V.length-1;ke!==-1;ke--)le=V[ke][0],me=V[ke][1],A.subscribe.apply(A,[le].concat(typeof me=="function"?[me]:me))})(yn,It.API.events):p[Ra]=It.API[Ra]);function cs(A){return Lt[A].mediaBox.topRightX-Lt[A].mediaBox.bottomLeftX}function $l(A,V){Lt[A].mediaBox.topRightX=V+Lt[A].mediaBox.bottomLeftX}function iu(A){return Lt[A].mediaBox.topRightY-Lt[A].mediaBox.bottomLeftY}function go(A,V){Lt[A].mediaBox.topRightY=V+Lt[A].mediaBox.bottomLeftY}var ca=p.getPageWidth=function(A){return cs(A=A||K)/Ut},si=p.setPageWidth=function(A,V){$l(A,V*Ut)},yo=p.getPageHeight=function(A){return iu(A=A||K)/Ut},Yu=p.setPageHeight=function(A,V){go(A,V*Ut)};return p.internal={pdfEscape:Qi,getStyle:qu,getFont:ua,getFontSize:nt,getCharSpace:Ku,getTextColor:tu,getLineHeight:la,getLineHeightFactor:Kc,getLineWidth:Zs,write:Je,getHorizontalCoordinate:to,getVerticalCoordinate:Pa,getCoordinateString:Xc,getVerticalCoordinateString:$u,collections:{},newObject:jn,newAdditionalObject:Ia,newObjectDeferred:sr,newObjectDeferredBegin:xr,getFilters:fo,putStream:Ji,events:yn,scaleFactor:Ut,pageSize:{getWidth:function(){return ca(K)},setWidth:function(A){si(K,A)},getHeight:function(){return yo(K)},setHeight:function(A){Yu(K,A)}},encryptionOptions:h,encryption:Rr,getEncryptor:function(A){return h!==null?Rr.encryptor(A,0):function(V){return V}},output:Ys,getNumberOfPages:Zi,get pages(){return be},out:ee,f2:D,f3:B,getPageInfo:Mo,getPageInfoByObjId:zl,getCurrentPageInfo:Vl,getPDFVersion:x,Point:vo,Rectangle:nu,Matrix:Dt,hasHotfix:ho},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ca(K)},set:function(A){si(K,A)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return yo(K)},set:function(A){Yu(K,A)},enumerable:!0,configurable:!0}),(function(A){for(var V=0,le=ft.length;V<le;V++){var me=zu.call(this,A[V][0],A[V][1],A[V][2],ft[V][3],!0);d===!1&&(v[me]=!0);var ke=A[V][0].split("-");Wc({id:me,fontName:ke[0],fontStyle:ke[1]||""})}yn.publish("addFonts",{fonts:Yt,dictionary:Qt})}).call(p,ft),lt="F1",qc(i,e),yn.publish("initialized"),p}Pf.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Pf.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Pf.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},Pf.prototype.processOwnerPassword=function(n,t){return Hg(qg(t).substr(0,5),n)},Pf.prototype.encryptor=function(n,t){var e=qg(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return Hg(e,r)}},Ev.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||On(n)!==On(this))return!1;var r=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;r++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&r--;return r===0},It.API={events:[]},It.version="3.0.4";var Ir=It.API,D2=1,Vc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cf=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},on=function(n){return n.toFixed(2)},Cl=function(n){return n.toFixed(5)};Ir.__acroform__={};var To=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},o5=function(n){return n*D2},Es=function(n){var t=new iC,e=yt.internal.getHeight(n)||0,r=yt.internal.getWidth(n)||0;return t.BBox=[0,0,Number(on(r)),Number(on(e))],t},m7=Ir.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<t},g7=Ir.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<t)},y7=Ir.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<t?1:0},Or=Ir.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return y7(n,t-1)},Br=Ir.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return m7(n,t-1)},jr=Ir.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return g7(n,t-1)},x7=Ir.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],u={};return u.lowerLeft_X=e(i)||0,u.lowerLeft_Y=r(o+a)||0,u.upperRight_X=e(i+s)||0,u.upperRight_Y=r(o)||0,[Number(on(u.lowerLeft_X)),Number(on(u.lowerLeft_Y)),Number(on(u.upperRight_X)),Number(on(u.upperRight_Y))]},w7=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,r=Gg(n,e),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+i+" "+on(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=Es(n);return o.scope=n.scope,o.stream=t.join(`
`),o}},Gg=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=n.multiline?i.map(function(D){return D.split(`
`)}):i.map(function(D){return[D]});var o=e,s=yt.internal.getHeight(n)||0;s=s<0?-s:s;var a=yt.internal.getWidth(n)||0;a=a<0?-a:a;var u=function(D,B,X){if(D+1<i.length){var G=B+" "+i[D+1][0];return Op(G,n,X).width<=a-4}return!1};o++;e:for(;o>0;){t="",o--;var c,h,d=Op("3",n,o).height,v=n.multiline?s-o:(s-d)/2,p=v+=2,y=0,x=0,w=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+Op(t,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var _="",E=0,I=0;I<i.length;I++)if(i.hasOwnProperty(I)){var C=!1;if(i[I].length!==1&&w!==i[I].length-1){if((d+2)*(E+2)+2>s)continue e;_+=i[I][w],C=!0,x=I,I--}else{_=(_+=i[I][w]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var N=parseInt(I),O=u(N,_,o),U=I>=i.length-1;if(O&&!U){_+=" ",w=0;continue}if(O||U){if(U)x=N;else if(n.multiline&&(d+2)*(E+2)+2>s)continue e}else{if(!n.multiline||(d+2)*(E+2)+2>s)continue e;x=N}}for(var M="",T=y;T<=x;T++){var j=i[T];if(n.multiline){if(T===x){M+=j[w]+" ",w=(w+1)%j.length;continue}if(T===y){M+=j[j.length-1]+" ";continue}}M+=j[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,h=Op(M,n,o).width,n.textAlign){case"right":c=a-h-2;break;case"center":c=(a-h)/2;break;default:c=2}t+=on(c)+" "+on(p)+` Td
`,t+="("+Vc(M)+`) Tj
`,t+=-on(c)+` 0 Td
`,p=-(o+2),h=0,y=C?x:x+1,E++,_=""}break}return r.text=t,r.fontSize=o,r},Op=function(n,t,e){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:i}},b7={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},_7=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===e.type&&r.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},S7=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(rs.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(b7)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D2=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new oC,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&_7(o,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],u=[],c=a.Rect;if(a.Rect&&(a.Rect=x7(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=yt.createDefaultAppearanceStream(a),On(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(u=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=w7(a);u.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var d="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var p=a.appearanceStreamContent[v];if(d+="/"+v+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var s in p)if(p.hasOwnProperty(s)){var y=p[s];typeof y=="function"&&(y=y.call(i,a)),d+="/"+s+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(i,a)),d+="/"+s+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);d+=">>"}u.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:a.objId}),i.internal.out("endobj")}o&&(function(x,w){for(var _ in x)if(x.hasOwnProperty(_)){var E=_,I=x[_];w.internal.newObjectDeferredBegin(I.objId,!0),On(I)==="object"&&typeof I.putStream=="function"&&I.putStream(),delete x[E]}})(i.internal.acroformPlugin.xForms,i)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},rC=Ir.__acroform__.arrayToPdfArray=function(n,t,e){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),On(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(t!==void 0&&e&&(r=e.internal.getEncryptor(t)),i+="("+Vc(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},$0=function(n,t,e){var r=function(i){return i};return t!==void 0&&e&&(r=e.internal.getEncryptor(t)),(n=n||"").toString(),"("+Vc(r(n))+")"},Ls=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ls.prototype.toString=function(){return this.objId+" 0 R"},Ls.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Ls.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var r=t[e],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:rC(i,this.objId,this.scope)}):i instanceof Ls?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var iC=function(){Ls.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};To(iC,Ls);var oC=function(){Ls.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(r){return r};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Vc(e(n))+")"}},set:function(e){n=e}})};To(oC,Ls);var rs=function n(){Ls.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Or(t,3)},set:function(_){_?this.F=Br(t,3):this.F=jr(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');e=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Nv)return;o="FieldObject"+n.FieldNum++}var _=function(E){return E};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Vc(_(o))+")"},set:function(_){o=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(_){o=_}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(_){s=_}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(_){u=_}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/D2:c},set:function(_){c=_}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(_){h=_}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Nv||this instanceof Pc))return $0(d,this.objId,this.scope)},set:function(_){_=_.toString(),d=_}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof vi==0?$0(v,this.objId,this.scope):v},set:function(_){_=_.toString(),v=this instanceof vi==0?_.substr(0,1)==="("?Cf(_.substr(1,_.length-2)):Cf(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof vi==1?Cf(v.substr(1,v.length-1)):v},set:function(_){_=_.toString(),v=this instanceof vi==1?"/"+_:_}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof vi==0?$0(p,this.objId,this.scope):p},set:function(_){_=_.toString(),p=this instanceof vi==0?_.substr(0,1)==="("?Cf(_.substr(1,_.length-2)):Cf(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof vi==1?Cf(p.substr(1,p.length-1)):p},set:function(_){_=_.toString(),p=this instanceof vi==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(_){_=!!_,x=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(_){y=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,1)},set:function(_){_?this.Ff=Br(this.Ff,1):this.Ff=jr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,2)},set:function(_){_?this.Ff=Br(this.Ff,2):this.Ff=jr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,3)},set:function(_){_?this.Ff=Br(this.Ff,3):this.Ff=jr(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');w=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(w){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:w=2;break;case"center":case 1:w=1;break;default:w=0}}})};To(rs,Ls);var Hf=function(){rs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return rC(t,this.objId,this.scope)},set:function(e){var r,i;i=[],typeof(r=e)=="string"&&(i=(function(o,s,a){a||(a=1);for(var u,c=[];u=s.exec(o);)c.push(u[a]);return c})(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,r){for(r=r||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,18)},set:function(e){e?this.Ff=Br(this.Ff,18):this.Ff=jr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=Br(this.Ff,19):this.Ff=jr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,20)},set:function(e){e?(this.Ff=Br(this.Ff,20),t.sort()):this.Ff=jr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,22)},set:function(e){e?this.Ff=Br(this.Ff,22):this.Ff=jr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,23)},set:function(e){e?this.Ff=Br(this.Ff,23):this.Ff=jr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,27)},set:function(e){e?this.Ff=Br(this.Ff,27):this.Ff=jr(this.Ff,27)}}),this.hasAppearanceStream=!1};To(Hf,rs);var Gf=function(){Hf.call(this),this.fontName="helvetica",this.combo=!1};To(Gf,Hf);var $f=function(){Gf.call(this),this.combo=!0};To($f,Gf);var Gp=function(){$f.call(this),this.edit=!0};To(Gp,$f);var vi=function(){rs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,15)},set:function(e){e?this.Ff=Br(this.Ff,15):this.Ff=jr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,16)},set:function(e){e?this.Ff=Br(this.Ff,16):this.Ff=jr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,17)},set:function(e){e?this.Ff=Br(this.Ff,17):this.Ff=jr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,26)},set:function(e){e?this.Ff=Br(this.Ff,26):this.Ff=jr(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(o){return o};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Vc(e(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(e){On(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};To(vi,rs);var $p=function(){vi.call(this),this.pushButton=!0};To($p,vi);var Kf=function(){vi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};To(Kf,vi);var Nv=function(){var n,t;rs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var e,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+Vc(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){On(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};To(Nv,rs),Kf.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},Kf.prototype.createOption=function(n){var t=new Nv;return t.Parent=this,t.optionName=n,this.Kids.push(t),C7.call(this.scope,t),t};var Kp=function(){vi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};To(Kp,vi);var Pc=function(){rs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,13)},set:function(t){t?this.Ff=Br(this.Ff,13):this.Ff=jr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,21)},set:function(t){t?this.Ff=Br(this.Ff,21):this.Ff=jr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,23)},set:function(t){t?this.Ff=Br(this.Ff,23):this.Ff=jr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,24)},set:function(t){t?this.Ff=Br(this.Ff,24):this.Ff=jr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,25)},set:function(t){t?this.Ff=Br(this.Ff,25):this.Ff=jr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,26)},set:function(t){t?this.Ff=Br(this.Ff,26):this.Ff=jr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};To(Pc,rs);var Xp=function(){Pc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,14)},set:function(n){n?this.Ff=Br(this.Ff,14):this.Ff=jr(this.Ff,14)}}),this.password=!0};To(Xp,Pc);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=Es(n);t.scope=n.scope;var e=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=Gg(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+r+" "+on(o.fontSize)+" Tf "+i),e.push("BT"),e.push(o.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=Es(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=yt.internal.getHeight(n),s=yt.internal.getWidth(n),a=Gg(n,n.caption);return i.push("1 g"),i.push("0 0 "+on(s)+" "+on(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+on(s-1)+" "+on(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+e+" "+on(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=Es(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=yt.RadioButton.Circle.YesNormal,t.D[n]=yt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=Es(n);t.scope=n.scope;var e=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=yt.internal.Bezier_C,o=Number((r*i).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Cl(yt.internal.getWidth(n)/2)+" "+Cl(yt.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),e.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),e.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),e.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=Es(n);t.scope=n.scope;var e=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*yt.internal.Bezier_C).toFixed(5)),s=Number((r*yt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Cl(yt.internal.getWidth(n)/2)+" "+Cl(yt.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),e.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),e.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),e.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Cl(yt.internal.getWidth(n)/2)+" "+Cl(yt.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=Es(n);t.scope=n.scope;var e=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*yt.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Cl(yt.internal.getWidth(n)/2)+" "+Cl(yt.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),e.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),e.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),e.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=yt.RadioButton.Cross.YesNormal,t.D[n]=yt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=Es(n);t.scope=n.scope;var e=[],r=yt.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+on(yt.internal.getWidth(n)-2)+" "+on(yt.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(on(r.x1.x)+" "+on(r.x1.y)+" m"),e.push(on(r.x2.x)+" "+on(r.x2.y)+" l"),e.push(on(r.x4.x)+" "+on(r.x4.y)+" m"),e.push(on(r.x3.x)+" "+on(r.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=Es(n);t.scope=n.scope;var e=yt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+on(yt.internal.getWidth(n)-2)+" "+on(yt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(on(e.x1.x)+" "+on(e.x1.y)+" m"),r.push(on(e.x2.x)+" "+on(e.x2.y)+" l"),r.push(on(e.x4.x)+" "+on(e.x4.y)+" m"),r.push(on(e.x3.x)+" "+on(e.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(n){var t=Es(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};yt.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=yt.internal.getWidth(n),e=yt.internal.getHeight(n),r=Math.min(t,e);return{x1:{x:(t-r)/2,y:(e-r)/2+r},x2:{x:(t-r)/2+r,y:(e-r)/2},x3:{x:(t-r)/2,y:(e-r)/2},x4:{x:(t-r)/2+r,y:(e-r)/2+r}}}},yt.internal.getWidth=function(n){var t=0;return On(n)==="object"&&(t=o5(n.Rect[2])),t},yt.internal.getHeight=function(n){var t=0;return On(n)==="object"&&(t=o5(n.Rect[3])),t};var C7=Ir.addField=function(n){if(S7(this,n),!(n instanceof rs))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Ir.AcroFormChoiceField=Hf,Ir.AcroFormListBox=Gf,Ir.AcroFormComboBox=$f,Ir.AcroFormEditBox=Gp,Ir.AcroFormButton=vi,Ir.AcroFormPushButton=$p,Ir.AcroFormRadioButton=Kf,Ir.AcroFormCheckBox=Kp,Ir.AcroFormTextField=Pc,Ir.AcroFormPasswordField=Xp,Ir.AcroFormAppearance=yt,Ir.AcroForm={ChoiceField:Hf,ListBox:Gf,ComboBox:$f,EditBox:Gp,Button:vi,PushButton:$p,RadioButton:Kf,CheckBox:Kp,TextField:Pc,PasswordField:Xp,Appearance:yt},It.AcroForm={ChoiceField:Hf,ListBox:Gf,ComboBox:$f,EditBox:Gp,Button:vi,PushButton:$p,RadioButton:Kf,CheckBox:Kp,TextField:Pc,PasswordField:Xp,Appearance:yt};It.AcroForm;function aC(n){return n.reduce(function(t,e,r){return t[e]=r,t},{})}(function(n){var t="addImage_";n.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(D,B){var X,G,oe,he,ae,W=e;if((B=B||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(O(D))for(ae in r)for(oe=r[ae],X=0;X<oe.length;X+=1){for(he=!0,G=0;G<oe[X].length;G+=1)if(oe[X][G]!==void 0&&oe[X][G]!==D[G]){he=!1;break}if(he===!0){W=ae;break}}else for(ae in r)for(oe=r[ae],X=0;X<oe.length;X+=1){for(he=!0,G=0;G<oe[X].length;G+=1)if(oe[X][G]!==void 0&&oe[X][G]!==D.charCodeAt(G)){he=!1;break}if(he===!0){W=ae;break}}return W===e&&B!==e&&(W=B),W},o=function D(B){for(var X=this.internal.write,G=this.internal.putStream,oe=(0,this.internal.getFilters)();oe.indexOf("FlateEncode")!==-1;)oe.splice(oe.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var he=[];if(he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Image"}),he.push({key:"Width",value:B.width}),he.push({key:"Height",value:B.height}),B.colorSpace===_.INDEXED?he.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(he.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===_.DEVICE_CMYK&&he.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),he.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&he.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var ae="",W=0,ne=B.transparency.length;W<ne;W++)ae+=B.transparency[W]+" "+B.transparency[W]+" ";he.push({key:"Mask",value:"["+ae+"]"})}B.sMask!==void 0&&he.push({key:"SMask",value:B.objectId+1+" 0 R"});var se=B.filter!==void 0?["/"+B.filter]:void 0;if(G({data:B.data,additionalKeyValues:he,alreadyAppliedFilters:se,objectId:B.objectId}),X("endobj"),"sMask"in B&&B.sMask!==void 0){var $,F=($=B.sMaskBitsPerComponent)!==null&&$!==void 0?$:B.bitsPerComponent,K={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:F,data:B.sMask};"filter"in B&&(K.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(F," /Columns ").concat(B.width),K.filter=B.filter),D.call(this,K)}if(B.colorSpace===_.INDEXED){var Q=this.internal.newObject();G({data:M(new Uint8Array(B.palette)),objectId:Q}),X("endobj")}},s=function(){var D=this.internal.collections[t+"images"];for(var B in D)o.call(this,D[B])},a=function(){var D,B=this.internal.collections[t+"images"],X=this.internal.write;for(var G in B)X("/I"+(D=B[G]).index,D.objectId,"0","R")},u=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var D=this.internal.collections[t+"images"];return u.call(this),D},h=function(){return Object.keys(this.internal.collections[t+"images"]).length},d=function(D){return typeof n["process"+D.toUpperCase()]=="function"},v=function(D){return On(D)==="object"&&D.nodeType===1},p=function(D,B){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var X=""+D.getAttribute("src");if(X.indexOf("data:image/")===0)return Hp(unescape(X).split("base64,").pop());var G=n.loadFile(X,!0);if(G!==void 0)return G}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var oe;switch(B){case"PNG":oe="image/png";break;case"WEBP":oe="image/webp";break;default:oe="image/jpeg"}return Hp(D.toDataURL(oe,1).split("base64,").pop())}},y=function(D){var B=this.internal.collections[t+"images"];if(B){for(var X in B)if(D===B[X].alias)return B[X]}},x=function(D,B,X){return D||B||(D=-96,B=-96),D<0&&(D=-1*X.width*72/D/this.internal.scaleFactor),B<0&&(B=-1*X.height*72/B/this.internal.scaleFactor),D===0&&(D=B*X.width/X.height),B===0&&(B=D*X.height/X.width),[D,B]},w=function(D,B,X,G,oe,he){var ae=x.call(this,X,G,oe),W=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,se=c.call(this);if(X=ae[0],G=ae[1],se[oe.index]=oe,he){he*=Math.PI/180;var $=Math.cos(he),F=Math.sin(he),K=function(ue){return ue.toFixed(4)},Q=[K($),K(F),K(-1*F),K($),0,0,"cm"]}this.internal.write("q"),he?(this.internal.write([1,"0","0",1,W(D),ne(B+G),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([W(X),"0","0",W(G),"0","0","cm"].join(" "))):this.internal.write([W(X),"0","0",W(G),W(D),ne(B+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+oe.index+" Do"),this.internal.write("Q")},_=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=n.__addimage__.sHashCode=function(D){var B,X,G=0;if(typeof D=="string")for(X=D.length,B=0;B<X;B++)G=(G<<5)-G+D.charCodeAt(B),G|=0;else if(O(D))for(X=D.byteLength/2,B=0;B<X;B++)G=(G<<5)-G+D[B],G|=0;return G},C=n.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var B=!0;return D.length===0&&(B=!1),D.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(B=!1),B},N=n.__addimage__.extractImageFromDataUrl=function(D){if(D==null||!(D=D.trim()).startsWith("data:"))return null;var B=D.indexOf(",");return B<0?null:D.substring(0,B).trim().endsWith("base64")?D.substring(B+1):null};n.__addimage__.isArrayBuffer=function(D){return D instanceof ArrayBuffer};var O=n.__addimage__.isArrayBufferView=function(D){return D instanceof Int8Array||D instanceof Uint8Array||D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array},U=n.__addimage__.binaryStringToUint8Array=function(D){for(var B=D.length,X=new Uint8Array(B),G=0;G<B;G++)X[G]=D.charCodeAt(G);return X},M=n.__addimage__.arrayBufferToBinaryString=function(D){for(var B="",X=O(D)?D:new Uint8Array(D),G=0;G<X.length;G+=8192)B+=String.fromCharCode.apply(null,X.subarray(G,G+8192));return B};n.addImage=function(){var D,B,X,G,oe,he,ae,W,ne;if(typeof arguments[1]=="number"?(B=e,X=arguments[1],G=arguments[2],oe=arguments[3],he=arguments[4],ae=arguments[5],W=arguments[6],ne=arguments[7]):(B=arguments[1],X=arguments[2],G=arguments[3],oe=arguments[4],he=arguments[5],ae=arguments[6],W=arguments[7],ne=arguments[8]),On(D=arguments[0])==="object"&&!v(D)&&"imageData"in D){var se=D;D=se.imageData,B=se.format||B||e,X=se.x||X||0,G=se.y||G||0,oe=se.w||se.width||oe,he=se.h||se.height||he,ae=se.alias||ae,W=se.compression||W,ne=se.rotation||se.angle||ne}var $=this.internal.getFilters();if(W===void 0&&$.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(X)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var F=T.call(this,D,B,ae,W);return w.call(this,X,G,oe,he,F,ne),this};var T=function(D,B,X,G){var oe,he,ae;if(typeof D=="string"&&i(D)===e){D=unescape(D);var W=j(D,!1);(W!==""||(W=n.loadFile(D,!0))!==void 0)&&(D=W)}if(v(D)&&(D=p(D,B)),B=i(D,B),!d(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((ae=X)==null||ae.length===0)&&(X=(function(ne){return typeof ne=="string"||O(ne)?I(ne):O(ne.data)?I(ne.data):null})(D)),(oe=y.call(this,X))||(D instanceof Uint8Array||B==="RGBA"||(he=D,D=U(D)),oe=this["process"+B.toUpperCase()](D,h.call(this),X,(function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in n.image_compression?ne:E.NONE})(G),he)),!oe)throw new Error("An unknown error occurred whilst processing the image.");return oe},j=n.__addimage__.convertBase64ToBinaryString=function(D,B){B=typeof B!="boolean"||B;var X,G="";if(typeof D=="string"){var oe;X=(oe=N(D))!==null&&oe!==void 0?oe:D;try{G=Hp(X)}catch(he){if(B)throw C(X)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+he.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};n.getImageProperties=function(D){var B,X,G="";if(v(D)&&(D=p(D)),typeof D=="string"&&i(D)===e&&((G=j(D,!1))===""&&(G=n.loadFile(D)||""),D=G),X=i(D),!d(X))throw new Error("addImage does not support files of type '"+X+"', please ensure that a plugin for '"+X+"' support is added.");if(D instanceof Uint8Array||(D=U(D)),!(B=this["process"+X.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=X,B}})(It.API),(function(n){var t=function(e){if(e!==void 0&&e!="")return!0};It.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(e.objId),c=e.pageContext.annotations,h=!1,d=0;d<c.length&&!h;d++)switch((r=c[d]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(e.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(x.objId),E=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(_(r.contents))+")",o+=" /Popup "+w.objId+" 0 R",o+=" /P "+u.objId+" 0 R",o+=" /T ("+p(_(E))+") >>",x.content=o;var I=x.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+I,r.open&&(o+=" /Open true"),o+=" >>",w.content=o,this.internal.write(x.objId,"0 R",w.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var C=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(y(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var N=this.annotations._nameMap[r.options.name];r.options.pageNumber=N.page,r.options.top=N.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var O=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+O+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var r=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":r.pageContext.annotations.push(e)}},n.link=function(e,r,i,o,s){var a=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:u(e),y:c(r),w:u(e+i),h:c(r+o)},options:s,type:"link"})},n.textWithLink=function(e,r,i,o){var s,a,u=this.getTextWidth(e),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var h=this.splitTextToSize(e,a).length;s=Math.ceil(c*h)}else a=u,s=c;return this.text(e,r,i,o),i+=.2*c,o.align==="center"&&(r-=u/2),o.align==="right"&&(r-=u),this.link(r,i-c,a,s,o),u},n.getTextWidth=function(e){var r=this.internal.getFontSize();return this.getStringUnitWidth(e)*r/this.internal.scaleFactor}})(It.API),(function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},a=n.__arabicParser__.isArabicEndLetter=function(x){return s(x)&&o(x)&&t[x.charCodeAt(0)].length<=2},u=n.__arabicParser__.isArabicAlfLetter=function(x){return s(x)&&i.indexOf(x.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return s(x)&&o(x)&&t[x.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(x){return s(x)&&o(x)&&t[x.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(x){return s(x)&&o(x)&&t[x.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(x){return s(x)&&o(x)&&t[x.charCodeAt(0)].length==4},d=n.__arabicParser__.resolveLigatures=function(x){var w=0,_=e,E="",I=0;for(w=0;w<x.length;w+=1)_[x.charCodeAt(w)]!==void 0?(I++,typeof(_=_[x.charCodeAt(w)])=="number"&&(E+=String.fromCharCode(_),_=e,I=0),w===x.length-1&&(_=e,E+=x.charAt(w-(I-1)),w-=I-1,I=0)):(_=e,E+=x.charAt(w-I),w-=I,I=0);return E};n.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(x,w,_){return s(x)?o(x)===!1?-1:!c(x)||!s(w)&&!s(_)||!s(_)&&a(w)||a(x)&&!s(w)||a(x)&&u(w)||a(x)&&a(w)?0:h(x)&&s(w)&&!a(w)&&s(_)&&c(_)?3:a(x)||!s(_)?1:2:-1},p=function(x){var w=0,_=0,E=0,I="",C="",N="",O=(x=x||"").split("\\s+"),U=[];for(w=0;w<O.length;w+=1){for(U.push(""),_=0;_<O[w].length;_+=1)I=O[w][_],C=O[w][_-1],N=O[w][_+1],s(I)?(E=v(I,C,N),U[w]+=E!==-1?String.fromCharCode(t[I.charCodeAt(0)][E]):I):U[w]+=I;U[w]=d(U[w])}return U.join(" ")},y=n.__arabicParser__.processArabic=n.processArabic=function(){var x,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(w)){var E=0;for(_=[],E=0;E<w.length;E+=1)Array.isArray(w[E])?_.push([p(w[E][0]),w[E][1],w[E][2]]):_.push([p(w[E])]);x=_}else x=p(w);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};n.events.push(["preProcessText",y])})(It.API),It.API.autoPrint=function(n){var t;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(a){e=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,r){var i;if((e=e||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(It.API),(function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(x){v=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(x){y=x}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(u){return r.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},n.getTextDimensions=function(u,c){r.call(this);var h=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,p=0,y=0,x=0,w=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var _=c.maxWidth;_>0?typeof u=="string"?u=this.splitTextToSize(u,_):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(I,C){return I.concat(w.splitTextToSize(C,_))},[])):u=Array.isArray(u)?u:[u];for(var E=0;E<u.length;E++)p<(x=this.getStringUnitWidth(u[E],{font:d})*h)&&(p=x);return p!==0&&(y=u.length),{w:p/=v,h:Math.max((y*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var u=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var u;u=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var c=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===u.lineNumber?(u.x=(c.x||0)+(c.width||0),u.y=c.y||0):c.y+c.height+u.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=d.top,p&&v&&(this.printHeaderRow(u.lineNumber,!0),u.y+=v[0].height)):u.y=c.y+c.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,e===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-h,u.y+h,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+h,{align:"center",baseline:"top",maxWidth:u.width-h-h}):this.text(u.text,u.x+h,u.y+h,{align:"left",baseline:"top",maxWidth:u.width-h-h})),this.internal.__cell__.lastCell=u,this};n.table=function(u,c,h,d,v){if(r.call(this),!h)throw new Error("No data for PDF table.");var p,y,x,w,_=[],E=[],I=[],C={},N={},O=[],U=[],M=(v=v||{}).autoSize||!1,T=v.printHeaders!==!1,j=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,D=v.margins||Object.assign({width:this.getPageWidth()},t),B=typeof v.padding=="number"?v.padding:3,X=v.headerBackgroundColor||"#c8c8c8",G=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=X,this.internal.__cell__.headerTextColor=G,this.setFontSize(j),d==null)E=_=Object.keys(h[0]),I=_.map(function(){return"left"});else if(Array.isArray(d)&&On(d[0])==="object")for(_=d.map(function(se){return se.name}),E=d.map(function(se){return se.prompt||se.name||""}),I=d.map(function(se){return se.align||"left"}),p=0;p<d.length;p+=1)N[d[p].name]=.7499990551181103*d[p].width;else Array.isArray(d)&&typeof d[0]=="string"&&(E=_=d,I=_.map(function(){return"left"}));if(M||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<_.length;p+=1){for(C[w=_[p]]=h.map(function(se){return se[w]}),this.setFont(void 0,"bold"),O.push(this.getTextDimensions(E[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=C[w],this.setFont(void 0,"normal"),x=0;x<y.length;x+=1)O.push(this.getTextDimensions(y[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[w]=Math.max.apply(null,O)+B+B,O=[]}if(T){var oe={};for(p=0;p<_.length;p+=1)oe[_[p]]={},oe[_[p]].text=E[p],oe[_[p]].align=I[p];var he=a.call(this,oe,N);U=_.map(function(se){return new o(u,c,N[se],he,oe[se].text,void 0,oe[se].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var ae=d.reduce(function(se,$){return se[$.name]=$.align,se},{});for(p=0;p<h.length;p+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:p,data:h[p]},this);var W=a.call(this,h[p],N);for(x=0;x<_.length;x+=1){var ne=h[p][_[x]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:p,col:x,data:ne},this),s.call(this,new o(u,c,N[_[x]],W,ne,p+2,ae[_[x]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=c,this};var a=function(u,c){var h=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(u).map(function(p){var y=u[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[p]-h-h)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/v+h+h},this).reduce(function(p,y){return Math.max(p,y)},0)};n.setTableHeaderRow=function(u){r.call(this),this.internal.__cell__.tableHeaderRow=u},n.printHeaderRow=function(u,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){h=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(h.y=this.internal.__cell__.margins.top||0,v.push(h)),h.lineNumber=u;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,h),this.setTextColor(y)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),e=!1}})(It.API);var sC={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},uC=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],$g=aC(uC),lC=[100,200,300,400,500,600,700,800,900],A7=aC(lC);function K0(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=(function(o){return sC[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof $g[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:t,style:e,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:t,style:[i,e,r].join(" ")}}}function a5(n,t,e,r){var i;for(i=e;i>=0&&i<t.length;i+=r)if(n[t[i]])return n[t[i]];for(i=e;i>=0&&i<t.length;i-=r)if(n[t[i]])return n[t[i]]}var k7={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},s5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function u5(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function l5(n){return n.trimLeft()}function E7(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function N7(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var Bp,c5,f5,Af,jp,h5,d5,p5,X0=["times"];function v5(n,t,e,r,i){var o=4,s=g5;switch(i){case It.API.image_compression.FAST:o=1,s=m5;break;case It.API.image_compression.MEDIUM:o=6,s=y5;break;case It.API.image_compression.SLOW:o=9,s=x5}n=(function(u,c,h,d){for(var v,p=u.length/c,y=new Uint8Array(u.length+p),x=[I7,m5,g5,y5,x5],w=0;w<p;w+=1){var _=w*c,E=u.subarray(_,_+c);if(d)y.set(d(E,h,v),_+w);else{for(var I=x.length,C=[],N=0;N<I;N+=1)C[N]=x[N](E,h,v);var O=R7(C.concat());y.set(C[O],_+w)}v=E}return y})(n,t,Math.ceil(e*r/8),s);var a=Ug(n,{level:o});return It.API.__addimage__.arrayBufferToBinaryString(a)}function I7(n){var t=Array.apply([],n);return t.unshift(0),t}function m5(n,t){var e=n.length,r=[];r[0]=1;for(var i=0;i<e;i+=1){var o=n[i-t]||0;r[i+1]=n[i]-o+256&255}return r}function g5(n,t,e){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var s=e&&e[o]||0;i[o+1]=n[o]-s+256&255}return i}function y5(n,t,e){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var s=n[o-t]||0,a=e&&e[o]||0;i[o+1]=n[o]+256-(s+a>>>1)&255}return i}function x5(n,t,e){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var s=P7(n[o-t]||0,e&&e[o]||0,e&&e[o-t]||0);i[o+1]=n[o]-s+256&255}return i}function P7(n,t,e){if(n===t&&t===e)return n;var r=Math.abs(t-e),i=Math.abs(n-e),o=Math.abs(n+t-e-e);return r<=i&&r<=o?n:i<=o?t:e}function R7(n){var t=n.map(function(e){return e.reduce(function(r,i){return r+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function Y0(n,t,e){var r=t*e,i=Math.floor(r/8),o=16-(r-8*i+e),s=(1<<e)-1;return cC(n,i)>>o&s}function w5(n,t,e,r){var i=e*r,o=Math.floor(i/8),s=16-(i-8*o+r),a=(1<<r)-1,u=(t&a)<<s;(function(c,h,d){if(h+1<c.byteLength)c.setUint16(h,d,!1);else{var v=d>>8&255;c.setUint8(h,v)}})(n,o,cC(n,o)&~(a<<s)&65535|u)}function cC(n,t){return t+1<n.byteLength?n.getUint16(t,!1):n.getUint8(t)<<8}function T7(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,r=n[t++]|n[t++]<<8,i=n[t++],o=i>>7,s=1<<1+(7&i);n[t++],n[t++];var a=null,u=null;o&&(a=t,u=s,t+=3*s);var c=!0,h=[],d=0,v=null,p=0,y=null;for(this.width=e,this.height=r;c&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,y=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((D=n[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=n[t++];d=n[t++]|n[t++]<<8,v=n[t++],1&x||(v=null),p=x>>2&7,t++;break;case 254:for(;;){if(!((D=n[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var w=n[t++]|n[t++]<<8,_=n[t++]|n[t++]<<8,E=n[t++]|n[t++]<<8,I=n[t++]|n[t++]<<8,C=n[t++],N=C>>6&1,O=1<<1+(7&C),U=a,M=u,T=!1;C>>7&&(T=!0,U=t,M=O,t+=3*O);var j=t;for(t++;;){var D;if(!((D=n[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}h.push({x:w,y:_,width:E,height:I,has_local_palette:T,palette_offset:U,palette_size:M,data_offset:j,data_length:t-j,transparent_index:v,interlaced:!!N,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return y},this.frameInfo=function(B){if(B<0||B>=h.length)throw new Error("Frame index out of range.");return h[B]},this.decodeAndBlitFrameBGRA=function(B,X){var G=this.frameInfo(B),oe=G.width*G.height,he=new Uint8Array(oe);b5(n,G.data_offset,he,oe);var ae=G.palette_offset,W=G.transparent_index;W===null&&(W=256);var ne=G.width,se=e-ne,$=ne,F=4*(G.y*e+G.x),K=4*((G.y+G.height)*e+G.x),Q=F,ue=4*se;G.interlaced===!0&&(ue+=4*e*7);for(var de=8,ve=0,we=he.length;ve<we;++ve){var Ce=he[ve];if($===0&&($=ne,(Q+=ue)>=K&&(ue=4*se+4*e*(de-1),Q=F+(ne+se)*(de<<1),de>>=1)),Ce===W)Q+=4;else{var Le=n[ae+3*Ce],be=n[ae+3*Ce+1],De=n[ae+3*Ce+2];X[Q++]=De,X[Q++]=be,X[Q++]=Le,X[Q++]=255}--$}},this.decodeAndBlitFrameRGBA=function(B,X){var G=this.frameInfo(B),oe=G.width*G.height,he=new Uint8Array(oe);b5(n,G.data_offset,he,oe);var ae=G.palette_offset,W=G.transparent_index;W===null&&(W=256);var ne=G.width,se=e-ne,$=ne,F=4*(G.y*e+G.x),K=4*((G.y+G.height)*e+G.x),Q=F,ue=4*se;G.interlaced===!0&&(ue+=4*e*7);for(var de=8,ve=0,we=he.length;ve<we;++ve){var Ce=he[ve];if($===0&&($=ne,(Q+=ue)>=K&&(ue=4*se+4*e*(de-1),Q=F+(ne+se)*(de<<1),de>>=1)),Ce===W)Q+=4;else{var Le=n[ae+3*Ce],be=n[ae+3*Ce+1],De=n[ae+3*Ce+2];X[Q++]=Le,X[Q++]=be,X[Q++]=De,X[Q++]=255}--$}}}function b5(n,t,e,r){for(var i=n[t++],o=1<<i,s=o+1,a=s+1,u=i+1,c=(1<<u)-1,h=0,d=0,v=0,p=n[t++],y=new Int32Array(4096),x=null;;){for(;h<16&&p!==0;)d|=n[t++]<<h,h+=8,p===1?p=n[t++]:--p;if(h<u)break;var w=d&c;if(d>>=u,h-=u,w!==o){if(w===s)break;for(var _=w<a?w:x,E=0,I=_;I>o;)I=y[I]>>8,++E;var C=I;if(v+E+(_!==w?1:0)>r)return void qn.log("Warning, gif stream longer than expected.");e[v++]=C;var N=v+=E;for(_!==w&&(e[v++]=C),I=_;E--;)I=y[I],e[--N]=255&I,I>>=8;x!==null&&a<4096&&(y[a++]=x<<8|C,a>=c+1&&u<12&&(++u,c=c<<1|1)),x=w}else a=s+1,c=(1<<(u=i+1))-1,x=null}return v!==r&&qn.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function J0(n){var t,e,r,i,o,s=Math.floor,a=new Array(64),u=new Array(64),c=new Array(64),h=new Array(64),d=new Array(65535),v=new Array(65535),p=new Array(64),y=new Array(64),x=[],w=0,_=7,E=new Array(64),I=new Array(64),C=new Array(64),N=new Array(256),O=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],oe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function he(F,K){for(var Q=0,ue=0,de=new Array,ve=1;ve<=16;ve++){for(var we=1;we<=F[ve];we++)de[K[ue]]=[],de[K[ue]][0]=Q,de[K[ue]][1]=ve,ue++,Q++;Q*=2}return de}function ae(F){for(var K=F[0],Q=F[1]-1;Q>=0;)K&1<<Q&&(w|=1<<_),Q--,--_<0&&(w==255?(W(255),W(0)):W(w),_=7,w=0)}function W(F){x.push(F)}function ne(F){W(F>>8&255),W(255&F)}function se(F,K,Q,ue,de){for(var ve,we=de[0],Ce=de[240],Le=(function(He,mt){var nt,ht,ut,sn,Vt,jt,Xt,Ft,lt,Ut,dt=0;for(lt=0;lt<8;++lt){nt=He[dt],ht=He[dt+1],ut=He[dt+2],sn=He[dt+3],Vt=He[dt+4],jt=He[dt+5],Xt=He[dt+6];var Xn=nt+(Ft=He[dt+7]),un=nt-Ft,Yt=ht+Xt,Qt=ht-Xt,Bn=ut+jt,Pt=ut-jt,En=sn+Vt,Tt=sn-Vt,Ht=Xn+En,Cn=Xn-En,Zt=Yt+Bn,Lt=Yt-Bn;He[dt]=Ht+Zt,He[dt+4]=Ht-Zt;var yn=.707106781*(Lt+Cn);He[dt+2]=Cn+yn,He[dt+6]=Cn-yn;var os=.382683433*((Ht=Tt+Pt)-(Lt=Qt+un)),$r=.5411961*Ht+os,ia=1.306562965*Lt+os,lo=.707106781*(Zt=Pt+Qt),Dt=un+lo,Yi=un-lo;He[dt+5]=Yi+$r,He[dt+3]=Yi-$r,He[dt+1]=Dt+ia,He[dt+7]=Dt-ia,dt+=8}for(dt=0,lt=0;lt<8;++lt){nt=He[dt],ht=He[dt+8],ut=He[dt+16],sn=He[dt+24],Vt=He[dt+32],jt=He[dt+40],Xt=He[dt+48];var Lo=nt+(Ft=He[dt+56]),ai=nt-Ft,co=ht+Xt,jn=ht-Xt,sr=ut+jt,xr=ut-jt,Ia=sn+Vt,as=sn-Vt,Do=Lo+Ia,oa=Lo-Ia,Kr=co+sr,fo=co-sr;He[dt]=Do+Kr,He[dt+32]=Do-Kr;var Ji=.707106781*(fo+oa);He[dt+16]=oa+Ji,He[dt+48]=oa-Ji;var Hs=.382683433*((Do=as+xr)-(fo=jn+ai)),Fo=.5411961*Do+Hs,ss=1.306562965*fo+Hs,Gs=.707106781*(Kr=xr+jn),$s=ai+Gs,Uu=ai-Gs;He[dt+40]=Uu+Fo,He[dt+24]=Uu-Fo,He[dt+8]=$s+ss,He[dt+56]=$s-ss,dt++}for(lt=0;lt<64;++lt)Ut=He[lt]*mt[lt],p[lt]=Ut>0?Ut+.5|0:Ut-.5|0;return p})(F,K),be=0;be<64;++be)y[U[be]]=Le[be];var De=y[0]-Q;Q=y[0],De==0?ae(ue[0]):(ae(ue[v[ve=32767+De]]),ae(d[ve]));for(var Re=63;Re>0&&y[Re]==0;)Re--;if(Re==0)return ae(we),Q;for(var Xe,ee=1;ee<=Re;){for(var Je=ee;y[ee]==0&&ee<=Re;)++ee;var Rt=ee-Je;if(Rt>=16){Xe=Rt>>4;for(var ft=1;ft<=Xe;++ft)ae(Ce);Rt&=15}ve=32767+y[ee],ae(de[(Rt<<4)+v[ve]]),ae(d[ve]),ee++}return Re!=63&&ae(we),Q}function $(F){F=Math.min(Math.max(F,1),100),o!=F&&((function(K){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var de=s((Q[ue]*K+50)/100);de=Math.min(Math.max(de,1),255),a[U[ue]]=de}for(var ve=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],we=0;we<64;we++){var Ce=s((ve[we]*K+50)/100);Ce=Math.min(Math.max(Ce,1),255),u[U[we]]=Ce}for(var Le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,De=0;De<8;De++)for(var Re=0;Re<8;Re++)c[be]=1/(a[U[be]]*Le[De]*Le[Re]*8),h[be]=1/(u[U[be]]*Le[De]*Le[Re]*8),be++})(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),o=F)}this.encode=function(F,K){K&&$(K),x=new Array,w=0,_=7,ne(65496),ne(65504),ne(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),ne(1),ne(1),W(0),W(0),(function(){ne(65499),ne(132),W(0);for(var ht=0;ht<64;ht++)W(a[ht]);W(1);for(var ut=0;ut<64;ut++)W(u[ut])})(),(function(ht,ut){ne(65472),ne(17),W(8),ne(ut),ne(ht),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)})(F.width,F.height),(function(){ne(65476),ne(418),W(0);for(var ht=0;ht<16;ht++)W(M[ht+1]);for(var ut=0;ut<=11;ut++)W(T[ut]);W(16);for(var sn=0;sn<16;sn++)W(j[sn+1]);for(var Vt=0;Vt<=161;Vt++)W(D[Vt]);W(1);for(var jt=0;jt<16;jt++)W(B[jt+1]);for(var Xt=0;Xt<=11;Xt++)W(X[Xt]);W(17);for(var Ft=0;Ft<16;Ft++)W(G[Ft+1]);for(var lt=0;lt<=161;lt++)W(oe[lt])})(),ne(65498),ne(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var Q=0,ue=0,de=0;w=0,_=7,this.encode.displayName="_encode_";for(var ve,we,Ce,Le,be,De,Re,Xe,ee,Je=F.data,Rt=F.width,ft=F.height,He=4*Rt,mt=0;mt<ft;){for(ve=0;ve<He;){for(be=He*mt+ve,Re=-1,Xe=0,ee=0;ee<64;ee++)De=be+(Xe=ee>>3)*He+(Re=4*(7&ee)),mt+Xe>=ft&&(De-=He*(mt+1+Xe-ft)),ve+Re>=He&&(De-=ve+Re-He+4),we=Je[De++],Ce=Je[De++],Le=Je[De++],E[ee]=(O[we]+O[Ce+256|0]+O[Le+512|0]>>16)-128,I[ee]=(O[we+768|0]+O[Ce+1024|0]+O[Le+1280|0]>>16)-128,C[ee]=(O[we+1280|0]+O[Ce+1536|0]+O[Le+1792|0]>>16)-128;Q=se(E,c,Q,t,r),ue=se(I,h,ue,e,i),de=se(C,h,de,e,i),ve+=32}mt+=8}if(_>=0){var nt=[];nt[1]=_+1,nt[0]=(1<<_+1)-1,ae(nt)}return ne(65497),new Uint8Array(x)},n=n||50,(function(){for(var F=String.fromCharCode,K=0;K<256;K++)N[K]=F(K)})(),t=he(M,T),e=he(B,X),r=he(j,D),i=he(G,oe),(function(){for(var F=1,K=2,Q=1;Q<=15;Q++){for(var ue=F;ue<K;ue++)v[32767+ue]=Q,d[32767+ue]=[],d[32767+ue][1]=Q,d[32767+ue][0]=ue;for(var de=-(K-1);de<=-F;de++)v[32767+de]=Q,d[32767+de]=[],d[32767+de][1]=Q,d[32767+de][0]=K-1+de;F<<=1,K<<=1}})(),(function(){for(var F=0;F<256;F++)O[F]=19595*F,O[F+256|0]=38470*F,O[F+512|0]=7471*F+32768,O[F+768|0]=-11059*F,O[F+1024|0]=-21709*F,O[F+1280|0]=32768*F+8421375,O[F+1536|0]=-27439*F,O[F+1792|0]=-5329*F})(),$(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ka(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _5(n){function t(T){if(!T)throw Error("assert :P")}function e(T,j,D){for(var B=0;4>B;B++)if(T[j+B]!=D.charCodeAt(B))return!0;return!1}function r(T,j,D,B,X){for(var G=0;G<X;G++)T[j+G]=D[B+G]}function i(T,j,D,B){for(var X=0;X<B;X++)T[j+X]=D}function o(T){return new Int32Array(T)}function s(T,j){for(var D=[],B=0;B<T;B++)D.push(new j);return D}function a(T,j){var D=[];return(function B(X,G,oe){for(var he=oe[G],ae=0;ae<he&&(X.push(oe.length>G+1?[]:new j),!(oe.length<G+1));ae++)B(X[ae],G+1,oe)})(D,0,T),D}var u=function(){var T=this;function j(g,S){for(var P=1<<S-1>>>0;g&P;)P>>>=1;return P?(g&P-1)+P:g}function D(g,S,P,L,z){t(!(L%P));do g[S+(L-=P)]=z;while(0<L)}function B(g,S,P,L,z){if(t(2328>=z),512>=z)var H=o(512);else if((H=o(z))==null)return 0;return(function(Y,J,Z,re,ye,Ne){var ie,_e,Ee=J,Ue=1<<Z,Pe=o(16),Be=o(16);for(t(ye!=0),t(re!=null),t(Y!=null),t(0<Z),_e=0;_e<ye;++_e){if(15<re[_e])return 0;++Pe[re[_e]]}if(Pe[0]==ye)return 0;for(Be[1]=0,ie=1;15>ie;++ie){if(Pe[ie]>1<<ie)return 0;Be[ie+1]=Be[ie]+Pe[ie]}for(_e=0;_e<ye;++_e)ie=re[_e],0<re[_e]&&(Ne[Be[ie]++]=_e);if(Be[15]==1)return(re=new X).g=0,re.value=Ne[0],D(Y,Ee,1,Ue,re),Ue;var je,We=-1,Ge=Ue-1,St=0,ot=1,en=1,vt=1<<Z;for(_e=0,ie=1,ye=2;ie<=Z;++ie,ye<<=1){if(ot+=en<<=1,0>(en-=Pe[ie]))return 0;for(;0<Pe[ie];--Pe[ie])(re=new X).g=ie,re.value=Ne[_e++],D(Y,Ee+St,ye,vt,re),St=j(St,ie)}for(ie=Z+1,ye=2;15>=ie;++ie,ye<<=1){if(ot+=en<<=1,0>(en-=Pe[ie]))return 0;for(;0<Pe[ie];--Pe[ie]){if(re=new X,(St&Ge)!=We){for(Ee+=vt,je=1<<(We=ie)-Z;15>We&&!(0>=(je-=Pe[We]));)++We,je<<=1;Ue+=vt=1<<(je=We-Z),Y[J+(We=St&Ge)].g=je+Z,Y[J+We].value=Ee-J-We}re.g=ie-Z,re.value=Ne[_e++],D(Y,Ee+(St>>Z),ye,vt,re),St=j(St,ie)}}return ot!=2*Be[15]-1?0:Ue})(g,S,P,L,z,H)}function X(){this.value=this.g=0}function G(){this.value=this.g=0}function oe(){this.G=s(5,X),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(xo,G)}function he(g,S,P,L){t(g!=null),t(S!=null),t(2147483648>L),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=S,g.pa=P,g.Jd=S,g.Yc=P+L,g.Zc=4<=L?P+L-4+1:P,we(g)}function ae(g,S){for(var P=0;0<S--;)P|=Le(g,128)<<S;return P}function W(g,S){var P=ae(g,S);return Ce(g)?-P:P}function ne(g,S,P,L){var z,H=0;for(t(g!=null),t(S!=null),t(4294967288>L),g.Sb=L,g.Ra=0,g.u=0,g.h=0,4<L&&(L=4),z=0;z<L;++z)H+=S[P+z]<<8*z;g.Ra=H,g.bb=L,g.oa=S,g.pa=P}function se(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<vs-8>>>0,++g.bb,g.u-=8;ue(g)&&(g.h=1,g.u=0)}function $(g,S){if(t(0<=S),!g.h&&S<=io){var P=Q(g)&ro[S];return g.u+=S,se(g),P}return g.h=1,g.u=0}function F(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(g){return g.Ra>>>(g.u&vs-1)>>>0}function ue(g){return t(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>vs}function de(g,S){g.u=S,g.h=ue(g)}function ve(g){g.u>=ha&&(t(g.u>=ha),se(g))}function we(g){t(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(t(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function Ce(g){return ae(g,1)}function Le(g,S){var P=g.Ca;0>g.b&&we(g);var L=g.b,z=P*S>>>8,H=(g.I>>>L>z)+0;for(H?(P-=z,g.I-=z+1<<L>>>0):P=z+1,L=P,z=0;256<=L;)z+=8,L>>=8;return L=7^z+Fa[L],g.b-=L,g.Ca=(P<<L)-1,H}function be(g,S,P){g[S+0]=P>>24&255,g[S+1]=P>>16&255,g[S+2]=P>>8&255,g[S+3]=255&P}function De(g,S){return g[S+0]|g[S+1]<<8}function Re(g,S){return De(g,S)|g[S+2]<<16}function Xe(g,S){return De(g,S)|De(g,S+2)<<16}function ee(g,S){var P=1<<S;return t(g!=null),t(0<S),g.X=o(P),g.X==null?0:(g.Mb=32-S,g.Xa=S,1)}function Je(g,S){t(g!=null),t(S!=null),t(g.Xa==S.Xa),r(S.X,0,g.X,0,1<<S.Xa)}function Rt(){this.X=[],this.Xa=this.Mb=0}function ft(g,S,P,L){t(P!=null),t(L!=null);var z=P[0],H=L[0];return z==0&&(z=(g*H+S/2)/S),H==0&&(H=(S*z+g/2)/g),0>=z||0>=H?0:(P[0]=z,L[0]=H,1)}function He(g,S){return g+(1<<S)-1>>>S}function mt(g,S){return((4278255360&g)+(4278255360&S)>>>0&4278255360)+((16711935&g)+(16711935&S)>>>0&16711935)>>>0}function nt(g,S){T[S]=function(P,L,z,H,Y,J,Z){var re;for(re=0;re<Y;++re){var ye=T[g](J[Z+re-1],z,H+re);J[Z+re]=mt(P[L+re],ye)}}}function ht(){this.ud=this.hd=this.jd=0}function ut(g,S){return((4278124286&(g^S))>>>1)+(g&S)>>>0}function sn(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Vt(g,S){return sn(g+(g-S+.5>>1))}function jt(g,S,P){return Math.abs(S-P)-Math.abs(g-P)}function Xt(g,S,P,L,z,H,Y){for(L=H[Y-1],P=0;P<z;++P)H[Y+P]=L=mt(g[S+P],L)}function Ft(g,S,P,L,z){var H;for(H=0;H<P;++H){var Y=g[S+H],J=Y>>8&255,Z=16711935&(Z=(Z=16711935&Y)+((J<<16)+J));L[z+H]=(4278255360&Y)+Z>>>0}}function lt(g,S){S.jd=255&g,S.hd=g>>8&255,S.ud=g>>16&255}function Ut(g,S,P,L,z,H){var Y;for(Y=0;Y<L;++Y){var J=S[P+Y],Z=J>>>8,re=J,ye=255&(ye=(ye=J>>>16)+((g.jd<<24>>24)*(Z<<24>>24)>>>5));re=255&(re=(re+=(g.hd<<24>>24)*(Z<<24>>24)>>>5)+((g.ud<<24>>24)*(ye<<24>>24)>>>5)),z[H+Y]=(4278255360&J)+(ye<<16)+re}}function dt(g,S,P,L,z){T[S]=function(H,Y,J,Z,re,ye,Ne,ie,_e){for(Z=Ne;Z<ie;++Z)for(Ne=0;Ne<_e;++Ne)re[ye++]=z(J[L(H[Y++])])},T[g]=function(H,Y,J,Z,re,ye,Ne){var ie=8>>H.b,_e=H.Ea,Ee=H.K[0],Ue=H.w;if(8>ie)for(H=(1<<H.b)-1,Ue=(1<<ie)-1;Y<J;++Y){var Pe,Be=0;for(Pe=0;Pe<_e;++Pe)Pe&H||(Be=L(Z[re++])),ye[Ne++]=z(Ee[Be&Ue]),Be>>=ie}else T["VP8LMapColor"+P](Z,re,Ee,Ue,ye,Ne,Y,J,_e)}}function Xn(g,S,P,L,z){for(P=S+P;S<P;){var H=g[S++];L[z++]=H>>16&255,L[z++]=H>>8&255,L[z++]=255&H}}function un(g,S,P,L,z){for(P=S+P;S<P;){var H=g[S++];L[z++]=H>>16&255,L[z++]=H>>8&255,L[z++]=255&H,L[z++]=H>>24&255}}function Yt(g,S,P,L,z){for(P=S+P;S<P;){var H=(Y=g[S++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;L[z++]=H,L[z++]=Y}}function Qt(g,S,P,L,z){for(P=S+P;S<P;){var H=(Y=g[S++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;L[z++]=H,L[z++]=Y}}function Bn(g,S,P,L,z){for(P=S+P;S<P;){var H=g[S++];L[z++]=255&H,L[z++]=H>>8&255,L[z++]=H>>16&255}}function Pt(g,S,P,L,z,H){if(H==0)for(P=S+P;S<P;)be(L,((H=g[S++])[0]>>24|H[1]>>8&65280|H[2]<<8&16711680|H[3]<<24)>>>0),z+=32;else r(L,z,g,S,P)}function En(g,S){T[S][0]=T[g+"0"],T[S][1]=T[g+"1"],T[S][2]=T[g+"2"],T[S][3]=T[g+"3"],T[S][4]=T[g+"4"],T[S][5]=T[g+"5"],T[S][6]=T[g+"6"],T[S][7]=T[g+"7"],T[S][8]=T[g+"8"],T[S][9]=T[g+"9"],T[S][10]=T[g+"10"],T[S][11]=T[g+"11"],T[S][12]=T[g+"12"],T[S][13]=T[g+"13"],T[S][14]=T[g+"0"],T[S][15]=T[g+"0"]}function Tt(g){return g==ol||g==mu||g==tc||g==nc}function Ht(){this.eb=[],this.size=this.A=this.fb=0}function Cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Zt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ht,this.f.kb=new Cn,this.sd=null}function Lt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function os(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function $r(g,S){var P=g.T,L=S.ba.f.RGBA,z=L.eb,H=L.fb+g.ka*L.A,Y=Li[S.ba.S],J=g.y,Z=g.O,re=g.f,ye=g.N,Ne=g.ea,ie=g.W,_e=S.cc,Ee=S.dc,Ue=S.Mc,Pe=S.Nc,Be=g.ka,je=g.ka+g.T,We=g.U,Ge=We+1>>1;for(Be==0?Y(J,Z,null,null,re,ye,Ne,ie,re,ye,Ne,ie,z,H,null,null,We):(Y(S.ec,S.fc,J,Z,_e,Ee,Ue,Pe,re,ye,Ne,ie,z,H-L.A,z,H,We),++P);Be+2<je;Be+=2)_e=re,Ee=ye,Ue=Ne,Pe=ie,ye+=g.Rc,ie+=g.Rc,H+=2*L.A,Y(J,(Z+=2*g.fa)-g.fa,J,Z,_e,Ee,Ue,Pe,re,ye,Ne,ie,z,H-L.A,z,H,We);return Z+=g.fa,g.j+je<g.o?(r(S.ec,S.fc,J,Z,We),r(S.cc,S.dc,re,ye,Ge),r(S.Mc,S.Nc,Ne,ie,Ge),P--):1&je||Y(J,Z,null,null,re,ye,Ne,ie,re,ye,Ne,ie,z,H+L.A,null,null,We),P}function ia(g,S,P){var L=g.F,z=[g.J];if(L!=null){var H=g.U,Y=S.ba.S,J=Y==ec||Y==tc;S=S.ba.f.RGBA;var Z=[0],re=g.ka;Z[0]=g.T,g.Kb&&(re==0?--Z[0]:(--re,z[0]-=g.width),g.j+g.ka+g.T==g.o&&(Z[0]=g.o-g.j-re));var ye=S.eb;re=S.fb+re*S.A,g=Ql(L,z[0],g.width,H,Z,ye,re+(J?0:3),S.A),t(P==Z),g&&Tt(Y)&&vu(ye,re,J,H,Z,S.A)}return 0}function lo(g){var S=g.ma,P=S.ba.S,L=11>P,z=P==xs||P==Zl||P==ec||P==Tn||P==12||Tt(P);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!Qu(S.Oa,g,z?11:12))return 0;if(z&&Tt(P)&&ou(),g.da)alert("todo:use_scaling");else{if(L){if(S.Ib=os,g.Kb){if(P=g.U+1>>1,S.memory=o(g.U+2*P),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+g.U,S.Mc=S.cc,S.Nc=S.dc+P,S.Ib=$r,ou()}}else alert("todo:EmitYUV");z&&(S.Jb=ia,L&&Bo())}if(L&&!Jr){for(g=0;256>g;++g)Di[g]=89858*(g-128)+Vo>>ja,Fi[g]=-22014*(g-128)+Vo,ll[g]=-45773*(g-128),wu[g]=113618*(g-128)+Vo>>ja;for(g=An;g<In;++g)S=76283*(g-16)+Vo>>ja,rf[g-An]=wr(S,255),Od[g-An]=wr(S+8>>4,15);Jr=1}return 1}function Dt(g){var S=g.ma,P=g.U,L=g.T;return t(!(1&g.ka)),0>=P||0>=L?0:(P=S.Ib(g,S),S.Jb!=null&&S.Jb(g,S,P),S.Dc+=P,1)}function Yi(g){g.ma.memory=null}function Lo(g,S,P,L){return $(g,8)!=47?0:(S[0]=$(g,14)+1,P[0]=$(g,14)+1,L[0]=$(g,1),$(g,3)!=0?0:!g.h)}function ai(g,S){if(4>g)return g+1;var P=g-2>>1;return(2+(1&g)<<P)+$(S,P)+1}function co(g,S){return 120<S?S-120:1<=(P=((P=em[S-1])>>4)*g+(8-(15&P)))?P:1;var P}function jn(g,S,P){var L=Q(P),z=g[S+=255&L].g-8;return 0<z&&(de(P,P.u+8),L=Q(P),S+=g[S].value,S+=L&(1<<z)-1),de(P,P.u+g[S].g),g[S].value}function sr(g,S,P){return P.g+=g.g,P.value+=g.value<<S>>>0,t(8>=P.g),g.g}function xr(g,S,P){var L=g.xc;return t((S=L==0?0:g.vc[g.md*(P>>L)+(S>>L)])<g.Wb),g.Ya[S]}function Ia(g,S,P,L){var z=g.ab,H=g.c*S,Y=g.C;S=Y+S;var J=P,Z=L;for(L=g.Ta,P=g.Ua;0<z--;){var re=g.gc[z],ye=Y,Ne=S,ie=J,_e=Z,Ee=(Z=L,J=P,re.Ea);switch(t(ye<Ne),t(Ne<=re.nc),re.hc){case 2:lr(ie,_e,(Ne-ye)*Ee,Z,J);break;case 0:var Ue=ye,Pe=Ne,Be=Z,je=J,We=(vt=re).Ea;Ue==0&&(Ma(ie,_e,null,null,1,Be,je),Xt(ie,_e+1,0,0,We-1,Be,je+1),_e+=We,je+=We,++Ue);for(var Ge=1<<vt.b,St=Ge-1,ot=He(We,vt.b),en=vt.K,vt=vt.w+(Ue>>vt.b)*ot;Ue<Pe;){var cn=en,rr=vt,nn=1;for(da(ie,_e,Be,je-We,1,Be,je);nn<We;){var at=(nn&~St)+Ge;at>We&&(at=We),(0,fu[cn[rr++]>>8&15])(ie,_e+ +nn,Be,je+nn-We,at-nn,Be,je+nn),nn=at}_e+=We,je+=We,++Ue&St||(vt+=ot)}Ne!=re.nc&&r(Z,J-Ee,Z,J+(Ne-ye-1)*Ee,Ee);break;case 1:for(Ee=ie,Pe=_e,We=(ie=re.Ea)-(je=ie&~(Be=(_e=1<<re.b)-1)),Ue=He(ie,re.b),Ge=re.K,re=re.w+(ye>>re.b)*Ue;ye<Ne;){for(St=Ge,ot=re,en=new ht,vt=Pe+je,cn=Pe+ie;Pe<vt;)lt(St[ot++],en),el(en,Ee,Pe,_e,Z,J),Pe+=_e,J+=_e;Pe<cn&&(lt(St[ot++],en),el(en,Ee,Pe,We,Z,J),Pe+=We,J+=We),++ye&Be||(re+=Ue)}break;case 3:if(ie==Z&&_e==J&&0<re.b){for(Pe=Z,ie=Ee=J+(Ne-ye)*Ee-(je=(Ne-ye)*He(re.Ea,re.b)),_e=Z,Be=J,Ue=[],je=(We=je)-1;0<=je;--je)Ue[je]=_e[Be+je];for(je=We-1;0<=je;--je)Pe[ie+je]=Ue[je];lu(re,ye,Ne,Z,Ee,Z,J)}else lu(re,ye,Ne,ie,_e,Z,J)}J=L,Z=P}Z!=P&&r(L,P,J,Z,H)}function as(g,S){var P=g.V,L=g.Ba+g.c*g.C,z=S-g.C;if(t(S<=g.l.o),t(16>=z),0<z){var H=g.l,Y=g.Ta,J=g.Ua,Z=H.width;if(Ia(g,z,P,L),z=J=[J],t((P=g.C)<(L=S)),t(H.v<H.va),L>H.o&&(L=H.o),P<H.j){var re=H.j-P;P=H.j,z[0]+=re*Z}if(P>=L?P=0:(z[0]+=4*H.v,H.ka=P-H.j,H.U=H.va-H.v,H.T=L-P,P=1),P){if(J=J[0],11>(P=g.ca).S){var ye=P.f.RGBA,Ne=(L=P.S,z=H.U,H=H.T,re=ye.eb,ye.A),ie=H;for(ye=ye.fb+g.Ma*ye.A;0<ie--;){var _e=Y,Ee=J,Ue=z,Pe=re,Be=ye;switch(L){case Zc:tl(_e,Ee,Ue,Pe,Be);break;case xs:Oa(_e,Ee,Ue,Pe,Be);break;case ol:Oa(_e,Ee,Ue,Pe,Be),vu(Pe,Be,0,Ue,1,0);break;case Td:hu(_e,Ee,Ue,Pe,Be);break;case Zl:Pt(_e,Ee,Ue,Pe,Be,1);break;case mu:Pt(_e,Ee,Ue,Pe,Be,1),vu(Pe,Be,0,Ue,1,0);break;case ec:Pt(_e,Ee,Ue,Pe,Be,0);break;case tc:Pt(_e,Ee,Ue,Pe,Be,0),vu(Pe,Be,1,Ue,1,0);break;case Tn:ms(_e,Ee,Ue,Pe,Be);break;case nc:ms(_e,Ee,Ue,Pe,Be),fh(Pe,Be,Ue,1,0);break;case ef:gs(_e,Ee,Ue,Pe,Be);break;default:t(0)}J+=Z,ye+=Ne}g.Ma+=H}else alert("todo:EmitRescaledRowsYUVA");t(g.Ma<=P.height)}}g.C=S,t(g.C<=g.i)}function Do(g){var S;if(0<g.ua)return 0;for(S=0;S<g.Wb;++S){var P=g.Ya[S].G,L=g.Ya[S].H;if(0<P[1][L[1]+0].g||0<P[2][L[2]+0].g||0<P[3][L[3]+0].g)return 0}return 1}function oa(g,S,P,L,z,H){if(g.Z!=0){var Y=g.qd,J=g.rd;for(t(ui[g.Z]!=null);S<P;++S)ui[g.Z](Y,J,L,z,L,z,H),Y=L,J=z,z+=H;g.qd=Y,g.rd=J}}function Kr(g,S){var P=g.l.ma,L=P.Z==0||P.Z==1?g.l.j:g.C;if(L=g.C<L?L:g.C,t(S<=g.l.o),S>L){var z=g.l.width,H=P.ca,Y=P.tb+z*L,J=g.V,Z=g.Ba+g.c*L,re=g.gc;t(g.ab==1),t(re[0].hc==3),Uo(re[0],L,S,J,Z,H,Y),oa(P,L,S,H,Y,z)}g.C=g.Ma=S}function fo(g,S,P,L,z,H,Y){var J=g.$/L,Z=g.$%L,re=g.m,ye=g.s,Ne=P+g.$,ie=Ne;z=P+L*z;var _e=P+L*H,Ee=280+ye.ua,Ue=g.Pb?J:16777216,Pe=0<ye.ua?ye.Wa:null,Be=ye.wc,je=Ne<_e?xr(ye,Z,J):null;t(g.C<H),t(_e<=z);var We=!1;e:for(;;){for(;We||Ne<_e;){var Ge=0;if(J>=Ue){var St=Ne-P;t((Ue=g).Pb),Ue.wd=Ue.m,Ue.xd=St,0<Ue.s.ua&&Je(Ue.s.Wa,Ue.s.vb),Ue=J+nf}if(Z&Be||(je=xr(ye,Z,J)),t(je!=null),je.Qb&&(S[Ne]=je.qb,We=!0),!We)if(ve(re),je.jc){Ge=re,St=S;var ot=Ne,en=je.pd[Q(Ge)&xo-1];t(je.jc),256>en.g?(de(Ge,Ge.u+en.g),St[ot]=en.value,Ge=0):(de(Ge,Ge.u+en.g-256),t(256<=en.value),Ge=en.value),Ge==0&&(We=!0)}else Ge=jn(je.G[0],je.H[0],re);if(re.h)break;if(We||256>Ge){if(!We)if(je.nd)S[Ne]=(je.qb|Ge<<8)>>>0;else{if(ve(re),We=jn(je.G[1],je.H[1],re),ve(re),St=jn(je.G[2],je.H[2],re),ot=jn(je.G[3],je.H[3],re),re.h)break;S[Ne]=(ot<<24|We<<16|Ge<<8|St)>>>0}if(We=!1,++Ne,++Z>=L&&(Z=0,++J,Y!=null&&J<=H&&!(J%16)&&Y(g,J),Pe!=null))for(;ie<Ne;)Ge=S[ie++],Pe.X[(506832829*Ge&4294967295)>>>Pe.Mb]=Ge}else if(280>Ge){if(Ge=ai(Ge-256,re),St=jn(je.G[4],je.H[4],re),ve(re),St=co(L,St=ai(St,re)),re.h)break;if(Ne-P<St||z-Ne<Ge)break e;for(ot=0;ot<Ge;++ot)S[Ne+ot]=S[Ne+ot-St];for(Ne+=Ge,Z+=Ge;Z>=L;)Z-=L,++J,Y!=null&&J<=H&&!(J%16)&&Y(g,J);if(t(Ne<=z),Z&Be&&(je=xr(ye,Z,J)),Pe!=null)for(;ie<Ne;)Ge=S[ie++],Pe.X[(506832829*Ge&4294967295)>>>Pe.Mb]=Ge}else{if(!(Ge<Ee))break e;for(We=Ge-280,t(Pe!=null);ie<Ne;)Ge=S[ie++],Pe.X[(506832829*Ge&4294967295)>>>Pe.Mb]=Ge;Ge=Ne,t(!(We>>>(St=Pe).Xa)),S[Ge]=St.X[We],We=!0}We||t(re.h==ue(re))}if(g.Pb&&re.h&&Ne<z)t(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Je(g.s.vb,g.s.Wa);else{if(re.h)break e;Y!=null&&Y(g,J>H?H:J),g.a=0,g.$=Ne-P}return 1}return g.a=3,0}function Ji(g){t(g!=null),g.vc=null,g.yc=null,g.Ya=null;var S=g.Wa;S!=null&&(S.X=null),g.vb=null,t(g!=null)}function Hs(){var g=new qt;return g==null?null:(g.a=0,g.xb=sl,En("Predictor","VP8LPredictors"),En("Predictor","VP8LPredictors_C"),En("PredictorAdd","VP8LPredictorsAdd"),En("PredictorAdd","VP8LPredictorsAdd_C"),lr=Ft,el=Ut,tl=Xn,Oa=un,ms=Yt,gs=Qt,hu=Bn,T.VP8LMapColor32b=pa,T.VP8LMapColor8b=cu,g)}function Fo(g,S,P,L,z){var H=1,Y=[g],J=[S],Z=L.m,re=L.s,ye=null,Ne=0;e:for(;;){if(P)for(;H&&$(Z,1);){var ie=Y,_e=J,Ee=L,Ue=1,Pe=Ee.m,Be=Ee.gc[Ee.ab],je=$(Pe,2);if(Ee.Oc&1<<je)H=0;else{switch(Ee.Oc|=1<<je,Be.hc=je,Be.Ea=ie[0],Be.nc=_e[0],Be.K=[null],++Ee.ab,t(4>=Ee.ab),je){case 0:case 1:Be.b=$(Pe,3)+2,Ue=Fo(He(Be.Ea,Be.b),He(Be.nc,Be.b),0,Ee,Be.K),Be.K=Be.K[0];break;case 3:var We,Ge=$(Pe,8)+1,St=16<Ge?0:4<Ge?1:2<Ge?2:3;if(ie[0]=He(Be.Ea,St),Be.b=St,We=Ue=Fo(Ge,1,0,Ee,Be.K)){var ot,en=Ge,vt=Be,cn=1<<(8>>vt.b),rr=o(cn);if(rr==null)We=0;else{var nn=vt.K[0],at=vt.w;for(rr[0]=vt.K[0][0],ot=1;ot<1*en;++ot)rr[ot]=mt(nn[at+ot],rr[ot-1]);for(;ot<4*cn;++ot)rr[ot]=0;vt.K[0]=null,vt.K[0]=rr,We=1}}Ue=We;break;case 2:break;default:t(0)}H=Ue}}if(Y=Y[0],J=J[0],H&&$(Z,1)&&!(H=1<=(Ne=$(Z,4))&&11>=Ne)){L.a=3;break e}var tt;if(tt=H)t:{var cr,Wt,ln,zn=L,zr=Y,Cr=J,Jn=Ne,Lr=P,Vr=zn.m,Hn=zn.s,dn=[null],wn=1,Gn=0,bn=Dd[Jn];n:for(;;){if(Lr&&$(Vr,1)){var ir=$(Vr,3)+2,or=He(zr,ir),Ln=He(Cr,ir),li=or*Ln;if(!Fo(or,Ln,0,zn,dn))break n;for(dn=dn[0],Hn.xc=ir,cr=0;cr<li;++cr){var Pn=dn[cr]>>8&65535;dn[cr]=Pn,Pn>=wn&&(wn=Pn+1)}}if(Vr.h)break n;for(Wt=0;5>Wt;++Wt){var Dn=gu[Wt];!Wt&&0<Jn&&(Dn+=1<<Jn),Gn<Dn&&(Gn=Dn)}var Ar=s(wn*bn,X),Qr=wn,Mi=s(Qr,oe);if(Mi==null)var fr=null;else t(65536>=Qr),fr=Mi;var hr=o(Gn);if(fr==null||hr==null||Ar==null){zn.a=1;break n}var ci=Ar;for(cr=ln=0;cr<wn;++cr){var Fn=fr[cr],fi=Fn.G,_o=Fn.H,Wo=0,Wr=1,dr=0;for(Wt=0;5>Wt;++Wt){Dn=gu[Wt],fi[Wt]=ci,_o[Wt]=ln,!Wt&&0<Jn&&(Dn+=1<<Jn);i:{var _s,za=Dn,cl=zn,ga=hr,jd=ci,Sh=ln,Wn=0,qo=cl.m,Ch=$(qo,1);if(i(ga,0,0,za),Ch){var Ah=$(qo,1)+1,of=$(qo,1),af=$(qo,of==0?1:8);ga[af]=1,Ah==2&&(ga[af=$(qo,8)]=1);var ya=1}else{var $n=o(19),kr=$(qo,4)+4;if(19<kr){cl.a=3;var pr=0;break i}for(_s=0;_s<kr;++_s)$n[Zv[_s]]=$(qo,3);var fl=void 0,Va=void 0,hl=cl,om=$n,Dr=za,sf=ga,sc=0,xa=hl.m,Ho=8,oo=s(128,X);r:for(;B(oo,0,7,om,19);){if($(xa,1)){var uc=2+2*$(xa,3);if((fl=2+$(xa,uc))>Dr)break r}else fl=Dr;for(Va=0;Va<Dr&&fl--;){ve(xa);var uf=oo[0+(127&Q(xa))];de(xa,xa.u+uf.g);var Ss=uf.value;if(16>Ss)sf[Va++]=Ss,Ss!=0&&(Ho=Ss);else{var Ud=Ss==16,kh=Ss-16,zd=tf[kh],Eh=$(xa,rc[kh])+zd;if(Va+Eh>Dr)break r;for(var Vd=Ud?Ho:0;0<Eh--;)sf[Va++]=Vd}}sc=1;break r}sc||(hl.a=3),ya=sc}(ya=ya&&!qo.h)&&(Wn=B(jd,Sh,8,ga,za)),ya&&Wn!=0?pr=Wn:(cl.a=3,pr=0)}if(pr==0)break n;if(Wr&&Ld[Wt]==1&&(Wr=ci[ln].g==0),Wo+=ci[ln].g,ln+=pr,3>=Wt){var dl,lf=hr[0];for(dl=1;dl<Dn;++dl)hr[dl]>lf&&(lf=hr[dl]);dr+=lf}}if(Fn.nd=Wr,Fn.Qb=0,Wr&&(Fn.qb=(fi[3][_o[3]+0].value<<24|fi[1][_o[1]+0].value<<16|fi[2][_o[2]+0].value)>>>0,Wo==0&&256>fi[0][_o[0]+0].value&&(Fn.Qb=1,Fn.qb+=fi[0][_o[0]+0].value<<8)),Fn.jc=!Fn.Qb&&6>dr,Fn.jc){var lc,ao=Fn;for(lc=0;lc<xo;++lc){var Wa=lc,Go=ao.pd[Wa],_u=ao.G[0][ao.H[0]+Wa];256<=_u.value?(Go.g=_u.g+256,Go.value=_u.value):(Go.g=0,Go.value=0,Wa>>=sr(_u,8,Go),Wa>>=sr(ao.G[1][ao.H[1]+Wa],16,Go),Wa>>=sr(ao.G[2][ao.H[2]+Wa],0,Go),sr(ao.G[3][ao.H[3]+Wa],24,Go))}}}Hn.vc=dn,Hn.Wb=wn,Hn.Ya=fr,Hn.yc=Ar,tt=1;break t}tt=0}if(!(H=tt)){L.a=3;break e}if(0<Ne){if(re.ua=1<<Ne,!ee(re.Wa,Ne)){L.a=1,H=0;break e}}else re.ua=0;var cf=L,ff=Y,Wd=J,hf=cf.s,df=hf.xc;if(cf.c=ff,cf.i=Wd,hf.md=He(ff,df),hf.wc=df==0?-1:(1<<df)-1,P){L.xb=ma;break e}if((ye=o(Y*J))==null){L.a=1,H=0;break e}H=(H=fo(L,ye,0,Y,J,J,null))&&!Z.h;break e}return H?(z!=null?z[0]=ye:(t(ye==null),t(P)),L.$=0,P||Ji(re)):Ji(re),H}function ss(g,S){var P=g.c*g.i,L=P+S+16*S;return t(g.c<=S),g.V=o(L),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+P+S,1)}function Gs(g,S){var P=g.C,L=S-P,z=g.V,H=g.Ba+g.c*P;for(t(S<=g.l.o);0<L;){var Y=16<L?16:L,J=g.l.ma,Z=g.l.width,re=Z*Y,ye=J.ca,Ne=J.tb+Z*P,ie=g.Ta,_e=g.Ua;Ia(g,Y,z,H),hh(ie,_e,ye,Ne,re),oa(J,P,P+Y,ye,Ne,Z),L-=Y,z+=Y*g.c,P+=Y}t(P==S),g.C=g.Ma=S}function $s(){this.ub=this.yd=this.td=this.Rb=0}function Uu(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function sh(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Vn(){this.Yb=(function(){var g=[];return(function S(P,L,z){for(var H=z[L],Y=0;Y<H&&(P.push(z.length>L+1?[]:0),!(z.length<L+1));Y++)S(P[Y],L+1,z)})(g,0,[3,11]),g})()}function Wc(){this.jb=o(3),this.Wc=a([4,8],Vn),this.Xc=a([4,17],Vn)}function zu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Qi(){this.ld=this.La=this.dd=this.tc=0}function us(){this.Na=this.la=0}function qc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Vu(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ks(){this.uc=this.M=this.Nb=0,this.wa=Array(new Qi),this.Y=0,this.ya=Array(new Vu),this.aa=0,this.l=new Wu}function Zi(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Hc(){this.cb=this.a=0,this.sc="",this.m=new F,this.Od=new $s,this.Kc=new Uu,this.ed=new zu,this.Qa=new sh,this.Ic=this.$c=this.Aa=0,this.D=new Ks,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,F),this.ia=0,this.pb=s(4,qc),this.Pa=new Wc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Zi),this.Hd=0,this.rb=Array(new us),this.sb=0,this.wa=Array(new Qi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Vu),this.L=this.aa=0,this.gd=a([4,2],Qi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function wr(g,S){return 0>g?0:g>S?S:g}function Wu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function uh(){var g=new Hc;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,yu||(yu=aa)),g}function br(g,S,P){return g.a==0&&(g.a=S,g.sc=P,g.cb=0),0}function Xs(g,S,P){return 3<=P&&g[S+0]==157&&g[S+1]==1&&g[S+2]==42}function eo(g,S){if(g==null)return 0;if(g.a=0,g.sc="OK",S==null)return br(g,2,"null VP8Io passed to VP8GetHeaders()");var P=S.data,L=S.w,z=S.ha;if(4>z)return br(g,7,"Truncated header.");var H=P[L+0]|P[L+1]<<8|P[L+2]<<16,Y=g.Od;if(Y.Rb=!(1&H),Y.td=H>>1&7,Y.yd=H>>4&1,Y.ub=H>>5,3<Y.td)return br(g,3,"Incorrect keyframe parameters.");if(!Y.yd)return br(g,4,"Frame not displayable.");L+=3,z-=3;var J=g.Kc;if(Y.Rb){if(7>z)return br(g,7,"cannot parse picture header");if(!Xs(P,L,z))return br(g,3,"Bad code word");J.c=16383&(P[L+4]<<8|P[L+3]),J.Td=P[L+4]>>6,J.i=16383&(P[L+6]<<8|P[L+5]),J.Ud=P[L+6]>>6,L+=7,z-=7,g.za=J.c+15>>4,g.Ub=J.i+15>>4,S.width=J.c,S.height=J.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,i((H=g.Pa).jb,0,255,H.jb.length),t((H=g.Qa)!=null),H.Cb=0,H.Bb=0,H.Fb=1,i(H.Zb,0,0,H.Zb.length),i(H.Lb,0,0,H.Lb)}if(Y.ub>z)return br(g,7,"bad partition length");he(H=g.m,P,L,Y.ub),L+=Y.ub,z-=Y.ub,Y.Rb&&(J.Ld=Ce(H),J.Kd=Ce(H)),J=g.Qa;var Z,re=g.Pa;if(t(H!=null),t(J!=null),J.Cb=Ce(H),J.Cb){if(J.Bb=Ce(H),Ce(H)){for(J.Fb=Ce(H),Z=0;4>Z;++Z)J.Zb[Z]=Ce(H)?W(H,7):0;for(Z=0;4>Z;++Z)J.Lb[Z]=Ce(H)?W(H,6):0}if(J.Bb)for(Z=0;3>Z;++Z)re.jb[Z]=Ce(H)?ae(H,8):255}else J.Bb=0;if(H.Ka)return br(g,3,"cannot parse segment header");if((J=g.ed).zd=Ce(H),J.Tb=ae(H,6),J.wb=ae(H,3),J.Pc=Ce(H),J.Pc&&Ce(H)){for(re=0;4>re;++re)Ce(H)&&(J.vd[re]=W(H,6));for(re=0;4>re;++re)Ce(H)&&(J.od[re]=W(H,6))}if(g.L=J.Tb==0?0:J.zd?1:2,H.Ka)return br(g,3,"cannot parse filter header");var ye=z;if(z=Z=L,L=Z+ye,J=ye,g.Xb=(1<<ae(g.m,2))-1,ye<3*(re=g.Xb))P=7;else{for(Z+=3*re,J-=3*re,ye=0;ye<re;++ye){var Ne=P[z+0]|P[z+1]<<8|P[z+2]<<16;Ne>J&&(Ne=J),he(g.Jc[+ye],P,Z,Ne),Z+=Ne,J-=Ne,z+=3}he(g.Jc[+re],P,Z,J),P=Z<L?0:5}if(P!=0)return br(g,P,"cannot parse partitions");for(P=ae(Z=g.m,7),z=Ce(Z)?W(Z,4):0,L=Ce(Z)?W(Z,4):0,J=Ce(Z)?W(Z,4):0,re=Ce(Z)?W(Z,4):0,Z=Ce(Z)?W(Z,4):0,ye=g.Qa,Ne=0;4>Ne;++Ne){if(ye.Cb){var ie=ye.Zb[Ne];ye.Fb||(ie+=P)}else{if(0<Ne){g.pb[Ne]=g.pb[0];continue}ie=P}var _e=g.pb[Ne];_e.Sc[0]=al[wr(ie+z,127)],_e.Sc[1]=ic[wr(ie+0,127)],_e.Eb[0]=2*al[wr(ie+L,127)],_e.Eb[1]=101581*ic[wr(ie+J,127)]>>16,8>_e.Eb[1]&&(_e.Eb[1]=8),_e.Qc[0]=al[wr(ie+re,117)],_e.Qc[1]=ic[wr(ie+Z,127)],_e.lc=ie+Z}if(!Y.Rb)return br(g,4,"Not a key frame.");for(Ce(H),Y=g.Pa,P=0;4>P;++P){for(z=0;8>z;++z)for(L=0;3>L;++L)for(J=0;11>J;++J)re=Le(H,nm[P][z][L][J])?ae(H,8):Md[P][z][L][J],Y.Wc[P][z].Yb[L][J]=re;for(z=0;17>z;++z)Y.Xc[P][z]=Y.Wc[P][wh[z]]}return g.kc=Ce(H),g.kc&&(g.Bd=ae(H,8)),g.cb=1}function aa(g,S,P,L,z,H,Y){var J=S[z].Yb[P];for(P=0;16>z;++z){if(!Le(g,J[P+0]))return z;for(;!Le(g,J[P+1]);)if(J=S[++z].Yb[0],P=0,z==16)return 16;var Z=S[z+1].Yb;if(Le(g,J[P+2])){var re=g,ye=0;if(Le(re,(ie=J)[(Ne=P)+3]))if(Le(re,ie[Ne+6])){for(J=0,Ne=2*(ye=Le(re,ie[Ne+8]))+(ie=Le(re,ie[Ne+9+ye])),ye=0,ie=yh[Ne];ie[J];++J)ye+=ye+Le(re,ie[J]);ye+=3+(8<<Ne)}else Le(re,ie[Ne+7])?(ye=7+2*Le(re,165),ye+=Le(re,145)):ye=5+Le(re,159);else ye=Le(re,ie[Ne+4])?3+Le(re,ie[Ne+5]):2;J=Z[2]}else ye=1,J=Z[1];Z=Y+xh[z],0>(re=g).b&&we(re);var Ne,ie=re.b,_e=(Ne=re.Ca>>1)-(re.I>>ie)>>31;--re.b,re.Ca+=_e,re.Ca|=1,re.I-=(Ne+1&_e)<<ie,H[Z]=((ye^_e)-_e)*L[(0<z)+0]}return 16}function Ys(g){var S=g.rb[g.sb-1];S.la=0,S.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function ho(g,S,P,L,z){z=g[S+P+32*L]+(z>>3),g[S+P+32*L]=-256&z?0>z?0:255:z}function Rr(g,S,P,L,z,H){ho(g,S,0,P,L+z),ho(g,S,1,P,L+H),ho(g,S,2,P,L-H),ho(g,S,3,P,L-z)}function Mo(g){return(20091*g>>16)+g}function zl(g,S,P,L){var z,H=0,Y=o(16);for(z=0;4>z;++z){var J=g[S+0]+g[S+8],Z=g[S+0]-g[S+8],re=(35468*g[S+4]>>16)-Mo(g[S+12]),ye=Mo(g[S+4])+(35468*g[S+12]>>16);Y[H+0]=J+ye,Y[H+1]=Z+re,Y[H+2]=Z-re,Y[H+3]=J-ye,H+=4,S++}for(z=H=0;4>z;++z)J=(g=Y[H+0]+4)+Y[H+8],Z=g-Y[H+8],re=(35468*Y[H+4]>>16)-Mo(Y[H+12]),ho(P,L,0,0,J+(ye=Mo(Y[H+4])+(35468*Y[H+12]>>16))),ho(P,L,1,0,Z+re),ho(P,L,2,0,Z-re),ho(P,L,3,0,J-ye),H++,L+=32}function Vl(g,S,P,L){var z=g[S+0]+4,H=35468*g[S+4]>>16,Y=Mo(g[S+4]),J=35468*g[S+1]>>16;Rr(P,L,0,z+Y,g=Mo(g[S+1]),J),Rr(P,L,1,z+H,g,J),Rr(P,L,2,z-H,g,J),Rr(P,L,3,z-Y,g,J)}function Js(g,S,P,L,z){zl(g,S,P,L),z&&zl(g,S+16,P,L+4)}function sa(g,S,P,L){du(g,S+0,P,L,1),du(g,S+32,P,L+128,1)}function qu(g,S,P,L){var z;for(g=g[S+0]+4,z=0;4>z;++z)for(S=0;4>S;++S)ho(P,L,S,z,g)}function mn(g,S,P,L){g[S+0]&&xn(g,S+0,P,L),g[S+16]&&xn(g,S+16,P,L+4),g[S+32]&&xn(g,S+32,P,L+128),g[S+48]&&xn(g,S+48,P,L+128+4)}function Qs(g,S,P,L){var z,H=o(16);for(z=0;4>z;++z){var Y=g[S+0+z]+g[S+12+z],J=g[S+4+z]+g[S+8+z],Z=g[S+4+z]-g[S+8+z],re=g[S+0+z]-g[S+12+z];H[0+z]=Y+J,H[8+z]=Y-J,H[4+z]=re+Z,H[12+z]=re-Z}for(z=0;4>z;++z)Y=(g=H[0+4*z]+3)+H[3+4*z],J=H[1+4*z]+H[2+4*z],Z=H[1+4*z]-H[2+4*z],re=g-H[3+4*z],P[L+0]=Y+J>>3,P[L+16]=re+Z>>3,P[L+32]=Y-J>>3,P[L+48]=re-Z>>3,L+=64}function ls(g,S,P){var L,z=S-32,H=xi,Y=255-g[z-1];for(L=0;L<P;++L){var J,Z=H,re=Y+g[S-1];for(J=0;J<P;++J)g[S+J]=Z[re+g[z+J]];S+=32}}function Wl(g,S){ls(g,S,4)}function Gc(g,S){ls(g,S,8)}function $c(g,S){ls(g,S,16)}function Hu(g,S){var P;for(P=0;16>P;++P)r(g,S+32*P,g,S-32,16)}function Gu(g,S){var P;for(P=16;0<P;--P)i(g,S,g[S-1],16),S+=32}function Ni(g,S,P){var L;for(L=0;16>L;++L)i(S,P+32*L,g,16)}function ua(g,S){var P,L=16;for(P=0;16>P;++P)L+=g[S-1+32*P]+g[S+P-32];Ni(L>>5,g,S)}function Ii(g,S){var P,L=8;for(P=0;16>P;++P)L+=g[S-1+32*P];Ni(L>>4,g,S)}function po(g,S){var P,L=8;for(P=0;16>P;++P)L+=g[S+P-32];Ni(L>>4,g,S)}function Zs(g,S){Ni(128,g,S)}function Bt(g,S,P){return g+2*S+P+2>>2}function la(g,S){var P,L=S-32;for(L=new Uint8Array([Bt(g[L-1],g[L+0],g[L+1]),Bt(g[L+0],g[L+1],g[L+2]),Bt(g[L+1],g[L+2],g[L+3]),Bt(g[L+2],g[L+3],g[L+4])]),P=0;4>P;++P)r(g,S+32*P,L,0,L.length)}function lh(g,S){var P=g[S-1],L=g[S-1+32],z=g[S-1+64],H=g[S-1+96];be(g,S+0,16843009*Bt(g[S-1-32],P,L)),be(g,S+32,16843009*Bt(P,L,z)),be(g,S+64,16843009*Bt(L,z,H)),be(g,S+96,16843009*Bt(z,H,H))}function Kc(g,S){var P,L=4;for(P=0;4>P;++P)L+=g[S+P-32]+g[S-1+32*P];for(L>>=3,P=0;4>P;++P)i(g,S+32*P,L,4)}function to(g,S){var P=g[S-1+0],L=g[S-1+32],z=g[S-1+64],H=g[S-1-32],Y=g[S+0-32],J=g[S+1-32],Z=g[S+2-32],re=g[S+3-32];g[S+0+96]=Bt(L,z,g[S-1+96]),g[S+1+96]=g[S+0+64]=Bt(P,L,z),g[S+2+96]=g[S+1+64]=g[S+0+32]=Bt(H,P,L),g[S+3+96]=g[S+2+64]=g[S+1+32]=g[S+0+0]=Bt(Y,H,P),g[S+3+64]=g[S+2+32]=g[S+1+0]=Bt(J,Y,H),g[S+3+32]=g[S+2+0]=Bt(Z,J,Y),g[S+3+0]=Bt(re,Z,J)}function Pa(g,S){var P=g[S+1-32],L=g[S+2-32],z=g[S+3-32],H=g[S+4-32],Y=g[S+5-32],J=g[S+6-32],Z=g[S+7-32];g[S+0+0]=Bt(g[S+0-32],P,L),g[S+1+0]=g[S+0+32]=Bt(P,L,z),g[S+2+0]=g[S+1+32]=g[S+0+64]=Bt(L,z,H),g[S+3+0]=g[S+2+32]=g[S+1+64]=g[S+0+96]=Bt(z,H,Y),g[S+3+32]=g[S+2+64]=g[S+1+96]=Bt(H,Y,J),g[S+3+64]=g[S+2+96]=Bt(Y,J,Z),g[S+3+96]=Bt(J,Z,Z)}function Xc(g,S){var P=g[S-1+0],L=g[S-1+32],z=g[S-1+64],H=g[S-1-32],Y=g[S+0-32],J=g[S+1-32],Z=g[S+2-32],re=g[S+3-32];g[S+0+0]=g[S+1+64]=H+Y+1>>1,g[S+1+0]=g[S+2+64]=Y+J+1>>1,g[S+2+0]=g[S+3+64]=J+Z+1>>1,g[S+3+0]=Z+re+1>>1,g[S+0+96]=Bt(z,L,P),g[S+0+64]=Bt(L,P,H),g[S+0+32]=g[S+1+96]=Bt(P,H,Y),g[S+1+32]=g[S+2+96]=Bt(H,Y,J),g[S+2+32]=g[S+3+96]=Bt(Y,J,Z),g[S+3+32]=Bt(J,Z,re)}function $u(g,S){var P=g[S+0-32],L=g[S+1-32],z=g[S+2-32],H=g[S+3-32],Y=g[S+4-32],J=g[S+5-32],Z=g[S+6-32],re=g[S+7-32];g[S+0+0]=P+L+1>>1,g[S+1+0]=g[S+0+64]=L+z+1>>1,g[S+2+0]=g[S+1+64]=z+H+1>>1,g[S+3+0]=g[S+2+64]=H+Y+1>>1,g[S+0+32]=Bt(P,L,z),g[S+1+32]=g[S+0+96]=Bt(L,z,H),g[S+2+32]=g[S+1+96]=Bt(z,H,Y),g[S+3+32]=g[S+2+96]=Bt(H,Y,J),g[S+3+64]=Bt(Y,J,Z),g[S+3+96]=Bt(J,Z,re)}function eu(g,S){var P=g[S-1+0],L=g[S-1+32],z=g[S-1+64],H=g[S-1+96];g[S+0+0]=P+L+1>>1,g[S+2+0]=g[S+0+32]=L+z+1>>1,g[S+2+32]=g[S+0+64]=z+H+1>>1,g[S+1+0]=Bt(P,L,z),g[S+3+0]=g[S+1+32]=Bt(L,z,H),g[S+3+32]=g[S+1+64]=Bt(z,H,H),g[S+3+64]=g[S+2+64]=g[S+0+96]=g[S+1+96]=g[S+2+96]=g[S+3+96]=H}function ql(g,S){var P=g[S-1+0],L=g[S-1+32],z=g[S-1+64],H=g[S-1+96],Y=g[S-1-32],J=g[S+0-32],Z=g[S+1-32],re=g[S+2-32];g[S+0+0]=g[S+2+32]=P+Y+1>>1,g[S+0+32]=g[S+2+64]=L+P+1>>1,g[S+0+64]=g[S+2+96]=z+L+1>>1,g[S+0+96]=H+z+1>>1,g[S+3+0]=Bt(J,Z,re),g[S+2+0]=Bt(Y,J,Z),g[S+1+0]=g[S+3+32]=Bt(P,Y,J),g[S+1+32]=g[S+3+64]=Bt(L,P,Y),g[S+1+64]=g[S+3+96]=Bt(z,L,P),g[S+1+96]=Bt(H,z,L)}function Oo(g,S){var P;for(P=0;8>P;++P)r(g,S+32*P,g,S-32,8)}function tu(g,S){var P;for(P=0;8>P;++P)i(g,S,g[S-1],8),S+=32}function Pi(g,S,P){var L;for(L=0;8>L;++L)i(S,P+32*L,g,8)}function Ku(g,S){var P,L=8;for(P=0;8>P;++P)L+=g[S+P-32]+g[S-1+32*P];Pi(L>>4,g,S)}function Hl(g,S){var P,L=4;for(P=0;8>P;++P)L+=g[S+P-32];Pi(L>>3,g,S)}function Gl(g,S){var P,L=4;for(P=0;8>P;++P)L+=g[S-1+32*P];Pi(L>>3,g,S)}function Xu(g,S){Pi(128,g,S)}function vo(g,S,P){var L=g[S-P],z=g[S+0],H=3*(z-L)+va[1020+g[S-2*P]-g[S+P]],Y=il[112+(H+4>>3)];g[S-P]=xi[255+L+il[112+(H+3>>3)]],g[S+0]=xi[255+z-Y]}function nu(g,S,P,L){var z=g[S+0],H=g[S+P];return wo[255+g[S-2*P]-g[S-P]]>L||wo[255+H-z]>L}function ru(g,S,P,L){return 4*wo[255+g[S-P]-g[S+0]]+wo[255+g[S-2*P]-g[S+P]]<=L}function mo(g,S,P,L,z){var H=g[S-3*P],Y=g[S-2*P],J=g[S-P],Z=g[S+0],re=g[S+P],ye=g[S+2*P],Ne=g[S+3*P];return 4*wo[255+J-Z]+wo[255+Y-re]>L?0:wo[255+g[S-4*P]-H]<=z&&wo[255+H-Y]<=z&&wo[255+Y-J]<=z&&wo[255+Ne-ye]<=z&&wo[255+ye-re]<=z&&wo[255+re-Z]<=z}function Ra(g,S,P,L){var z=2*L+1;for(L=0;16>L;++L)ru(g,S+L,P,z)&&vo(g,S+L,P)}function cs(g,S,P,L){var z=2*L+1;for(L=0;16>L;++L)ru(g,S+L*P,1,z)&&vo(g,S+L*P,1)}function $l(g,S,P,L){var z;for(z=3;0<z;--z)Ra(g,S+=4*P,P,L)}function iu(g,S,P,L){var z;for(z=3;0<z;--z)cs(g,S+=4,P,L)}function go(g,S,P,L,z,H,Y,J){for(H=2*H+1;0<z--;){if(mo(g,S,P,H,Y))if(nu(g,S,P,J))vo(g,S,P);else{var Z=g,re=S,ye=P,Ne=Z[re-2*ye],ie=Z[re-ye],_e=Z[re+0],Ee=Z[re+ye],Ue=Z[re+2*ye],Pe=27*(je=va[1020+3*(_e-ie)+va[1020+Ne-Ee]])+63>>7,Be=18*je+63>>7,je=9*je+63>>7;Z[re-3*ye]=xi[255+Z[re-3*ye]+je],Z[re-2*ye]=xi[255+Ne+Be],Z[re-ye]=xi[255+ie+Pe],Z[re+0]=xi[255+_e-Pe],Z[re+ye]=xi[255+Ee-Be],Z[re+2*ye]=xi[255+Ue-je]}S+=L}}function ca(g,S,P,L,z,H,Y,J){for(H=2*H+1;0<z--;){if(mo(g,S,P,H,Y))if(nu(g,S,P,J))vo(g,S,P);else{var Z=g,re=S,ye=P,Ne=Z[re-ye],ie=Z[re+0],_e=Z[re+ye],Ee=il[112+(4+(Ue=3*(ie-Ne))>>3)],Ue=il[112+(Ue+3>>3)],Pe=Ee+1>>1;Z[re-2*ye]=xi[255+Z[re-2*ye]+Pe],Z[re-ye]=xi[255+Ne+Ue],Z[re+0]=xi[255+ie-Ee],Z[re+ye]=xi[255+_e-Pe]}S+=L}}function si(g,S,P,L,z,H){go(g,S,P,1,16,L,z,H)}function yo(g,S,P,L,z,H){go(g,S,1,P,16,L,z,H)}function Yu(g,S,P,L,z,H){var Y;for(Y=3;0<Y;--Y)ca(g,S+=4*P,P,1,16,L,z,H)}function A(g,S,P,L,z,H){var Y;for(Y=3;0<Y;--Y)ca(g,S+=4,1,P,16,L,z,H)}function V(g,S,P,L,z,H,Y,J){go(g,S,z,1,8,H,Y,J),go(P,L,z,1,8,H,Y,J)}function le(g,S,P,L,z,H,Y,J){go(g,S,1,z,8,H,Y,J),go(P,L,1,z,8,H,Y,J)}function me(g,S,P,L,z,H,Y,J){ca(g,S+4*z,z,1,8,H,Y,J),ca(P,L+4*z,z,1,8,H,Y,J)}function ke(g,S,P,L,z,H,Y,J){ca(g,S+4,1,z,8,H,Y,J),ca(P,L+4,1,z,8,H,Y,J)}function ze(){this.ba=new Zt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $e(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function pt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function _t(){this.ua=0,this.Wa=new Rt,this.vb=new Rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new oe,this.yc=new X}function qt(){this.xb=this.a=0,this.l=new Wu,this.ca=new Zt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new _t,this.ab=0,this.gc=s(4,pt),this.Oc=0}function Jt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vn(g,S,P,L,z,H,Y){for(g=g==null?0:g[S+0],S=0;S<Y;++S)z[H+S]=g+P[L+S]&255,g=z[H+S]}function Yn(g,S,P,L,z,H,Y){var J;if(g==null)vn(null,null,P,L,z,H,Y);else for(J=0;J<Y;++J)z[H+J]=g[S+J]+P[L+J]&255}function _r(g,S,P,L,z,H,Y){if(g==null)vn(null,null,P,L,z,H,Y);else{var J,Z=g[S+0],re=Z,ye=Z;for(J=0;J<Y;++J)re=ye+(Z=g[S+J])-re,ye=P[L+J]+(-256&re?0>re?0:255:re)&255,re=Z,z[H+J]=ye}}function Un(g,S,P,L){var z=S.width,H=S.o;if(t(g!=null&&S!=null),0>P||0>=L||P+L>H)return null;if(!g.Cc){if(g.ga==null){var Y;if(g.ga=new Jt,(Y=g.ga==null)||(Y=S.width*S.o,t(g.Gb.length==0),g.Gb=o(Y),g.Uc=0,g.Gb==null?Y=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,Y=1),Y=!Y),!Y){Y=g.ga;var J=g.Fa,Z=g.P,re=g.qc,ye=g.mb,Ne=g.nb,ie=Z+1,_e=re-1,Ee=Y.l;if(t(J!=null&&ye!=null&&S!=null),ui[0]=null,ui[1]=vn,ui[2]=Yn,ui[3]=_r,Y.ca=ye,Y.tb=Ne,Y.c=S.width,Y.i=S.height,t(0<Y.c&&0<Y.i),1>=re)S=0;else if(Y.$a=3&J[Z+0],Y.Z=J[Z+0]>>2&3,Y.Lc=J[Z+0]>>4&3,Z=J[Z+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||Z)S=0;else if(Ee.put=Dt,Ee.ac=lo,Ee.bc=Yi,Ee.ma=Y,Ee.width=S.width,Ee.height=S.height,Ee.Da=S.Da,Ee.v=S.v,Ee.va=S.va,Ee.j=S.j,Ee.o=S.o,Y.$a)e:{t(Y.$a==1),S=Hs();t:for(;;){if(S==null){S=0;break e}if(t(Y!=null),Y.mc=S,S.c=Y.c,S.i=Y.i,S.l=Y.l,S.l.ma=Y,S.l.width=Y.c,S.l.height=Y.i,S.a=0,ne(S.m,J,ie,_e),!Fo(Y.c,Y.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&Do(S.s)?(Y.ic=1,J=S.c*S.i,S.Ta=null,S.Ua=0,S.V=o(J),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(Y.ic=0,S=ss(S,Y.c)),!S))break t;S=1;break e}Y.mc=null,S=0}else S=_e>=Y.c*Y.i;Y=!S}if(Y)return null;g.ga.Lc!=1?g.Ga=0:L=H-P}t(g.ga!=null),t(P+L<=H);e:{if(S=(J=g.ga).c,H=J.l.o,J.$a==0){if(ie=g.rc,_e=g.Vc,Ee=g.Fa,Z=g.P+1+P*S,re=g.mb,ye=g.nb+P*S,t(Z<=g.P+g.qc),J.Z!=0)for(t(ui[J.Z]!=null),Y=0;Y<L;++Y)ui[J.Z](ie,_e,Ee,Z,re,ye,S),ie=re,_e=ye,ye+=S,Z+=S;else for(Y=0;Y<L;++Y)r(re,ye,Ee,Z,S),ie=re,_e=ye,ye+=S,Z+=S;g.rc=ie,g.Vc=_e}else{if(t(J.mc!=null),S=P+L,t((Y=J.mc)!=null),t(S<=Y.i),Y.C>=S)S=1;else if(J.ic||Bo(),J.ic){J=Y.V,ie=Y.Ba,_e=Y.c;var Ue=Y.i,Pe=(Ee=1,Z=Y.$/_e,re=Y.$%_e,ye=Y.m,Ne=Y.s,Y.$),Be=_e*Ue,je=_e*S,We=Ne.wc,Ge=Pe<je?xr(Ne,re,Z):null;t(Pe<=Be),t(S<=Ue),t(Do(Ne));t:for(;;){for(;!ye.h&&Pe<je;){if(re&We||(Ge=xr(Ne,re,Z)),t(Ge!=null),ve(ye),256>(Ue=jn(Ge.G[0],Ge.H[0],ye)))J[ie+Pe]=Ue,++Pe,++re>=_e&&(re=0,++Z<=S&&!(Z%16)&&Kr(Y,Z));else{if(!(280>Ue)){Ee=0;break t}Ue=ai(Ue-256,ye);var St,ot=jn(Ge.G[4],Ge.H[4],ye);if(ve(ye),!(Pe>=(ot=co(_e,ot=ai(ot,ye)))&&Be-Pe>=Ue)){Ee=0;break t}for(St=0;St<Ue;++St)J[ie+Pe+St]=J[ie+Pe+St-ot];for(Pe+=Ue,re+=Ue;re>=_e;)re-=_e,++Z<=S&&!(Z%16)&&Kr(Y,Z);Pe<je&&re&We&&(Ge=xr(Ne,re,Z))}t(ye.h==ue(ye))}Kr(Y,Z>S?S:Z);break t}!Ee||ye.h&&Pe<Be?(Ee=0,Y.a=ye.h?5:3):Y.$=Pe,S=Ee}else S=fo(Y,Y.V,Y.Ba,Y.c,Y.i,S,Gs);if(!S){L=0;break e}}P+L>=H&&(g.Cc=1),L=1}if(!L)return null;if(g.Cc&&((L=g.ga)!=null&&(L.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+P*z}function Tr(g,S,P,L,z,H){for(;0<z--;){var Y,J=g,Z=S+(P?1:0),re=g,ye=S+(P?0:3);for(Y=0;Y<L;++Y){var Ne=re[ye+4*Y];Ne!=255&&(Ne*=32897,J[Z+4*Y+0]=J[Z+4*Y+0]*Ne>>23,J[Z+4*Y+1]=J[Z+4*Y+1]*Ne>>23,J[Z+4*Y+2]=J[Z+4*Y+2]*Ne>>23)}S+=H}}function ur(g,S,P,L,z){for(;0<L--;){var H;for(H=0;H<P;++H){var Y=g[S+2*H+0],J=15&(re=g[S+2*H+1]),Z=4369*J,re=(240&re|re>>4)*Z>>16;g[S+2*H+0]=(240&Y|Y>>4)*Z>>16&240|(15&Y|Y<<4)*Z>>16>>4&15,g[S+2*H+1]=240&re|J}S+=z}}function Xr(g,S,P,L,z,H,Y,J){var Z,re,ye=255;for(re=0;re<z;++re){for(Z=0;Z<L;++Z){var Ne=g[S+Z];H[Y+4*Z]=Ne,ye&=Ne}S+=P,Y+=J}return ye!=255}function Ta(g,S,P,L,z){var H;for(H=0;H<z;++H)P[L+H]=g[S+H]>>8}function Bo(){vu=Tr,fh=ur,Ql=Xr,hh=Ta}function La(g,S,P){T[g]=function(L,z,H,Y,J,Z,re,ye,Ne,ie,_e,Ee,Ue,Pe,Be,je,We){var Ge,St=We-1>>1,ot=J[Z+0]|re[ye+0]<<16,en=Ne[ie+0]|_e[Ee+0]<<16;t(L!=null);var vt=3*ot+en+131074>>2;for(S(L[z+0],255&vt,vt>>16,Ue,Pe),H!=null&&(vt=3*en+ot+131074>>2,S(H[Y+0],255&vt,vt>>16,Be,je)),Ge=1;Ge<=St;++Ge){var cn=J[Z+Ge]|re[ye+Ge]<<16,rr=Ne[ie+Ge]|_e[Ee+Ge]<<16,nn=ot+cn+en+rr+524296,at=nn+2*(cn+en)>>3;vt=at+ot>>1,ot=(nn=nn+2*(ot+rr)>>3)+cn>>1,S(L[z+2*Ge-1],255&vt,vt>>16,Ue,Pe+(2*Ge-1)*P),S(L[z+2*Ge-0],255&ot,ot>>16,Ue,Pe+(2*Ge-0)*P),H!=null&&(vt=nn+en>>1,ot=at+rr>>1,S(H[Y+2*Ge-1],255&vt,vt>>16,Be,je+(2*Ge-1)*P),S(H[Y+2*Ge+0],255&ot,ot>>16,Be,je+(2*Ge+0)*P)),ot=cn,en=rr}1&We||(vt=3*ot+en+131074>>2,S(L[z+We-1],255&vt,vt>>16,Ue,Pe+(We-1)*P),H!=null&&(vt=3*en+ot+131074>>2,S(H[Y+We-1],255&vt,vt>>16,Be,je+(We-1)*P)))}}function ou(){Li[Zc]=rm,Li[xs]=ws,Li[Td]=im,Li[Zl]=ul,Li[ec]=xu,Li[Tn]=oc,Li[ef]=bh,Li[ol]=ws,Li[mu]=ul,Li[tc]=xu,Li[nc]=oc}function Ju(g){return g&-16384?0>g?0:255:g>>bs}function fs(g,S){return Ju((19077*g>>8)+(26149*S>>8)-14234)}function au(g,S,P){return Ju((19077*g>>8)-(6419*S>>8)-(13320*P>>8)+8708)}function hs(g,S){return Ju((19077*g>>8)+(33050*S>>8)-17685)}function ds(g,S,P,L,z){L[z+0]=fs(g,P),L[z+1]=au(g,S,P),L[z+2]=hs(g,S)}function Yr(g,S,P,L,z){L[z+0]=hs(g,S),L[z+1]=au(g,S,P),L[z+2]=fs(g,P)}function su(g,S,P,L,z){var H=au(g,S,P);S=H<<3&224|hs(g,S)>>3,L[z+0]=248&fs(g,P)|H>>5,L[z+1]=S}function uu(g,S,P,L,z){var H=240&hs(g,S)|15;L[z+0]=240&fs(g,P)|au(g,S,P)>>4,L[z+1]=H}function Kl(g,S,P,L,z){L[z+0]=255,ds(g,S,P,L,z+1)}function Xl(g,S,P,L,z){Yr(g,S,P,L,z),L[z+3]=255}function yi(g,S,P,L,z){ds(g,S,P,L,z),L[z+3]=255}function jo(g,S,P){T[g]=function(L,z,H,Y,J,Z,re,ye,Ne){for(var ie=ye+(-2&Ne)*P;ye!=ie;)S(L[z+0],H[Y+0],J[Z+0],re,ye),S(L[z+1],H[Y+0],J[Z+0],re,ye+P),z+=2,++Y,++Z,ye+=2*P;1&Ne&&S(L[z+0],H[Y+0],J[Z+0],re,ye)}}function fa(g,S,P){return P==0?g==0?S==0?6:5:S==0?4:0:P}function Yc(g,S,P,L,z){switch(g>>>30){case 3:du(S,P,L,z,0);break;case 2:tr(S,P,L,z);break;case 1:xn(S,P,L,z)}}function no(g,S){var P,L,z=S.M,H=S.Nb,Y=g.oc,J=g.pc+40,Z=g.oc,re=g.pc+584,ye=g.oc,Ne=g.pc+600;for(P=0;16>P;++P)Y[J+32*P-1]=129;for(P=0;8>P;++P)Z[re+32*P-1]=129,ye[Ne+32*P-1]=129;for(0<z?Y[J-1-32]=Z[re-1-32]=ye[Ne-1-32]=129:(i(Y,J-32-1,127,21),i(Z,re-32-1,127,9),i(ye,Ne-32-1,127,9)),L=0;L<g.za;++L){var ie=S.ya[S.aa+L];if(0<L){for(P=-1;16>P;++P)r(Y,J+32*P-4,Y,J+32*P+12,4);for(P=-1;8>P;++P)r(Z,re+32*P-4,Z,re+32*P+4,4),r(ye,Ne+32*P-4,ye,Ne+32*P+4,4)}var _e=g.Gd,Ee=g.Hd+L,Ue=ie.ad,Pe=ie.Hc;if(0<z&&(r(Y,J-32,_e[Ee].y,0,16),r(Z,re-32,_e[Ee].f,0,8),r(ye,Ne-32,_e[Ee].ea,0,8)),ie.Za){var Be=Y,je=J-32+16;for(0<z&&(L>=g.za-1?i(Be,je,_e[Ee].y[15],4):r(Be,je,_e[Ee+1].y,0,4)),P=0;4>P;P++)Be[je+128+P]=Be[je+256+P]=Be[je+384+P]=Be[je+0+P];for(P=0;16>P;++P,Pe<<=2)Be=Y,je=J+_h[P],bo[ie.Ob[P]](Be,je),Yc(Pe,Ue,16*+P,Be,je)}else if(Be=fa(L,z,ie.Ob[0]),wi[Be](Y,J),Pe!=0)for(P=0;16>P;++P,Pe<<=2)Yc(Pe,Ue,16*+P,Y,J+_h[P]);for(P=ie.Gc,Be=fa(L,z,ie.Dd),Ti[Be](Z,re),Ti[Be](ye,Ne),Pe=Ue,Be=Z,je=re,255&(ie=0|P)&&(170&ie?Ri(Pe,256,Be,je):Nn(Pe,256,Be,je)),ie=ye,Pe=Ne,255&(P>>=8)&&(170&P?Ri(Ue,320,ie,Pe):Nn(Ue,320,ie,Pe)),z<g.Ub-1&&(r(_e[Ee].y,0,Y,J+480,16),r(_e[Ee].f,0,Z,re+224,8),r(_e[Ee].ea,0,ye,Ne+224,8)),P=8*H*g.B,_e=g.sa,Ee=g.ta+16*L+16*H*g.R,Ue=g.qa,ie=g.ra+8*L+P,Pe=g.Ha,Be=g.Ia+8*L+P,P=0;16>P;++P)r(_e,Ee+P*g.R,Y,J+32*P,16);for(P=0;8>P;++P)r(Ue,ie+P*g.B,Z,re+32*P,8),r(Pe,Be+P*g.B,ye,Ne+32*P,8)}}function ps(g,S,P,L,z,H,Y,J,Z){var re=[0],ye=[0],Ne=0,ie=Z!=null?Z.kd:0,_e=Z??new $e;if(g==null||12>P)return 7;_e.data=g,_e.w=S,_e.ha=P,S=[S],P=[P],_e.gb=[_e.gb];e:{var Ee=S,Ue=P,Pe=_e.gb;if(t(g!=null),t(Ue!=null),t(Pe!=null),Pe[0]=0,12<=Ue[0]&&!e(g,Ee[0],"RIFF")){if(e(g,Ee[0]+8,"WEBP")){Pe=3;break e}var Be=Xe(g,Ee[0]+4);if(12>Be||4294967286<Be){Pe=3;break e}if(ie&&Be>Ue[0]-8){Pe=7;break e}Pe[0]=Be,Ee[0]+=12,Ue[0]-=12}Pe=0}if(Pe!=0)return Pe;for(Be=0<_e.gb[0],P=P[0];;){e:{var je=g;Ue=S,Pe=P;var We=re,Ge=ye,St=Ee=[0];if((vt=Ne=[Ne])[0]=0,8>Pe[0])Pe=7;else{if(!e(je,Ue[0],"VP8X")){if(Xe(je,Ue[0]+4)!=10){Pe=3;break e}if(18>Pe[0]){Pe=7;break e}var ot=Xe(je,Ue[0]+8),en=1+Re(je,Ue[0]+12);if(2147483648<=en*(je=1+Re(je,Ue[0]+15))){Pe=3;break e}St!=null&&(St[0]=ot),We!=null&&(We[0]=en),Ge!=null&&(Ge[0]=je),Ue[0]+=18,Pe[0]-=18,vt[0]=1}Pe=0}}if(Ne=Ne[0],Ee=Ee[0],Pe!=0)return Pe;if(Ue=!!(2&Ee),!Be&&Ne)return 3;if(H!=null&&(H[0]=!!(16&Ee)),Y!=null&&(Y[0]=Ue),J!=null&&(J[0]=0),Y=re[0],Ee=ye[0],Ne&&Ue&&Z==null){Pe=0;break}if(4>P){Pe=7;break}if(Be&&Ne||!Be&&!Ne&&!e(g,S[0],"ALPH")){P=[P],_e.na=[_e.na],_e.P=[_e.P],_e.Sa=[_e.Sa];e:{ot=g,Pe=S,Be=P;var vt=_e.gb;We=_e.na,Ge=_e.P,St=_e.Sa,en=22,t(ot!=null),t(Be!=null),je=Pe[0];var cn=Be[0];for(t(We!=null),t(St!=null),We[0]=null,Ge[0]=null,St[0]=0;;){if(Pe[0]=je,Be[0]=cn,8>cn){Pe=7;break e}var rr=Xe(ot,je+4);if(4294967286<rr){Pe=3;break e}var nn=8+rr+1&-2;if(en+=nn,0<vt&&en>vt){Pe=3;break e}if(!e(ot,je,"VP8 ")||!e(ot,je,"VP8L")){Pe=0;break e}if(cn[0]<nn){Pe=7;break e}e(ot,je,"ALPH")||(We[0]=ot,Ge[0]=je+8,St[0]=rr),je+=nn,cn-=nn}}if(P=P[0],_e.na=_e.na[0],_e.P=_e.P[0],_e.Sa=_e.Sa[0],Pe!=0)break}P=[P],_e.Ja=[_e.Ja],_e.xa=[_e.xa];e:if(vt=g,Pe=S,Be=P,We=_e.gb[0],Ge=_e.Ja,St=_e.xa,ot=Pe[0],je=!e(vt,ot,"VP8 "),en=!e(vt,ot,"VP8L"),t(vt!=null),t(Be!=null),t(Ge!=null),t(St!=null),8>Be[0])Pe=7;else{if(je||en){if(vt=Xe(vt,ot+4),12<=We&&vt>We-12){Pe=3;break e}if(ie&&vt>Be[0]-8){Pe=7;break e}Ge[0]=vt,Pe[0]+=8,Be[0]-=8,St[0]=en}else St[0]=5<=Be[0]&&vt[ot+0]==47&&!(vt[ot+4]>>5),Ge[0]=Be[0];Pe=0}if(P=P[0],_e.Ja=_e.Ja[0],_e.xa=_e.xa[0],S=S[0],Pe!=0)break;if(4294967286<_e.Ja)return 3;if(J==null||Ue||(J[0]=_e.xa?2:1),Y=[Y],Ee=[Ee],_e.xa){if(5>P){Pe=7;break}J=Y,ie=Ee,Ue=H,g==null||5>P?g=0:5<=P&&g[S+0]==47&&!(g[S+4]>>5)?(Be=[0],vt=[0],We=[0],ne(Ge=new K,g,S,P),Lo(Ge,Be,vt,We)?(J!=null&&(J[0]=Be[0]),ie!=null&&(ie[0]=vt[0]),Ue!=null&&(Ue[0]=We[0]),g=1):g=0):g=0}else{if(10>P){Pe=7;break}J=Ee,g==null||10>P||!Xs(g,S+3,P-3)?g=0:(ie=g[S+0]|g[S+1]<<8|g[S+2]<<16,Ue=16383&(g[S+7]<<8|g[S+6]),g=16383&(g[S+9]<<8|g[S+8]),1&ie||3<(ie>>1&7)||!(ie>>4&1)||ie>>5>=_e.Ja||!Ue||!g?g=0:(Y&&(Y[0]=Ue),J&&(J[0]=g),g=1))}if(!g||(Y=Y[0],Ee=Ee[0],Ne&&(re[0]!=Y||ye[0]!=Ee)))return 3;Z!=null&&(Z[0]=_e,Z.offset=S-Z.w,t(4294967286>S-Z.w),t(Z.offset==Z.ha-P));break}return Pe==0||Pe==7&&Ne&&Z==null?(H!=null&&(H[0]|=_e.na!=null&&0<_e.na.length),L!=null&&(L[0]=Y),z!=null&&(z[0]=Ee),0):Pe}function Qu(g,S,P){var L=S.width,z=S.height,H=0,Y=0,J=L,Z=z;if(S.Da=g!=null&&0<g.Da,S.Da&&(J=g.cd,Z=g.bd,H=g.v,Y=g.j,11>P||(H&=-2,Y&=-2),0>H||0>Y||0>=J||0>=Z||H+J>L||Y+Z>z))return 0;if(S.v=H,S.j=Y,S.va=H+J,S.o=Y+Z,S.U=J,S.T=Z,S.da=g!=null&&0<g.da,S.da){if(!ft(J,Z,P=[g.ib],H=[g.hb]))return 0;S.ib=P[0],S.hb=H[0]}return S.ob=g!=null&&g.ob,S.Kb=g==null||!g.Sd,S.da&&(S.ob=S.ib<3*L/4&&S.hb<3*z/4,S.Kb=0),1}function Zu(g){if(g==null)return 2;if(11>g.S){var S=g.f.RGBA;S.fb+=(g.height-1)*S.A,S.A=-S.A}else S=g.f.kb,g=g.height,S.O+=(g-1)*S.fa,S.fa=-S.fa,S.N+=(g-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(g-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(g-1)*S.lb,S.lb=-S.lb);return 0}function Da(g,S,P,L){if(L==null||0>=g||0>=S)return 2;if(P!=null){if(P.Da){var z=P.cd,H=P.bd,Y=-2&P.v,J=-2&P.j;if(0>Y||0>J||0>=z||0>=H||Y+z>g||J+H>S)return 2;g=z,S=H}if(P.da){if(!ft(g,S,z=[P.ib],H=[P.hb]))return 2;g=z[0],S=H[0]}}L.width=g,L.height=S;e:{var Z=L.width,re=L.height;if(g=L.S,0>=Z||0>=re||!(g>=Zc&&13>g))g=2;else{if(0>=L.Rd&&L.sd==null){Y=H=z=S=0;var ye=(J=Z*ac[g])*re;if(11>g||(H=(re+1)/2*(S=(Z+1)/2),g==12&&(Y=(z=Z)*re)),(re=o(ye+2*H+Y))==null){g=1;break e}L.sd=re,11>g?((Z=L.f.RGBA).eb=re,Z.fb=0,Z.A=J,Z.size=ye):((Z=L.f.kb).y=re,Z.O=0,Z.fa=J,Z.Fd=ye,Z.f=re,Z.N=0+ye,Z.Ab=S,Z.Cd=H,Z.ea=re,Z.W=0+ye+H,Z.Db=S,Z.Ed=H,g==12&&(Z.F=re,Z.J=0+ye+2*H),Z.Tc=Y,Z.lb=z)}if(S=1,z=L.S,H=L.width,Y=L.height,z>=Zc&&13>z)if(11>z)g=L.f.RGBA,S&=(J=Math.abs(g.A))*(Y-1)+H<=g.size,S&=J>=H*ac[z],S&=g.eb!=null;else{g=L.f.kb,J=(H+1)/2,ye=(Y+1)/2,Z=Math.abs(g.fa),re=Math.abs(g.Ab);var Ne=Math.abs(g.Db),ie=Math.abs(g.lb),_e=ie*(Y-1)+H;S&=Z*(Y-1)+H<=g.Fd,S&=re*(ye-1)+J<=g.Cd,S=(S&=Ne*(ye-1)+J<=g.Ed)&Z>=H&re>=J&Ne>=J,S&=g.y!=null,S&=g.f!=null,S&=g.ea!=null,z==12&&(S&=ie>=H,S&=_e<=g.Tc,S&=g.F!=null)}else S=0;g=S?0:2}}return g!=0||P!=null&&P.fd&&(g=Zu(L)),g}var xo=64,ro=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],io=24,vs=32,ha=8,Fa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(g){return g},T.Predictor2=function(g,S,P){return S[P+0]},T.Predictor3=function(g,S,P){return S[P+1]},T.Predictor4=function(g,S,P){return S[P-1]},T.Predictor5=function(g,S,P){return ut(ut(g,S[P+1]),S[P+0])},T.Predictor6=function(g,S,P){return ut(g,S[P-1])},T.Predictor7=function(g,S,P){return ut(g,S[P+0])},T.Predictor8=function(g,S,P){return ut(S[P-1],S[P+0])},T.Predictor9=function(g,S,P){return ut(S[P+0],S[P+1])},T.Predictor10=function(g,S,P){return ut(ut(g,S[P-1]),ut(S[P+0],S[P+1]))},T.Predictor11=function(g,S,P){var L=S[P+0];return 0>=jt(L>>24&255,g>>24&255,(S=S[P-1])>>24&255)+jt(L>>16&255,g>>16&255,S>>16&255)+jt(L>>8&255,g>>8&255,S>>8&255)+jt(255&L,255&g,255&S)?L:g},T.Predictor12=function(g,S,P){var L=S[P+0];return(sn((g>>24&255)+(L>>24&255)-((S=S[P-1])>>24&255))<<24|sn((g>>16&255)+(L>>16&255)-(S>>16&255))<<16|sn((g>>8&255)+(L>>8&255)-(S>>8&255))<<8|sn((255&g)+(255&L)-(255&S)))>>>0},T.Predictor13=function(g,S,P){var L=S[P-1];return(Vt((g=ut(g,S[P+0]))>>24&255,L>>24&255)<<24|Vt(g>>16&255,L>>16&255)<<16|Vt(g>>8&255,L>>8&255)<<8|Vt(255&g,255&L))>>>0};var Ma=T.PredictorAdd0;T.PredictorAdd1=Xt,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var da=T.PredictorAdd2;dt("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var lr,lu=T.ColorIndexInverseTransform,pa=T.MapARGB,Uo=T.VP8LColorIndexInverseTransformAlpha,cu=T.MapAlpha,fu=T.VP8LPredictorsAdd=[];fu.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var el,tl,Oa,ms,gs,hu,ys,du,tr,Ri,xn,Nn,nr,Sr,zo,Yl,nl,Ba,Jc,rl,Qc,ch,Jl,pu,vu,fh,Ql,hh,dh=o(511),ph=o(2041),vh=o(225),mh=o(767),gh=0,va=ph,il=vh,xi=mh,wo=dh,Zc=0,xs=1,Td=2,Zl=3,ec=4,Tn=5,ef=6,ol=7,mu=8,tc=9,nc=10,rc=[2,3,7],tf=[3,3,11],gu=[280,256,256,256,40],Ld=[0,1,1,1,0],Zv=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],em=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Dd=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],nf=8,al=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ic=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],yu=null,yh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],xh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Fd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Md=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],tm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],wi=[],bo=[],Ti=[],ma=1,sl=2,ui=[],Li=[];La("UpsampleRgbLinePair",ds,3),La("UpsampleBgrLinePair",Yr,3),La("UpsampleRgbaLinePair",yi,4),La("UpsampleBgraLinePair",Xl,4),La("UpsampleArgbLinePair",Kl,4),La("UpsampleRgba4444LinePair",uu,2),La("UpsampleRgb565LinePair",su,2);var rm=T.UpsampleRgbLinePair,im=T.UpsampleBgrLinePair,ws=T.UpsampleRgbaLinePair,ul=T.UpsampleBgraLinePair,xu=T.UpsampleArgbLinePair,oc=T.UpsampleRgba4444LinePair,bh=T.UpsampleRgb565LinePair,ja=16,Vo=1<<ja-1,An=-227,In=482,bs=6,Jr=0,Di=o(256),wu=o(256),ll=o(256),Fi=o(256),rf=o(In-An),Od=o(In-An);jo("YuvToRgbRow",ds,3),jo("YuvToBgrRow",Yr,3),jo("YuvToRgbaRow",yi,4),jo("YuvToBgraRow",Xl,4),jo("YuvToArgbRow",Kl,4),jo("YuvToRgba4444Row",uu,2),jo("YuvToRgb565Row",su,2);var _h=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],bu=[0,2,8],Bd=[8,7,6,4,4,2,2,2,1,1,1,1],Ua=1;this.WebPDecodeRGBA=function(g,S,P,L,z){var H=xs,Y=new ze,J=new Zt;Y.ba=J,J.S=H,J.width=[J.width],J.height=[J.height];var Z=J.width,re=J.height,ye=new Lt;if(ye==null||g==null)var Ne=2;else t(ye!=null),Ne=ps(g,S,P,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Ne!=0?Z=0:(Z!=null&&(Z[0]=ye.width[0]),re!=null&&(re[0]=ye.height[0]),Z=1),Z){J.width=J.width[0],J.height=J.height[0],L!=null&&(L[0]=J.width),z!=null&&(z[0]=J.height);e:{if(L=new Wu,(z=new $e).data=g,z.w=S,z.ha=P,z.kd=1,S=[0],t(z!=null),((g=ps(z.data,z.w,z.ha,null,null,null,S,null,z))==0||g==7)&&S[0]&&(g=4),(S=g)==0){if(t(Y!=null),L.data=z.data,L.w=z.w+z.offset,L.ha=z.ha-z.offset,L.put=Dt,L.ac=lo,L.bc=Yi,L.ma=Y,z.xa){if((g=Hs())==null){Y=1;break e}if((function(ie,_e){var Ee=[0],Ue=[0],Pe=[0];t:for(;;){if(ie==null)return 0;if(_e==null)return ie.a=2,0;if(ie.l=_e,ie.a=0,ne(ie.m,_e.data,_e.w,_e.ha),!Lo(ie.m,Ee,Ue,Pe)){ie.a=3;break t}if(ie.xb=sl,_e.width=Ee[0],_e.height=Ue[0],!Fo(Ee[0],Ue[0],1,ie,null))break t;return 1}return t(ie.a!=0),0})(g,L)){if(L=(S=Da(L.width,L.height,Y.Oa,Y.ba))==0){t:{L=g;n:for(;;){if(L==null){L=0;break t}if(t(L.s.yc!=null),t(L.s.Ya!=null),t(0<L.s.Wb),t((P=L.l)!=null),t((z=P.ma)!=null),L.xb!=0){if(L.ca=z.ba,L.tb=z.tb,t(L.ca!=null),!Qu(z.Oa,P,Zl)){L.a=2;break n}if(!ss(L,P.width)||P.da)break n;if((P.da||Tt(L.ca.S))&&Bo(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&Bo()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!ee(L.s.vb,L.s.Wa.Xa)){L.a=1;break n}L.xb=0}if(!fo(L,L.V,L.Ba,L.c,L.i,P.o,as))break n;z.Dc=L.Ma,L=1;break t}t(L.a!=0),L=0}L=!L}L&&(S=g.a)}else S=g.a}else{if((g=new uh)==null){Y=1;break e}if(g.Fa=z.na,g.P=z.P,g.qc=z.Sa,eo(g,L)){if((S=Da(L.width,L.height,Y.Oa,Y.ba))==0){if(g.Aa=0,P=Y.Oa,t((z=g)!=null),P!=null){if(0<(Z=0>(Z=P.Md)?0:100<Z?255:255*Z/100)){for(re=ye=0;4>re;++re)12>(Ne=z.pb[re]).lc&&(Ne.ia=Z*Bd[0>Ne.lc?0:Ne.lc]>>3),ye|=Ne.ia;ye&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=P.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}(function(ie,_e){if(ie==null)return 0;if(_e==null)return br(ie,2,"NULL VP8Io parameter in VP8Decode().");if(!ie.cb&&!eo(ie,_e))return 0;if(t(ie.cb),_e.ac==null||_e.ac(_e)){_e.ob&&(ie.L=0);var Ee=bu[ie.L];if(ie.L==2?(ie.yb=0,ie.zb=0):(ie.yb=_e.v-Ee>>4,ie.zb=_e.j-Ee>>4,0>ie.yb&&(ie.yb=0),0>ie.zb&&(ie.zb=0)),ie.Va=_e.o+15+Ee>>4,ie.Hb=_e.va+15+Ee>>4,ie.Hb>ie.za&&(ie.Hb=ie.za),ie.Va>ie.Ub&&(ie.Va=ie.Ub),0<ie.L){var Ue=ie.ed;for(Ee=0;4>Ee;++Ee){var Pe;if(ie.Qa.Cb){var Be=ie.Qa.Lb[Ee];ie.Qa.Fb||(Be+=Ue.Tb)}else Be=Ue.Tb;for(Pe=0;1>=Pe;++Pe){var je=ie.gd[Ee][Pe],We=Be;if(Ue.Pc&&(We+=Ue.vd[0],Pe&&(We+=Ue.od[0])),0<(We=0>We?0:63<We?63:We)){var Ge=We;0<Ue.wb&&(Ge=4<Ue.wb?Ge>>2:Ge>>1)>9-Ue.wb&&(Ge=9-Ue.wb),1>Ge&&(Ge=1),je.dd=Ge,je.tc=2*We+Ge,je.ld=40<=We?2:15<=We?1:0}else je.tc=0;je.La=Pe}}}Ee=0}else br(ie,6,"Frame setup failed"),Ee=ie.a;if(Ee=Ee==0){if(Ee){ie.$c=0,0<ie.Aa||(ie.Ic=Ua);t:{Ee=ie.Ic,Ue=4*(Ge=ie.za);var St=32*Ge,ot=Ge+1,en=0<ie.L?Ge*(0<ie.Aa?2:1):0,vt=(ie.Aa==2?2:1)*Ge;if((je=Ue+832+(Pe=3*(16*Ee+bu[ie.L])/2*St)+(Be=ie.Fa!=null&&0<ie.Fa.length?ie.Kc.c*ie.Kc.i:0))!=je)Ee=0;else{if(je>ie.Vb){if(ie.Vb=0,ie.Ec=o(je),ie.Fc=0,ie.Ec==null){Ee=br(ie,1,"no memory during frame initialization.");break t}ie.Vb=je}je=ie.Ec,We=ie.Fc,ie.Ac=je,ie.Bc=We,We+=Ue,ie.Gd=s(St,Zi),ie.Hd=0,ie.rb=s(ot+1,us),ie.sb=1,ie.wa=en?s(en,Qi):null,ie.Y=0,ie.D.Nb=0,ie.D.wa=ie.wa,ie.D.Y=ie.Y,0<ie.Aa&&(ie.D.Y+=Ge),t(!0),ie.oc=je,ie.pc=We,We+=832,ie.ya=s(vt,Vu),ie.aa=0,ie.D.ya=ie.ya,ie.D.aa=ie.aa,ie.Aa==2&&(ie.D.aa+=Ge),ie.R=16*Ge,ie.B=8*Ge,Ge=(St=bu[ie.L])*ie.R,St=St/2*ie.B,ie.sa=je,ie.ta=We+Ge,ie.qa=ie.sa,ie.ra=ie.ta+16*Ee*ie.R+St,ie.Ha=ie.qa,ie.Ia=ie.ra+8*Ee*ie.B+St,ie.$c=0,We+=Pe,ie.mb=Be?je:null,ie.nb=Be?We:null,t(We+Be<=ie.Fc+ie.Vb),Ys(ie),i(ie.Ac,ie.Bc,0,Ue),Ee=1}}if(Ee){if(_e.ka=0,_e.y=ie.sa,_e.O=ie.ta,_e.f=ie.qa,_e.N=ie.ra,_e.ea=ie.Ha,_e.Vd=ie.Ia,_e.fa=ie.R,_e.Rc=ie.B,_e.F=null,_e.J=0,!gh){for(Ee=-255;255>=Ee;++Ee)dh[255+Ee]=0>Ee?-Ee:Ee;for(Ee=-1020;1020>=Ee;++Ee)ph[1020+Ee]=-128>Ee?-128:127<Ee?127:Ee;for(Ee=-112;112>=Ee;++Ee)vh[112+Ee]=-16>Ee?-16:15<Ee?15:Ee;for(Ee=-255;510>=Ee;++Ee)mh[255+Ee]=0>Ee?0:255<Ee?255:Ee;gh=1}ys=Qs,du=Js,Ri=sa,xn=qu,Nn=mn,tr=Vl,nr=si,Sr=yo,zo=V,Yl=le,nl=Yu,Ba=A,Jc=me,rl=ke,Qc=Ra,ch=cs,Jl=$l,pu=iu,bo[0]=Kc,bo[1]=Wl,bo[2]=la,bo[3]=lh,bo[4]=to,bo[5]=Xc,bo[6]=Pa,bo[7]=$u,bo[8]=ql,bo[9]=eu,wi[0]=ua,wi[1]=$c,wi[2]=Hu,wi[3]=Gu,wi[4]=Ii,wi[5]=po,wi[6]=Zs,Ti[0]=Ku,Ti[1]=Gc,Ti[2]=Oo,Ti[3]=tu,Ti[4]=Gl,Ti[5]=Hl,Ti[6]=Xu,Ee=1}else Ee=0}Ee&&(Ee=(function(cn,rr){for(cn.M=0;cn.M<cn.Va;++cn.M){var nn,at=cn.Jc[cn.M&cn.Xb],tt=cn.m,cr=cn;for(nn=0;nn<cr.za;++nn){var Wt=tt,ln=cr,zn=ln.Ac,zr=ln.Bc+4*nn,Cr=ln.zc,Jn=ln.ya[ln.aa+nn];if(ln.Qa.Bb?Jn.$b=Le(Wt,ln.Pa.jb[0])?2+Le(Wt,ln.Pa.jb[2]):Le(Wt,ln.Pa.jb[1]):Jn.$b=0,ln.kc&&(Jn.Ad=Le(Wt,ln.Bd)),Jn.Za=!Le(Wt,145)+0,Jn.Za){var Lr=Jn.Ob,Vr=0;for(ln=0;4>ln;++ln){var Hn,dn=Cr[0+ln];for(Hn=0;4>Hn;++Hn){dn=tm[zn[zr+Hn]][dn];for(var wn=Fd[Le(Wt,dn[0])];0<wn;)wn=Fd[2*wn+Le(Wt,dn[wn])];dn=-wn,zn[zr+Hn]=dn}r(Lr,Vr,zn,zr,4),Vr+=4,Cr[0+ln]=dn}}else dn=Le(Wt,156)?Le(Wt,128)?1:3:Le(Wt,163)?2:0,Jn.Ob[0]=dn,i(zn,zr,dn,4),i(Cr,0,dn,4);Jn.Dd=Le(Wt,142)?Le(Wt,114)?Le(Wt,183)?1:3:2:0}if(cr.m.Ka)return br(cn,7,"Premature end-of-partition0 encountered.");for(;cn.ja<cn.za;++cn.ja){if(cr=at,Wt=(tt=cn).rb[tt.sb-1],zn=tt.rb[tt.sb+tt.ja],nn=tt.ya[tt.aa+tt.ja],zr=tt.kc?nn.Ad:0)Wt.la=zn.la=0,nn.Za||(Wt.Na=zn.Na=0),nn.Hc=0,nn.Gc=0,nn.ia=0;else{var Gn,bn;if(Wt=zn,zn=cr,zr=tt.Pa.Xc,Cr=tt.ya[tt.aa+tt.ja],Jn=tt.pb[Cr.$b],ln=Cr.ad,Lr=0,Vr=tt.rb[tt.sb-1],dn=Hn=0,i(ln,Lr,0,384),Cr.Za)var ir=0,or=zr[3];else{wn=o(16);var Ln=Wt.Na+Vr.Na;if(Ln=yu(zn,zr[1],Ln,Jn.Eb,0,wn,0),Wt.Na=Vr.Na=(0<Ln)+0,1<Ln)ys(wn,0,ln,Lr);else{var li=wn[0]+3>>3;for(wn=0;256>wn;wn+=16)ln[Lr+wn]=li}ir=1,or=zr[0]}var Pn=15&Wt.la,Dn=15&Vr.la;for(wn=0;4>wn;++wn){var Ar=1&Dn;for(li=bn=0;4>li;++li)Pn=Pn>>1|(Ar=(Ln=yu(zn,or,Ln=Ar+(1&Pn),Jn.Sc,ir,ln,Lr))>ir)<<7,bn=bn<<2|(3<Ln?3:1<Ln?2:ln[Lr+0]!=0),Lr+=16;Pn>>=4,Dn=Dn>>1|Ar<<7,Hn=(Hn<<8|bn)>>>0}for(or=Pn,ir=Dn>>4,Gn=0;4>Gn;Gn+=2){for(bn=0,Pn=Wt.la>>4+Gn,Dn=Vr.la>>4+Gn,wn=0;2>wn;++wn){for(Ar=1&Dn,li=0;2>li;++li)Ln=Ar+(1&Pn),Pn=Pn>>1|(Ar=0<(Ln=yu(zn,zr[2],Ln,Jn.Qc,0,ln,Lr)))<<3,bn=bn<<2|(3<Ln?3:1<Ln?2:ln[Lr+0]!=0),Lr+=16;Pn>>=2,Dn=Dn>>1|Ar<<5}dn|=bn<<4*Gn,or|=Pn<<4<<Gn,ir|=(240&Dn)<<Gn}Wt.la=or,Vr.la=ir,Cr.Hc=Hn,Cr.Gc=dn,Cr.ia=43690&dn?0:Jn.ia,zr=!(Hn|dn)}if(0<tt.L&&(tt.wa[tt.Y+tt.ja]=tt.gd[nn.$b][nn.Za],tt.wa[tt.Y+tt.ja].La|=!zr),cr.Ka)return br(cn,7,"Premature end-of-file encountered.")}if(Ys(cn),tt=rr,cr=1,nn=(at=cn).D,Wt=0<at.L&&at.M>=at.zb&&at.M<=at.Va,at.Aa==0)t:{if(nn.M=at.M,nn.uc=Wt,no(at,nn),cr=1,nn=(bn=at.D).Nb,Wt=(dn=bu[at.L])*at.R,zn=dn/2*at.B,wn=16*nn*at.R,li=8*nn*at.B,zr=at.sa,Cr=at.ta-Wt+wn,Jn=at.qa,ln=at.ra-zn+li,Lr=at.Ha,Vr=at.Ia-zn+li,Dn=(Pn=bn.M)==0,Hn=Pn>=at.Va-1,at.Aa==2&&no(at,bn),bn.uc)for(Ar=(Ln=at).D.M,t(Ln.D.uc),bn=Ln.yb;bn<Ln.Hb;++bn){ir=bn,or=Ar;var Qr=(Mi=(dr=Ln).D).Nb;Gn=dr.R;var Mi=Mi.wa[Mi.Y+ir],fr=dr.sa,hr=dr.ta+16*Qr*Gn+16*ir,ci=Mi.dd,Fn=Mi.tc;if(Fn!=0)if(t(3<=Fn),dr.L==1)0<ir&&ch(fr,hr,Gn,Fn+4),Mi.La&&pu(fr,hr,Gn,Fn),0<or&&Qc(fr,hr,Gn,Fn+4),Mi.La&&Jl(fr,hr,Gn,Fn);else{var fi=dr.B,_o=dr.qa,Wo=dr.ra+8*Qr*fi+8*ir,Wr=dr.Ha,dr=dr.Ia+8*Qr*fi+8*ir;Qr=Mi.ld,0<ir&&(Sr(fr,hr,Gn,Fn+4,ci,Qr),Yl(_o,Wo,Wr,dr,fi,Fn+4,ci,Qr)),Mi.La&&(Ba(fr,hr,Gn,Fn,ci,Qr),rl(_o,Wo,Wr,dr,fi,Fn,ci,Qr)),0<or&&(nr(fr,hr,Gn,Fn+4,ci,Qr),zo(_o,Wo,Wr,dr,fi,Fn+4,ci,Qr)),Mi.La&&(nl(fr,hr,Gn,Fn,ci,Qr),Jc(_o,Wo,Wr,dr,fi,Fn,ci,Qr))}}if(at.ia&&alert("todo:DitherRow"),tt.put!=null){if(bn=16*Pn,Pn=16*(Pn+1),Dn?(tt.y=at.sa,tt.O=at.ta+wn,tt.f=at.qa,tt.N=at.ra+li,tt.ea=at.Ha,tt.W=at.Ia+li):(bn-=dn,tt.y=zr,tt.O=Cr,tt.f=Jn,tt.N=ln,tt.ea=Lr,tt.W=Vr),Hn||(Pn-=dn),Pn>tt.o&&(Pn=tt.o),tt.F=null,tt.J=null,at.Fa!=null&&0<at.Fa.length&&bn<Pn&&(tt.J=Un(at,tt,bn,Pn-bn),tt.F=at.mb,tt.F==null&&tt.F.length==0)){cr=br(at,3,"Could not decode alpha data.");break t}bn<tt.j&&(dn=tt.j-bn,bn=tt.j,t(!(1&dn)),tt.O+=at.R*dn,tt.N+=at.B*(dn>>1),tt.W+=at.B*(dn>>1),tt.F!=null&&(tt.J+=tt.width*dn)),bn<Pn&&(tt.O+=tt.v,tt.N+=tt.v>>1,tt.W+=tt.v>>1,tt.F!=null&&(tt.J+=tt.v),tt.ka=bn-tt.j,tt.U=tt.va-tt.v,tt.T=Pn-bn,cr=tt.put(tt))}nn+1!=at.Ic||Hn||(r(at.sa,at.ta-Wt,zr,Cr+16*at.R,Wt),r(at.qa,at.ra-zn,Jn,ln+8*at.B,zn),r(at.Ha,at.Ia-zn,Lr,Vr+8*at.B,zn))}if(!cr)return br(cn,6,"Output aborted.")}return 1})(ie,_e)),_e.bc!=null&&_e.bc(_e),Ee&=1}return Ee?(ie.cb=0,Ee):0})(g,L)||(S=g.a)}}else S=g.a}S==0&&Y.Oa!=null&&Y.Oa.fd&&(S=Zu(Y.ba))}Y=S}H=Y!=0?null:11>H?J.f.RGBA.eb:J.f.kb.y}else H=null;return H};var ac=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(T,j){for(var D="",B=0;B<4;B++)D+=String.fromCharCode(T[j++]);return D}function h(T,j){return T[j+0]|T[j+1]<<8}function d(T,j){return(T[j+0]|T[j+1]<<8|T[j+2]<<16)>>>0}function v(T,j){return(T[j+0]|T[j+1]<<8|T[j+2]<<16|T[j+3]<<24)>>>0}new u;var p=[0],y=[0],x=[],w=new u,_=n,E=(function(T,j){var D={},B=0,X=!1,G=0,oe=0;if(D.frames=[],!(function(F,K){for(var Q=0;Q<4;Q++)if(F[K+Q]!="RIFF".charCodeAt(Q))return!0;return!1})(T,j)){for(v(T,j+=4),j+=8;j<T.length;){var he=c(T,j),ae=v(T,j+=4);j+=4;var W=ae+(1&ae);switch(he){case"VP8 ":case"VP8L":D.frames[B]===void 0&&(D.frames[B]={}),($=D.frames[B]).src_off=X?oe:j-8,$.src_size=G+ae+8,B++,X&&(X=!1,G=0,oe=0);break;case"VP8X":($=D.header={}).feature_flags=T[j];var ne=j+4;$.canvas_width=1+d(T,ne),ne+=3,$.canvas_height=1+d(T,ne),ne+=3;break;case"ALPH":X=!0,G=W+8,oe=j-8;break;case"ANIM":($=D.header).bgcolor=v(T,j),ne=j+4,$.loop_count=h(T,ne),ne+=2;break;case"ANMF":var se,$;($=D.frames[B]={}).offset_x=2*d(T,j),j+=3,$.offset_y=2*d(T,j),j+=3,$.width=1+d(T,j),j+=3,$.height=1+d(T,j),j+=3,$.duration=d(T,j),j+=3,se=T[j++],$.dispose=1&se,$.blend=se>>1&1}he!="ANMF"&&(j+=W)}return D}})(_,0);E.response=_,E.rgbaoutput=!0,E.dataurl=!1;var I=E.header?E.header:null,C=E.frames?E.frames:null;if(I){I.loop_counter=I.loop_count,p=[I.canvas_height],y=[I.canvas_width];for(var N=0;N<C.length&&C[N].blend!=0;N++);}var O=C[0],U=w.WebPDecodeRGBA(_,O.src_off,O.src_size,y,p);O.rgba=U,O.imgwidth=y[0],O.imgheight=p[0];for(var M=0;M<y[0]*p[0]*4;M++)x[M]=U[M];return this.width=y,this.height=p,this.data=x,this}(function(n){var t,e,r,i,o,s,a,u,c,h=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new u,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new s,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new s,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,e=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,u=this.internal.Matrix,c=new h}]);var d=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=F;Object.defineProperty(this,"pdf",{get:function(){return K}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(ee){Q=!!ee}});var ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ue},set:function(ee){ue=!!ee}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(ee){isNaN(ee)||(de=ee)}});var ve=0;Object.defineProperty(this,"posY",{get:function(){return ve},set:function(ee){isNaN(ee)||(ve=ee)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ee){var Je;typeof ee=="number"?Je=[ee,ee,ee,ee]:((Je=new Array(4))[0]=ee[0],Je[1]=ee.length>=2?ee[1]:Je[0],Je[2]=ee.length>=3?ee[2]:Je[0],Je[3]=ee.length>=4?ee[3]:Je[1]),c.margin=Je}});var we=!1;Object.defineProperty(this,"autoPaging",{get:function(){return we},set:function(ee){we=ee}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(ee){Ce=ee}});var Le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Le},set:function(ee){Le=ee}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ee){ee instanceof h&&(c=ee)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ee){c.path=ee}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(ee){be=ee}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ee){var Je;Je=v(ee),this.ctx.fillStyle=Je.style,this.ctx.isFillTransparent=Je.a===0,this.ctx.fillOpacity=Je.a,this.pdf.setFillColor(Je.r,Je.g,Je.b,{a:Je.a}),this.pdf.setTextColor(Je.r,Je.g,Je.b,{a:Je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ee){var Je=v(ee);this.ctx.strokeStyle=Je.style,this.ctx.isStrokeTransparent=Je.a===0,this.ctx.strokeOpacity=Je.a,Je.a===0?this.pdf.setDrawColor(255,255,255):(Je.a,this.pdf.setDrawColor(Je.r,Je.g,Je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ee){["butt","round","square"].indexOf(ee)!==-1&&(this.ctx.lineCap=ee,this.pdf.setLineCap(ee))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ee){isNaN(ee)||(this.ctx.lineWidth=ee,this.pdf.setLineWidth(ee))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ee){["bevel","round","miter"].indexOf(ee)!==-1&&(this.ctx.lineJoin=ee,this.pdf.setLineJoin(ee))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ee){isNaN(ee)||(this.ctx.miterLimit=ee,this.pdf.setMiterLimit(ee))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ee){this.ctx.textBaseline=ee}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ee){["right","end","center","left","start"].indexOf(ee)!==-1&&(this.ctx.textAlign=ee)}});var De=null,Re=null,Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(ee){De=null,Re=null,Xe=ee}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ee){var Je;if(this.ctx.font=ee,(Je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ee))!==null){var Rt=Je[1];Je[2];var ft=Je[3],He=Je[4];Je[5];var mt=Je[6],nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(He)[2];He=Math.floor(nt==="px"?parseFloat(He)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(He)*this.pdf.getFontSize():parseFloat(He)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(He);var ht=(function(dt){var Xn,un,Yt=[],Qt=dt.trim();if(Qt==="")return X0;if(Qt in s5)return[s5[Qt]];for(;Qt!=="";){switch(un=null,Xn=(Qt=l5(Qt)).charAt(0)){case'"':case"'":un=E7(Qt.substring(1),Xn);break;default:un=N7(Qt)}if(un===null||(Yt.push(un[0]),(Qt=l5(un[1]))!==""&&Qt.charAt(0)!==","))return X0;Qt=Qt.replace(/^,/,"")}return Yt})(mt);if(this.fontFaces){var ut=(function(dt,Xn){var un=dt.getFontList(),Yt=JSON.stringify(un);if(De===null||Re!==Yt){var Qt=(function(Bn){var Pt=[];return Object.keys(Bn).forEach(function(En){Bn[En].forEach(function(Tt){var Ht=null;switch(Tt){case"bold":Ht={family:En,weight:"bold"};break;case"italic":Ht={family:En,style:"italic"};break;case"bolditalic":Ht={family:En,weight:"bold",style:"italic"};break;case"":case"normal":Ht={family:En}}Ht!==null&&(Ht.ref={name:En,style:Tt},Pt.push(Ht))})}),Pt})(un);De=(function(Bn){for(var Pt={},En=0;En<Bn.length;++En){var Tt=K0(Bn[En]),Ht=Tt.family,Cn=Tt.stretch,Zt=Tt.style,Lt=Tt.weight;Pt[Ht]=Pt[Ht]||{},Pt[Ht][Cn]=Pt[Ht][Cn]||{},Pt[Ht][Cn][Zt]=Pt[Ht][Cn][Zt]||{},Pt[Ht][Cn][Zt][Lt]=Tt}return Pt})(Qt.concat(Xn)),Re=Yt}return De})(this.pdf,this.fontFaces),sn=ht.map(function(dt){return{family:dt,stretch:"normal",weight:ft,style:Rt}}),Vt=(function(dt,Xn,un){for(var Yt=(un=un||{}).defaultFontFamily||"times",Qt=Object.assign({},k7,un.genericFontFamilies||{}),Bn=null,Pt=null,En=0;En<Xn.length;++En)if(Qt[(Bn=K0(Xn[En])).family]&&(Bn.family=Qt[Bn.family]),dt.hasOwnProperty(Bn.family)){Pt=dt[Bn.family];break}if(!(Pt=Pt||dt[Yt]))throw new Error("Could not find a font-family for the rule '"+u5(Bn)+"' and default family '"+Yt+"'.");if(Pt=(function(Tt,Ht){if(Ht[Tt])return Ht[Tt];var Cn=$g[Tt],Zt=Cn<=$g.normal?-1:1,Lt=a5(Ht,uC,Cn,Zt);if(!Lt)throw new Error("Could not find a matching font-stretch value for "+Tt);return Lt})(Bn.stretch,Pt),Pt=(function(Tt,Ht){if(Ht[Tt])return Ht[Tt];for(var Cn=sC[Tt],Zt=0;Zt<Cn.length;++Zt)if(Ht[Cn[Zt]])return Ht[Cn[Zt]];throw new Error("Could not find a matching font-style for "+Tt)})(Bn.style,Pt),!(Pt=(function(Tt,Ht){if(Ht[Tt])return Ht[Tt];if(Tt===400&&Ht[500])return Ht[500];if(Tt===500&&Ht[400])return Ht[400];var Cn=A7[Tt],Zt=a5(Ht,lC,Cn,Tt<400?-1:1);if(!Zt)throw new Error("Could not find a matching font-weight for value "+Tt);return Zt})(Bn.weight,Pt)))throw new Error("Failed to resolve a font for the rule '"+u5(Bn)+"'.");return Pt})(ut,sn);this.pdf.setFont(Vt.ref.name,Vt.ref.style)}else{var jt="";(ft==="bold"||parseInt(ft,10)>=700||Rt==="bold")&&(jt="bold"),Rt==="italic"&&(jt+="italic"),jt.length===0&&(jt="normal");for(var Xt="",Ft={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<ht.length;lt++){if(this.pdf.internal.getFont(ht[lt],jt,{noFallback:!0,disableWarning:!0})!==void 0){Xt=ht[lt];break}if(jt==="bolditalic"&&this.pdf.internal.getFont(ht[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Xt=ht[lt],jt="bold";else if(this.pdf.internal.getFont(ht[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Xt=ht[lt],jt="normal";break}}if(Xt===""){for(var Ut=0;Ut<ht.length;Ut++)if(Ft[ht[Ut]]){Xt=Ft[ht[Ut]];break}}Xt=Xt===""?"Times":Xt,this.pdf.setFont(Xt,jt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ee){this.ctx.globalCompositeOperation=ee}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ee){this.ctx.globalAlpha=ee}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ee){this.ctx.lineDashOffset=ee,$.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ee){this.ctx.lineDash=ee,$.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ee){this.ctx.ignoreClearRect=!!ee}})};d.prototype.setLineDash=function(F){this.lineDash=F},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){C.call(this,"fill",!1)},d.prototype.stroke=function(){C.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(F,K){if(isNaN(F)||isNaN(K))throw qn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new s(F,K));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new s(F,K)},d.prototype.closePath=function(){var F=new s(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&On(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){F=new s(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(F.x,F.y)},d.prototype.lineTo=function(F,K){if(isNaN(F)||isNaN(K))throw qn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new s(F,K));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new s(Q.x,Q.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},d.prototype.quadraticCurveTo=function(F,K,Q,ue){if(isNaN(Q)||isNaN(ue)||isNaN(F)||isNaN(K))throw qn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new s(Q,ue)),ve=this.ctx.transform.applyToPoint(new s(F,K));this.path.push({type:"qct",x1:ve.x,y1:ve.y,x:de.x,y:de.y}),this.ctx.lastPoint=new s(de.x,de.y)},d.prototype.bezierCurveTo=function(F,K,Q,ue,de,ve){if(isNaN(de)||isNaN(ve)||isNaN(F)||isNaN(K)||isNaN(Q)||isNaN(ue))throw qn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var we=this.ctx.transform.applyToPoint(new s(de,ve)),Ce=this.ctx.transform.applyToPoint(new s(F,K)),Le=this.ctx.transform.applyToPoint(new s(Q,ue));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:Le.x,y2:Le.y,x:we.x,y:we.y}),this.ctx.lastPoint=new s(we.x,we.y)},d.prototype.arc=function(F,K,Q,ue,de,ve){if(isNaN(F)||isNaN(K)||isNaN(Q)||isNaN(ue)||isNaN(de))throw qn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ve=!!ve,!this.ctx.transform.isIdentity){var we=this.ctx.transform.applyToPoint(new s(F,K));F=we.x,K=we.y;var Ce=this.ctx.transform.applyToPoint(new s(0,Q)),Le=this.ctx.transform.applyToPoint(new s(0,0));Q=Math.sqrt(Math.pow(Ce.x-Le.x,2)+Math.pow(Ce.y-Le.y,2))}Math.abs(de-ue)>=2*Math.PI&&(ue=0,de=2*Math.PI),this.path.push({type:"arc",x:F,y:K,radius:Q,startAngle:ue,endAngle:de,counterclockwise:ve})},d.prototype.arcTo=function(F,K,Q,ue,de){throw new Error("arcTo not implemented.")},d.prototype.rect=function(F,K,Q,ue){if(isNaN(F)||isNaN(K)||isNaN(Q)||isNaN(ue))throw qn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,K),this.lineTo(F+Q,K),this.lineTo(F+Q,K+ue),this.lineTo(F,K+ue),this.lineTo(F,K),this.lineTo(F+Q,K),this.lineTo(F,K)},d.prototype.fillRect=function(F,K,Q,ue){if(isNaN(F)||isNaN(K)||isNaN(Q)||isNaN(ue))throw qn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,K,Q,ue),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},d.prototype.strokeRect=function(F,K,Q,ue){if(isNaN(F)||isNaN(K)||isNaN(Q)||isNaN(ue))throw qn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(F,K,Q,ue),this.stroke())},d.prototype.clearRect=function(F,K,Q,ue){if(isNaN(F)||isNaN(K)||isNaN(Q)||isNaN(ue))throw qn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,K,Q,ue))},d.prototype.save=function(F){F=typeof F!="boolean"||F;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var ue=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ue}},d.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(K),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(F){var K,Q,ue,de;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))K=0,Q=0,ue=0,de=0;else{var ve=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(ve!==null)K=parseInt(ve[1]),Q=parseInt(ve[2]),ue=parseInt(ve[3]),de=1;else if((ve=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)K=parseInt(ve[1]),Q=parseInt(ve[2]),ue=parseInt(ve[3]),de=parseFloat(ve[4]);else{if(de=1,typeof F=="string"&&F.charAt(0)!=="#"){var we=new eC(F);F=we.ok?we.toHex():"#000000"}F.length===4?(K=F.substring(1,2),K+=K,Q=F.substring(2,3),Q+=Q,ue=F.substring(3,4),ue+=ue):(K=F.substring(1,3),Q=F.substring(3,5),ue=F.substring(5,7)),K=parseInt(K,16),Q=parseInt(Q,16),ue=parseInt(ue,16)}}return{r:K,g:Q,b:ue,a:de,style:F}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(F,K,Q,ue){if(isNaN(K)||isNaN(Q)||typeof F!="string")throw qn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ue=isNaN(ue)?void 0:ue,!p.call(this)){var de=W(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;B.call(this,{text:F,x:K,y:Q,scale:ve,angle:de,align:this.textAlign,maxWidth:ue})}},d.prototype.strokeText=function(F,K,Q,ue){if(isNaN(K)||isNaN(Q)||typeof F!="string")throw qn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){ue=isNaN(ue)?void 0:ue;var de=W(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;B.call(this,{text:F,x:K,y:Q,scale:ve,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:ue})}},d.prototype.measureText=function(F){if(typeof F!="string")throw qn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,Q=this.pdf.internal.scaleFactor,ue=K.internal.getFontSize(),de=K.getStringUnitWidth(F)*ue/K.internal.scaleFactor;return new function(ve){var we=(ve=ve||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return we}}),this}({width:de*=Math.round(96*Q/72*1e4)/1e4})},d.prototype.scale=function(F,K){if(isNaN(F)||isNaN(K))throw qn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new u(F,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},d.prototype.rotate=function(F){if(isNaN(F))throw qn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new u(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.translate=function(F,K){if(isNaN(F)||isNaN(K))throw qn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new u(1,0,0,1,F,K);this.ctx.transform=this.ctx.transform.multiply(Q)},d.prototype.transform=function(F,K,Q,ue,de,ve){if(isNaN(F)||isNaN(K)||isNaN(Q)||isNaN(ue)||isNaN(de)||isNaN(ve))throw qn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var we=new u(F,K,Q,ue,de,ve);this.ctx.transform=this.ctx.transform.multiply(we)},d.prototype.setTransform=function(F,K,Q,ue,de,ve){F=isNaN(F)?1:F,K=isNaN(K)?0:K,Q=isNaN(Q)?0:Q,ue=isNaN(ue)?1:ue,de=isNaN(de)?0:de,ve=isNaN(ve)?0:ve,this.ctx.transform=new u(F,K,Q,ue,de,ve)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(F,K,Q,ue,de,ve,we,Ce,Le){var be=this.pdf.getImageProperties(F),De=1,Re=1,Xe=1,ee=1;ue!==void 0&&Ce!==void 0&&(Xe=Ce/ue,ee=Le/de,De=be.width/ue*Ce/ue,Re=be.height/de*Le/de),ve===void 0&&(ve=K,we=Q,K=0,Q=0),ue!==void 0&&Ce===void 0&&(Ce=ue,Le=de),ue===void 0&&Ce===void 0&&(Ce=be.width,Le=be.height);var Je=this.ctx.transform.decompose(),Rt=W(Je.rotate.shx),ft=new u,He=(ft=(ft=(ft=ft.multiply(Je.translate)).multiply(Je.skew)).multiply(Je.scale)).applyToRectangle(new a(ve-K*Xe,we-Q*ee,ue*De,de*Re));if(this.autoPaging){for(var mt,nt=w.call(this,He),ht=[],ut=0;ut<nt.length;ut+=1)ht.indexOf(nt[ut])===-1&&ht.push(nt[ut]);I(ht);for(var sn=ht[0],Vt=ht[ht.length-1],jt=sn;jt<Vt+1;jt++){this.pdf.setPage(jt);var Xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=jt===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=jt===1?0:lt+(jt-2)*Ut;if(this.ctx.clip_path.length!==0){var Xn=this.path;mt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(mt,this.posX+this.margin[3],-dt+Ft+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=Xn}var un=JSON.parse(JSON.stringify(He));un=E([un],this.posX+this.margin[3],-dt+Ft+this.ctx.prevPageLastElemOffset)[0];var Yt=(jt>sn||jt<Vt)&&x.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xt,Ut,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",un.x,un.y,un.w,un.h,null,null,Rt),Yt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(F,"JPEG",He.x,He.y,He.w,He.h,null,null,Rt)};var w=function(F,K,Q){var ue=[];K=K||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":ue.push(Math.floor((F.y+de)/Q)+1);break;case"arc":ue.push(Math.floor((F.y+de-F.radius)/Q)+1),ue.push(Math.floor((F.y+de+F.radius)/Q)+1);break;case"qct":var ve=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);ue.push(Math.floor((ve.y+de)/Q)+1),ue.push(Math.floor((ve.y+ve.h+de)/Q)+1);break;case"bct":var we=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);ue.push(Math.floor((we.y+de)/Q)+1),ue.push(Math.floor((we.y+we.h+de)/Q)+1);break;case"rect":ue.push(Math.floor((F.y+de)/Q)+1),ue.push(Math.floor((F.y+F.h+de)/Q)+1)}for(var Ce=0;Ce<ue.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<ue[Ce];)_.call(this);return ue},_=function(){var F=this.fillStyle,K=this.strokeStyle,Q=this.font,ue=this.lineCap,de=this.lineWidth,ve=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=K,this.font=Q,this.lineCap=ue,this.lineWidth=de,this.lineJoin=ve},E=function(F,K,Q){for(var ue=0;ue<F.length;ue++)switch(F[ue].type){case"bct":F[ue].x2+=K,F[ue].y2+=Q;case"qct":F[ue].x1+=K,F[ue].y1+=Q;default:F[ue].x+=K,F[ue].y+=Q}return F},I=function(F){return F.sort(function(K,Q){return K-Q})},C=function(F,K){var Q=this.fillStyle,ue=this.strokeStyle,de=this.lineCap,ve=this.lineWidth,we=Math.abs(ve*this.ctx.transform.scaleX),Ce=this.lineJoin;if(this.autoPaging){for(var Le,be,De=JSON.parse(JSON.stringify(this.path)),Re=JSON.parse(JSON.stringify(this.path)),Xe=[],ee=0;ee<Re.length;ee++)if(Re[ee].x!==void 0)for(var Je=w.call(this,Re[ee]),Rt=0;Rt<Je.length;Rt+=1)Xe.indexOf(Je[Rt])===-1&&Xe.push(Je[Rt]);for(var ft=0;ft<Xe.length;ft++)for(;this.pdf.internal.getNumberOfPages()<Xe[ft];)_.call(this);I(Xe);for(var He=Xe[0],mt=Xe[Xe.length-1],nt=He;nt<mt+1;nt++){this.pdf.setPage(nt),this.fillStyle=Q,this.strokeStyle=ue,this.lineCap=de,this.lineWidth=we,this.lineJoin=Ce;var ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ut=nt===1?this.posY+this.margin[0]:this.margin[0],sn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],jt=nt===1?0:sn+(nt-2)*Vt;if(this.ctx.clip_path.length!==0){var Xt=this.path;Le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Le,this.posX+this.margin[3],-jt+ut+this.ctx.prevPageLastElemOffset),N.call(this,F,!0),this.path=Xt}if(be=JSON.parse(JSON.stringify(De)),this.path=E(be,this.posX+this.margin[3],-jt+ut+this.ctx.prevPageLastElemOffset),K===!1||nt===0){var Ft=(nt>He||nt<mt)&&x.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,Vt,null).clip().discardPath()),N.call(this,F,K),Ft&&this.pdf.restoreGraphicsState()}this.lineWidth=ve}this.path=De}else this.lineWidth=we,N.call(this,F,K),this.lineWidth=ve},N=function(F,K){if((F!=="stroke"||K||!y.call(this))&&(F==="stroke"||K||!p.call(this))){for(var Q,ue,de=[],ve=this.path,we=0;we<ve.length;we++){var Ce=ve[we];switch(Ce.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:Ce,deltas:[],abs:[]});break;case"lt":var Le=de.length;if(ve[we-1]&&!isNaN(ve[we-1].x)&&(Q=[Ce.x-ve[we-1].x,Ce.y-ve[we-1].y],Le>0)){for(;Le>=0;Le--)if(de[Le-1].close!==!0&&de[Le-1].begin!==!0){de[Le-1].deltas.push(Q),de[Le-1].abs.push(Ce);break}}break;case"bct":Q=[Ce.x1-ve[we-1].x,Ce.y1-ve[we-1].y,Ce.x2-ve[we-1].x,Ce.y2-ve[we-1].y,Ce.x-ve[we-1].x,Ce.y-ve[we-1].y],de[de.length-1].deltas.push(Q);break;case"qct":var be=ve[we-1].x+2/3*(Ce.x1-ve[we-1].x),De=ve[we-1].y+2/3*(Ce.y1-ve[we-1].y),Re=Ce.x+2/3*(Ce.x1-Ce.x),Xe=Ce.y+2/3*(Ce.y1-Ce.y),ee=Ce.x,Je=Ce.y;Q=[be-ve[we-1].x,De-ve[we-1].y,Re-ve[we-1].x,Xe-ve[we-1].y,ee-ve[we-1].x,Je-ve[we-1].y],de[de.length-1].deltas.push(Q);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(Ce)}}ue=K?null:F==="stroke"?"stroke":"fill";for(var Rt=!1,ft=0;ft<de.length;ft++)if(de[ft].arc)for(var He=de[ft].abs,mt=0;mt<He.length;mt++){var nt=He[mt];nt.type==="arc"?M.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,K,!Rt):X.call(this,nt.x,nt.y),Rt=!0}else if(de[ft].close===!0)this.pdf.internal.out("h"),Rt=!1;else if(de[ft].begin!==!0){var ht=de[ft].start.x,ut=de[ft].start.y;G.call(this,de[ft].deltas,ht,ut),Rt=!0}ue&&T.call(this,ue),K&&j.call(this)}},O=function(F){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-Q;case"top":return F+K-Q;case"hanging":return F+K-2*Q;case"middle":return F+K/2-Q;default:return F}},U=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(K,Q){this.colorStops.push([K,Q])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(F,K,Q,ue,de,ve,we,Ce,Le){for(var be=he.call(this,Q,ue,de,ve),De=0;De<be.length;De++){var Re=be[De];De===0&&(Le?D.call(this,Re.x1+F,Re.y1+K):X.call(this,Re.x1+F,Re.y1+K)),oe.call(this,F,K,Re.x2,Re.y2,Re.x3,Re.y3,Re.x4,Re.y4)}Ce?j.call(this):T.call(this,we)},T=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},j=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(F,K){this.pdf.internal.out(e(F)+" "+r(K)+" m")},B=function(F){var K;switch(F.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var Q,ue,de,ve=this.pdf.getTextDimensions(F.text),we=O.call(this,F.y),Ce=U.call(this,we)-ve.h,Le=this.ctx.transform.applyToPoint(new s(F.x,we));if(this.autoPaging){var be=this.ctx.transform.decompose(),De=new u;De=(De=(De=De.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var Re=this.ctx.transform.applyToRectangle(new a(F.x,we,ve.w,ve.h)),Xe=De.applyToRectangle(new a(F.x,Ce,ve.w,ve.h)),ee=w.call(this,Xe),Je=[],Rt=0;Rt<ee.length;Rt+=1)Je.indexOf(ee[Rt])===-1&&Je.push(ee[Rt]);I(Je);for(var ft=Je[0],He=Je[Je.length-1],mt=ft;mt<He+1;mt++){this.pdf.setPage(mt);var nt=mt===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[2],sn=ut-this.margin[0],Vt=this.pdf.internal.pageSize.width-this.margin[1],jt=Vt-this.margin[3],Xt=mt===1?0:ht+(mt-2)*sn;if(this.ctx.clip_path.length!==0){var Ft=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Q,this.posX+this.margin[3],-1*Xt+nt),N.call(this,"fill",!0),this.path=Ft}var lt=E([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-Xt+nt+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*F.scale),de=this.lineWidth,this.lineWidth=de*F.scale);var Ut=this.autoPaging!=="text";if(Ut||lt.y+lt.h<=ut){if(Ut||lt.y>=nt&&lt.x<=Vt){var dt=Ut?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Vt-lt.x)[0],Xn=E([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-Xt+nt+this.ctx.prevPageLastElemOffset)[0],un=Ut&&(mt>ft||mt<He)&&x.call(this);un&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],jt,sn,null).clip().discardPath()),this.pdf.text(dt,Xn.x,Xn.y,{angle:F.angle,align:K,renderingMode:F.renderingMode}),un&&this.pdf.restoreGraphicsState()}}else lt.y<ut&&(this.ctx.prevPageLastElemOffset+=ut-lt.y);F.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=de)}}else F.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*F.scale),de=this.lineWidth,this.lineWidth=de*F.scale),this.pdf.text(F.text,Le.x+this.posX,Le.y+this.posY,{angle:F.angle,align:K,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=de)},X=function(F,K,Q,ue){Q=Q||0,ue=ue||0,this.pdf.internal.out(e(F+Q)+" "+r(K+ue)+" l")},G=function(F,K,Q){return this.pdf.lines(F,K,Q,null,null)},oe=function(F,K,Q,ue,de,ve,we,Ce){this.pdf.internal.out([t(i(Q+F)),t(o(ue+K)),t(i(de+F)),t(o(ve+K)),t(i(we+F)),t(o(Ce+K)),"c"].join(" "))},he=function(F,K,Q,ue){for(var de=2*Math.PI,ve=Math.PI/2;K>Q;)K-=de;var we=Math.abs(Q-K);we<de&&ue&&(we=de-we);for(var Ce=[],Le=ue?-1:1,be=K;we>1e-5;){var De=be+Le*Math.min(we,ve);Ce.push(ae.call(this,F,be,De)),we-=Math.abs(De-be),be=De}return Ce},ae=function(F,K,Q){var ue=(Q-K)/2,de=F*Math.cos(ue),ve=F*Math.sin(ue),we=de,Ce=-ve,Le=we*we+Ce*Ce,be=Le+we*de+Ce*ve,De=4/3*(Math.sqrt(2*Le*be)-be)/(we*ve-Ce*de),Re=we-De*Ce,Xe=Ce+De*we,ee=Re,Je=-Xe,Rt=ue+K,ft=Math.cos(Rt),He=Math.sin(Rt);return{x1:F*Math.cos(K),y1:F*Math.sin(K),x2:Re*ft-Xe*He,y2:Re*He+Xe*ft,x3:ee*ft-Je*He,y3:ee*He+Je*ft,x4:F*Math.cos(Q),y4:F*Math.sin(Q)}},W=function(F){return 180*F/Math.PI},ne=function(F,K,Q,ue,de,ve){var we=F+.5*(Q-F),Ce=K+.5*(ue-K),Le=de+.5*(Q-de),be=ve+.5*(ue-ve),De=Math.min(F,de,we,Le),Re=Math.max(F,de,we,Le),Xe=Math.min(K,ve,Ce,be),ee=Math.max(K,ve,Ce,be);return new a(De,Xe,Re-De,ee-Xe)},se=function(F,K,Q,ue,de,ve,we,Ce){var Le,be,De,Re,Xe,ee,Je,Rt,ft,He,mt,nt,ht,ut,sn=Q-F,Vt=ue-K,jt=de-Q,Xt=ve-ue,Ft=we-de,lt=Ce-ve;for(be=0;be<41;be++)ft=(Je=(De=F+(Le=be/40)*sn)+Le*((Xe=Q+Le*jt)-De))+Le*(Xe+Le*(de+Le*Ft-Xe)-Je),He=(Rt=(Re=K+Le*Vt)+Le*((ee=ue+Le*Xt)-Re))+Le*(ee+Le*(ve+Le*lt-ee)-Rt),be==0?(mt=ft,nt=He,ht=ft,ut=He):(mt=Math.min(mt,ft),nt=Math.min(nt,He),ht=Math.max(ht,ft),ut=Math.max(ut,He));return new a(Math.round(mt),Math.round(nt),Math.round(ht-mt),Math.round(ut-nt))},$=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,K,Q=(F=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:K}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(It.API),(function(n){var t=function(s){var a,u,c,h,d,v,p,y,x,w;for(u=[],c=0,h=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;h>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(v=(d=((d=((d=((d=(d-(w=d%85))/85)-(x=d%85))/85)-(y=d%85))/85)-(p=d%85))/85)%85,u.push(v+33,p+33,y+33,x+33,w+33)):u.push(122);return(function(_,E){for(var I=E;I>0;I--)_.pop()})(u,a.length),String.fromCharCode.apply(String,u)+"~>"},e=function(s){var a,u,c,h,d,v=String,p="length",y=255,x="charCodeAt",w="slice",_="replace";for(s[w](-2),s=s[w](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),c=[],h=0,d=(s+=a="uuuuu"[w](s[p]%5||5))[p];d>h;h+=5)u=52200625*(s[x](h)-33)+614125*(s[x](h+1)-33)+7225*(s[x](h+2)-33)+85*(s[x](h+3)-33)+(s[x](h+4)-33),c.push(y&u>>24,y&u>>16,y&u>>8,y&u);return(function(E,I){for(var C=I;C>0;C--)E.pop()})(c,a[p]),v.fromCharCode.apply(v,c)},r=function(s){return s.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var u="",c=0;c<s.length;c+=2)u+=String.fromCharCode("0x"+(s[c]+s[c+1]));return u},o=function(s){for(var a=new Uint8Array(s.length),u=s.length;u--;)a[u]=s.charCodeAt(u);return(a=Ug(a)).reduce(function(c,h){return c+String.fromCharCode(h)},"")};n.processDataByFilters=function(s,a){var u=0,c=s||"",h=[];for(typeof(a=a||[])=="string"&&(a=[a]),u=0;u<a.length;u+=1)switch(a[u]){case"ASCII85Decode":case"/ASCII85Decode":c=e(c),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=o(c),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[u]+'" is not implemented')}return{data:c,reverseChain:h.reverse().join(" ")}}})(It.API),(function(n){n.loadFile=function(t,e,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(u,c,h){var d=new XMLHttpRequest,v=0,p=function(y){var x=y.length,w=[],_=String.fromCharCode;for(v=0;v<x;v+=1)w.push(_(255&y.charCodeAt(v)));return w.join("")};if(d.open("GET",u,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?h(p(this.responseText)):h(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)})(i,o,s)}catch{}return a})(t,e,r)},n.loadImageFile=n.loadFile})(It.API),(function(n){function t(){return(Kt.html2canvas?Promise.resolve(Kt.html2canvas):P0(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function e(){return(Kt.DOMPurify?Promise.resolve(Kt.DOMPurify):P0(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var u=On(a);return u==="undefined"?"undefined":u==="string"||a instanceof String?"string":u==="number"||a instanceof Number?"number":u==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(a,u){var c=document.createElement(a);for(var h in u.className&&(c.className=u.className),u.innerHTML&&u.dompurify&&(c.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)c.style[h]=u.style[h];return c},o=function a(u,c){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),d=u.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||h.appendChild(a(d,c));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h},s=function a(u){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),h=a.convert(Promise.resolve(),c);return(h=h.setProgress(1,a,1,[a])).set(u)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,u){return a.__proto__=u||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,u){return this.then(function(){switch(u=u||(function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),u){case"string":return this.then(e).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(u){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,u(this.prop.container,c)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(u){var c=this.opt.jsPDF,h=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=h,h)for(var p=0;p<h.length;++p){var y=h[p],x=y.src.find(function(w){return w.format==="truetype"});x&&c.addFont(x.url,y.ref.name,y.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,c.context2d.save(!0),u(this.prop.container,v)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,u,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,u):this.outputPdf(a,u)},s.prototype.outputPdf=function(a,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,u)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var u=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(u)})},s.prototype.get=function(a,u){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return u?u(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function u(c,h){return Math.floor(c*h/72*96)}return this.then(function(){(a=a||It.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:u(a.inner.width,a.k),height:u(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,u,c,h){return a!=null&&(this.progress.val=a),u!=null&&(this.progress.state=u),c!=null&&(this.progress.n=c),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,u,c,h){return this.setProgress(a?this.progress.val+a:null,u||null,c?this.progress.n+c:null,h?this.progress.stack.concat(h):null)},s.prototype.then=function(a,u){var c=this;return this.thenCore(a,u,function(h,d){return c.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(v){return c.updateProgress(null,h),v}).then(h,d).then(function(v){return c.updateProgress(1),v})})},s.prototype.thenCore=function(a,u,c){c=c||Promise.prototype.then;var h=this;a&&(a=a.bind(h)),u&&(u=u.bind(h));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:s.convert(Object.assign({},h),Promise.prototype),v=c.call(d,a,u);return s.convert(v,h.__proto__)},s.prototype.thenExternal=function(a,u){return Promise.prototype.then.call(this,a,u)},s.prototype.thenList=function(a){var u=this;return a.forEach(function(c){u=u.thenCore(c)}),u},s.prototype.catch=function(a){a&&(a=a.bind(this));var u=Promise.prototype.catch.call(this,a);return s.convert(u,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,It.getPageSize=function(a,u,c){if(On(a)==="object"){var h=a;a=h.orientation,u=h.unit||u,c=h.format||c}u=u||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var d,v=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+u}var y,x=0,w=0;if(p.hasOwnProperty(v))x=p[v][1]/d,w=p[v][0]/d;else try{x=c[1],w=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",w>x&&(y=w,w=x,x=y);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",x>w&&(y=w,w=x,x=y)}return{width:w,height:x,unit:u,k:d,orientation:a}},n.html=function(a,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(K0):null;var c=new s(u);return u.worker?c:c.from(a).doCallback()}})(It.API),It.API.addJS=function(n){return f5=n,this.internal.events.subscribe("postPutResources",function(){Bp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Bp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),c5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+f5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Bp!==void 0&&c5!==void 0&&this.internal.out("/Names <</JavaScript "+Bp+" 0 R>>")}),this},(function(n){var t;n.events.push(["postPutResources",function(){var e=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var u=a[1];e.internal.newObjectDeferredBegin(u,!1)}e.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,h=[];for(o=0;o<c;o++){var d=e.internal.newObject();h.push(d);var v=e.internal.getPageInfo(o+1);e.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var p=e.internal.newObject();for(e.internal.write("<< /Names [ "),o=0;o<h.length;o++)e.internal.write("(page_"+(o+1)+")"+h[o]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+p+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(r){r.id=e.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},e.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},e.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var u=e.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},e.outline.line=function(r){this.ctx.val+=r+`\r
`},e.outline.makeRef=function(r){return r.id+" 0 R"},e.outline.makeString=function(r){return"("+e.internal.pdfEscape(r)+")"},e.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(It.API),(function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,r,i,o,s,a){var u,c=this.decode.DCT_DECODE,h=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=s||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,u=(function(d){for(var v,p=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,x={width:0,height:0,numcomponents:1},w=4;w<y;w+=2){if(w+=p,t.indexOf(d.charCodeAt(w+1))!==-1){v=256*d.charCodeAt(w+5)+d.charCodeAt(w+6),x={width:256*d.charCodeAt(w+7)+d.charCodeAt(w+8),height:v,numcomponents:d.charCodeAt(w+9)};break}p=256*d.charCodeAt(w+2)+d.charCodeAt(w+3)}return x})(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),u.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:e,width:u.width,height:u.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return h}})(It.API),It.API.processPNG=function(n,t,e,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=f7(n,{checkCrc:!0}),s=o.width,a=o.height,u=o.channels,c=o.palette,h=o.depth;i=c&&u===1?(function(M){for(var T=M.width,j=M.height,D=M.data,B=M.palette,X=M.depth,G=!1,oe=[],he=[],ae=void 0,W=!1,ne=0,se=0;se<B.length;se++){var $=vb(B[se],4),F=$[0],K=$[1],Q=$[2],ue=$[3];oe.push(F,K,Q),ue!=null&&(ue===0?(ne++,he.length<1&&he.push(se)):ue<255&&(W=!0))}if(W||ne>1){G=!0,he=void 0;var de=T*j;ae=new Uint8Array(de);for(var ve=new DataView(D.buffer),we=0;we<de;we++){var Ce=Y0(ve,we,X),Le=vb(B[Ce],4)[3];ae[we]=Le}}else ne===0&&(he=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:G?8:void 0,colorBytes:D,alphaBytes:ae,needSMask:G,palette:oe,mask:he}})(o):u===2||u===4?(function(M){for(var T=M.data,j=M.width,D=M.height,B=M.channels,X=M.depth,G=B===2?"DeviceGray":"DeviceRGB",oe=B-1,he=j*D,ae=oe,W=he*ae,ne=1*he,se=Math.ceil(W*X/8),$=Math.ceil(ne*X/8),F=new Uint8Array(se),K=new Uint8Array($),Q=new DataView(T.buffer),ue=new DataView(F.buffer),de=new DataView(K.buffer),ve=!1,we=0;we<he;we++){for(var Ce=we*B,Le=0;Le<ae;Le++)w5(ue,Y0(Q,Ce+Le,X),we*ae+Le,X);var be=Y0(Q,Ce+ae,X);be<(1<<X)-1&&(ve=!0),w5(de,be,1*we,X)}return{colorSpace:G,colorsPerPixel:oe,sMaskBitsPerComponent:ve?X:void 0,colorBytes:F,alphaBytes:K,needSMask:ve}})(o):(function(M){var T=M.data,j=M.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:j,colorsPerPixel:j==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?(function(D){for(var B=D.length,X=new Uint8Array(2*B),G=new DataView(X.buffer,X.byteOffset,X.byteLength),oe=0;oe<B;oe++)G.setUint16(2*oe,D[oe],!1);return X})(T):T,needSMask:!1}})(o);var d,v,p,y=i,x=y.colorSpace,w=y.colorsPerPixel,_=y.sMaskBitsPerComponent,E=y.colorBytes,I=y.alphaBytes,C=y.needSMask,N=y.palette,O=y.mask,U=null;return r!==It.API.image_compression.NONE&&typeof Ug=="function"?(U=(function(M){var T;switch(M){case It.API.image_compression.FAST:T=11;break;case It.API.image_compression.MEDIUM:T=13;break;case It.API.image_compression.SLOW:T=14;break;default:T=12}return T})(r),d=this.decode.FLATE_DECODE,v="/Predictor ".concat(U," /Colors ").concat(w," /BitsPerComponent ").concat(h," /Columns ").concat(s),n=v5(E,Math.ceil(s*w*h/8),w,h,r),C&&(p=v5(I,Math.ceil(s*_/8),1,_,r))):(d=void 0,v=void 0,n=E,C&&(p=I)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:e,data:n,index:t,filter:d,decodeParameters:v,transparency:O,palette:N,sMask:p,predictor:U,width:s,height:a,bitsPerComponent:h,sMaskBitsPerComponent:_,colorSpace:x}}},(function(n){n.processGIF89A=function(t,e,r,i){var o=new T7(t),s=o.width,a=o.height,u=[];o.decodeAndBlitFrameRGBA(0,u);var c={data:u,width:s,height:a},h=new J0(100).encode(c,100);return n.processJPEG.call(this,h,e,r,i)},n.processGIF87A=n.processGIF89A})(It.API),Ka.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:e,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ka.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(e){qn.log("bit decode error:"+e)}},Ka.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var u=this.palette[o>>7-a&1];this.data[s+4*a]=u.blue,this.data[s+4*a+1]=u.green,this.data[s+4*a+2]=u.red,this.data[s+4*a+3]=255}e!==0&&(this.pos+=4-e)}},Ka.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,u=15&o,c=this.palette[a];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[u],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},Ka.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},Ka.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,a=(o>>5&t)/t*255|0,u=(o>>10&t)/t*255|0,c=o>>15?255:0,h=r*this.width*4+4*i;this.data[h]=u,this.data[h+1]=a,this.data[h+2]=s,this.data[h+3]=c}this.pos+=n}},Ka.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,u=(s>>5&e)/e*255|0,c=(s>>11)/t*255|0,h=i*this.width*4+4*o;this.data[h]=c,this.data[h+1]=u,this.data[h+2]=a,this.data[h+3]=255}this.pos+=n}},Ka.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*e;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Ka.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},Ka.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(t,e,r,i){var o=new Ka(t,!1),s=o.width,a=o.height,u={data:o.getData(),width:s,height:a},c=new J0(100).encode(u,100);return n.processJPEG.call(this,c,e,r,i)}})(It.API),_5.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(t,e,r,i){var o=new _5(t),s=o.width,a=o.height,u={data:o.getData(),width:s,height:a},c=new J0(100).encode(u,100);return n.processJPEG.call(this,c,e,r,i)}})(It.API),It.API.processRGBA=function(n,t,e){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,u=0,c=0;c<i;c+=4){var h=r[c],d=r[c+1],v=r[c+2],p=r[c+3];o[a++]=h,o[a++]=d,o[a++]=v,s[u++]=p}var y=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:y,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},It.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Af=It.API,jp=Af.getCharWidthsArray=function(n,t){var e,r,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:i.metadata.Unicode.widths,u=a.fof?a.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,h=c.fof?c.fof:1,d=t.doKerning!==!1,v=0,p=n.length,y=0,x=a[0]||u,w=[];for(e=0;e<p;e++)r=n.charCodeAt(e),typeof i.metadata.widthOfString=="function"?w.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(v=d&&On(c[r])==="object"&&!isNaN(parseInt(c[r][y],10))?c[r][y]/h:0,w.push((a[r]||x)/u+v)),y=r;return w},h5=Af.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Af.processArabic&&(n=Af.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,e,i)/e:jp.apply(this,arguments).reduce(function(o,s){return o+s},0)},d5=function(n,t,e,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+t[o]<e;)a+=t[o],o++;i.push(n.slice(0,o));var u=o;for(a=0;o!==s;)a+t[o]>r&&(i.push(n.slice(u,o)),a=0,u=o),a+=t[o],o++;return u!==o&&i.push(n.slice(u,o)),i},p5=function(n,t,e){e||(e={});var r,i,o,s,a,u,c,h=[],d=[h],v=e.textIndent||0,p=0,y=0,x=n.split(" "),w=jp.apply(this,[" ",e])[0];if(u=e.lineIndent===-1?x[0].length+2:e.lineIndent||0){var _=Array(u).join(" "),E=[];x.map(function(C){(C=C.split(/\s*\n/)).length>1?E=E.concat(C.map(function(N,O){return(O&&N.length?`
`:"")+N})):E.push(C[0])}),x=E,u=h5.apply(this,[_,e])}for(o=0,s=x.length;o<s;o++){var I=0;if(r=x[o],u&&r[0]==`
`&&(r=r.substr(1),I=1),v+p+(y=(i=jp.apply(this,[r,e])).reduce(function(C,N){return C+N},0))>t||I){if(y>t){for(a=d5.apply(this,[r,i,t-(v+p),t]),h.push(a.shift()),h=[a.pop()];a.length;)d.push([a.shift()]);y=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(C,N){return C+N},0)}else h=[r];d.push(h),v=y+u,p=w}else h.push(r),v+=p+y,p=w}return c=u?function(C,N){return(N?_:"")+C.join(" ")}:function(C){return C.join(" ")},d.map(c)},Af.splitTextToSize=function(n,t,e){var r,i=(e=e||{}).fontSize||this.internal.getFontSize(),o=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var d=this.internal.getFont(h.fontName,h.fontStyle),v="Unicode";return d.metadata[v]?{widths:d.metadata[v].widths||{0:1},kerning:d.metadata[v].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/i;o.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=e.lineIndent;var a,u,c=[];for(a=0,u=r.length;a<u;a++)c=c.concat(p5.apply(this,[r[a],s,o]));return c},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="0123456789abcdef",e="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[e[o]]=t[o],i[t[o]]=e[o];var s=function(v){return"0x"+parseInt(v,10).toString(16)},a=n.__fontmetrics__.compress=function(v){var p,y,x,w,_=["{"];for(var E in v){if(p=v[E],isNaN(parseInt(E,10))?y="'"+E+"'":(E=parseInt(E,10),y=(y=s(E).slice(2)).slice(0,-1)+i[y.slice(-1)]),typeof p=="number")p<0?(x=s(p).slice(3),w="-"):(x=s(p).slice(2),w=""),x=w+x.slice(0,-1)+i[x.slice(-1)];else{if(On(p)!=="object")throw new Error("Don't know what to do with value type "+On(p)+".");x=a(p)}_.push(y+x)}return _.push("}"),_.join("")},u=n.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,y,x,w,_={},E=1,I=_,C=[],N="",O="",U=v.length-1,M=1;M<U;M+=1)(w=v[M])=="'"?p?(x=p.join(""),p=void 0):p=[]:p?p.push(w):w=="{"?(C.push([I,x]),I={},x=void 0):w=="}"?((y=C.pop())[0][y[1]]=I,x=void 0,I=y[0]):w=="-"?E=-1:x===void 0?r.hasOwnProperty(w)?(N+=r[w],x=parseInt(N,16)*E,E=1,N=""):N+=w:r.hasOwnProperty(w)?(O+=r[w],I[x]=parseInt(O,16)*E,E=1,x=void 0,O=""):O+=w;return _},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(v){var p=v.font,y=d.Unicode[p.postScriptName];y&&(p.metadata.Unicode={},p.metadata.Unicode.widths=y.widths,p.metadata.Unicode.kerning=y.kerning);var x=h.Unicode[p.postScriptName];x&&(p.metadata.Unicode.encoding=x,p.encoding=x.codePages[0])}])})(It.API),(function(n){var t=function(e){for(var r=e.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=e.charCodeAt(o);return i};n.API.events.push(["addFont",function(e){var r=void 0,i=e.font,o=e.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(Hp(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(It),It.API.addSvgAsImage=function(n,t,e,r,i,o,s,a){if(isNaN(t)||isNaN(e))throw qn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw qn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=r,u.height=i;var c=u.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(Kt.canvg?Promise.resolve(Kt.canvg):P0(()=>import("./index.es-CFmUxgUV.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(c,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(h)}).then(function(){d.addImage(u.toDataURL("image/jpeg",1),t,e,r,i,s,a)})},It.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,e);return this},It.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),u=[],c=0,h=0,d=0;function v(y,x){var w,_=!1;for(w=0;w<y.length;w+=1)y[w]===x&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var p=a.length;for(d=0;d<p;d+=1)e[a[d]].value=e[a[d]].defaultValue,e[a[d]].explicitSet=!1}if(On(n)==="object"){for(i in n)if(o=n[i],v(a,i)&&o!==void 0){if(e[i].type==="boolean"&&typeof o=="boolean")e[i].value=o;else if(e[i].type==="name"&&v(e[i].valueSet,o))e[i].value=o;else if(e[i].type==="integer"&&Number.isInteger(o))e[i].value=o;else if(e[i].type==="array"){for(c=0;c<o.length;c+=1)if(r=!0,o[c].length===1&&typeof o[c][0]=="number")u.push(String(o[c]-1));else if(o[c].length>1){for(h=0;h<o[c].length;h+=1)typeof o[c][h]!="number"&&(r=!1);r===!0&&u.push([o[c][0]-1,o[c][1]-1].join(" "))}e[i].value="["+u.join(" ")+"]"}else e[i].value=e[i].defaultValue;e[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,x=[];for(y in e)e[y].explicitSet===!0&&(e[y].type==="name"?x.push("/"+y+" /"+e[y].value):x.push("/"+y+" "+e[y].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},(function(n){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+s.length+a.length+i.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+u),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}})(It.API),(function(n){var t=n.API,e=t.pdfEscape16=function(o,s){for(var a,u=s.metadata.Unicode.widths,c=["","0","00","000","0000"],h=[""],d=0,v=o.length;d<v;++d){if(a=s.metadata.characterToGlyph(o.charCodeAt(d)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(d),u.indexOf(a)==-1&&(u.push(a),u.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(c[4-a.length],a)}return h.join("")},r=function(o){var s,a,u,c,h,d,v;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],d=0,v=(a=Object.keys(o).sort(function(p,y){return p-y})).length;d<v;d++)s=a[d],u.length>=100&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(c=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),u.push("<"+s+"><"+c+">"));return u.length&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(s){var a=s.font,u=s.out,c=s.newObject,h=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",y=0;y<v.length;y++)p+=String.fromCharCode(v[y]);var x=c();h({data:p,addLength1:!0,objectId:x}),u("endobj");var w=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),u("endobj");var _=c();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Rf(a.fontName)),u("/FontFile2 "+x+" 0 R"),u("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),u("/Flags "+a.metadata.flags),u("/StemV "+a.metadata.stemV),u("/ItalicAngle "+a.metadata.italicAngle),u("/Ascent "+a.metadata.ascender),u("/Descent "+a.metadata.decender),u("/CapHeight "+a.metadata.capHeight),u(">>"),u("endobj");var E=c();u("<<"),u("/Type /Font"),u("/BaseFont /"+Rf(a.fontName)),u("/FontDescriptor "+_+" 0 R"),u("/W "+n.API.PDFObject.convert(d)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+a.encoding+")"),u(">>"),u(">>"),u("endobj"),a.objectNumber=c(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+w+" 0 R"),u("/BaseFont /"+Rf(a.fontName)),u("/Encoding /"+a.encoding),u("/DescendantFonts ["+E+" 0 R]"),u(">>"),u("endobj"),a.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(s){var a=s.font,u=s.out,c=s.newObject,h=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,v="",p=0;p<d.length;p++)v+=String.fromCharCode(d[p]);var y=c();h({data:v,addLength1:!0,objectId:y}),u("endobj");var x=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:x}),u("endobj");var w=c();u("<<"),u("/Descent "+a.metadata.decender),u("/CapHeight "+a.metadata.capHeight),u("/StemV "+a.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+y+" 0 R"),u("/Flags 96"),u("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),u("/FontName /"+Rf(a.fontName)),u("/ItalicAngle "+a.metadata.italicAngle),u("/Ascent "+a.metadata.ascender),u(">>"),u("endobj"),a.objectNumber=c();for(var _=0;_<a.metadata.hmtx.widths.length;_++)a.metadata.hmtx.widths[_]=parseInt(a.metadata.hmtx.widths[_]*(1e3/a.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Rf(a.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),u("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",u=o.x,c=o.y,h=o.options||{},d=o.mutex||{},v=d.pdfEscape,p=d.activeFontKey,y=d.fonts,x=p,w="",_=0,E="",I=y[x].encoding;if(y[x].encoding!=="Identity-H")return{text:a,x:u,y:c,options:h,mutex:d};for(E=a,x=p,Array.isArray(a)&&(E=a[0]),_=0;_<E.length;_+=1)y[x].metadata.hasOwnProperty("cmap")&&(s=y[x].metadata.cmap.unicode.codeMap[E[_].charCodeAt(0)]),s||E[_].charCodeAt(0)<256&&y[x].metadata.hasOwnProperty("Unicode")?w+=E[_]:w+="";var C="";return parseInt(x.slice(1))<14||I==="WinAnsiEncoding"?C=v(w,x).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(C=e(w,y[x])),d.isHex=!0,{text:C,x:u,y:c,options:h,mutex:d}};t.events.push(["postProcessText",function(o){var s=o.text||"",a=[],u={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?a.push([i(Object.assign({},u,{text:s[c][0]})).text,s[c][1],s[c][2]]):a.push(i(Object.assign({},u,{text:s[c]})).text);o.text=a}else o.text=i(Object.assign({},u,{text:s})).text}])})(It),(function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,r){return t.call(this),this.internal.vFS[e]=r,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}})(It.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,u,c,h,d=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,I=0;this.__bidiEngine__={};var C=function(D){var B=D.charCodeAt(),X=B>>8,G=x[X];return G!==void 0?d[256*G+(255&B)]:X===252||X===253?"AL":_.test(X)?"L":X===8?"R":"N"},N=function(D){for(var B,X=0;X<D.length;X++){if((B=C(D.charAt(X)))==="L")return!1;if(B==="R")return!0}return!1},O=function(D,B,X,G){var oe,he,ae,W,ne=B[G];switch(ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(ne="AN");break;case"AL":E=!0,ne="R";break;case"WS":case"BN":ne="N";break;case"CS":G<1||G+1>=B.length||(oe=X[G-1])!=="EN"&&oe!=="AN"||(he=B[G+1])!=="EN"&&he!=="AN"?ne="N":E&&(he="AN"),ne=he===oe?he:"N";break;case"ES":ne=(oe=G>0?X[G-1]:"B")==="EN"&&G+1<B.length&&B[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&X[G-1]==="EN"){ne="EN";break}if(E){ne="N";break}for(ae=G+1,W=B.length;ae<W&&B[ae]==="ET";)ae++;ne=ae<W&&B[ae]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(W=B.length,ae=G+1;ae<W&&B[ae]==="NSM";)ae++;if(ae<W){var se=D[G],$=se>=1425&&se<=2303||se===64286;if(oe=B[ae],$&&(oe==="R"||oe==="AL")){ne="R";break}}}ne=G<1||(oe=B[G-1])==="B"?"N":X[G-1];break;case"B":E=!1,i=!0,ne=I;break;case"S":o=!0,ne="N"}return ne},U=function(D,B,X){var G=D.split("");return X&&M(G,X,{hiLevel:I}),G.reverse(),B&&B.reverse(),G.join("")},M=function(D,B,X){var G,oe,he,ae,W,ne=-1,se=D.length,$=0,F=[],K=I?p:v,Q=[];for(E=!1,i=!1,o=!1,oe=0;oe<se;oe++)Q[oe]=C(D[oe]);for(he=0;he<se;he++){if(W=$,F[he]=O(D,Q,F,he),G=240&($=K[W][y[F[he]]]),$&=15,B[he]=ae=K[$][5],G>0)if(G===16){for(oe=ne;oe<he;oe++)B[oe]=1;ne=-1}else ne=-1;if(K[$][6])ne===-1&&(ne=he);else if(ne>-1){for(oe=ne;oe<he;oe++)B[oe]=ae;ne=-1}Q[he]==="B"&&(B[he]=0),X.hiLevel|=ae}o&&(function(ue,de,ve){for(var we=0;we<ve;we++)if(ue[we]==="S"){de[we]=I;for(var Ce=we-1;Ce>=0&&ue[Ce]==="WS";Ce--)de[Ce]=I}})(Q,B,se)},T=function(D,B,X,G,oe){if(!(oe.hiLevel<D)){if(D===1&&I===1&&!i)return B.reverse(),void(X&&X.reverse());for(var he,ae,W,ne,se=B.length,$=0;$<se;){if(G[$]>=D){for(W=$+1;W<se&&G[W]>=D;)W++;for(ne=$,ae=W-1;ne<ae;ne++,ae--)he=B[ne],B[ne]=B[ae],B[ae]=he,X&&(he=X[ne],X[ne]=X[ae],X[ae]=he);$=W}$++}}},j=function(D,B,X){var G=D.split(""),oe={hiLevel:I};return X||(X=[]),M(G,X,oe),(function(he,ae,W){if(W.hiLevel!==0&&h)for(var ne,se=0;se<he.length;se++)ae[se]===1&&(ne=w.indexOf(he[se]))>=0&&(he[se]=w[ne+1])})(G,X,oe),T(2,G,B,X,oe),T(1,G,B,X,oe),G.join("")};return this.__bidiEngine__.doBidiReorder=function(D,B,X){if((function(oe,he){if(he)for(var ae=0;ae<oe.length;ae++)he[ae]=ae;a===void 0&&(a=N(oe)),c===void 0&&(c=N(oe))})(D,B),s||!u||c)if(s&&u&&a^c)I=a?1:0,D=U(D,B,X);else if(!s&&u&&c)I=a?1:0,D=j(D,B,X),D=U(D,B);else if(!s||a||u||c){if(s&&!u&&a^c)D=U(D,B),a?(I=0,D=j(D,B,X)):(I=1,D=j(D,B,X),D=U(D,B));else if(s&&a&&!u&&c)I=1,D=j(D,B,X),D=U(D,B);else if(!s&&!u&&a^c){var G=h;a?(I=1,D=j(D,B,X),I=0,h=!1,D=j(D,B,X),h=G):(I=0,D=j(D,B,X),D=U(D,B),I=1,h=!1,D=j(D,B,X),h=G,D=U(D,B))}}else I=0,D=j(D,B,X);else I=a?1:0,D=j(D,B,X);return D},this.__bidiEngine__.setOptions=function(D){D&&(s=D.isInputVisual,u=D.isOutputVisual,a=D.isInputRtl,c=D.isOutputRtl,h=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,e.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([e.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([e.doBidiReorder(i[a])]);r.text=s}else r.text=e.doBidiReorder(i);e.setOptions({isInputVisual:!0})}])})(It),It.API.TTFFont=(function(){function n(t){var e;if(this.rawData=t,e=this.contents=new Ml(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new $7(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new L7(this.contents),this.head=new F7(this),this.name=new U7(this),this.cmap=new fC(this),this.toUnicode={},this.hhea=new M7(this),this.maxp=new z7(this),this.hmtx=new V7(this),this.post=new B7(this),this.os2=new O7(this),this.loca=new G7(this),this.glyf=new W7(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,u,c;for(c=[],s=0,a=(u=this.bbox).length;s<a;s++)t=u[s],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,r){var i,o,s,a;for(s=0,o=0,a=(t=""+t).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=t.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/e)||0;return s*(e/1e3)},n.prototype.lineHeight=function(t,e){var r;return e==null&&(e=!1),r=e?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},n})();var is,Ml=(function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,r;for(r=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)r[e]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(t){var e,r,i;for(i=[],e=0,r=t.length;0<=r?e<r:e>r;e=0<=r?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,r,i,o,s,a,u;return t=this.readByte(),e=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),u=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^u)+1):72057594037927940*t+281474976710656*e+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+u},n.prototype.writeLongLong=function(t){var e,r;return e=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,r;for(e=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)e.push(this.readByte());return e},n.prototype.write=function(t){var e,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)e=t[r],o.push(this.writeByte(e));return o},n})(),L7=(function(){var n;function t(e){var r,i,o;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(e){var r,i,o,s,a,u,c,h,d,v,p,y,x;for(x in p=Object.keys(e).length,u=Math.log(2),d=16*Math.floor(Math.log(p)/u),s=Math.floor(d/u),h=16*p-d,(i=new Ml).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(s),i.writeShort(h),o=16*p,c=i.pos+o,a=null,y=[],e)for(v=e[x],i.writeString(x),i.writeInt(n(v)),i.writeInt(c),i.writeInt(v.length),y=y.concat(v),x==="head"&&(a=c),c+=v.length;c%4;)y.push(0),c++;return i.write(y),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(e){var r,i,o,s;for(e=hC.call(e);e.length%4;)e.push(0);for(o=new Ml(e),i=0,r=0,s=e.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},t})(),D7={}.hasOwnProperty,qs=function(n,t){for(var e in t)D7.call(t,e)&&(n[e]=t[e]);function r(){this.constructor=n}return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};is=(function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var F7=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qs(n,is),n.prototype.tag="head",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},n.prototype.encode=function(t){var e;return(e=new Ml).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},n})(),S5=(function(){function n(t,e){var r,i,o,s,a,u,c,h,d,v,p,y,x,w,_,E,I;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=t.readByte();break;case 4:for(p=t.readUInt16(),v=p/2,t.pos+=6,o=(function(){var C,N;for(N=[],u=C=0;0<=v?C<v:C>v;u=0<=v?++C:--C)N.push(t.readUInt16());return N})(),t.pos+=2,x=(function(){var C,N;for(N=[],u=C=0;0<=v?C<v:C>v;u=0<=v?++C:--C)N.push(t.readUInt16());return N})(),c=(function(){var C,N;for(N=[],u=C=0;0<=v?C<v:C>v;u=0<=v?++C:--C)N.push(t.readUInt16());return N})(),h=(function(){var C,N;for(N=[],u=C=0;0<=v?C<v:C>v;u=0<=v?++C:--C)N.push(t.readUInt16());return N})(),i=(this.length-t.pos+this.offset)/2,a=(function(){var C,N;for(N=[],u=C=0;0<=i?C<i:C>i;u=0<=i?++C:--C)N.push(t.readUInt16());return N})(),u=_=0,I=o.length;_<I;u=++_)for(w=o[u],r=E=y=x[u];y<=w?E<=w:E>=w;r=y<=w?++E:--E)h[u]===0?s=r+c[u]:(s=a[h[u]/2+(r-y)-(v-u)]||0)!==0&&(s+=c[u]),this.codeMap[r]=65535&s}t.pos=d}return n.encode=function(t,e){var r,i,o,s,a,u,c,h,d,v,p,y,x,w,_,E,I,C,N,O,U,M,T,j,D,B,X,G,oe,he,ae,W,ne,se,$,F,K,Q,ue,de,ve,we,Ce,Le,be,De;switch(G=new Ml,s=Object.keys(t).sort(function(Re,Xe){return Re-Xe}),e){case"macroman":for(x=0,w=(function(){var Re=[];for(y=0;y<256;++y)Re.push(0);return Re})(),E={0:0},o={},oe=0,ne=s.length;oe<ne;oe++)E[Ce=t[i=s[oe]]]==null&&(E[Ce]=++x),o[i]={old:t[i],new:E[t[i]]},w[i]=E[t[i]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(w),{charMap:o,subtable:G.data,maxGlyphID:x+1};case"unicode":for(B=[],d=[],I=0,E={},r={},_=c=null,he=0,se=s.length;he<se;he++)E[N=t[i=s[he]]]==null&&(E[N]=++I),r[i]={old:N,new:E[N]},a=E[N]-i,_!=null&&a===c||(_&&d.push(_),B.push(i),c=a),_=i;for(_&&d.push(_),d.push(65535),B.push(65535),j=2*(T=B.length),M=2*Math.pow(Math.log(T)/Math.LN2,2),v=Math.log(M/2)/Math.LN2,U=2*T-M,u=[],O=[],p=[],y=ae=0,$=B.length;ae<$;y=++ae){if(D=B[y],h=d[y],D===65535){u.push(0),O.push(0);break}if(D-(X=r[D].new)>=32768)for(u.push(0),O.push(2*(p.length+T-y)),i=W=D;D<=h?W<=h:W>=h;i=D<=h?++W:--W)p.push(r[i].new);else u.push(X-D),O.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*T+2*p.length),G.writeUInt16(0),G.writeUInt16(j),G.writeUInt16(M),G.writeUInt16(v),G.writeUInt16(U),ve=0,F=d.length;ve<F;ve++)i=d[ve],G.writeUInt16(i);for(G.writeUInt16(0),we=0,K=B.length;we<K;we++)i=B[we],G.writeUInt16(i);for(Le=0,Q=u.length;Le<Q;Le++)a=u[Le],G.writeUInt16(a);for(be=0,ue=O.length;be<ue;be++)C=O[be],G.writeUInt16(C);for(De=0,de=p.length;De<de;De++)x=p[De],G.writeUInt16(x);return{charMap:r,subtable:G.data,maxGlyphID:I+1}}},n})(),fC=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qs(n,is),n.prototype.tag="cmap",n.prototype.parse=function(t){var e,r,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)e=new S5(t,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},n.encode=function(t,e){var r,i;return e==null&&(e="macroman"),r=S5.encode(t,e),(i=new Ml).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),M7=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qs(n,is),n.prototype.tag="hhea",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},n})(),O7=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qs(n,is),n.prototype.tag="OS/2",n.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var e,r;for(r=[],e=0;e<10;++e)r.push(t.readByte());return r})(),this.charRange=(function(){var e,r;for(r=[],e=0;e<4;++e)r.push(t.readInt());return r})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var e,r;for(r=[],e=0;e<2;e=++e)r.push(t.readInt());return r})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},n})(),B7=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qs(n,is),n.prototype.tag="post",n.prototype.parse=function(t){var e,r,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=(function(){var s,a,u;for(u=[],o=s=0,a=this.file.maxp.numGlyphs;0<=a?s<a:s>a;o=0<=a?++s:--s)u.push(t.readUInt32());return u}).call(this)}},n})(),j7=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},U7=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qs(n,is),n.prototype.tag="name",n.prototype.parse=function(t){var e,r,i,o,s,a,u,c,h,d,v;for(t.pos=this.offset,t.readShort(),e=t.readShort(),a=t.readShort(),r=[],o=0;0<=e?o<e:o>e;o=0<=e?++o:--o)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(u={},o=h=0,d=r.length;h<d;o=++h)i=r[o],t.pos=i.offset,c=t.readString(i.length),s=new j7(c,i),u[v=i.nameID]==null&&(u[v]=[]),u[i.nameID].push(s);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},n})(),z7=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qs(n,is),n.prototype.tag="maxp",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},n})(),V7=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qs(n,is),n.prototype.tag="hmtx",n.prototype.parse=function(t){var e,r,i,o,s,a,u;for(t.pos=this.offset,this.metrics=[],e=0,a=this.file.hhea.numberOfMetrics;0<=a?e<a:e>a;e=0<=a?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var c,h;for(h=[],e=c=0;0<=i?c<i:c>i;e=0<=i?++c:--c)h.push(t.readInt16());return h})(),this.widths=(function(){var c,h,d,v;for(v=[],c=0,h=(d=this.metrics).length;c<h;c++)o=d[c],v.push(o.advance);return v}).call(this),r=this.widths[this.widths.length-1],u=[],e=s=0;0<=i?s<i:s>i;e=0<=i?++s:--s)u.push(this.widths.push(r));return u},n.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},n})(),hC=[].slice,W7=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qs(n,is),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(t){var e,r,i,o,s,a,u,c,h,d;return t in this.cache?this.cache[t]:(o=this.file.loca,e=this.file.contents,r=o.indexOf(t),(i=o.lengthOf(t))===0?this.cache[t]=null:(e.pos=this.offset+r,s=(a=new Ml(e.read(i))).readShort(),c=a.readShort(),d=a.readShort(),u=a.readShort(),h=a.readShort(),this.cache[t]=s===-1?new H7(a,c,d,u,h):new q7(a,s,c,d,u,h),this.cache[t]))},n.prototype.encode=function(t,e,r){var i,o,s,a,u;for(s=[],o=[],a=0,u=e.length;a<u;a++)i=t[e[a]],o.push(s.length),i&&(s=s.concat(i.encode(r)));return o.push(s.length),{table:s,offsets:o}},n})(),q7=(function(){function n(t,e,r,i,o,s){this.raw=t,this.numberOfContours=e,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),H7=(function(){function n(t,e,r,i,o){var s,a;for(this.raw=t,this.xMin=e,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var t,e,r;for(e=new Ml(hC.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)e.pos=this.glyphOffsets[t];return e.data},n})(),G7=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return qs(n,is),n.prototype.tag="loca",n.prototype.parse=function(t){var e,r;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(t.readUInt32());return o}).call(this)},n.prototype.indexOf=function(t){return this.offsets[t]},n.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},n.prototype.encode=function(t,e){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<r.length;++s)if(r[s]=i,o<e.length&&e[o]==s){++o,r[s]=i;var a=this.offsets[s],u=this.offsets[s+1]-a;u>0&&(i+=u)}for(var c=new Array(4*r.length),h=0;h<r.length;++h)c[4*h+3]=255&r[h],c[4*h+2]=(65280&r[h])>>8,c[4*h+1]=(16711680&r[h])>>16,c[4*h]=(4278190080&r[h])>>24;return c},n})(),$7=(function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,r,i,o;for(e in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)r=o[e],t[e]=i[r];return t},n.prototype.glyphsFor=function(t){var e,r,i,o,s,a,u;for(i={},s=0,a=t.length;s<a;s++)i[o=t[s]]=this.font.glyf.glyphFor(o);for(o in e=[],i)(r=i[o])!=null&&r.compound&&e.push.apply(e,r.glyphIDs);if(e.length>0)for(o in u=this.glyphsFor(e))r=u[o],i[o]=r;return i},n.prototype.encode=function(t,e){var r,i,o,s,a,u,c,h,d,v,p,y,x,w,_;for(i in r=fC.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),p={0:0},_=r.charMap)p[(u=_[i]).old]=u.new;for(y in v=r.maxGlyphID,s)y in p||(p[y]=v++);return h=(function(E){var I,C;for(I in C={},E)C[E[I]]=I;return C})(p),d=Object.keys(h).sort(function(E,I){return E-I}),x=(function(){var E,I,C;for(C=[],E=0,I=d.length;E<I;E++)a=d[E],C.push(h[a]);return C})(),o=this.font.glyf.encode(s,x,p),c=this.font.loca.encode(o.offsets,x),w={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},n})();It.API.PDFObject=(function(){var n;function t(){}return n=function(e,r){return(Array(r+1).join("0")+e).slice(-r)},t.convert=function(e){var r,i,o,s;if(Array.isArray(e))return"["+(function(){var a,u,c;for(c=[],a=0,u=e.length;a<u;a++)r=e[a],c.push(t.convert(r));return c})().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(i in o=["<<"],e)s=e[i],o.push("/"+i+" "+t.convert(s));return o.push(">>"),o.join(`
`)}return""+e},t})();const K7=()=>{const{incidentLog:n,addIncident:t,deleteIncident:e,setActiveMode:r,playSound:i,speak:o}=Us(),[s,a]=qe.useState({title:"",location:"",details:"",severity:"Low"}),[u,c]=qe.useState(null),h=y=>{const x=y.toLowerCase();let w=[];(x.includes("fight")||x.includes("brawl"))&&w.push(" Increase security presence in sector."),(x.includes("weapon")||x.includes("gun")||x.includes("knife"))&&w.push(" CRITICAL: Contact Police immediately. Lockdown perimeter."),(x.includes("iron")||x.includes("knuckle"))&&w.push(" MANDATORY: Metal detector wands at entry."),(x.includes("drug")||x.includes("pill"))&&w.push(" Search bathrooms and VIP areas."),(x.includes("overcrowd")||x.includes("full"))&&w.push(" Halt entry. Check fire exits."),w.length>0?(c(w),x.includes("weapon")&&o("High alert. Weapon protocol suggested.")):c(null)},d=y=>{a({...s,details:y.target.value}),h(y.target.value)},v=()=>{s.title&&(t(s),a({title:"",location:"",details:"",severity:"Low"}),c(null))},p=y=>{const x=new It;x.setFillColor(0,0,0),x.rect(0,0,210,40,"F"),x.setTextColor(0,229,255),x.setFont("helvetica","bold"),x.setFontSize(22),x.text("T-FORCE SECURITY SITREP",15,20),x.setFontSize(10),x.text("INTERNAL CLASSIFIED REPORT",15,30),x.setTextColor(0,0,0),x.setFontSize(14),x.text(`INCIDENT: ${y.title}`,15,60),x.setFontSize(12),x.text(`DATE: ${y.date}`,15,70),x.text(`LOCATION: ${y.location}`,15,80),x.text(`SEVERITY: ${y.severity.toUpperCase()}`,15,90),x.line(15,95,195,95),x.setFont("helvetica","normal"),x.text("DETAILS:",15,110);const w=x.splitTextToSize(y.details,180);x.text(w,15,120),x.setTextColor(150),x.setFontSize(10),x.text("Generated by JARVIS Operational Unit",15,280),x.save(`T-Force_Report_${y.id}.pdf`),o("Report compiled and downloaded.")};return fe.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-xl flex flex-col animate-slide-up",children:[fe.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-cyan/30",children:[fe.jsxs("div",{className:"flex items-center gap-3",children:[fe.jsx("i",{className:"fas fa-file-alt text-cyan text-xl animate-pulse"}),fe.jsx("h2",{className:"text-cyan font-orbitron text-xl tracking-widest",children:"INCIDENT LOG"})]}),fe.jsx("button",{onClick:()=>{i("click"),r("HOME")},className:"text-cyan hover:text-white",children:fe.jsx("i",{className:"fas fa-times text-2xl"})})]}),fe.jsxs("div",{className:"flex-1 overflow-y-auto p-6 no-scrollbar",children:[fe.jsxs("div",{className:"bg-cyan/5 border border-cyan/30 p-4 rounded mb-6",children:[fe.jsxs("div",{className:"mb-4",children:[fe.jsx("label",{className:"text-cyan-dim text-xs font-mono",children:"INCIDENT TYPE"}),fe.jsx("input",{type:"text",value:s.title,onChange:y=>a({...s,title:y.target.value}),className:"w-full bg-black border border-cyan/30 p-2 text-cyan outline-none focus:border-cyan",placeholder:"E.g., Fight at Bar"})]}),fe.jsxs("div",{className:"flex gap-4 mb-4",children:[fe.jsxs("div",{className:"flex-1",children:[fe.jsx("label",{className:"text-cyan-dim text-xs font-mono",children:"LOCATION"}),fe.jsx("input",{type:"text",value:s.location,onChange:y=>a({...s,location:y.target.value}),className:"w-full bg-black border border-cyan/30 p-2 text-cyan outline-none",placeholder:"Mykonos Club"})]}),fe.jsxs("div",{children:[fe.jsx("label",{className:"text-cyan-dim text-xs font-mono",children:"SEVERITY"}),fe.jsxs("select",{value:s.severity,onChange:y=>a({...s,severity:y.target.value}),className:"w-full bg-black border border-cyan/30 p-2 text-cyan outline-none",children:[fe.jsx("option",{children:"Low"}),fe.jsx("option",{children:"Medium"}),fe.jsx("option",{children:"High"}),fe.jsx("option",{children:"Critical"})]})]})]}),fe.jsxs("div",{className:"mb-4",children:[fe.jsx("label",{className:"text-cyan-dim text-xs font-mono",children:"DETAILS"}),fe.jsx("textarea",{value:s.details,onChange:d,rows:"4",className:"w-full bg-black border border-cyan/30 p-2 text-cyan outline-none",placeholder:"Describe the situation..."})]}),u&&fe.jsxs("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-500/50 rounded",children:[fe.jsx("div",{className:"text-red-500 font-orbitron text-xs mb-2",children:" TACTICAL ANALYSIS:"}),u.map((y,x)=>fe.jsx("div",{className:"text-red-300 text-xs font-mono",children:y},x))]}),fe.jsx("button",{onClick:v,className:"w-full py-3 bg-cyan/20 border border-cyan text-cyan font-orbitron tracking-widest hover:bg-cyan/40",children:"LOG INCIDENT"})]}),fe.jsx("div",{className:"space-y-4",children:n.map(y=>fe.jsxs("div",{className:"border border-white/10 p-4 rounded bg-white/5 flex justify-between items-start",children:[fe.jsxs("div",{children:[fe.jsx("div",{className:"text-cyan font-bold font-orbitron",children:y.title}),fe.jsxs("div",{className:"text-xs text-gray-400 font-mono mb-2",children:[y.date," | ",y.location]}),fe.jsx("div",{className:"text-sm text-gray-300",children:y.details}),fe.jsxs("div",{className:`mt-2 text-xs font-bold ${y.severity==="Critical"?"text-red-500":"text-cyan-dim"}`,children:["LEVEL: ",y.severity.toUpperCase()]})]}),fe.jsxs("div",{className:"flex flex-col gap-2",children:[fe.jsx("button",{onClick:()=>p(y),className:"p-2 border border-cyan/30 text-cyan rounded hover:bg-cyan/10",title:"Download PDF",children:fe.jsx("i",{className:"fas fa-file-pdf"})}),fe.jsx("button",{onClick:()=>e(y.id),className:"p-2 border border-red-500/30 text-red-500 rounded hover:bg-red-500/10",title:"Delete",children:fe.jsx("i",{className:"fas fa-trash"})})]})]},y.id))})]})]})},X7=()=>{const{leadsLog:n,addLead:t,updateLeadStatus:e,deleteLead:r,setActiveMode:i,playSound:o,speak:s}=Us(),[a,u]=qe.useState({name:"",location:"",type:"Factory"}),c=v=>{o("click"),s(`Initiating reconnaissance for ${v}.`),window.open(`https://www.google.com/maps/search/${v}+near+me`,"_blank")},h=()=>{a.name&&(t(a),u({name:"",location:"",type:"Factory"}))},d=v=>v==="Potential"?"text-gray-400 border-gray-500":v==="Contacted"?"text-orange-400 border-orange-500":v==="Contracted"?"text-green-400 border-green-500":"text-red-400 border-red-500";return fe.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-xl flex flex-col animate-slide-up",children:[fe.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-cyan/30",children:[fe.jsxs("div",{className:"flex items-center gap-3",children:[fe.jsx("i",{className:"fas fa-satellite-dish text-cyan text-xl animate-pulse"}),fe.jsx("h2",{className:"text-cyan font-orbitron text-xl tracking-widest",children:"RECON / SALES"})]}),fe.jsx("button",{onClick:()=>{o("click"),i("HOME")},className:"text-cyan hover:text-white",children:fe.jsx("i",{className:"fas fa-times text-2xl"})})]}),fe.jsxs("div",{className:"flex-1 overflow-y-auto p-6 no-scrollbar",children:[fe.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[fe.jsxs("button",{onClick:()=>c("Factories"),className:"p-4 border border-cyan/30 rounded bg-cyan/5 text-cyan hover:bg-cyan/20",children:[fe.jsx("i",{className:"fas fa-industry text-2xl mb-2"}),fe.jsx("div",{className:"font-orbitron text-xs",children:"FIND FACTORIES"})]}),fe.jsxs("button",{onClick:()=>c("Hotels"),className:"p-4 border border-cyan/30 rounded bg-cyan/5 text-cyan hover:bg-cyan/20",children:[fe.jsx("i",{className:"fas fa-hotel text-2xl mb-2"}),fe.jsx("div",{className:"font-orbitron text-xs",children:"FIND HOTELS"})]})]}),fe.jsxs("div",{className:"mb-6 border-t border-cyan/10 pt-4",children:[fe.jsx("div",{className:"text-cyan-dim font-mono text-xs mb-2",children:"MANUAL LEAD ENTRY"}),fe.jsxs("div",{className:"flex flex-col gap-3",children:[fe.jsx("input",{type:"text",value:a.name,onChange:v=>u({...a,name:v.target.value}),className:"bg-black border border-cyan/30 p-2 text-cyan outline-none",placeholder:"Business Name"}),fe.jsx("input",{type:"text",value:a.location,onChange:v=>u({...a,location:v.target.value}),className:"bg-black border border-cyan/30 p-2 text-cyan outline-none",placeholder:"Location"}),fe.jsx("button",{onClick:h,className:"bg-cyan text-black font-bold py-2 rounded hover:bg-cyan/80",children:"ADD TARGET"})]})]}),fe.jsx("div",{className:"space-y-3",children:n.map(v=>fe.jsxs("div",{className:`border p-4 rounded flex justify-between items-center ${d(v.status)} bg-black`,children:[fe.jsxs("div",{children:[fe.jsx("div",{className:"font-bold font-orbitron",children:v.name}),fe.jsxs("div",{className:"text-xs opacity-70",children:[v.location," | ",v.dateAdded]})]}),fe.jsxs("div",{className:"flex flex-col items-end gap-2",children:[fe.jsxs("select",{value:v.status,onChange:p=>e(v.id,p.target.value),className:"bg-black border border-white/20 text-xs p-1 outline-none rounded text-white",children:[fe.jsx("option",{children:"Potential"}),fe.jsx("option",{children:"Contacted"}),fe.jsx("option",{children:"Meeting Set"}),fe.jsx("option",{children:"Contracted"}),fe.jsx("option",{children:"Dead Lead"})]}),fe.jsx("button",{onClick:()=>r(v.id),className:"text-xs text-red-500 hover:text-red-300",children:"REMOVE"})]})]},v.id))})]})]})},Y7=()=>{const{systemStatus:n,setSystemStatus:t,playSound:e,speak:r,user:i,battery:o,isListening:s,toggleListening:a,activeMode:u}=Us(),[c,h]=qe.useState(!1),[d,v]=qe.useState(!1),[p,y]=qe.useState(!1),x=()=>{e("startup"),h(!0),t("ONLINE"),setTimeout(()=>{r(`Welcome back, ${i.name}. System secure. Battery at ${o} percent.`)},1e3)};return c?fe.jsxs("div",{className:"relative w-screen h-screen bg-black overflow-hidden",children:[fe.jsx(rA,{}),u==="HOME"&&fe.jsx("div",{onClick:()=>{e("click"),y(!0)},className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48 rounded-full z-10 cursor-pointer"}),fe.jsxs("div",{className:"absolute top-0 left-0 w-full p-4 flex justify-between items-start z-20 pointer-events-none",children:[fe.jsxs("div",{className:"text-cyan-dim font-mono text-xs",children:[fe.jsx("div",{className:"border-b border-cyan w-20 mb-1",children:"T-FORCE"}),fe.jsxs("div",{children:["OP: ",i.name.toUpperCase()]}),fe.jsxs("div",{children:["ACC: ",i.access.toUpperCase()]})]}),fe.jsxs("div",{className:"text-right",children:[fe.jsxs("div",{className:`text-xl font-orbitron font-bold ${o<20?"text-red-500":"text-cyan"}`,children:[o,"%"]}),fe.jsx("div",{className:"text-cyan-dim font-mono text-[10px]",children:"PWR LEVEL"})]})]}),u==="HOME"&&fe.jsx("div",{className:"absolute bottom-24 left-1/2 transform -translate-x-1/2 z-20",children:fe.jsx("button",{onClick:a,className:`w-16 h-16 rounded-full border border-cyan flex items-center justify-center transition-all duration-300 backdrop-blur-sm ${s?"bg-red-500/20 shadow-[0_0_30px_rgba(255,0,0,0.5)] border-red-500 scale-110":"bg-black/50 hover:bg-cyan/20 shadow-[0_0_15px_rgba(0,229,255,0.3)]"}`,children:fe.jsx("i",{className:`fas fa-microphone text-2xl ${s?"text-red-500 animate-pulse":"text-cyan"}`})})}),fe.jsxs("div",{className:"absolute bottom-8 w-full text-center z-20 pointer-events-none",children:[fe.jsx("div",{className:"text-cyan font-orbitron tracking-[4px] text-sm animate-pulse",children:n}),fe.jsx("div",{className:"text-cyan-dim text-[10px] mt-1 font-mono",children:u==="HOME"?s?"LISTENING...":"AWAITING COMMAND":u})]}),fe.jsx(TI,{isOpen:p,onClose:()=>y(!1),onOpenSettings:()=>{y(!1),v(!0)}}),d&&fe.jsx(iA,{onClose:()=>v(!1)}),u==="VISION"&&fe.jsx(eM,{}),u==="MEDIA"&&fe.jsx(tM,{}),u==="DATABASE"&&fe.jsx(nM,{}),u==="HUD"&&fe.jsx(rM,{}),u==="OPS"&&fe.jsx(K7,{}),"   ",u==="RECON"&&fe.jsx(X7,{})," "]}):fe.jsxs("div",{onClick:x,className:"w-screen h-screen bg-black flex flex-col items-center justify-center cursor-pointer select-none",children:[fe.jsx("div",{className:"text-cyan text-6xl animate-pulse mb-4",children:fe.jsx("i",{className:"fas fa-fingerprint"})}),fe.jsx("div",{className:"text-cyan font-orbitron font-bold text-xl tracking-widest",children:"INITIALIZE JARVIS"}),fe.jsx("div",{className:"text-cyan-dim font-mono text-xs mt-2",children:"TOUCH TO AUTHENTICATE"})]})};function J7(){return fe.jsx(nA,{children:fe.jsx(Y7,{})})}tA.createRoot(document.getElementById("root")).render(fe.jsx(qe.StrictMode,{children:fe.jsx(J7,{})}));export{On as _};
